(()=>{"use strict";var e={};(()=>{e.d=(t,r)=>{for(var i in r){if(e.o(r,i)&&!e.o(t,i)){Object.defineProperty(t,i,{enumerable:true,get:r[i]})}}}})();(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{e.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();if(typeof e!=="undefined")e.ab=__dirname+"/";var t={};e.r(t);e.d(t,{default:()=>U});const r=`-${Math.random().toString(36).substring(2,8)}`;const i=Object.freeze({updateQueue:`1.2${r}`,observable:`2.2${r}`,contextEvent:`3.2${r}`,elementRegistry:`4.2${r}`});let n;(function(e){e[e["needsArrayObservation"]=1101]="needsArrayObservation";e[e["onlySetDOMPolicyOnce"]=1201]="onlySetDOMPolicyOnce";e[e["bindingInnerHTMLRequiresTrustedTypes"]=1202]="bindingInnerHTMLRequiresTrustedTypes";e[e["twoWayBindingRequiresObservables"]=1203]="twoWayBindingRequiresObservables";e[e["hostBindingWithoutHost"]=1204]="hostBindingWithoutHost";e[e["unsupportedBindingBehavior"]=1205]="unsupportedBindingBehavior";e[e["directCallToHTMLTagNotAllowed"]=1206]="directCallToHTMLTagNotAllowed";e[e["onlySetTemplatePolicyOnce"]=1207]="onlySetTemplatePolicyOnce";e[e["cannotSetTemplatePolicyAfterCompilation"]=1208]="cannotSetTemplatePolicyAfterCompilation";e[e["blockedByDOMPolicy"]=1209]="blockedByDOMPolicy";e[e["missingElementDefinition"]=1401]="missingElementDefinition";e[e["noRegistrationForContext"]=1501]="noRegistrationForContext";e[e["noFactoryForResolver"]=1502]="noFactoryForResolver";e[e["invalidResolverStrategy"]=1503]="invalidResolverStrategy";e[e["cannotAutoregisterDependency"]=1504]="cannotAutoregisterDependency";e[e["cannotResolveKey"]=1505]="cannotResolveKey";e[e["cannotConstructNativeFunction"]=1506]="cannotConstructNativeFunction";e[e["cannotJITRegisterNonConstructor"]=1507]="cannotJITRegisterNonConstructor";e[e["cannotJITRegisterIntrinsic"]=1508]="cannotJITRegisterIntrinsic";e[e["cannotJITRegisterInterface"]=1509]="cannotJITRegisterInterface";e[e["invalidResolver"]=1510]="invalidResolver";e[e["invalidKey"]=1511]="invalidKey";e[e["noDefaultResolver"]=1512]="noDefaultResolver";e[e["cyclicDependency"]=1513]="cyclicDependency";e[e["connectUpdateRequiresController"]=1514]="connectUpdateRequiresController"})(n||(n={}));const isFunction=e=>typeof e==="function";const isString=e=>typeof e==="string";const noop=()=>void 0;const s={configurable:false,enumerable:false,writable:false};if(globalThis.FAST===void 0){Reflect.defineProperty(globalThis,"FAST",{value:Object.create(null),...s})}const o=globalThis.FAST;if(o.getById===void 0){const e=Object.create(null);Reflect.defineProperty(o,"getById",{value(t,r){let i=e[t];if(i===void 0){i=r?e[t]=r():null}return i},...s})}if(o.error===void 0){Object.assign(o,{warn(){},error(e){return new Error(`Error ${e}`)},addMessages(){}})}const a=Object.freeze([]);function createTypeRegistry(){const e=new Map;return Object.freeze({register(t){if(e.has(t.type)){return false}e.set(t.type,t);return true},getByType(t){return e.get(t)},getForInstance(t){if(t===null||t===void 0){return void 0}return e.get(t.constructor)}})}function createMetadataLocator(){const e=new WeakMap;return function(t){let r=e.get(t);if(r===void 0){let i=Reflect.getPrototypeOf(t);while(r===void 0&&i!==null){r=e.get(i);i=Reflect.getPrototypeOf(i)}r=r===void 0?[]:r.slice(0);e.set(t,r)}return r}}function makeSerializationNoop(e){e.prototype.toJSON=noop}const E=o.getById(i.updateQueue,(()=>{const e=[];const t=[];const r=globalThis.requestAnimationFrame??globalThis.setImmediate;let i=true;function throwFirstError(){if(t.length){throw t.shift()}}function tryRunTask(r){try{r.call()}catch(r){if(i){t.push(r);setTimeout(throwFirstError,0)}else{e.length=0;throw r}}}function process(){const t=1024;let r=0;while(r<e.length){tryRunTask(e[r]);r++;if(r>t){for(let t=0,i=e.length-r;t<i;t++){e[t]=e[t+r]}e.length-=r;r=0}}e.length=0}function enqueue(t){e.push(t);if(e.length<2){i?r(process):process()}}return Object.freeze({enqueue:enqueue,next:()=>new Promise(enqueue),process:process,setMode:e=>i=e})}));class SubscriberSet{constructor(e,t){this.sub1=void 0;this.sub2=void 0;this.spillover=void 0;this.subject=e;this.sub1=t}has(e){return this.spillover===void 0?this.sub1===e||this.sub2===e:this.spillover.indexOf(e)!==-1}subscribe(e){const t=this.spillover;if(t===void 0){if(this.has(e)){return}if(this.sub1===void 0){this.sub1=e;return}if(this.sub2===void 0){this.sub2=e;return}this.spillover=[this.sub1,this.sub2,e];this.sub1=void 0;this.sub2=void 0}else{const r=t.indexOf(e);if(r===-1){t.push(e)}}}unsubscribe(e){const t=this.spillover;if(t===void 0){if(this.sub1===e){this.sub1=void 0}else if(this.sub2===e){this.sub2=void 0}}else{const r=t.indexOf(e);if(r!==-1){t.splice(r,1)}}}notify(e){const t=this.spillover;const r=this.subject;if(t===void 0){const t=this.sub1;const i=this.sub2;if(t!==void 0){t.handleChange(r,e)}if(i!==void 0){i.handleChange(r,e)}}else{for(let i=0,n=t.length;i<n;++i){t[i].handleChange(r,e)}}}}class PropertyChangeNotifier{constructor(e){this.subscribers={};this.subjectSubscribers=null;this.subject=e}notify(e){this.subscribers[e]?.notify(e);this.subjectSubscribers?.notify(e)}subscribe(e,t){let r;if(t){r=this.subscribers[t]??(this.subscribers[t]=new SubscriberSet(this.subject))}else{r=this.subjectSubscribers??(this.subjectSubscribers=new SubscriberSet(this.subject))}r.subscribe(e)}unsubscribe(e,t){if(t){this.subscribers[t]?.unsubscribe(e)}else{this.subjectSubscribers?.unsubscribe(e)}}}const c=Object.freeze({unknown:void 0,coupled:1});const T=o.getById(i.observable,(()=>{const e=E.enqueue;const t=/(:|&&|\|\||if|\?\.)/;const r=new WeakMap;let i=void 0;let createArrayObserver=e=>{throw o.error(n.needsArrayObservation)};function getNotifier(e){let t=e.$fastController??r.get(e);if(t===void 0){Array.isArray(e)?t=createArrayObserver(e):r.set(e,t=new PropertyChangeNotifier(e))}return t}const s=createMetadataLocator();class DefaultObservableAccessor{constructor(e){this.name=e;this.field=`_${e}`;this.callback=`${e}Changed`}getValue(e){if(i!==void 0){i.watch(e,this.name)}return e[this.field]}setValue(e,t){const r=this.field;const i=e[r];if(i!==t){e[r]=t;const n=e[this.callback];if(isFunction(n)){n.call(e,i,t)}getNotifier(e).notify(this.name)}}}class ExpressionNotifierImplementation extends SubscriberSet{constructor(e,t,r=false){super(e,t);this.expression=e;this.isVolatileBinding=r;this.needsRefresh=true;this.needsQueue=true;this.isAsync=true;this.first=this;this.last=null;this.propertySource=void 0;this.propertyName=void 0;this.notifier=void 0;this.next=void 0}setMode(e){this.isAsync=this.needsQueue=e}bind(e){this.controller=e;const t=this.observe(e.source,e.context);if(!e.isBound&&this.requiresUnbind(e)){e.onUnbind(this)}return t}requiresUnbind(e){return e.sourceLifetime!==c.coupled||this.first!==this.last||this.first.propertySource!==e.source}unbind(e){this.dispose()}observe(e,t){if(this.needsRefresh&&this.last!==null){this.dispose()}const r=i;i=this.needsRefresh?this:void 0;this.needsRefresh=this.isVolatileBinding;let n;try{n=this.expression(e,t)}finally{i=r}return n}disconnect(){this.dispose()}dispose(){if(this.last!==null){let e=this.first;while(e!==void 0){e.notifier.unsubscribe(this,e.propertyName);e=e.next}this.last=null;this.needsRefresh=this.needsQueue=this.isAsync}}watch(e,t){const r=this.last;const n=getNotifier(e);const s=r===null?this.first:{};s.propertySource=e;s.propertyName=t;s.notifier=n;n.subscribe(this,t);if(r!==null){if(!this.needsRefresh){let t;i=void 0;t=r.propertySource[r.propertyName];i=this;if(e===t){this.needsRefresh=true}}r.next=s}this.last=s}handleChange(){if(this.needsQueue){this.needsQueue=false;e(this)}else if(!this.isAsync){this.call()}}call(){if(this.last!==null){this.needsQueue=this.isAsync;this.notify(this)}}*records(){let e=this.first;while(e!==void 0){yield e;e=e.next}}}makeSerializationNoop(ExpressionNotifierImplementation);return Object.freeze({setArrayObserverFactory(e){createArrayObserver=e},getNotifier:getNotifier,track(e,t){i&&i.watch(e,t)},trackVolatile(){i&&(i.needsRefresh=true)},notify(e,t){getNotifier(e).notify(t)},defineProperty(e,t){if(isString(t)){t=new DefaultObservableAccessor(t)}s(e).push(t);Reflect.defineProperty(e,t.name,{enumerable:true,get(){return t.getValue(this)},set(e){t.setValue(this,e)}})},getAccessors:s,binding(e,t,r=this.isVolatileBinding(e)){return new ExpressionNotifierImplementation(e,t,r)},isVolatileBinding(e){return t.test(e.toString())}})}));function observable(e,t){T.defineProperty(e,t)}function observable_volatile(e,t,r){return Object.assign({},r,{get(){T.trackVolatile();return r.get.apply(this)}})}const O=o.getById(i.contextEvent,(()=>{let e=null;return{get(){return e},set(t){e=t}}}));const _=Object.freeze({default:{index:0,length:0,get event(){return _.getEvent()},eventDetail(){return this.event.detail},eventTarget(){return this.event.target}},getEvent(){return O.get()},setEvent(e){O.set(e)}});const u={NOT_READY:"not-ready",READY:"ready",OPERATION_STARTED:"operation-started",OPERATION_ENDED:"operation-ended",OPERATION_FAILED:"operation-failed"};const l={OK:"ok",OLD:"old",OFF:"off"};const A={PASSWORD:"password",KEY:"key"};const I={OK:"ok",FAILED:"failed"};const P={SUPABASE:"supabase",PUSHER:"pusher",ASTRADB:"astradb",SEATABLE:"seatable",NORTHFLANK:"northflank",RENDER:"render",REDIS:"redis",CLOUDFLARE:"cloudflare",POSTGRESQL:"postgresql",BITIO:"bitio",YC:"yc"};const R={PPP_ASPIRANT_WORKER:"ppp-aspirant-worker",CLOUDFLARE_WORKER:"cloudflare-worker",CLOUD_PPP_ASPIRANT:"cloud-ppp-aspirant",DEPLOYED_PPP_ASPIRANT:"deployed-ppp-aspirant",SYSTEMD_PPP_ASPIRANT:"systemd-ppp-aspirant",SUPABASE_PARSER:"supabase-parser",NYSE_NSDQ_HALTS:"nyse-nsdq-halts"};const N={ACTIVE:"active",STOPPED:"stopped",FAILED:"failed"};const d={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",MOEX:"MOEX",SPBX:"SPBX",US:"US",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",RUS:"RUS",CUSTOM:"CUSTOM",MOEX_SECURITIES:"MOEX_SECURITIES",MOEX_FX_METALS:"MOEX_FX_METALS",MOEX_FORTS:"MOEX_FORTS",CAPITALCOM:"CAPITALCOM"};const p=[d.BINANCE,d.BYBIT_SPOT,d.BYBIT_LINEAR];const f={ALPACA:"alpaca",ALOR:"alor",TINKOFF:"tinkoff",UTEX:"utex",PSINA:"psina",BINANCE:"binance",HUOBI:"huobi",BYBIT:"bybit",MEXC:"mexc",FINAM:"finam",IB:"ib",CAPITALCOM:"capitalcom",UNKNOWN:"unknown"};const S={MARKET_DATA_RECORDER:"market-data-recorder",STOP_LOSS_TAKE_PROFIT:"stop-loss-take-profit",CUSTOM:"custom"};const h={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",PSINA_US_STOCKS:"PSINA_US_STOCKS",ALOR_SPBX:"ALOR_SPBX",ALOR_MOEX_SECURITIES:"ALOR_MOEX_SECURITIES",ALOR_MOEX_FX_METALS:"ALOR_MOEX_FX_METALS",ALOR_FORTS:"ALOR_FORTS",TINKOFF:"TINKOFF",FINAM:"FINAM",ALPACA:"ALPACA",IB:"IB",CAPITALCOM:"CAPITALCOM"};const m={ALOR_OPENAPI_V2:"alor-openapi-v2",ALPACA_V2_PLUS:"alpaca-v2-plus",TINKOFF_GRPC_WEB:"tinkoff-grpc-web",IB:"ib",CAPITALCOM:"capitalcom",UTEX_MARGIN_STOCKS:"utex-margin-stocks",BINANCE_V3:"binance-v3",MEXC_V3:"mexc-v3",BYBIT_V5:"bybit-v5",FINAM_TRADE_API:"finam-trade-api",PAPER_TRADE:"paper-trade",COMBINED_L1:"combined-l1",COMBINED_ORDERBOOK:"combined-orderbook",CUSTOM:"custom"};const b={CAPS_LIMIT_ORDERS:"caps-limit-orders",CAPS_MARKET_ORDERS:"caps-marker-orders",CAPS_ACTIVE_ORDERS:"caps-active-orders",CAPS_CONDITIONAL_ORDERS:"caps-conditional-orders",CAPS_ORDERBOOK:"caps-orderbook",CAPS_TIME_AND_SALES:"caps-time-and-sales",CAPS_POSITIONS:"caps-positions",CAPS_TIMELINE:"caps-timeline",CAPS_LEVEL1:"caps-level1",CAPS_EXTENDED_LEVEL1:"caps-extended-level1",CAPS_CHARTS:"caps-charts",CAPS_MIC:"caps-mic",CAPS_ORDER_DESTINATION:"caps-order-destination",CAPS_ORDER_TIF:"caps-order-tif",CAPS_ORDER_DISPLAY_SIZE:"caps-order-display-size",CAPS_US_NBBO:"caps-us-nbbo",CAPS_NSDQ_TOTALVIEW:"caps-nsdq-totalview",CAPS_ARCABOOK:"caps-arcabook",CAPS_BLUEATS:"caps-blueats",CAPS_NYSE_OPENBOOK:"caps-nyse-openbook",CAPS_DIRECTEDGE_BOOK:"caps-directedge-book",CAPS_BZX_BOOK:"caps-bzx-book",CAPS_NOII:"caps-noii",CAPS_PAPER:"caps-paper"};const D={TRADER:"trader",DAY_VOLUME:"day-volume",STATUS:"status",TRADING_STATUS:"trading-status",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",BEST_BID:"best-bid",BEST_ASK:"best-ask",MIDPOINT:"midpoint",ORDERBOOK:"orderbook",MARKET_PRINT:"market-print",POSITION:"position",POSITION_SIZE:"position-size",POSITION_AVERAGE:"position-average",ACTIVE_ORDER:"active-order",CONDITIONAL_ORDER:"conditional-order",TIMELINE_ITEM:"timeline-item",CANDLE:"candle",NOII:"noii",SPRINT:"sprint",LOCATE:"locate"};const C={INSTRUMENT:"instrument",SYMBOL:"symbol",INSTRUMENT_TYPE:"instrument-type",POSITION_AVAILABLE:"position-available",POSITION_AVERAGE:"position-average",TOTAL_AMOUNT:"total-amount",EXTENDED_TOTAL_AMOUNT:"extended-total-amount",BEST_BID:"best-bid",BEST_ASK:"best-ask",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",PL_ABSOLUTE:"pl-absolute",PL_RELATIVE:"pl-relative",EXTENDED_PL_ABSOLUTE:"extended-pl-absolute",EXTENDED_PL_RELATIVE:"extended-pl-relative",DAY_VOLUME:"day-volume",TRADING_STATUS:"trading-status",FORMATTED_VALUE:"formatted-value"};const y={ORDER:"order",SCALPING_BUTTONS:"scalping-buttons",ACTIVE_ORDERS:"active-orders",LIGHT_CHART:"light-chart",ORDERBOOK:"orderbook",TIME_AND_SALES:"time-and-sales",PORTFOLIO:"portfolio",BALANCES:"balances",LIST:"list",TIMELINE:"timeline",CLOCK:"clock",MARQUEE:"marquee",TCC:"tcc",FRAME:"frame",NOII:"noii",MIGRATION:"migration",OTHER:"other"};let L;(function(e){e[e["OPERATION_TYPE_UNSPECIFIED"]=0]="OPERATION_TYPE_UNSPECIFIED";e[e["OPERATION_TYPE_INPUT"]=1]="OPERATION_TYPE_INPUT";e[e["OPERATION_TYPE_BOND_TAX"]=2]="OPERATION_TYPE_BOND_TAX";e[e["OPERATION_TYPE_OUTPUT_SECURITIES"]=3]="OPERATION_TYPE_OUTPUT_SECURITIES";e[e["OPERATION_TYPE_OVERNIGHT"]=4]="OPERATION_TYPE_OVERNIGHT";e[e["OPERATION_TYPE_TAX"]=5]="OPERATION_TYPE_TAX";e[e["OPERATION_TYPE_BOND_REPAYMENT_FULL"]=6]="OPERATION_TYPE_BOND_REPAYMENT_FULL";e[e["OPERATION_TYPE_SELL_CARD"]=7]="OPERATION_TYPE_SELL_CARD";e[e["OPERATION_TYPE_DIVIDEND_TAX"]=8]="OPERATION_TYPE_DIVIDEND_TAX";e[e["OPERATION_TYPE_OUTPUT"]=9]="OPERATION_TYPE_OUTPUT";e[e["OPERATION_TYPE_BOND_REPAYMENT"]=10]="OPERATION_TYPE_BOND_REPAYMENT";e[e["OPERATION_TYPE_TAX_CORRECTION"]=11]="OPERATION_TYPE_TAX_CORRECTION";e[e["OPERATION_TYPE_SERVICE_FEE"]=12]="OPERATION_TYPE_SERVICE_FEE";e[e["OPERATION_TYPE_BENEFIT_TAX"]=13]="OPERATION_TYPE_BENEFIT_TAX";e[e["OPERATION_TYPE_MARGIN_FEE"]=14]="OPERATION_TYPE_MARGIN_FEE";e[e["OPERATION_TYPE_BUY"]=15]="OPERATION_TYPE_BUY";e[e["OPERATION_TYPE_BUY_CARD"]=16]="OPERATION_TYPE_BUY_CARD";e[e["OPERATION_TYPE_INPUT_SECURITIES"]=17]="OPERATION_TYPE_INPUT_SECURITIES";e[e["OPERATION_TYPE_SELL_MARGIN"]=18]="OPERATION_TYPE_SELL_MARGIN";e[e["OPERATION_TYPE_BROKER_FEE"]=19]="OPERATION_TYPE_BROKER_FEE";e[e["OPERATION_TYPE_BUY_MARGIN"]=20]="OPERATION_TYPE_BUY_MARGIN";e[e["OPERATION_TYPE_DIVIDEND"]=21]="OPERATION_TYPE_DIVIDEND";e[e["OPERATION_TYPE_SELL"]=22]="OPERATION_TYPE_SELL";e[e["OPERATION_TYPE_COUPON"]=23]="OPERATION_TYPE_COUPON";e[e["OPERATION_TYPE_SUCCESS_FEE"]=24]="OPERATION_TYPE_SUCCESS_FEE";e[e["OPERATION_TYPE_DIVIDEND_TRANSFER"]=25]="OPERATION_TYPE_DIVIDEND_TRANSFER";e[e["OPERATION_TYPE_ACCRUING_VARMARGIN"]=26]="OPERATION_TYPE_ACCRUING_VARMARGIN";e[e["OPERATION_TYPE_WRITING_OFF_VARMARGIN"]=27]="OPERATION_TYPE_WRITING_OFF_VARMARGIN";e[e["OPERATION_TYPE_DELIVERY_BUY"]=28]="OPERATION_TYPE_DELIVERY_BUY";e[e["OPERATION_TYPE_DELIVERY_SELL"]=29]="OPERATION_TYPE_DELIVERY_SELL";e[e["OPERATION_TYPE_TRACK_MFEE"]=30]="OPERATION_TYPE_TRACK_MFEE";e[e["OPERATION_TYPE_TRACK_PFEE"]=31]="OPERATION_TYPE_TRACK_PFEE";e[e["OPERATION_TYPE_TAX_PROGRESSIVE"]=32]="OPERATION_TYPE_TAX_PROGRESSIVE";e[e["OPERATION_TYPE_BOND_TAX_PROGRESSIVE"]=33]="OPERATION_TYPE_BOND_TAX_PROGRESSIVE";e[e["OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE"]=34]="OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";e[e["OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE"]=35]="OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";e[e["OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE"]=36]="OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";e[e["OPERATION_TYPE_TAX_REPO_PROGRESSIVE"]=37]="OPERATION_TYPE_TAX_REPO_PROGRESSIVE";e[e["OPERATION_TYPE_TAX_REPO"]=38]="OPERATION_TYPE_TAX_REPO";e[e["OPERATION_TYPE_TAX_REPO_HOLD"]=39]="OPERATION_TYPE_TAX_REPO_HOLD";e[e["OPERATION_TYPE_TAX_REPO_REFUND"]=40]="OPERATION_TYPE_TAX_REPO_REFUND";e[e["OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE"]=41]="OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";e[e["OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE"]=42]="OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";e[e["OPERATION_TYPE_DIV_EXT"]=43]="OPERATION_TYPE_DIV_EXT";e[e["OPERATION_TYPE_TAX_CORRECTION_COUPON"]=44]="OPERATION_TYPE_TAX_CORRECTION_COUPON";e[e["OPERATION_TYPE_CASH_FEE"]=45]="OPERATION_TYPE_CASH_FEE";e[e["OPERATION_TYPE_OUT_FEE"]=46]="OPERATION_TYPE_OUT_FEE";e[e["OPERATION_TYPE_OUT_STAMP_DUTY"]=47]="OPERATION_TYPE_OUT_STAMP_DUTY";e[e["OPERATION_TYPE_OUTPUT_SWIFT"]=50]="OPERATION_TYPE_OUTPUT_SWIFT";e[e["OPERATION_TYPE_INPUT_SWIFT"]=51]="OPERATION_TYPE_INPUT_SWIFT";e[e["OPERATION_TYPE_OUTPUT_ACQUIRING"]=53]="OPERATION_TYPE_OUTPUT_ACQUIRING";e[e["OPERATION_TYPE_INPUT_ACQUIRING"]=54]="OPERATION_TYPE_INPUT_ACQUIRING";e[e["OPERATION_TYPE_OUTPUT_PENALTY"]=55]="OPERATION_TYPE_OUTPUT_PENALTY";e[e["OPERATION_TYPE_ADVICE_FEE"]=56]="OPERATION_TYPE_ADVICE_FEE";e[e["OPERATION_TYPE_TRANS_IIS_BS"]=57]="OPERATION_TYPE_TRANS_IIS_BS";e[e["OPERATION_TYPE_TRANS_BS_BS"]=58]="OPERATION_TYPE_TRANS_BS_BS";e[e["OPERATION_TYPE_OUT_MULTI"]=59]="OPERATION_TYPE_OUT_MULTI";e[e["OPERATION_TYPE_INP_MULTI"]=60]="OPERATION_TYPE_INP_MULTI";e[e["OPERATION_TYPE_OVER_PLACEMENT"]=61]="OPERATION_TYPE_OVER_PLACEMENT";e[e["OPERATION_TYPE_OVER_COM"]=62]="OPERATION_TYPE_OVER_COM";e[e["OPERATION_TYPE_OVER_INCOME"]=63]="OPERATION_TYPE_OVER_INCOME";e[e["OPERATION_TYPE_OPTION_EXPIRATION"]=64]="OPERATION_TYPE_OPTION_EXPIRATION";e[e["OPERATION_TYPE_LOCATE_FEE"]=800]="OPERATION_TYPE_LOCATE_FEE";e[e["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(L||(L={}));const g={UNSPECIFIED:"UNSPECIFIED",NOT_AVAILABLE_FOR_TRADING:"NOT_AVAILABLE_FOR_TRADING",OPENING_PERIOD:"OPENING_PERIOD",CLOSING_PERIOD:"CLOSING_PERIOD",BREAK_IN_TRADING:"BREAK_IN_TRADING",NORMAL_TRADING:"NORMAL_TRADING",CLOSING_AUCTION:"CLOSING_AUCTION",DARK_POOL_AUCTION:"DARK_POOL_AUCTION",DISCRETE_AUCTION:"DISCRETE_AUCTION",OPENING_AUCTION_PERIOD:"OPENING_AUCTION_PERIOD",TRADING_AT_CLOSING_AUCTION_PRICE:"TRADING_AT_CLOSING_AUCTION_PRICE",SESSION_ASSIGNED:"SESSION_ASSIGNED",SESSION_CLOSE:"SESSION_CLOSE",SESSION_OPEN:"SESSION_OPEN",DEALER_NORMAL_TRADING:"DEALER_NORMAL_TRADING",DEALER_BREAK_IN_TRADING:"DEALER_BREAK_IN_TRADING",DEALER_NOT_AVAILABLE_FOR_TRADING:"DEALER_NOT_AVAILABLE_FOR_TRADING",PREMARKET:"PREMARKET",AFTER_HOURS:"AFTER_HOURS",TRADING_SUSPENDED:"TRADING_SUSPENDED",DELISTED:"DELISTED",IPO_TODAY:"IPO_TODAY",QUOTATION_RESUMPTION:"QUOTATION_RESUMPTION",SHORT_SALE_RESTRICTION:"SHORT_SALE_RESTRICTION",MARKET_IMBALANCE:"MARKET_IMBALANCE",MARKET_CLOSE_IMBALANCE:"MARKET_CLOSE_IMBALANCE",PRICE_INDICATION:"PRICE_INDICATION",TRADING_RANGE_INDICATION:"TRADING_RANGE_INDICATION"};function isPredefinedWidgetType(e){return[y.ORDER,y.SCALPING_BUTTONS,y.ACTIVE_ORDERS,y.LIGHT_CHART,y.ORDERBOOK,y.TIME_AND_SALES,y.PORTFOLIO,y.BALANCES,y.LIST,y.TIMELINE,y.CLOCK,y.MARQUEE,y.TCC].includes(e)}function getInstrumentDictionaryMeta(e){let t;let r;let i;switch(e){case h.BYBIT_LINEAR:t=d.BYBIT_LINEAR;r=f.BYBIT;i=[d.BYBIT_LINEAR];break;case h.BYBIT_SPOT:t=d.BYBIT_SPOT;r=f.BYBIT;i=[d.BYBIT_SPOT];break;case h.BINANCE:t=d.BINANCE;r=f.BINANCE;i=[d.BINANCE];break;case h.UTEX_MARGIN_STOCKS:t=d.UTEX_MARGIN_STOCKS;r=f.UTEX;i=[d.UTEX_MARGIN_STOCKS];break;case h.ALPACA:t=d.US;r=f.ALPACA;i=[d.ALPACA];break;case h.IB:t=d.CUSTOM;r=f.IB;i=[d.US];break;case h.PSINA_US_STOCKS:t=d.US;r=f.PSINA;i=[d.US];break;case h.ALOR_SPBX:t=d.SPBX;r=f.ALOR;i=[d.SPBX];break;case h.ALOR_MOEX_SECURITIES:t=d.MOEX_SECURITIES;r=f.ALOR;i=[d.MOEX];break;case h.ALOR_MOEX_FX_METALS:t=d.MOEX_FX_METALS;r=f.ALOR;i=[d.MOEX];break;case h.ALOR_FORTS:t=d.MOEX_FORTS;r=f.ALOR;i=[d.MOEX];break;case h.TINKOFF:t=d.RUS;r=f.TINKOFF;i=[d.MOEX,d.SPBX];break;case h.FINAM:t=d.CUSTOM;r=f.FINAM;i=[d.MOEX,d.US,d.SPBX];break;case h.CAPITALCOM:t=d.CAPITALCOM;r=f.CAPITALCOM;i=[d.CAPITALCOM];break}return{exchange:t,broker:r,exchangeList:i}}function parseJwt(e){const[,t]=e.split(".");return JSON.parse(typeof Buffer!=="undefined"?Buffer.from(t,"base64"):atob(t))}function isJWTTokenExpired(e){if(e){try{const{exp:t}=parseJwt(e);if(typeof t==="number"){return Date.now()+1e3>=t*1e3}}catch{return true}}return true}function stringToBuffer(e){const t=typeof Buffer!=="undefined"?Buffer.from(e,"base64").toString("binary"):globalThis.atob(e);const r=new ArrayBuffer(t.length);const i=new Uint8Array(r);for(let e=0;e<t.length;e++){i[e]=t.charCodeAt(e)}return r}function bufferToString(e){const t=String.fromCharCode.apply(null,new Uint8Array(e));return typeof Buffer!=="undefined"?Buffer.from(e).toString("base64"):globalThis.btoa(t)}function generateIV(){return globalThis.crypto.getRandomValues(new Uint8Array(12))}function uuidv4(){return globalThis.crypto.randomUUID()}async function sha256(e){const t=(new TextEncoder).encode(e);const r=await globalThis.crypto.subtle.digest("SHA-256",t);const i=Array.from(new Uint8Array(r));return i.map((e=>e.toString(16).padStart(2,"0"))).join("")}async function HMAC(e,t,r={}){let i=e;const n=new TextEncoder;const s=n.encode(t);if(typeof e==="string"){i=n.encode(e)}const o=await globalThis.crypto.subtle.importKey("raw",i,{name:"HMAC",hash:r.algorithm??"SHA-256"},false,["sign"]);const a=await globalThis.crypto.subtle.sign("HMAC",o,s);if(r?.format==="hex"){const e=Array.from(new Uint8Array(a));const t=e.map((e=>e.toString(16).padStart(2,"0"))).join("");return t}else{return a}}async function generateAWSSigningKey({ycStaticKeySecret:e,date:t,region:r}){const i=await HMAC(`AWS4${e}`,t);const n=await HMAC(i,r);const s=await HMAC(n,"s3");return HMAC(s,"aws4_request")}function $throttle(e,t){let r=false,i,n;function wrapper(){if(r){i=arguments;n=this;return}e.apply(this,arguments);r=true;setTimeout((function(){r=false;if(i){wrapper.apply(n,i);i=n=null}}),t)}return wrapper}function $debounce(e,t){let r;return function(){clearTimeout(r);r=setTimeout((()=>e.apply(this,arguments)),t)}}function throttle(e=0){return(t,r,i)=>{if(!i||typeof i.value!=="function"){throw new Error("throttle can only decorate functions.")}const n=i.value;i.value=$throttle(n,e);Object.defineProperty(t,r,i)}}function debounce(e=0){return(t,r,i)=>{if(!i||typeof i.value!=="function"){throw new Error("debounce can only decorate functions.")}const n=i.value;i.value=$debounce(n,e);Object.defineProperty(t,r,i)}}async function later(e){return new Promise((function(t){setTimeout(t,e)}))}const __decorate=function(e,t,r,i){let n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;for(let i=e.length-1;i>=0;i--)if(o=e[i])s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s;return n>3&&s&&Object.defineProperty(t,r,s),s};class ConditionalOrder{mainTrader;instrument;side;payload;placedAt;orderId;constructor(){this.orderId=uuidv4();this.status="inactive";this.sourceID=uuidv4();this.changedWithThrottle=$throttle(this.changed,500)}statusChanged(){return this.changed()}changed(){return this.mainTrader?.datums?.[D.CONDITIONAL_ORDER]?.dataArrived?.(this.serialize(),this.instrument)}place({mainTrader:e,instrument:t,direction:r,payload:i}){this.mainTrader??=e;this.instrument??=t;this.side??=r;this.payload??=i;this.placedAt??=(new Date).toISOString();this.lastPlacedAt=(new Date).toISOString()}cancel(){this.status="canceled"}serialize(){return{instrument:this.instrument,side:this.side,payload:this.payload,placedAt:this.placedAt,lastPlacedAt:this.lastPlacedAt,sourceID:this.sourceID,orderId:this.orderId,status:this.status,isConditionalOrder:true}}}function pppOrderInstanceForWorkerIs(e){if(typeof process!=="undefined"&&process.release.name==="node"){globalThis.pppOrderInstanceForWorkerRecv?.(e)}}__decorate([observable],ConditionalOrder.prototype,"status",void 0);if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.ppp??={i18nLocale:"en-US"}}const B=null&&["EUR","AMD","KZT","KGS","UZS","USD","CNY","TJS","BYN","HKD","XAU","TRY","XAG","RUB"];function stringToFloat(e){if(typeof e==="number"){return e}if(!e){return 0}if(e.includes(",")&&e.includes(".")){e=e.replaceAll(/,/gi,"")}return parseFloat(e.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,""))}function decimalSeparator(){const e=1.1;return Intl.NumberFormat(ppp.i18nLocale).formatToParts(e).find((e=>e.type==="decimal")).value}const Y=decimalSeparator();function getInstrumentMinPriceIncrement(e,t,r){if(!e)return 0;if(typeof t!=="number"||isNaN(t))return e.minPriceIncrement||.01;t=stringToFloat(t);let i=e.minPriceIncrement;if(!i||r){i=t<1?1e-4:.01}return i}function getInstrumentPrecision(e,t,r){if(!e)return 0;if(e.type==="currency"){return 4}if(t===0||t==="0"){return 2}const i=getInstrumentMinPriceIncrement(e,t,r);const[n,s]=i.toString().split(".");return s?s.length:0}function getInstrumentQuantityPrecision(e){if(!e)return 0;const[t,r]=(e.minQuantityIncrement??0).toString().split(".");return r?r.length:0}function formatDateWithOptions(e,t={}){if(!e)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,Object.assign({hour12:false},t)).format(new Date(e))}function formatDate(e){if(!e)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}).format(new Date(e))}function formatDuration(e=0,t={}){if(typeof e!=="number")return"—";return new Date(e*1e3).toLocaleTimeString(ppp.i18nLocale,Object.assign({timeZone:"Etc/UTC",hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"},t))}function formatPrice(e,t,r={}){if(!t||typeof e!=="number"||isNaN(e))return"—";if(!t.currency)return"—";const i=getInstrumentPrecision(t,e);if(t.type==="future"||t.type==="index"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:i,maximumFractionDigits:i}).format(e)+" pt."}if(!B.includes(t?.currency)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:i,maximumFractionDigits:i},r)).format(e)+(t.currency==="N/A"?"":` ${t.currency}`)}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",currency:t.currency,minimumFractionDigits:i,maximumFractionDigits:i},r)).format(e)+` ${priceCurrencySymbol(t)}`}function formatPriceWithoutCurrency(e,t,r){if(typeof t==="undefined"){return(e||"").toString().replace(".",Y)}if(typeof e!=="number"||isNaN(e))return"—";const i=getInstrumentPrecision(t,e,r);return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:i,maximumFractionDigits:i}).format(e)}function formatCommission(e,t,r={}){if(!t||typeof e!=="number"||isNaN(e))return"—";if(!t.currency)return"—";if(B.indexOf(t?.currency)===-1){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:3},r)).format(e)+` ${t.currency}`}return new Intl.NumberFormat(ppp.i18nLocale,{style:"currency",currency:t.currency,minimumFractionDigits:2,maximumFractionDigits:3}).format(e)}function formatAmount(e,t={},r={}){const i=t.currency??t.quoteCryptoAsset;if(!i||typeof e!=="number"||isNaN(e))return"—";if(t.type==="future"){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal"},r)).format(e)+" пт."}if(!B.includes(i)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:0},r)).format(e)+` ${i}`}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"currency",minimumFractionDigits:0,currency:i},r)).format(e)}function formatAbsoluteChange(e,t,r={}){if(!t||typeof e!=="number"||isNaN(e))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:Math.max(2,getInstrumentPrecision(t,e)),signDisplay:"always"},r)).format(e)}function formatRelativeChange(e,t={}){if(typeof e!=="number"||isNaN(e))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"always"},t)).format(e)}function formatPercentage(e){if(typeof e!=="number"||isNaN(e))return"—";return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:3}).format(e)}function formatQuantity(e,t){if(typeof e!=="number"||isNaN(e))return"—";let r=0;if(typeof t?.minQuantityIncrement==="number"){const[e,i]=t.minQuantityIncrement.toString().split(".");r=i?.length??0}return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:r,maximumFractionDigits:r}).format(e)}function cyrillicToLatin(e){if(/^\p{Script=Cyrillic}+$/u.test(e)){const t='QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>~';const r="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁ";const i={};for(let e=0;e<r.length;e++){i[r[e]]=t[e]}return e.split("").map((e=>i[e.toUpperCase()])).join("")}else{return e}}function latinToCyrillic(e){if(/[a-z]+/i.test(e)){const t="QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>~,.`'[];";const r="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁБЮЁЭХЪЖ";const i={};for(let e=0;e<r.length;e++){i[t[e]]=r[e]}return e.split("").map((e=>i[e.toUpperCase()])).join("")}else{return e}}function priceCurrencySymbol(e){if(e?.type==="future"||e?.type==="index")return"pt.";if(e?.type==="cryptocurrency")return e.quoteCryptoAsset;if(e?.currency==="USDT")return"USDT";if(e?.currency&&e.currency!=="N/A"){return(0).toLocaleString(ppp.i18nLocale,{style:"currency",currency:e.currency,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim()}else return""}function currencyName(e){if(B.indexOf(e)===-1){return e}if(!e)return"—";const t=new Intl.DisplayNames([ppp.i18nLocale],{type:"currency"});return t.of(e)}function isDST(){const e=new Date;const t=e.getFullYear();const r=new Date(t,2,1);const i=(7-r.getDay())%7;const n=r.getDate()+i+7;const s=new Date(t,2,n);const o=new Date(t,10,1);const a=(7-o.getDay())%7;const E=o.getDate()+a;const c=new Date(t,10,E);return e.getTime()<=c.getTime()&&e.getTime()>=s.getTime()}function formatFileSize(e,{si:t=true,dp:r=1,useIntl:i=false}={}){if(i){return new Intl.NumberFormat(ppp.i18nLocale,{style:"unit",unit:"byte",notation:"compact",unitDisplay:"narrow"}).format(e)}const n=t?1e3:1024;if(Math.abs(e)<n){return e+" B"}const s=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let o=-1;const a=10**r;do{e/=n;++o}while(Math.round(Math.abs(e)*a)/a>=n&&o<s.length-1);return e.toFixed(r)+" "+s[o]}function formatNumber(e,t={}){return new Intl.NumberFormat(ppp.i18nLocale,t).format(e)}function formatVolume(e,t={}){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",notation:"compact",minimumFractionDigits:1,maximumFractionDigits:2},t)).format(e)}function parseDistance(e=""){let t="";e=e.trim();if(e.endsWith("%")){t="%"}else if(e.endsWith("+")){t="+"}e=e.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,"");let r=parseFloat(e);if(t==="+"){r=Math.trunc(r)}if(isNaN(r)){return{}}return{value:r,unit:t}}function distanceToString({value:e,unit:t}={}){if(typeof e==="undefined"){return""}if(t==="%"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:2}).format(e/100)}else if(t==="+"){return`${Math.trunc(e)} +`}else{return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal"}).format(e)}}const impl_decorate=function(e,t,r,i){let n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;for(let i=e.length-1;i>=0;i--)if(o=e[i])s=(n<3?o(s):n>3?o(t,r,s):o(t,r))||s;return n>3&&s&&Object.defineProperty(t,r,s),s};class StopLossTakeProfitOrder extends ConditionalOrder{lastPriceChanged(){return this.update()}extendedLastPriceChanged(){return this.update()}bestBidChanged(){return this.update()}bestAskChanged(){return this.update()}delayStartedAt;delayInProcessChanged(){return this.changed()}orderResultChanged(){return this.changed()}traders=[];fieldDatumPairs={};#e;async#t(){const e=stringToFloat(this.payload.limitPrice);const t={instrument:this.instrument,quantity:stringToFloat(this.payload.quantity),direction:this.side};try{if(e===0){this.orderResult=await this.mainTrader.placeMarketOrder(t)}else{t.price=this.mainTrader.fixPrice(this.instrument,e);this.orderResult=await this.mainTrader.placeLimitOrder(t)}this.status="executed"}catch(e){console.error(e);this.status="failed"}}update(){if(!["working","pending"].includes(this.status)){return false}const e=Math.trunc(Math.abs(stringToFloat(this.payload.timeDelay)));const t=this.conditionsAreMet();if(e<1){if(t){this.status="executing";this.finish();this.#t()}}else{if(this.delayInProcess){if(!t){this.delayInProcess=false;this.delayStartedAt=void 0;this.status="working";clearTimeout(this.#e)}}else{if(t){this.delayInProcess=true;this.delayStartedAt=(new Date).toISOString();this.status="pending";this.#e=setTimeout((()=>{this.delayInProcess=false;this.delayStartedAt=void 0;if(this.conditionsAreMet()){this.status="executing";this.finish();this.#t()}}),e*1e3)}}}}conditionsAreMet(){const{watchPrices:e,orderType:t}=this.payload.order;const{stopPrice:r}=this.payload;const i=e.map((t=>{switch(t){case D.LAST_PRICE:return e.includes(D.EXTENDED_LAST_PRICE)&&typeof this.extendedLastPrice==="number"?null:this.lastPrice;case D.EXTENDED_LAST_PRICE:return this.extendedLastPrice;case D.BEST_BID:return this.bestBid;case D.BEST_ASK:return this.bestAsk;case D.MIDPOINT:if(!this.bestBid||!this.bestAsk||isNaN(this.bestBid)||isNaN(this.bestAsk)){return null}return(this.bestBid+this.bestAsk)/2}}));const n=stringToFloat(r);for(const e of i){if(typeof e==="number"&&!isNaN(e)){if(t==="stop-loss"){if(this.side==="sell"){if(e<=n){return true}}else{if(e>=n){return true}}}else{if(this.side==="sell"){if(e>=n){return true}}else{if(e<=n){return true}}}}}return false}async place({mainTrader:e,instrument:t,direction:r,payload:i}){super.place({mainTrader:e,instrument:t,direction:r,payload:i});if(i.trader1||i.trader2||i.trader3||i.trader4){this.payload.order.watchPrices.forEach((e=>{switch(e){case D.LAST_PRICE:this.fieldDatumPairs.lastPrice=D.LAST_PRICE;break;case D.EXTENDED_LAST_PRICE:this.fieldDatumPairs.extendedLastPrice=D.EXTENDED_LAST_PRICE;break;case D.BEST_BID:this.fieldDatumPairs.bestBid=D.BEST_BID;break;case D.BEST_ASK:this.fieldDatumPairs.bestAsk=D.BEST_ASK;break;case D.MIDPOINT:this.fieldDatumPairs.bestBid=D.BEST_BID;this.fieldDatumPairs.bestAsk=D.BEST_ASK;break}}));this.status="working";for(const e of[i.trader1,i.trader2,i.trader3,i.trader4]){if(e){const t=await globalThis.ppp.getOrCreateTrader(e);this.traders.push(t);await(t.subscribeFields?.({source:this,fieldDatumPairs:this.fieldDatumPairs}))}}return this.update()}}finish(){clearTimeout(this.#e);this.delayInProcess=false;for(const e of this.traders){if(e){e.unsubscribeFields?.({source:this,fieldDatumPairs:this.fieldDatumPairs})}}}cancel(){super.cancel();return this.finish()}serialize(){return{...super.serialize(),lastPrice:this.lastPrice,extendedLastPrice:this.extendedLastPrice,bestBid:this.bestBid,bestAsk:this.bestAsk,delayInProcess:this.delayInProcess,delayStartedAt:this.delayStartedAt,orderResult:this.orderResult}}}pppOrderInstanceForWorkerIs(StopLossTakeProfitOrder);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"orderResult",void 0);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"delayInProcess",void 0);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"bestAsk",void 0);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"bestBid",void 0);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"extendedLastPrice",void 0);impl_decorate([observable],StopLossTakeProfitOrder.prototype,"lastPrice",void 0);const U=StopLossTakeProfitOrder;module.exports=t})();