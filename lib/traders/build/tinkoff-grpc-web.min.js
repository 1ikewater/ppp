(()=>{var __webpack_modules__={723:T=>{function webpackEmptyAsyncContext(T){return Promise.resolve().then((()=>{var m=new Error("Cannot find module '"+T+"'");m.code="MODULE_NOT_FOUND";throw m}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=723;T.exports=webpackEmptyAsyncContext},930:T=>{function webpackEmptyAsyncContext(T){return Promise.resolve().then((()=>{var m=new Error("Cannot find module '"+T+"'");m.code="MODULE_NOT_FOUND";throw m}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=930;T.exports=webpackEmptyAsyncContext},221:(module,__webpack_exports__,__nccwpck_require__)=>{"use strict";__nccwpck_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});module=__nccwpck_require__.hmd(module);let protobuf;(function(undefined){"use strict";(function t(T,m,_){function n(_){var S=m[_];if(!S)T[_][0].call(S=m[_]={exports:{}},n,S,S.exports);return S.exports}protobuf=n(_[0]);protobuf.util.global.protobuf=protobuf;if(typeof define==="function"&&define.amd)define(["long"],(function(T){if(T&&T.isLong){protobuf.util.Long=T;protobuf.configure()}return protobuf}));if(true&&module&&module.exports)module.exports=protobuf})({1:[function(T,m,_){"use strict";m.exports=i;function i(T,m){var _=new Array(arguments.length-1),S=0,E=2,I=true;while(E<arguments.length)_[S++]=arguments[E++];return new Promise((function n(E,O){_[S]=function t(T){if(I){I=false;if(T)O(T);else{var m=new Array(arguments.length-1),_=0;while(_<m.length)m[_++]=arguments[_];E.apply(null,m)}}};try{T.apply(m||null,_)}catch(T){if(I){I=false;O(T)}}}))}},{}],2:[function(T,m,_){"use strict";var S=_;S.length=function t(T){var m=T.length;if(!m)return 0;var _=0;while(--m%4>1&&T.charAt(m)==="=")++_;return Math.ceil(T.length*3)/4-_};var E=new Array(64);var I=new Array(123);for(var O=0;O<64;)I[E[O]=O<26?O+65:O<52?O+71:O<62?O-4:O-59|43]=O++;S.encode=function t(T,m,_){var S=null,I=[];var O=0,R=0,N;while(m<_){var A=T[m++];switch(R){case 0:I[O++]=E[A>>2];N=(A&3)<<4;R=1;break;case 1:I[O++]=E[N|A>>4];N=(A&15)<<2;R=2;break;case 2:I[O++]=E[N|A>>6];I[O++]=E[A&63];R=0;break}if(O>8191){(S||(S=[])).push(String.fromCharCode.apply(String,I));O=0}}if(R){I[O++]=E[N];I[O++]=61;if(R===1)I[O++]=61}if(S){if(O)S.push(String.fromCharCode.apply(String,I.slice(0,O)));return S.join("")}return String.fromCharCode.apply(String,I.slice(0,O))};var R="invalid encoding";S.decode=function t(T,m,_){var S=_;var E=0,O;for(var N=0;N<T.length;){var A=T.charCodeAt(N++);if(A===61&&E>1)break;if((A=I[A])===undefined)throw Error(R);switch(E){case 0:O=A;E=1;break;case 1:m[_++]=O<<2|(A&48)>>4;O=A;E=2;break;case 2:m[_++]=(O&15)<<4|(A&60)>>2;O=A;E=3;break;case 3:m[_++]=(O&3)<<6|A;E=0;break}}if(E===1)throw Error(R);return _-S};S.test=function t(T){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(T)}},{}],3:[function(T,m,_){"use strict";m.exports=i;function i(){this._listeners={}}i.prototype.on=function t(T,m,_){(this._listeners[T]||(this._listeners[T]=[])).push({fn:m,ctx:_||this});return this};i.prototype.off=function t(T,m){if(T===undefined)this._listeners={};else{if(m===undefined)this._listeners[T]=[];else{var _=this._listeners[T];for(var S=0;S<_.length;)if(_[S].fn===m)_.splice(S,1);else++S}}return this};i.prototype.emit=function t(T){var m=this._listeners[T];if(m){var _=[],S=1;for(;S<arguments.length;)_.push(arguments[S++]);for(S=0;S<m.length;)m[S].fn.apply(m[S++].ctx,_)}return this}},{}],4:[function(T,m,_){"use strict";m.exports=i(i);function i(T){if(typeof Float32Array!=="undefined")(function(){var m=new Float32Array([-0]),_=new Uint8Array(m.buffer),S=_[3]===128;function n(T,S,E){m[0]=T;S[E]=_[0];S[E+1]=_[1];S[E+2]=_[2];S[E+3]=_[3]}function o(T,S,E){m[0]=T;S[E]=_[3];S[E+1]=_[2];S[E+2]=_[1];S[E+3]=_[0]}T.writeFloatLE=S?n:o;T.writeFloatBE=S?o:n;function s(T,S){_[0]=T[S];_[1]=T[S+1];_[2]=T[S+2];_[3]=T[S+3];return m[0]}function u(T,S){_[3]=T[S];_[2]=T[S+1];_[1]=T[S+2];_[0]=T[S+3];return m[0]}T.readFloatLE=S?s:u;T.readFloatBE=S?u:s})();else(function(){function e(T,m,_,S){var E=m<0?1:0;if(E)m=-m;if(m===0)T(1/m>0?0:2147483648,_,S);else if(isNaN(m))T(2143289344,_,S);else if(m>34028234663852886e22)T((E<<31|2139095040)>>>0,_,S);else if(m<11754943508222875e-54)T((E<<31|Math.round(m/1401298464324817e-60))>>>0,_,S);else{var I=Math.floor(Math.log(m)/Math.LN2),O=Math.round(m*Math.pow(2,-I)*8388608)&8388607;T((E<<31|I+127<<23|O)>>>0,_,S)}}T.writeFloatLE=e.bind(null,n);T.writeFloatBE=e.bind(null,o);function r(T,m,_){var S=T(m,_),E=(S>>31)*2+1,I=S>>>23&255,O=S&8388607;return I===255?O?NaN:E*Infinity:I===0?E*1401298464324817e-60*O:E*Math.pow(2,I-150)*(O+8388608)}T.readFloatLE=r.bind(null,s);T.readFloatBE=r.bind(null,u)})();if(typeof Float64Array!=="undefined")(function(){var m=new Float64Array([-0]),_=new Uint8Array(m.buffer),S=_[7]===128;function n(T,S,E){m[0]=T;S[E]=_[0];S[E+1]=_[1];S[E+2]=_[2];S[E+3]=_[3];S[E+4]=_[4];S[E+5]=_[5];S[E+6]=_[6];S[E+7]=_[7]}function o(T,S,E){m[0]=T;S[E]=_[7];S[E+1]=_[6];S[E+2]=_[5];S[E+3]=_[4];S[E+4]=_[3];S[E+5]=_[2];S[E+6]=_[1];S[E+7]=_[0]}T.writeDoubleLE=S?n:o;T.writeDoubleBE=S?o:n;function s(T,S){_[0]=T[S];_[1]=T[S+1];_[2]=T[S+2];_[3]=T[S+3];_[4]=T[S+4];_[5]=T[S+5];_[6]=T[S+6];_[7]=T[S+7];return m[0]}function u(T,S){_[7]=T[S];_[6]=T[S+1];_[5]=T[S+2];_[4]=T[S+3];_[3]=T[S+4];_[2]=T[S+5];_[1]=T[S+6];_[0]=T[S+7];return m[0]}T.readDoubleLE=S?s:u;T.readDoubleBE=S?u:s})();else(function(){function e(T,m,_,S,E,I){var O=S<0?1:0;if(O)S=-S;if(S===0){T(0,E,I+m);T(1/S>0?0:2147483648,E,I+_)}else if(isNaN(S)){T(0,E,I+m);T(2146959360,E,I+_)}else if(S>17976931348623157e292){T(0,E,I+m);T((O<<31|2146435072)>>>0,E,I+_)}else{var R;if(S<22250738585072014e-324){R=S/5e-324;T(R>>>0,E,I+m);T((O<<31|R/4294967296)>>>0,E,I+_)}else{var N=Math.floor(Math.log(S)/Math.LN2);if(N===1024)N=1023;R=S*Math.pow(2,-N);T(R*4503599627370496>>>0,E,I+m);T((O<<31|N+1023<<20|R*1048576&1048575)>>>0,E,I+_)}}}T.writeDoubleLE=e.bind(null,n,0,4);T.writeDoubleBE=e.bind(null,o,4,0);function r(T,m,_,S,E){var I=T(S,E+m),O=T(S,E+_);var R=(O>>31)*2+1,N=O>>>20&2047,A=4294967296*(O&1048575)+I;return N===2047?A?NaN:R*Infinity:N===0?R*5e-324*A:R*Math.pow(2,N-1075)*(A+4503599627370496)}T.readDoubleLE=r.bind(null,s,0,4);T.readDoubleBE=r.bind(null,u,4,0)})();return T}function n(T,m,_){m[_]=T&255;m[_+1]=T>>>8&255;m[_+2]=T>>>16&255;m[_+3]=T>>>24}function o(T,m,_){m[_]=T>>>24;m[_+1]=T>>>16&255;m[_+2]=T>>>8&255;m[_+3]=T&255}function s(T,m){return(T[m]|T[m+1]<<8|T[m+2]<<16|T[m+3]<<24)>>>0}function u(T,m){return(T[m]<<24|T[m+1]<<16|T[m+2]<<8|T[m+3])>>>0}},{}],5:[function(require,module,exports){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(T){}return null}},{}],6:[function(T,m,_){"use strict";m.exports=i;function i(T,m,_){var S=_||8192;var E=S>>>1;var I=null;var O=S;return function r(_){if(_<1||_>E)return T(_);if(O+_>S){I=T(S);O=0}var R=m.call(I,O,O+=_);if(O&7)O=(O|7)+1;return R}}},{}],7:[function(T,m,_){"use strict";var S=_;S.length=function t(T){var m=0,_=0;for(var S=0;S<T.length;++S){_=T.charCodeAt(S);if(_<128)m+=1;else if(_<2048)m+=2;else if((_&64512)===55296&&(T.charCodeAt(S+1)&64512)===56320){++S;m+=4}else m+=3}return m};S.read=function t(T,m,_){var S=_-m;if(S<1)return"";var E=null,I=[],O=0,R;while(m<_){R=T[m++];if(R<128)I[O++]=R;else if(R>191&&R<224)I[O++]=(R&31)<<6|T[m++]&63;else if(R>239&&R<365){R=((R&7)<<18|(T[m++]&63)<<12|(T[m++]&63)<<6|T[m++]&63)-65536;I[O++]=55296+(R>>10);I[O++]=56320+(R&1023)}else I[O++]=(R&15)<<12|(T[m++]&63)<<6|T[m++]&63;if(O>8191){(E||(E=[])).push(String.fromCharCode.apply(String,I));O=0}}if(E){if(O)E.push(String.fromCharCode.apply(String,I.slice(0,O)));return E.join("")}return String.fromCharCode.apply(String,I.slice(0,O))};S.write=function t(T,m,_){var S=_,E,I;for(var O=0;O<T.length;++O){E=T.charCodeAt(O);if(E<128){m[_++]=E}else if(E<2048){m[_++]=E>>6|192;m[_++]=E&63|128}else if((E&64512)===55296&&((I=T.charCodeAt(O+1))&64512)===56320){E=65536+((E&1023)<<10)+(I&1023);++O;m[_++]=E>>18|240;m[_++]=E>>12&63|128;m[_++]=E>>6&63|128;m[_++]=E&63|128}else{m[_++]=E>>12|224;m[_++]=E>>6&63|128;m[_++]=E&63|128}}return _-S}},{}],8:[function(T,m,_){"use strict";var S=_;S.build="minimal";S.Writer=T(16);S.BufferWriter=T(17);S.Reader=T(9);S.BufferReader=T(10);S.util=T(15);S.rpc=T(12);S.roots=T(11);S.configure=n;function n(){S.util._configure();S.Writer._configure(S.BufferWriter);S.Reader._configure(S.BufferReader)}n()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(T,m,_){"use strict";m.exports=f;var S=T(15);var E;var I=S.LongBits,O=S.utf8;function u(T,m){return RangeError("index out of range: "+T.pos+" + "+(m||1)+" > "+T.len)}function f(T){this.buf=T;this.pos=0;this.len=T.length}var R=typeof Uint8Array!=="undefined"?function t(T){if(T instanceof Uint8Array||Array.isArray(T))return new f(T);throw Error("illegal buffer")}:function t(T){if(Array.isArray(T))return new f(T);throw Error("illegal buffer")};var N=function t(){return S.Buffer?function t(T){return(f.create=function t(T){return S.Buffer.isBuffer(T)?new E(T):R(T)})(T)}:R};f.create=N();f.prototype._slice=S.Array.prototype.subarray||S.Array.prototype.slice;f.prototype.uint32=function t(){var T=4294967295;return function t(){T=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return T;if((this.pos+=5)>this.len){this.pos=this.len;throw u(this,10)}return T}}();f.prototype.int32=function t(){return this.uint32()|0};f.prototype.sint32=function t(){var T=this.uint32();return T>>>1^-(T&1)|0};function a(){var T=new I(0,0);var m=0;if(this.len-this.pos>4){for(;m<4;++m){T.lo=(T.lo|(this.buf[this.pos]&127)<<m*7)>>>0;if(this.buf[this.pos++]<128)return T}T.lo=(T.lo|(this.buf[this.pos]&127)<<28)>>>0;T.hi=(T.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return T;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw u(this);T.lo=(T.lo|(this.buf[this.pos]&127)<<m*7)>>>0;if(this.buf[this.pos++]<128)return T}T.lo=(T.lo|(this.buf[this.pos++]&127)<<m*7)>>>0;return T}if(this.len-this.pos>4){for(;m<5;++m){T.hi=(T.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0;if(this.buf[this.pos++]<128)return T}}else{for(;m<5;++m){if(this.pos>=this.len)throw u(this);T.hi=(T.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0;if(this.buf[this.pos++]<128)return T}}throw Error("invalid varint encoding")}f.prototype.bool=function t(){return this.uint32()!==0};function c(T,m){return(T[m-4]|T[m-3]<<8|T[m-2]<<16|T[m-1]<<24)>>>0}f.prototype.fixed32=function t(){if(this.pos+4>this.len)throw u(this,4);return c(this.buf,this.pos+=4)};f.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw u(this,4);return c(this.buf,this.pos+=4)|0};function p(){if(this.pos+8>this.len)throw u(this,8);return new I(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}f.prototype.float=function t(){if(this.pos+4>this.len)throw u(this,4);var T=S.float.readFloatLE(this.buf,this.pos);this.pos+=4;return T};f.prototype.double=function t(){if(this.pos+8>this.len)throw u(this,4);var T=S.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return T};f.prototype.bytes=function t(){var T=this.uint32(),m=this.pos,_=this.pos+T;if(_>this.len)throw u(this,T);this.pos+=T;if(Array.isArray(this.buf))return this.buf.slice(m,_);return m===_?new this.buf.constructor(0):this._slice.call(this.buf,m,_)};f.prototype.string=function t(){var T=this.bytes();return O.read(T,0,T.length)};f.prototype.skip=function t(T){if(typeof T==="number"){if(this.pos+T>this.len)throw u(this,T);this.pos+=T}else{do{if(this.pos>=this.len)throw u(this)}while(this.buf[this.pos++]&128)}return this};f.prototype.skipType=function(T){switch(T){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((T=this.uint32()&7)!==4){this.skipType(T)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+T+" at offset "+this.pos)}return this};f._configure=function(T){E=T;f.create=N();E._configure();var m=S.Long?"toLong":"toNumber";S.merge(f.prototype,{int64:function t(){return a.call(this)[m](false)},uint64:function t(){return a.call(this)[m](true)},sint64:function t(){return a.call(this).zzDecode()[m](false)},fixed64:function t(){return p.call(this)[m](true)},sfixed64:function t(){return p.call(this)[m](false)}})}},{15:15}],10:[function(T,m,_){"use strict";m.exports=o;var S=T(9);(o.prototype=Object.create(S.prototype)).constructor=o;var E=T(15);function o(T){S.call(this,T)}o._configure=function(){if(E.Buffer)o.prototype._slice=E.Buffer.prototype.slice};o.prototype.string=function t(){var T=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+T,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+T,this.len))};o._configure()},{15:15,9:9}],11:[function(T,m,_){"use strict";m.exports={}},{}],12:[function(T,m,_){"use strict";var S=_;S.Service=T(13)},{13:13}],13:[function(T,m,_){"use strict";m.exports=n;var S=T(15);(n.prototype=Object.create(S.EventEmitter.prototype)).constructor=n;function n(T,m,_){if(typeof T!=="function")throw TypeError("rpcImpl must be a function");S.EventEmitter.call(this);this.rpcImpl=T;this.requestDelimited=Boolean(m);this.responseDelimited=Boolean(_)}n.prototype.rpcCall=function t(T,m,_,E,I){if(!E)throw TypeError("request must be specified");var O=this;if(!I)return S.asPromise(t,O,T,m,_,E);if(!O.rpcImpl){setTimeout((function(){I(Error("already ended"))}),0);return undefined}try{return O.rpcImpl(T,m[O.requestDelimited?"encodeDelimited":"encode"](E).finish(),(function t(m,S){if(m){O.emit("error",m,T);return I(m)}if(S===null){O.end(true);return undefined}if(!(S instanceof _)){try{S=_[O.responseDelimited?"decodeDelimited":"decode"](S)}catch(m){O.emit("error",m,T);return I(m)}}O.emit("data",S,T);return I(null,S)}))}catch(t){O.emit("error",t,T);setTimeout((function(){I(t)}),0);return undefined}};n.prototype.end=function t(T){if(this.rpcImpl){if(!T)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},{15:15}],14:[function(T,m,_){"use strict";m.exports=n;var S=T(15);function n(T,m){this.lo=T>>>0;this.hi=m>>>0}var E=n.zero=new n(0,0);E.toNumber=function(){return 0};E.zzEncode=E.zzDecode=function(){return this};E.length=function(){return 1};var I=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function t(T){if(T===0)return E;var m=T<0;if(m)T=-T;var _=T>>>0,S=(T-_)/4294967296>>>0;if(m){S=~S>>>0;_=~_>>>0;if(++_>4294967295){_=0;if(++S>4294967295)S=0}}return new n(_,S)};n.from=function t(T){if(typeof T==="number")return n.fromNumber(T);if(S.isString(T)){if(S.Long)T=S.Long.fromString(T);else return n.fromNumber(parseInt(T,10))}return T.low||T.high?new n(T.low>>>0,T.high>>>0):E};n.prototype.toNumber=function t(T){if(!T&&this.hi>>>31){var m=~this.lo+1>>>0,_=~this.hi>>>0;if(!m)_=_+1>>>0;return-(m+_*4294967296)}return this.lo+this.hi*4294967296};n.prototype.toLong=function t(T){return S.Long?new S.Long(this.lo|0,this.hi|0,Boolean(T)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(T)}};var O=String.prototype.charCodeAt;n.fromHash=function t(T){if(T===I)return E;return new n((O.call(T,0)|O.call(T,1)<<8|O.call(T,2)<<16|O.call(T,3)<<24)>>>0,(O.call(T,4)|O.call(T,5)<<8|O.call(T,6)<<16|O.call(T,7)<<24)>>>0)};n.prototype.toHash=function t(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};n.prototype.zzEncode=function t(){var T=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^T)>>>0;this.lo=(this.lo<<1^T)>>>0;return this};n.prototype.zzDecode=function t(){var T=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^T)>>>0;this.hi=(this.hi>>>1^T)>>>0;return this};n.prototype.length=function t(){var T=this.lo,m=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return _===0?m===0?T<16384?T<128?1:2:T<2097152?3:4:m<16384?m<128?5:6:m<2097152?7:8:_<128?9:10}},{15:15}],15:[function(T,m,_){"use strict";var S=_;S.asPromise=T(1);S.base64=T(2);S.EventEmitter=T(3);S.float=T(4);S.inquire=T(5);S.utf8=T(7);S.pool=T(6);S.LongBits=T(14);S.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);S.global=S.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;S.emptyArray=Object.freeze?Object.freeze([]):[];S.emptyObject=Object.freeze?Object.freeze({}):{};S.isInteger=Number.isInteger||function t(T){return typeof T==="number"&&isFinite(T)&&Math.floor(T)===T};S.isString=function t(T){return typeof T==="string"||T instanceof String};S.isObject=function t(T){return T&&typeof T==="object"};S.isset=S.isSet=function t(T,m){var _=T[m];if(_!=null&&T.hasOwnProperty(m))return typeof _!=="object"||(Array.isArray(_)?_.length:Object.keys(_).length)>0;return false};S.Buffer=function(){try{var T=S.inquire("buffer").Buffer;return T.prototype.utf8Write?T:null}catch(T){return null}}();S._Buffer_from=null;S._Buffer_allocUnsafe=null;S.newBuffer=function t(T){return typeof T==="number"?S.Buffer?S._Buffer_allocUnsafe(T):new S.Array(T):S.Buffer?S._Buffer_from(T):typeof Uint8Array==="undefined"?T:new Uint8Array(T)};S.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;S.Long=S.global.dcodeIO&&S.global.dcodeIO.Long||S.global.Long||S.inquire("long");S.key2Re=/^true|false|0|1$/;S.key32Re=/^-?(?:0|[1-9][0-9]*)$/;S.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;S.longToHash=function t(T){return T?S.LongBits.from(T).toHash():S.LongBits.zeroHash};S.longFromHash=function t(T,m){var _=S.LongBits.fromHash(T);if(S.Long)return S.Long.fromBits(_.lo,_.hi,m);return _.toNumber(Boolean(m))};function n(T,m,_){for(var S=Object.keys(m),E=0;E<S.length;++E)if(T[S[E]]===undefined||!_)T[S[E]]=m[S[E]];return T}S.merge=n;S.lcFirst=function t(T){return T.charAt(0).toLowerCase()+T.substring(1)};function o(T){function e(T,m){if(!(this instanceof e))return new e(T,m);Object.defineProperty(this,"message",{get:function(){return T}});if(Error.captureStackTrace)Error.captureStackTrace(this,e);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(m)n(this,m)}e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:true,enumerable:false,configurable:true},name:{get(){return T},set:undefined,enumerable:false,configurable:true},toString:{value(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}});return e}S.newError=o;S.ProtocolError=o("ProtocolError");S.oneOfGetter=function t(T){var m={};for(var _=0;_<T.length;++_)m[T[_]]=1;return function(){for(var T=Object.keys(this),_=T.length-1;_>-1;--_)if(m[T[_]]===1&&this[T[_]]!==undefined&&this[T[_]]!==null)return T[_]}};S.oneOfSetter=function t(T){return function(m){for(var _=0;_<T.length;++_)if(T[_]!==m)delete this[T[_]]}};S.toJSONOptions={longs:String,enums:String,bytes:String,json:true};S._configure=function(){var T=S.Buffer;if(!T){S._Buffer_from=S._Buffer_allocUnsafe=null;return}S._Buffer_from=T.from!==Uint8Array.from&&T.from||function e(m,_){return new T(m,_)};S._Buffer_allocUnsafe=T.allocUnsafe||function e(m){return new T(m)}}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(T,m,_){"use strict";m.exports=a;var S=T(15);var E;var I=S.LongBits,O=S.base64,R=S.utf8;function f(T,m,_){this.fn=T;this.len=m;this.next=undefined;this.val=_}function h(){}function l(T){this.head=T.head;this.tail=T.tail;this.len=T.len;this.next=T.states}function a(){this.len=0;this.head=new f(h,0,0);this.tail=this.head;this.states=null}var N=function t(){return S.Buffer?function t(){return(a.create=function t(){return new E})()}:function t(){return new a}};a.create=N();a.alloc=function t(T){return new S.Array(T)};if(S.Array!==Array)a.alloc=S.pool(a.alloc,S.Array.prototype.subarray);a.prototype._push=function t(T,m,_){this.tail=this.tail.next=new f(T,m,_);this.len+=m;return this};function p(T,m,_){m[_]=T&255}function d(T,m,_){while(T>127){m[_++]=T&127|128;T>>>=7}m[_]=T}function y(T,m){this.len=T;this.next=undefined;this.val=m}y.prototype=Object.create(f.prototype);y.prototype.fn=d;a.prototype.uint32=function t(T){this.len+=(this.tail=this.tail.next=new y((T=T>>>0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len;return this};a.prototype.int32=function t(T){return T<0?this._push(b,10,I.fromNumber(T)):this.uint32(T)};a.prototype.sint32=function t(T){return this.uint32((T<<1^T>>31)>>>0)};function b(T,m,_){while(T.hi){m[_++]=T.lo&127|128;T.lo=(T.lo>>>7|T.hi<<25)>>>0;T.hi>>>=7}while(T.lo>127){m[_++]=T.lo&127|128;T.lo=T.lo>>>7}m[_++]=T.lo}a.prototype.uint64=function t(T){var m=I.from(T);return this._push(b,m.length(),m)};a.prototype.int64=a.prototype.uint64;a.prototype.sint64=function t(T){var m=I.from(T).zzEncode();return this._push(b,m.length(),m)};a.prototype.bool=function t(T){return this._push(p,1,T?1:0)};function g(T,m,_){m[_]=T&255;m[_+1]=T>>>8&255;m[_+2]=T>>>16&255;m[_+3]=T>>>24}a.prototype.fixed32=function t(T){return this._push(g,4,T>>>0)};a.prototype.sfixed32=a.prototype.fixed32;a.prototype.fixed64=function t(T){var m=I.from(T);return this._push(g,4,m.lo)._push(g,4,m.hi)};a.prototype.sfixed64=a.prototype.fixed64;a.prototype.float=function t(T){return this._push(S.float.writeFloatLE,4,T)};a.prototype.double=function t(T){return this._push(S.float.writeDoubleLE,8,T)};var A=S.Array.prototype.set?function t(T,m,_){m.set(T,_)}:function t(T,m,_){for(var S=0;S<T.length;++S)m[_+S]=T[S]};a.prototype.bytes=function t(T){var m=T.length>>>0;if(!m)return this._push(p,1,0);if(S.isString(T)){var _=a.alloc(m=O.length(T));O.decode(T,_,0);T=_}return this.uint32(m)._push(A,m,T)};a.prototype.string=function t(T){var m=R.length(T);return m?this.uint32(m)._push(R.write,m,T):this._push(p,1,0)};a.prototype.fork=function t(){this.states=new l(this);this.head=this.tail=new f(h,0,0);this.len=0;return this};a.prototype.reset=function t(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new f(h,0,0);this.len=0}return this};a.prototype.ldelim=function t(){var T=this.head,m=this.tail,_=this.len;this.reset().uint32(_);if(_){this.tail.next=T.next;this.tail=m;this.len+=_}return this};a.prototype.finish=function t(){var T=this.head.next,m=this.constructor.alloc(this.len),_=0;while(T){T.fn(T.val,m,_);_+=T.len;T=T.next}return m};a._configure=function(T){E=T;a.create=N();E._configure()}},{15:15}],17:[function(T,m,_){"use strict";m.exports=o;var S=T(16);(o.prototype=Object.create(S.prototype)).constructor=o;var E=T(15);function o(){S.call(this)}o._configure=function(){o.alloc=E._Buffer_allocUnsafe;o.writeBytesBuffer=E.Buffer&&E.Buffer.prototype instanceof Uint8Array&&E.Buffer.prototype.set.name==="set"?function t(T,m,_){m.set(T,_)}:function t(T,m,_){if(T.copy)T.copy(m,_,0,T.length);else for(var S=0;S<T.length;)m[_++]=T[S++]}};o.prototype.bytes=function t(T){if(E.isString(T))T=E._Buffer_from(T,"base64");var m=T.length>>>0;this.uint32(m);if(m)this._push(o.writeBytesBuffer,m,T);return this};function s(T,m,_){if(T.length<40)E.utf8.write(T,m,_);else if(m.utf8Write)m.utf8Write(T,_);else m.write(T,_)}o.prototype.string=function t(T){var m=E.Buffer.byteLength(T);this.uint32(m);if(m)this._push(s,m,T);return this};o._configure()},{15:15,16:16}]},{},[8])})();const __WEBPACK_DEFAULT_EXPORT__=protobuf}};var __webpack_module_cache__={};function __nccwpck_require__(T){var m=__webpack_module_cache__[T];if(m!==undefined){return m.exports}var _=__webpack_module_cache__[T]={id:T,loaded:false,exports:{}};var S=true;try{__webpack_modules__[T](_,_.exports,__nccwpck_require__);S=false}finally{if(S)delete __webpack_module_cache__[T]}_.loaded=true;return _.exports}(()=>{__nccwpck_require__.d=(T,m)=>{for(var _ in m){if(__nccwpck_require__.o(m,_)&&!__nccwpck_require__.o(T,_)){Object.defineProperty(T,_,{enumerable:true,get:m[_]})}}}})();(()=>{__nccwpck_require__.hmd=T=>{T=Object.create(T);if(!T.children)T.children=[];Object.defineProperty(T,"exports",{enumerable:true,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+T.id)}});return T}})();(()=>{__nccwpck_require__.o=(T,m)=>Object.prototype.hasOwnProperty.call(T,m)})();(()=>{__nccwpck_require__.r=T=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(T,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(T,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";__nccwpck_require__.r(__webpack_exports__);__nccwpck_require__.d(__webpack_exports__,{default:()=>pr,toNumber:()=>toNumber,toQuotation:()=>toQuotation});const T={NOT_READY:"not-ready",READY:"ready",OPERATION_STARTED:"operation-started",OPERATION_ENDED:"operation-ended",OPERATION_FAILED:"operation-failed"};const m={OK:"ok",OLD:"old",OFF:"off"};const _={PASSWORD:"password",KEY:"key"};const S={OK:"ok",FAILED:"failed"};const E={SUPABASE:"supabase",PUSHER:"pusher",ASTRADB:"astradb",SEATABLE:"seatable",NORTHFLANK:"northflank",RENDER:"render",REDIS:"redis",CLOUDFLARE:"cloudflare",POSTGRESQL:"postgresql",BITIO:"bitio",YC:"yc"};const I={PPP_ASPIRANT_WORKER:"ppp-aspirant-worker",CLOUDFLARE_WORKER:"cloudflare-worker",CLOUD_PPP_ASPIRANT:"cloud-ppp-aspirant",DEPLOYED_PPP_ASPIRANT:"deployed-ppp-aspirant",SYSTEMD_PPP_ASPIRANT:"systemd-ppp-aspirant",SUPABASE_PARSER:"supabase-parser",NYSE_NSDQ_HALTS:"nyse-nsdq-halts"};const O={ACTIVE:"active",STOPPED:"stopped",FAILED:"failed"};const R={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",MOEX:"MOEX",SPBX:"SPBX",US:"US",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",RUS:"RUS",CUSTOM:"CUSTOM",MOEX_SECURITIES:"MOEX_SECURITIES",MOEX_FX_METALS:"MOEX_FX_METALS",MOEX_FORTS:"MOEX_FORTS",CAPITALCOM:"CAPITALCOM"};const N=[R.BINANCE,R.BYBIT_SPOT,R.BYBIT_LINEAR];const A={ALPACA:"alpaca",ALOR:"alor",TINKOFF:"tinkoff",UTEX:"utex",PSINA:"psina",BINANCE:"binance",HUOBI:"huobi",BYBIT:"bybit",MEXC:"mexc",FINAM:"finam",IB:"ib",CAPITALCOM:"capitalcom"};const P={MARKET_DATA_RECORDER:"market-data-recorder",STOP_LOSS_TAKE_PROFIT:"stop-loss-take-profit",CUSTOM:"custom"};const C={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",PSINA_US_STOCKS:"PSINA_US_STOCKS",ALOR_SPBX:"ALOR_SPBX",ALOR_MOEX_SECURITIES:"ALOR_MOEX_SECURITIES",ALOR_MOEX_FX_METALS:"ALOR_MOEX_FX_METALS",ALOR_FORTS:"ALOR_FORTS",TINKOFF:"TINKOFF",FINAM:"FINAM",ALPACA:"ALPACA",IB:"IB",CAPITALCOM:"CAPITALCOM"};const k={TICK:"TICK","1s":"1s","5s":"5s","15s":"15s","30s":"30s","1m":"1m","2m":"2m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1D":"1D","1W":"1W","1M":"1M","1Q":"1Q","1Y":"1Y"};const U={ALOR_OPENAPI_V2:"alor-openapi-v2",ALPACA_V2_PLUS:"alpaca-v2-plus",TINKOFF_GRPC_WEB:"tinkoff-grpc-web",IB:"ib",CAPITALCOM:"capitalcom",UTEX_MARGIN_STOCKS:"utex-margin-stocks",BINANCE_V3:"binance-v3",MEXC_V3:"mexc-v3",BYBIT_V5:"bybit-v5",FINAM_TRADE_API:"finam-trade-api",PAPER_TRADE:"paper-trade",COMBINED_L1:"combined-l1",COMBINED_ORDERBOOK:"combined-orderbook",CUSTOM:"custom"};const D={CAPS_LIMIT_ORDERS:"caps-limit-orders",CAPS_MARKET_ORDERS:"caps-marker-orders",CAPS_ACTIVE_ORDERS:"caps-active-orders",CAPS_ORDERBOOK:"caps-orderbook",CAPS_TIME_AND_SALES:"caps-time-and-sales",CAPS_POSITIONS:"caps-positions",CAPS_TIMELINE:"caps-timeline",CAPS_LEVEL1:"caps-level1",CAPS_EXTENDED_LEVEL1:"caps-extended-level1",CAPS_CHARTS:"caps-charts",CAPS_MIC:"caps-mic",CAPS_ORDER_DESTINATION:"caps-order-destination",CAPS_ORDER_TIF:"caps-order-tif",CAPS_ORDER_DISPLAY_SIZE:"caps-order-display-size",CAPS_US_NBBO:"caps-us-nbbo",CAPS_NSDQ_TOTALVIEW:"caps-nsdq-totalview",CAPS_ARCABOOK:"caps-arcabook",CAPS_BLUEATS:"caps-blueats",CAPS_NYSE_OPENBOOK:"caps-nyse-openbook",CAPS_DIRECTEDGE_BOOK:"caps-directedge-book",CAPS_BZX_BOOK:"caps-bzx-book",CAPS_NOII:"caps-noii"};const w={TRADER:"trader",DAY_VOLUME:"day-volume",STATUS:"status",TRADING_STATUS:"trading-status",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",BEST_BID:"best-bid",BEST_ASK:"best-ask",MIDPOINT:"midpoint",ORDERBOOK:"orderbook",MARKET_PRINT:"market-print",POSITION:"position",POSITION_SIZE:"position-size",POSITION_AVERAGE:"position-average",ACTIVE_ORDER:"active-order",CONDITIONAL_ORDER:"conditional-order",TIMELINE_ITEM:"timeline-item",CANDLE:"candle",NOII:"noii",SPRINT:"sprint",LOCATE:"locate"};const B={INSTRUMENT:"instrument",SYMBOL:"symbol",INSTRUMENT_TYPE:"instrument-type",POSITION_AVAILABLE:"position-available",POSITION_AVERAGE:"position-average",TOTAL_AMOUNT:"total-amount",EXTENDED_TOTAL_AMOUNT:"extended-total-amount",BEST_BID:"best-bid",BEST_ASK:"best-ask",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",PL_ABSOLUTE:"pl-absolute",PL_RELATIVE:"pl-relative",EXTENDED_PL_ABSOLUTE:"extended-pl-absolute",EXTENDED_PL_RELATIVE:"extended-pl-relative",DAY_VOLUME:"day-volume",TRADING_STATUS:"trading-status",FORMATTED_VALUE:"formatted-value"};const L={ORDER:"order",SCALPING_BUTTONS:"scalping-buttons",ACTIVE_ORDERS:"active-orders",LIGHT_CHART:"light-chart",ORDERBOOK:"orderbook",TIME_AND_SALES:"time-and-sales",PORTFOLIO:"portfolio",BALANCES:"balances",LIST:"list",TIMELINE:"timeline",CLOCK:"clock",MARQUEE:"marquee",TCC:"tcc",FRAME:"frame",NOII:"noii",MIGRATION:"migration",OTHER:"other"};let v;(function(T){T[T["OPERATION_TYPE_UNSPECIFIED"]=0]="OPERATION_TYPE_UNSPECIFIED";T[T["OPERATION_TYPE_INPUT"]=1]="OPERATION_TYPE_INPUT";T[T["OPERATION_TYPE_BOND_TAX"]=2]="OPERATION_TYPE_BOND_TAX";T[T["OPERATION_TYPE_OUTPUT_SECURITIES"]=3]="OPERATION_TYPE_OUTPUT_SECURITIES";T[T["OPERATION_TYPE_OVERNIGHT"]=4]="OPERATION_TYPE_OVERNIGHT";T[T["OPERATION_TYPE_TAX"]=5]="OPERATION_TYPE_TAX";T[T["OPERATION_TYPE_BOND_REPAYMENT_FULL"]=6]="OPERATION_TYPE_BOND_REPAYMENT_FULL";T[T["OPERATION_TYPE_SELL_CARD"]=7]="OPERATION_TYPE_SELL_CARD";T[T["OPERATION_TYPE_DIVIDEND_TAX"]=8]="OPERATION_TYPE_DIVIDEND_TAX";T[T["OPERATION_TYPE_OUTPUT"]=9]="OPERATION_TYPE_OUTPUT";T[T["OPERATION_TYPE_BOND_REPAYMENT"]=10]="OPERATION_TYPE_BOND_REPAYMENT";T[T["OPERATION_TYPE_TAX_CORRECTION"]=11]="OPERATION_TYPE_TAX_CORRECTION";T[T["OPERATION_TYPE_SERVICE_FEE"]=12]="OPERATION_TYPE_SERVICE_FEE";T[T["OPERATION_TYPE_BENEFIT_TAX"]=13]="OPERATION_TYPE_BENEFIT_TAX";T[T["OPERATION_TYPE_MARGIN_FEE"]=14]="OPERATION_TYPE_MARGIN_FEE";T[T["OPERATION_TYPE_BUY"]=15]="OPERATION_TYPE_BUY";T[T["OPERATION_TYPE_BUY_CARD"]=16]="OPERATION_TYPE_BUY_CARD";T[T["OPERATION_TYPE_INPUT_SECURITIES"]=17]="OPERATION_TYPE_INPUT_SECURITIES";T[T["OPERATION_TYPE_SELL_MARGIN"]=18]="OPERATION_TYPE_SELL_MARGIN";T[T["OPERATION_TYPE_BROKER_FEE"]=19]="OPERATION_TYPE_BROKER_FEE";T[T["OPERATION_TYPE_BUY_MARGIN"]=20]="OPERATION_TYPE_BUY_MARGIN";T[T["OPERATION_TYPE_DIVIDEND"]=21]="OPERATION_TYPE_DIVIDEND";T[T["OPERATION_TYPE_SELL"]=22]="OPERATION_TYPE_SELL";T[T["OPERATION_TYPE_COUPON"]=23]="OPERATION_TYPE_COUPON";T[T["OPERATION_TYPE_SUCCESS_FEE"]=24]="OPERATION_TYPE_SUCCESS_FEE";T[T["OPERATION_TYPE_DIVIDEND_TRANSFER"]=25]="OPERATION_TYPE_DIVIDEND_TRANSFER";T[T["OPERATION_TYPE_ACCRUING_VARMARGIN"]=26]="OPERATION_TYPE_ACCRUING_VARMARGIN";T[T["OPERATION_TYPE_WRITING_OFF_VARMARGIN"]=27]="OPERATION_TYPE_WRITING_OFF_VARMARGIN";T[T["OPERATION_TYPE_DELIVERY_BUY"]=28]="OPERATION_TYPE_DELIVERY_BUY";T[T["OPERATION_TYPE_DELIVERY_SELL"]=29]="OPERATION_TYPE_DELIVERY_SELL";T[T["OPERATION_TYPE_TRACK_MFEE"]=30]="OPERATION_TYPE_TRACK_MFEE";T[T["OPERATION_TYPE_TRACK_PFEE"]=31]="OPERATION_TYPE_TRACK_PFEE";T[T["OPERATION_TYPE_TAX_PROGRESSIVE"]=32]="OPERATION_TYPE_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BOND_TAX_PROGRESSIVE"]=33]="OPERATION_TYPE_BOND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE"]=34]="OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE"]=35]="OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE"]=36]="OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_PROGRESSIVE"]=37]="OPERATION_TYPE_TAX_REPO_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO"]=38]="OPERATION_TYPE_TAX_REPO";T[T["OPERATION_TYPE_TAX_REPO_HOLD"]=39]="OPERATION_TYPE_TAX_REPO_HOLD";T[T["OPERATION_TYPE_TAX_REPO_REFUND"]=40]="OPERATION_TYPE_TAX_REPO_REFUND";T[T["OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE"]=41]="OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE"]=42]="OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";T[T["OPERATION_TYPE_DIV_EXT"]=43]="OPERATION_TYPE_DIV_EXT";T[T["OPERATION_TYPE_TAX_CORRECTION_COUPON"]=44]="OPERATION_TYPE_TAX_CORRECTION_COUPON";T[T["OPERATION_TYPE_CASH_FEE"]=45]="OPERATION_TYPE_CASH_FEE";T[T["OPERATION_TYPE_OUT_FEE"]=46]="OPERATION_TYPE_OUT_FEE";T[T["OPERATION_TYPE_OUT_STAMP_DUTY"]=47]="OPERATION_TYPE_OUT_STAMP_DUTY";T[T["OPERATION_TYPE_OUTPUT_SWIFT"]=50]="OPERATION_TYPE_OUTPUT_SWIFT";T[T["OPERATION_TYPE_INPUT_SWIFT"]=51]="OPERATION_TYPE_INPUT_SWIFT";T[T["OPERATION_TYPE_OUTPUT_ACQUIRING"]=53]="OPERATION_TYPE_OUTPUT_ACQUIRING";T[T["OPERATION_TYPE_INPUT_ACQUIRING"]=54]="OPERATION_TYPE_INPUT_ACQUIRING";T[T["OPERATION_TYPE_OUTPUT_PENALTY"]=55]="OPERATION_TYPE_OUTPUT_PENALTY";T[T["OPERATION_TYPE_ADVICE_FEE"]=56]="OPERATION_TYPE_ADVICE_FEE";T[T["OPERATION_TYPE_TRANS_IIS_BS"]=57]="OPERATION_TYPE_TRANS_IIS_BS";T[T["OPERATION_TYPE_TRANS_BS_BS"]=58]="OPERATION_TYPE_TRANS_BS_BS";T[T["OPERATION_TYPE_OUT_MULTI"]=59]="OPERATION_TYPE_OUT_MULTI";T[T["OPERATION_TYPE_INP_MULTI"]=60]="OPERATION_TYPE_INP_MULTI";T[T["OPERATION_TYPE_OVER_PLACEMENT"]=61]="OPERATION_TYPE_OVER_PLACEMENT";T[T["OPERATION_TYPE_OVER_COM"]=62]="OPERATION_TYPE_OVER_COM";T[T["OPERATION_TYPE_OVER_INCOME"]=63]="OPERATION_TYPE_OVER_INCOME";T[T["OPERATION_TYPE_OPTION_EXPIRATION"]=64]="OPERATION_TYPE_OPTION_EXPIRATION";T[T["OPERATION_TYPE_LOCATE_FEE"]=800]="OPERATION_TYPE_LOCATE_FEE";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(v||(v={}));const Y={UNSPECIFIED:"UNSPECIFIED",NOT_AVAILABLE_FOR_TRADING:"NOT_AVAILABLE_FOR_TRADING",OPENING_PERIOD:"OPENING_PERIOD",CLOSING_PERIOD:"CLOSING_PERIOD",BREAK_IN_TRADING:"BREAK_IN_TRADING",NORMAL_TRADING:"NORMAL_TRADING",CLOSING_AUCTION:"CLOSING_AUCTION",DARK_POOL_AUCTION:"DARK_POOL_AUCTION",DISCRETE_AUCTION:"DISCRETE_AUCTION",OPENING_AUCTION_PERIOD:"OPENING_AUCTION_PERIOD",TRADING_AT_CLOSING_AUCTION_PRICE:"TRADING_AT_CLOSING_AUCTION_PRICE",SESSION_ASSIGNED:"SESSION_ASSIGNED",SESSION_CLOSE:"SESSION_CLOSE",SESSION_OPEN:"SESSION_OPEN",DEALER_NORMAL_TRADING:"DEALER_NORMAL_TRADING",DEALER_BREAK_IN_TRADING:"DEALER_BREAK_IN_TRADING",DEALER_NOT_AVAILABLE_FOR_TRADING:"DEALER_NOT_AVAILABLE_FOR_TRADING",PREMARKET:"PREMARKET",AFTER_HOURS:"AFTER_HOURS",TRADING_SUSPENDED:"TRADING_SUSPENDED",DELISTED:"DELISTED",IPO_TODAY:"IPO_TODAY"};function isPredefinedWidgetType(T){return[L.ORDER,L.SCALPING_BUTTONS,L.ACTIVE_ORDERS,L.LIGHT_CHART,L.ORDERBOOK,L.TIME_AND_SALES,L.PORTFOLIO,L.BALANCES,L.LIST,L.TIMELINE,L.CLOCK,L.MARQUEE,L.TCC].includes(T)}function getInstrumentDictionaryMeta(T){let m;let _;let S;switch(T){case C.BYBIT_LINEAR:m=R.BYBIT_LINEAR;_=A.BYBIT;S=[R.BYBIT_LINEAR];break;case C.BYBIT_SPOT:m=R.BYBIT_SPOT;_=A.BYBIT;S=[R.BYBIT_SPOT];break;case C.BINANCE:m=R.BINANCE;_=A.BINANCE;S=[R.BINANCE];break;case C.UTEX_MARGIN_STOCKS:m=R.UTEX_MARGIN_STOCKS;_=A.UTEX;S=[R.UTEX_MARGIN_STOCKS];break;case C.ALPACA:m=R.US;_=A.ALPACA;S=[R.ALPACA];break;case C.IB:m=R.CUSTOM;_=A.IB;S=[R.US];break;case C.PSINA_US_STOCKS:m=R.US;_=A.PSINA;S=[R.US];break;case C.ALOR_SPBX:m=R.SPBX;_=A.ALOR;S=[R.SPBX];break;case C.ALOR_MOEX_SECURITIES:m=R.MOEX_SECURITIES;_=A.ALOR;S=[R.MOEX];break;case C.ALOR_MOEX_FX_METALS:m=R.MOEX_FX_METALS;_=A.ALOR;S=[R.MOEX];break;case C.ALOR_FORTS:m=R.MOEX_FORTS;_=A.ALOR;S=[R.MOEX];break;case C.TINKOFF:m=R.RUS;_=A.TINKOFF;S=[R.MOEX,R.SPBX];break;case C.FINAM:m=R.CUSTOM;_=A.FINAM;S=[R.MOEX,R.US,R.SPBX];break;case C.CAPITALCOM:m=R.CAPITALCOM;_=A.CAPITALCOM;S=[R.CAPITALCOM];break}return{exchange:m,broker:_,exchangeList:S}}if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.ppp??={i18nLocale:"en-US"}}const F=null&&["EUR","AMD","KZT","KGS","UZS","USD","CNY","TJS","BYN","HKD","XAU","TRY","XAG","RUB"];function stringToFloat(T){if(typeof T==="number"){return T}if(!T){return 0}if(T.includes(",")&&T.includes(".")){T=T.replaceAll(/,/gi,"")}return parseFloat(T.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,""))}function decimalSeparator(){const T=1.1;return Intl.NumberFormat(ppp.i18nLocale).formatToParts(T).find((T=>T.type==="decimal")).value}const M=decimalSeparator();function getInstrumentMinPriceIncrement(T,m,_){if(!T)return 0;if(typeof m!=="number"||isNaN(m))return T.minPriceIncrement||.01;m=stringToFloat(m);let S=T.minPriceIncrement;if(!S||_){S=m<1?1e-4:.01}return S}function getInstrumentPrecision(T,m,_){if(!T)return 0;if(T.type==="currency"){return 4}if(m===0||m==="0"){return 2}const S=getInstrumentMinPriceIncrement(T,m,_);const[E,I]=S.toString().split(".");return I?I.length:0}function getInstrumentQuantityPrecision(T){if(!T)return 0;const[m,_]=(T.minQuantityIncrement??0).toString().split(".");return _?_.length:0}function formatDateWithOptions(T,m={}){if(!T)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,Object.assign({hour12:false},m)).format(new Date(T))}function formatDate(T){if(!T)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}).format(new Date(T))}function formatDuration(T=0,m={}){if(typeof T!=="number")return"—";return new Date(T*1e3).toLocaleTimeString(ppp.i18nLocale,Object.assign({timeZone:"Etc/UTC",hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"},m))}function formatPrice(T,m,_={}){if(!m||typeof T!=="number"||isNaN(T))return"—";if(!m.currency)return"—";const S=getInstrumentPrecision(m,T);if(m.type==="future"||m.type==="index"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S}).format(T)+" pt."}if(!F.includes(m?.currency)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S},_)).format(T)+(m.currency==="N/A"?"":` ${m.currency}`)}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",currency:m.currency,minimumFractionDigits:S,maximumFractionDigits:S},_)).format(T)+` ${priceCurrencySymbol(m)}`}function formatPriceWithoutCurrency(T,m,_){if(typeof m==="undefined"){return(T||"").toString().replace(".",M)}if(typeof T!=="number"||isNaN(T))return"—";const S=getInstrumentPrecision(m,T,_);return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S}).format(T)}function formatCommission(T,m,_={}){if(!m||typeof T!=="number"||isNaN(T))return"—";if(!m.currency)return"—";if(F.indexOf(m?.currency)===-1){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:3},_)).format(T)+` ${m.currency}`}return new Intl.NumberFormat(ppp.i18nLocale,{style:"currency",currency:m.currency,minimumFractionDigits:2,maximumFractionDigits:3}).format(T)}function formatAmount(T,m={},_={}){const S=m.currency??m.quoteCryptoAsset;if(!S||typeof T!=="number"||isNaN(T))return"—";if(m.type==="future"){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal"},_)).format(T)+" пт."}if(!F.includes(S)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:0},_)).format(T)+` ${S}`}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"currency",minimumFractionDigits:0,currency:S},_)).format(T)}function formatAbsoluteChange(T,m,_={}){if(!m||typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:Math.max(2,getInstrumentPrecision(m,T)),signDisplay:"always"},_)).format(T)}function formatRelativeChange(T,m={}){if(typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"always"},m)).format(T)}function formatPercentage(T){if(typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:3}).format(T)}function formatQuantity(T,m){if(typeof T!=="number"||isNaN(T))return"—";let _=0;if(typeof m?.minQuantityIncrement==="number"){const[T,S]=m.minQuantityIncrement.toString().split(".");_=S?.length??0}return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:_,maximumFractionDigits:_}).format(T)}function cyrillicToLatin(T){if(/^\p{Script=Cyrillic}+$/u.test(T)){const m='QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>~';const _="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁ";const S={};for(let T=0;T<_.length;T++){S[_[T]]=m[T]}return T.split("").map((T=>S[T.toUpperCase()])).join("")}else{return T}}function latinToCyrillic(T){if(/[a-z]+/i.test(T)){const m="QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>~,.`'[];";const _="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁБЮЁЭХЪЖ";const S={};for(let T=0;T<_.length;T++){S[m[T]]=_[T]}return T.split("").map((T=>S[T.toUpperCase()])).join("")}else{return T}}function priceCurrencySymbol(T){if(T?.type==="future"||T?.type==="index")return"pt.";if(T?.type==="cryptocurrency")return T.quoteCryptoAsset;if(T?.currency==="USDT")return"USDT";if(T?.currency&&T.currency!=="N/A"){return(0).toLocaleString(ppp.i18nLocale,{style:"currency",currency:T.currency,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim()}else return""}function currencyName(T){if(F.indexOf(T)===-1){return T}if(!T)return"—";const m=new Intl.DisplayNames([ppp.i18nLocale],{type:"currency"});return m.of(T)}function isDST(){const T=new Date;const m=T.getFullYear();const _=new Date(m,2,1);const S=(7-_.getDay())%7;const E=_.getDate()+S+7;const I=new Date(m,2,E);const O=new Date(m,10,1);const R=(7-O.getDay())%7;const N=O.getDate()+R;const A=new Date(m,10,N);return T.getTime()<=A.getTime()&&T.getTime()>=I.getTime()}function formatFileSize(T,{si:m=true,dp:_=1,useIntl:S=false}={}){if(S){return new Intl.NumberFormat(ppp.i18nLocale,{style:"unit",unit:"byte",notation:"compact",unitDisplay:"narrow"}).format(T)}const E=m?1e3:1024;if(Math.abs(T)<E){return T+" B"}const I=m?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let O=-1;const R=10**_;do{T/=E;++O}while(Math.round(Math.abs(T)*R)/R>=E&&O<I.length-1);return T.toFixed(_)+" "+I[O]}function formatNumber(T,m={}){return new Intl.NumberFormat(ppp.i18nLocale,m).format(T)}function formatVolume(T,m={}){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",notation:"compact",minimumFractionDigits:1,maximumFractionDigits:2},m)).format(T)}function parseDistance(T=""){let m="";T=T.trim();if(T.endsWith("%")){m="%"}else if(T.endsWith("+")){m="+"}T=T.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,"");let _=parseFloat(T);if(m==="+"){_=Math.trunc(_)}if(isNaN(_)){return{}}return{value:_,unit:m}}function distanceToString({value:T,unit:m}={}){if(typeof T==="undefined"){return""}if(m==="%"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:2}).format(T/100)}else if(m==="+"){return`${Math.trunc(T)} +`}else{return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal"}).format(T)}}class ConflictError extends Error{constructor({message:T="Conflict.",href:m,status:_=409,pppMessage:S}={}){super(T);this.name=this.constructor.name;this.status=_;this.href=m;this.pppMessage=S}}class AllocationNotFoundError extends Error{constructor({message:T}={}){super(T);this.name=this.constructor.name}}class DocumentNotFoundError extends Error{constructor({message:T,documentId:m}={}){super(T);this.name=this.constructor.name;this.documentId=m}}class ValidationError extends Error{constructor({message:T,status:m=422,element:_}={}){super(T);this.name="ValidationError";this.element=_;this.status=m}}class FetchError extends Error{constructor({message:T="Fetch failed.",status:m=400,pppMessage:_}={}){super(T);this.name=this.constructor.name;this.status=m;this.pppMessage=_}}async function maybeFetchError(T,m){let _,S;if(typeof T==="function"){const m=await T();_=m.ok;S=m.response}else{_=T.ok;S=T}if(!_){throw new FetchError({...S,...{message:await S.text(),pppMessage:m}})}else return S}class TradingError extends Error{constructor({message:T="Trading error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}serialize(){return{name:this.name,args:{message:this.message,details:this.details}}}}class RemoteTraderError extends Error{constructor({message:T="Trader error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}serialize(){return{name:this.name,args:{message:this.message,details:this.details}}}}class AuthorizationError extends Error{constructor({message:T="Authorization error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}}class ConnectionLimitExceededError extends Error{constructor({message:T="Connection limit exceeded."}={}){super(T);this.name=this.constructor.name}}class TraderTrinityError extends Error{constructor({message:T="Trader trinity error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}}class ConnectionError extends Error{constructor({message:T="Connection error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}}class UTEXBlockError extends Error{constructor({message:T="UTEX block error.",details:m}={}){super(T);this.name=this.constructor.name;this.details=m}}class NoInstrumentsError extends Error{constructor({message:T="No instruments.",trader:m,currentCacheVersion:_,lastCacheVersion:S}={}){super(T);this.name=this.constructor.name;this.trader=m;this.currentCacheVersion=_;this.lastCacheVersion=S}}class StaleInstrumentCacheError extends Error{constructor({message:T="Stale instrument cache.",trader:m,currentCacheVersion:_,lastCacheVersion:S}={}){super(T);this.name=this.constructor.name;this.trader=m;this.currentCacheVersion=_;this.lastCacheVersion=S}}class EventBus{#e={};isValidType(T){return typeof T==="string"}isValidHandler(T){return typeof T==="function"}on(T,m){if(!T||!m)return false;if(!this.isValidType(T))return false;if(!this.isValidHandler(m))return false;let _=this.#e[T];if(!_)_=this.#e[T]=[];if(_.indexOf(m)>=0)return false;m._once=false;_.push(m);return true}once(T,m){if(!T||!m)return false;if(!this.isValidType(T))return false;if(!this.isValidHandler(m))return false;const _=this.on(T,m);if(_){m._once=true}return _}off(T,m){if(!T)return this.offAll();if(!m){this.#e[T]=[];return}if(!this.isValidType(T))return;if(!this.isValidHandler(m))return;const _=this.#e[T];if(!_||!_.length)return;for(let T=0;T<_.length;T++){const S=_[T];if(S===m){_.splice(T,1);break}}}offAll(){this.#e={}}emit(T,m){if(!T||!this.isValidType(T))return;const _=this.#e[T];if(!_||!_.length)return;const S=this.createEvent(T,m);for(const m of _){if(!this.isValidHandler(m))continue;if(m._once)S.once=true;m(S);if(S.once)this.off(T,m)}}has(T,m){if(!T||!this.isValidType(T))return false;const _=this.#e[T];if(!_||!_.length)return false;if(!m||!this.isValidHandler(m))return true;return _.indexOf(m)>=0}getHandlers(T){if(!T||!this.isValidType(T))return[];return this.#e[T]||[]}createEvent(T,m,_=false){const S={type:T,detail:m,timestamp:Date.now(),once:_};return S}}function $throttle(T,m){let _=false,S,E;function wrapper(){if(_){S=arguments;E=this;return}T.apply(this,arguments);_=true;setTimeout((function(){_=false;if(S){wrapper.apply(E,S);S=E=null}}),m)}return wrapper}function $debounce(T,m){let _;return function(){clearTimeout(_);_=setTimeout((()=>T.apply(this,arguments)),m)}}function throttle(T=0){return(m,_,S)=>{if(!S||typeof S.value!=="function"){throw new Error("throttle can only decorate functions.")}const E=S.value;S.value=$throttle(E,T);Object.defineProperty(m,_,S)}}function debounce(T=0){return(m,_,S)=>{if(!S||typeof S.value!=="function"){throw new Error("debounce can only decorate functions.")}const E=S.value;S.value=$debounce(E,T);Object.defineProperty(m,_,S)}}async function later(T){return new Promise((function(m){setTimeout(m,T)}))}function unsupportedInstrument(T=""){return{symbol:T,fullName:"Инструмент не поддерживается",notSupported:true}}class TraderDatum{sources={};refs=new Map;values=new Map;#t=new Map;trader;doNotSaveValue;constructor(T){this.trader=T}filter(T,m,_,S){return true}hasSource(T){for(const m in this.sources){if(this.sources[m].has(T)){return true}}return false}dataArrived(T,m,_={}){if(!m){return}if(this.doNotSaveValue!==true&&_.doNotSaveValue!==true){const S=this.trader.getSymbol(m);if(typeof _.saveSlot==="undefined"){this.values.set(S,T)}else if(_.saveSlot>=0){const m=this.values.get(S)??[];m[_.saveSlot]=T;this.values.set(S,m)}}for(const _ in this.sources){for(const[S,E]of this.sources[_]){if(this.trader.instrumentsAreEqual(S.instrument,m)&&this.filter(T,m,S,_)){this.trader.assignSourceField(S,E,this?.[_]?.(T,m,S)??this.emptyValue(_)??"—")}}}}emptyValue(T){switch(T){case w.CANDLE:case w.MARKET_PRINT:case w.ORDERBOOK:case w.NOII:return{};case w.TRADING_STATUS:case w.STATUS:return""}return"—"}async subscribe(T,m,_){if(!this.#t.has(T)&&T.canChangeInstrument){const listener=async({detail:T})=>{const{source:m,oldValue:_}=T;for(const T of Object.keys(this.sources)){if(this.sources[T].has(m)){const S=this.sources[T].get(m);if(_){await this.unsubscribe(m,_)}await this.subscribe(m,S,T)}}};T.addEventListener("instrumentchange",listener);this.#t.set(T,listener)}if(!T.instrument){return}const S=this.trader.getSymbol(T.instrument);const E=this.refs.get(S)??0;if(E===0){this.refs.set(S,1);return this.firstReferenceAdded?.(T,S)}else{this.refs.set(S,E+1);const I=this.values.get(S);if(!Array.isArray(I)||this.slotted===false){if(typeof I!=="undefined"){if(this.filter(I,T.instrument,T,_)){if(T.instrument){this.trader.assignSourceField(T,m,this?.[_]?.(I,T.instrument,T)??this.emptyValue(_)??"—")}else{this.trader.assignSourceField(T,m,this.emptyValue(_)??"—")}}}}else{for(const S of I){if(this.filter(S,T.instrument,T,_)){if(T.instrument&&typeof S!=="undefined"){this.trader.assignSourceField(T,m,this?.[_]?.(S,T.instrument,T)??this.emptyValue(_)??"—")}else{this.trader.assignSourceField(T,m,this.emptyValue(_)??"—")}}}}}}async unsubscribe(T,m){if(!this.hasSource(T)&&T.canChangeInstrument){const m=this.#t.get(T);if(m){T.removeEventListener("instrumentchange",m);this.#t.delete(T)}}if(!m&&!T.instrument){return}const _=this.trader.getSymbol(m??T.instrument);const S=this.refs.get(_)??0;if(S===1){this.refs.delete(_);if(this.doNotClearValue!==true){this.values.delete(_)}return this.lastReferenceRemoved?.(T,_)}else if(S>1){this.refs.set(_,Math.max(0,S-1))}}}class GlobalTraderDatum{sources={};refCount=0;trader;value=new Map;#t=new Map;doNotSaveValue;constructor(T){this.trader=T}filter(T,m,_,S){return true}dataArrived(T,m={}){const _=this.valueKeyForData(T);if(typeof _!=="undefined"){if(this.doNotSaveValue!==true&&m.doNotSaveValue!==true){this.value.set(_,T)}for(const m in this.sources){for(const[S,E]of this.sources[m]){if(this.filter(T,S,_,m)){if(this.manualAssignment!==true){this.trader.assignSourceField(S,E,this?.[m]?.(T,S,_,E)??this.emptyValue(m)??"—")}else{this?.[m]?.(T,S,_,E)}}}}}else{console.log("No key for data: ",T)}}emptyValue(T){switch(T){case w.POSITION_SIZE:return 0;case w.POSITION_AVERAGE:return 0;case w.POSITION:case w.ACTIVE_ORDER:case w.TIMELINE_ITEM:case w.TRADER:return{}}return"—"}valueKeyForData(T){return T?.symbol}async subscribe(T,m,_){if(!this.#t.has(T)&&T.canChangeInstrument){const listener=async({detail:T})=>{const{source:m}=T;for(const T of Object.keys(this.sources)){if(this.sources[T].has(m)){const _=this.sources[T].get(m);this.trader.assignSourceField(m,_,this.emptyValue(T));for(const[S,E]of this.value){if(this.filter(E,m,S,T)){if(this.manualAssignment!==true){this.trader.assignSourceField(m,_,this?.[T]?.(E,m,S,_)??this.emptyValue(T)??"—")}else{this?.[T]?.(E,m,S,_)}}}}}};T.addEventListener("instrumentchange",listener);this.#t.set(T,listener)}if(this.refCount===0){this.refCount=1;return this.firstReferenceAdded?.(T,m,_)}else{this.refCount++;for(const[S,E]of this.value){if(this.filter(E,T,S,_)){if(this.manualAssignment!==true){this.trader.assignSourceField(T,m,this?.[_]?.(E,T,S,m)??this.emptyValue(_)??"—")}else{this?.[_]?.(E,T,S,m)}}}}}async unsubscribe(T,m,_){if(!this.hasSource(T)&&T.canChangeInstrument){const m=this.#t.get(T);if(m){T.removeEventListener("instrumentchange",m);this.#t.delete(T)}}if(this.refCount===1){this.refCount=0;if(this.doNotClearValue!==true){this.value.clear()}return this.lastReferenceRemoved?.(T,m,_)}else if(this.refCount>1){this.refCount--}}}class TraderEventDatum extends GlobalTraderDatum{}class ConditionalOrderDatum extends GlobalTraderDatum{async firstReferenceAdded(){for(const T of await this.trader.conditionalOrders()){this.dataArrived(T)}}valueKeyForData(T){return T?.orderId}[w.CONDITIONAL_ORDER](T){return T}}GlobalTraderDatum.prototype.hasSource=TraderDatum.prototype.hasSource;class Trader{datums={};document={};#n=new Map;get instruments(){return this.#n}#r=[];#i=[];createdAt=(new Date).toISOString();constructor(T,m=[]){this.document=T;m.forEach((({type:T,datums:m})=>{const _=new(this.getRealDatumType(T))(this);m.forEach((T=>{_.sources[T]=new Map;this.datums[T]=_}));this.#r.push(_)}))}getRealDatumType(T){return T}call(T){return T}serialize(){return{createdAt:this.createdAt,document:this.document,broker:this.getBroker(),dictionary:this.getDictionary(),exchange:this.getExchange(),observedAttributes:this.getObservedAttributes()}}async placeConditionalOrder({instrument:T,direction:m,payload:_,implUrl:S,code:E}){if(!_?.orderId){throw new TradingError({message:"Missing payload.orderId.",details:{instrument:T,direction:m,payload:_}})}const I=_.order.singleton;let O;if(typeof S==="string"){if(I==="global"){O=this.#i.find((T=>T.orderId===_.orderId))}else if(I==="instrument"){O=this.#i.find((m=>m.payload.orderId===_.orderId&&this.instrumentsAreEqual(m.instrument,T)))}if(!O){const{default:T}=await __nccwpck_require__(930)(`${S}?t=${Date.now()}`);O=new T;this.#i.push(O)}return O.place({mainTrader:this,instrument:T,direction:m,payload:_})}else if(typeof E==="string"&&typeof process!=="undefined"&&process.release.name==="node"){if(I==="global"){O=this.#i.find((T=>T.orderId===_.orderId))}else if(I==="instrument"){O=this.#i.find((m=>m.payload.orderId===_.orderId&&this.instrumentsAreEqual(m.instrument,T)))}if(!O){let S;globalThis.pppOrderInstanceForWorkerRecv=T=>S=T;try{globalThis.vm.runInThisContext(E,{filename:_.orderId})}finally{globalThis.pppOrderInstanceForWorkerRecv=null}if(!S){throw new TradingError({message:"Missing pppOrderInstanceForWorkerRecv.",details:{instrument:T,direction:m,payload:_}})}O=new S;this.#i.push(O)}return O.place({mainTrader:this,instrument:T,direction:m,payload:_})}}conditionalOrders(){const T=[];for(const m of this.#i){if(typeof m.serialize==="function"){T.push(m.serialize())}}return T}async performConditionalOrderAction(T,m,_={}){const S=this.#i.find((m=>m.orderId===T));if(typeof S[m]==="function"){return S[m](_)}}async cancelConditionalOrder(T,m={}){const _=this.#i.find((m=>m.orderId===T));if(_){this.#i.splice(this.#i.indexOf(_),1);if(typeof _.cancel==="function"){return _.cancel(m)}}}async cancelAllConditionalOrders({instrument:T,filter:m,payload:_={}}={}){const S=[];for(const T of this.#i){S.push({orderId:T.orderId,instrument:T.instrument,side:T.side})}for(const E of S){if(T&&!this.instrumentsAreEqual(E.instrument,T)){continue}if(m==="buy"&&E.side!=="buy"){continue}if(m==="sell"&&E.side!=="sell"){continue}void this.cancelConditionalOrder(E.orderId,_)}}async instrumentsArrived(T){this.#n=T}async subscribeField({source:T,field:m,datum:_}){const S=this.datums[_];if(typeof S!=="undefined"){if(!S.sources[_].has(T)){S.sources[_].set(T,m);return S.subscribe(T,m,_)}}}async subscribeFields({source:T,fieldDatumPairs:m={}}){for(const[_,S]of Object.entries(m)){if(typeof S==="string"){await this.subscribeField({source:T,field:_,datum:S})}else if(typeof S==="object"){await this.subscribeField({source:T,field:_,datum:S.datum})}}}async unsubscribeField({source:T,datum:m}){const _=this.datums[m];if(typeof _!=="undefined"){if(_.sources[m].has(T)){_.sources[m].delete(T);return _.unsubscribe(T)}}}async unsubscribeFields({source:T,fieldDatumPairs:m={}}){for(const[_,S]of Object.entries(m)){await this.unsubscribeField({source:T,field:_,datum:S})}}async resubscribe(T=[]){const m=[];for(const _ of this.#r){for(const S of Object.keys(_.sources)){for(const[E,I]of _.sources[S]){if(!T.length||T.includes(S)){m.push({source:E,field:I,datum:S})}}}}for(const{source:T,field:_,datum:S}of m){await this.unsubscribeField({source:T,field:_,datum:S})}for(const{source:T,field:_,datum:S}of m){await this.subscribeField({source:T,field:_,datum:S})}}async estimate(){return{}}assignSourceField(T,m,_){switch(this.document.runtime){case"main-thread":T[m]=_;break;case"shared-worker":if(T.mainTrader&&T.mainTrader.document._id===self.pppTrader.document._id){T[m]=_;return}T.port.postMessage({type:"assign",sourceID:T.sourceID,field:m,value:_});break;case"url":if(T.mainTrader&&T.ws?.trader&&T.mainTrader.document._id===T.ws.trader.document._id){T[m]=_;return}!T.ws.closed&&T.ws.send(JSON.stringify([{T:"assign",sourceID:T.sourceID,field:m,value:_}]));break}}traderEvent(T={}){if(this.datums[w.TRADER]){for(const[m,_]of this.datums[w.TRADER].sources[w.TRADER]){this.assignSourceField(m,_,T)}}}relativeBondPriceToPrice(T,m){return this.fixPrice(m,T*m.nominal/100)}bondPriceToRelativeBondPrice(T,m){return+(T*100/m.nominal).toFixed(2)}caps(){return this.document.caps??[]}hasCap(T){const m=this.caps();if(typeof T==="string")return m.indexOf(T)>-1;else if(Array.isArray(T))return T.every((T=>m.indexOf(T)>-1));else return false}fixPrice(T,m){m=stringToFloat(m);const _=getInstrumentPrecision(T,m);if(!m||isNaN(m))m=0;const S=getInstrumentMinPriceIncrement(T,m);m=Math.round(m/S)*S;return+m.toFixed(_)}calcDistantPrice(T,m,_,S="down"){if(S!=="down"&&S!=="up"){S="down"}if(!T){return 0}m=stringToFloat(m);if(!m||isNaN(m)){return 0}let E=0;if(_.value>0){if(_.unit==="+"){const I=getInstrumentMinPriceIncrement(T,m)*_.value;E=S==="down"?m-I:m+I}else if(_.unit==="%"){E=S==="down"?m-m*_.value/100:m+m*_.value/100}else{E=Math.max(0,S==="down"?m-_.value:m+_.value)}if(E>0){return this.fixPrice(T,E)}else{return 0}}else{return m}}getSymbol(T={}){let m=T.symbol;if(!m)return"";if(/~/gi.test(m))m=m.split("~")[0];return m}adoptInstrument(T={},m={}){const _=this.#n.get(T.symbol)??{};let S=T.symbol===_.symbol;if(T.exchange===R.MOEX&&_.exchange!==R.MOEX){S=false}if(_.exchange===R.MOEX&&T.exchange!==R.MOEX){S=false}if(S){return _}else{return unsupportedInstrument(T.symbol)}}instrumentsAreEqual(T,m){const _=this.adoptInstrument(T);const S=this.adoptInstrument(m);return _.symbol===S.symbol&&_.exchange===S.exchange}getBroker(){return"*"}getDictionary(){return null}getExchange(){return"*"}getObservedAttributes(){return[]}getInstrumentIconUrl(T){if(!T||T?.symbol==="PRN"){return"static/instruments/unknown.svg"}if(T?.type==="currency"){return`static/currency/${T.symbol.slice(0,3)}.svg`}let m=T?.symbol;if(m==="TCS"&&T.exchange===R.SPBX){return"static/instruments/stocks/rus/TCSG.svg"}if((T.symbol==="GOLD"||T.symbol==="GOLD~MOEX")&&T.exchange===R.MOEX){return"static/instruments/etfs/rus/GOLD.svg"}if(typeof m==="string"){m=m.split("/")[0].split("-")[0].split("-RM")[0];if(m.endsWith("@GS")||m.endsWith("@DE")||m.endsWith("@GR")||m.endsWith("@UR")||m.endsWith("@KT")){return"static/instruments/unknown.svg"}m=m.split("@US")[0]}if(T?.currency==="HKD"){return`static/instruments/stocks/hk/${m.replace(" ","-")}.svg`}if(T?.currency==="CNY"){return`static/instruments/${T?.type}s/cny/${m.replace(" ","-")}.svg`}const _=T?.symbol?.endsWith("-RM");if(!_){if(T?.exchange===R.MOEX||T?.currency==="RUB"){return`static/instruments/${T?.type}s/rus/${m.replace(" ","-")}.svg`}}if((T?.exchange===R.SPBX||_)&&m!=="TCS"){return`static/instruments/stocks/us/${m.replace(" ","-")}.svg`}if(T?.exchange===R.US){return`static/instruments/stocks/us/${m.replace(" ","-").split("~")[0]}.svg`}return"static/instruments/unknown.svg"}search(T=""){let m=null;const _=[];const S=[];const E=[];const I=[];const O=T.trim().replaceAll(/[^~a-z0-9\.\s\u0400-\u04FF]/gi,"").toUpperCase();const R=cyrillicToLatin(O);const N=latinToCyrillic(O);if(typeof this.instrumentsSearchIndex==="undefined"){this.instrumentsSearchIndex=[];for(const[T,m]of this.instruments){if(T){const T=this.getSymbol(m);const _=T.length;this.instrumentsSearchIndex[_]??={};this.instrumentsSearchIndex[_][T]??=[];this.instrumentsSearchIndex[_][T].push(m)}}}if(O.length){for(const T of this.instrumentsSearchIndex){if(T){for(const A in T){for(const P of T[A]){if(P.removed)continue;let T=P.symbol.replaceAll(/[^~a-z0-9\s\u0400-\u04FF]/gi,"").toUpperCase();const A=this.getSymbol(P);const C=P.fullName.toUpperCase();if((T===O||A===O)&&m===null){m=P}if(_.length<10&&(T.startsWith(O)||T.startsWith(R)||T.startsWith(N))){_.push(P)}if(E.length<10&&(C.startsWith(O)||C.startsWith(R)||C.startsWith(N))){E.push(P)}if(S.length<10&&(new RegExp(O,"ig").test(T)||new RegExp(R,"ig").test(T)||new RegExp(N,"ig").test(T))){S.push(P)}if(C&&I.length<10&&(new RegExp(O,"ig").test(C)||new RegExp(R,"ig").test(C)||new RegExp(N,"ig").test(C))){I.push(P)}}}}}}return{exactSymbolMatch:m,startsWithSymbolMatches:_,regexSymbolMatches:S.sort(((T,m)=>T.fullName.localeCompare(m.fullName))),startsWithFullNameMatches:E.sort(((T,m)=>T.fullName.localeCompare(m.fullName))),regexFullNameMatches:I.sort(((T,m)=>T.fullName.localeCompare(m.fullName)))}}}class USTrader extends(null&&Trader){adoptInstrument(T={}){if(![EXCHANGE.SPBX,EXCHANGE.US,EXCHANGE.UTEX_MARGIN_STOCKS].includes(T.exchange)){return unsupportedInstrument(T.symbol)}if(T.symbol==="SPB@US"){return this.instruments.get("SPB")}if(T.symbol==="TCS"&&T.exchange===EXCHANGE.SPBX){return unsupportedInstrument(T.symbol)}let m=true;["FIVE","CARM","ASTR","GOLD"].forEach((_=>{if(this.getSymbol(T)===_&&T.exchange===EXCHANGE.MOEX){m=false}}));if(!m){return unsupportedInstrument(T.symbol)}if(T.symbol?.endsWith("~US")){return super.adoptInstrument({...T,...{symbol:T.symbol.replace("~US","")}})}return super.adoptInstrument(T)}getInstrumentIconUrl(T){if(!T){return"static/instruments/unknown.svg"}if(T.symbol==="PRN"){return"static/instruments/stocks/us/PRN@US.svg"}if(T.currency==="USD"||T.currency==="USDT"){return`static/instruments/stocks/us/${T.symbol.replace(" ","-").replace("/","-")}.svg`}return super.getInstrumentIconUrl(T)}}function pppTraderInstanceForWorkerIs(T){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.pppTraderInstance??=T}else if(typeof process!=="undefined"&&process.release.name==="node"){globalThis.pppTraderInstanceForWorkerRecv?.(T)}}class RemoteSource{bus=new EventBus;port;sourceID;canChangeInstrument;constructor(T,m,_){this.sourceID=T;this.canChangeInstrument=!!m;this.port=_}instrument;attributes=new Map;getAttribute(T){return this.attributes.get(T)}addEventListener(T,m){return this.bus.on(T,m)}removeEventListener(T,m){return this.bus.off(T,m)}}class RemoteTraderRuntime{document;#s;#o;#a;#u;#d;#c;#f=new Map;get worker(){return this.#a}constructor(T){this.document=T;if(this.document.runtime==="url"){const T=new URL(this.document.runtimeUrl);if(T.protocol==="http:"){T.protocol="ws:"}else{T.protocol="wss:"}this.#c=new URL(T).toString()}}#l(){if(typeof this.#d==="undefined"){this.#d=100}else{this.#d+=100;if(this.#d>500){this.#d=500}}return this.#d}#T(T){if(this.#u?.readyState===WebSocket.OPEN){this.#o=void 0;return this.#u}else if(this.#o){return this.#o}else{return this.#o=new Promise((m=>{if(!T&&this.#u){m(this.#u)}else{this.#u=new WebSocket(this.#c);this.#u.onclose=async()=>{this.#u.onopen=null;this.#u.onclose=null;this.#u.onerror=null;this.#u.onmessage=null;await later(this.#l());this.#o=void 0;return this.#T(true)};this.#u.onerror=()=>this.#u.close();this.#u.onmessage=({data:T})=>{if(this.#u.readyState!==WebSocket.OPEN){return}const _=JSON.parse(T);if(Array.isArray(_)){for(const T of _){if(T.T==="ready"){return m(this.#u)}else if(T.T==="success"&&T.msg==="connected"){return this.#u.send(JSON.stringify({T:"connack",_id:this.document._id}))}else if(T.T==="assign"){const m=this.#f.get(T.sourceID);if(m?.sourceID===T.sourceID){m[T.field]=T.value}}}}}}}))}}async subscribeField({source:T,field:m,datum:_}){if(this.document.runtime==="shared-worker"){const S=new MessageChannel;S.port1.onmessage=({data:m})=>{if(m?.type==="assign"){if(T.sourceID===m.sourceID){T[m.field]=m.value}}};self.pppPorts[0].postMessage({type:"shared-worker-subscribe-field",document:this.document,port2:S.port2,sourceID:T.sourceID,instrument:T.instrument,canChangeInstrument:T.canChangeInstrument,field:m,datum:_},[S.port2])}else if(this.document.runtime==="url"){await this.#T();this.#u.send(JSON.stringify({T:"source-changed",sourceID:T.sourceID,reason:"instrument",oldValue:null,newValue:T.instrument,canChangeInstrument:T.canChangeInstrument,doNotFire:true}));this.#f.set(T.sourceID,T);return this.#u.send(JSON.stringify({T:"subscribe-field",sourceID:T.sourceID,field:m,datum:_,canChangeInstrument:T.canChangeInstrument}))}}async subscribeFields({source:T,fieldDatumPairs:m={}}){for(const[_,S]of Object.entries(m)){if(typeof S==="string"){await this.subscribeField({source:T,field:_,datum:S})}else if(typeof S==="object"){await this.subscribeField({source:T,field:_,datum:S.datum})}}}async unsubscribeField({source:T,field:m,datum:_}){if(this.document.runtime==="shared-worker"){return self.pppPorts[0].postMessage({type:"shared-worker-unsubscribe-field",document:this.document,sourceID:T.sourceID,field:m,datum:_})}else if(this.document.runtime==="url"){await this.#T();return this.#u.send(JSON.stringify({T:"unsubscribe-field",sourceID:T.sourceID,field:m,datum:_}))}}async unsubscribeFields({source:T,fieldDatumPairs:m={}}){for(const[_,S]of Object.entries(m)){await this.unsubscribeField({source:T,field:_,datum:S})}}async resubscribe(T=[]){if(this.document.runtime==="shared-worker"){return self.pppPorts[0].postMessage({type:"shared-worker-resubscribe",document:this.document,onlyForDatums:T})}else if(this.document.runtime==="url"){await this.#T();return this.#u.send(JSON.stringify({T:"resubscribe",onlyForDatums:T}))}}async loadSharedOrRemoteTrader(){if(this.#s){return this.#s}else{switch(this.document.runtime){case"main-thread":return null;case"shared-worker":if(this.document._id===self.pppTrader?.document?._id){return self.pppTrader}return this.#s=new Promise((T=>{const m=new MessageChannel;const _=setTimeout((()=>T(null)),5e3);m.port1.onmessage=({data:m})=>{if(m.type==="shared-worker-created"){clearTimeout(_);T(this)}};self.pppPorts[0].postMessage({type:"shared-worker-needed",document:this.document,port2:m.port2},[m.port2])}));case"url":await this.#T();return this}}}}class RemoteTradersFromSharedWorker{runtimes=new Map;async getOrCreateTrader(T){if(T){if(T.runtime==="main-thread"){return null}if(!this.runtimes.has(T._id)){this.runtimes.set(T._id,new RemoteTraderRuntime(T))}return this.runtimes.get(T._id).loadSharedOrRemoteTrader()}}}if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.ppp=new class{traders=new RemoteTradersFromSharedWorker;async getOrCreateTrader(T){return this.traders.getOrCreateTrader(T)}async fetch(T,m={},_=[]){const S=self.globalProxyUrl;if(S){const E=new URL(T);m.headers??={};m.headers["X-Host"]=E.hostname;for(const T of Object.keys(m.headers)){const m=T.toLowerCase();if(m==="x-host"){continue}if(!_.includes(m)){_.push(T)}}m.headers["X-Allowed-Headers"]=_.join(",");E.hostname=new URL(S).hostname;return fetch(E.toString(),m)}else{return fetch(T,m)}}};self.sessionStorage=new class{#p=new Map;getItem(T){return this.#p.get(T)}setItem(T,m){this.#p.set(T,m)}removeItem(T){this.#p.delete(T)}};self.pppSources=new Map;self.pppPortSources=new WeakMap;self.pppPorts=[];self.onconnect=T=>{const m=T.ports[0];self.pppPortSources.set(m,new Set);const multiPurposeEventListener=async({data:T})=>{if(T?.type==="close"){const T=self.pppPorts.indexOf(m);if(T>-1){self.pppPorts.splice(T,1)}m.removeEventListener("message",multiPurposeEventListener);if(self.pppPortSources.has(m)){for(const T of self.pppPortSources.get(m)){for(const m in self.pppTrader.datums){const _=self.pppTrader.datums[m].sources[m];if(_.has(T)){await self.pppTrader.unsubscribeField({source:T,datum:m})}}}self.pppPortSources.delete(m)}}else if(T?.type==="connack"){if(typeof self.pppTrader==="undefined"){self.pppTrader=new self.pppTraderInstance(T.document);self.globalProxyUrl=T.globalProxyUrl;self.rootUrl=T.rootUrl;await __nccwpck_require__(723)(`${self.rootUrl}/lib/debug.js`);self.pppTrader.$$debug??=globalThis.ppp.$debug(T.document._id);self.pppTrader.$$connection??=self.pppTrader.$$debug.extend("connection");if(typeof self.pppTrader.oneTimeInitializationCallback==="function"){await self.pppTrader.oneTimeInitializationCallback()}}m.postMessage({type:"init"})}else if(T?.type==="instruments"){if(typeof self.pppTrader!=="undefined"){await(self.pppTrader.instrumentsArrived?.(T.instruments));m.postMessage({type:"ready"})}}else if(T?.type==="rpc"){try{m.postMessage({type:`rpc-${T.requestId}`,response:await self.pppTrader[T.method](...T.args)})}catch(_){m.postMessage({type:`rpc-${T.requestId}`,exception:_.serialize?.()??{name:_.name??"RemoteTraderError",args:{details:_.name,message:_.message}}})}}else if(T?.type==="source-changed"){if(!self.pppSources.has(T.sourceID)){self.pppSources.set(T.sourceID,new RemoteSource(T.sourceID,T.canChangeInstrument,T.port2??m));if(!T.port2){self.pppPortSources.get(m).add(self.pppSources.get(T.sourceID))}}const _=self.pppSources.get(T.sourceID);switch(T.reason){case"attribute":_.attributes.set(T.attribute,T.value);break;case"instrument":_.instrument=T.newValue;if(!T.doNotFire){_.bus.emit("instrumentchange",{source:_,oldValue:T.oldValue,newValue:T.newValue})}break}}else if(T?.type==="subscribe-field"){const _=self.pppSources.get(T.sourceID);if(_){try{await self.pppTrader.subscribeField({source:_,field:T.field,datum:T.datum})}catch(_){console.error(_);m.postMessage({type:"subscription-exception",sourceKey:`${T.sourceID}:${T.field}`,exception:_.serialize?.()??{name:_.name??"RemoteTraderError",args:{details:_.name,message:_.message}}})}}}else if(T?.type==="unsubscribe-field"){const m=self.pppSources.get(T.sourceID);if(m){self.pppTrader.unsubscribeField({source:m,field:T.field,datum:T.datum})}}else if(T?.type==="resubscribe"){self.pppTrader.resubscribe(T.onlyForDatums??[])}else if(T?.type==="terminate"){m.removeEventListener("message",multiPurposeEventListener);self.close()}};m.addEventListener("message",multiPurposeEventListener);!self.pppPorts.includes(m)&&self.pppPorts.push(m);m.start();m.postMessage({type:"conn"})}}function composeClientMiddleware(T,m){return(_,S)=>m({..._,next:(m,S)=>T({..._,request:m},S)},S)}function fromGrpcWebServiceDefinition(T){const m={};for(const[_,S]of Object.entries(T)){if(_==="serviceName"){continue}const E=S;m[uncapitalize(_)]={path:`/${T.serviceName}/${_}`,requestStream:E.requestStream,responseStream:E.responseStream,requestDeserialize:E.requestType.deserializeBinary,requestSerialize:T=>T.serializeBinary(),responseDeserialize:E.responseType.deserializeBinary,responseSerialize:T=>T.serializeBinary(),options:{}}}return m}function isGrpcWebServiceDefinition(T){return"prototype"in T}function uncapitalize(T){if(T.length===0){return T}return T[0].toLowerCase()+T.slice(1)}function fromTsProtoServiceDefinition(T){const m={};for(const[_,S]of Object.entries(T.methods)){const E=S.requestType.encode;const I=S.requestType.fromPartial;const O=S.responseType.encode;const R=S.responseType.fromPartial;m[_]={path:`/${T.fullName}/${S.name}`,requestStream:S.requestStream,responseStream:S.responseStream,requestDeserialize:S.requestType.decode,requestSerialize:I!=null?T=>E(I(T)).finish():T=>E(T).finish(),responseDeserialize:S.responseType.decode,responseSerialize:R!=null?T=>O(R(T)).finish():T=>O(T).finish(),options:S.options}}return m}function isTsProtoServiceDefinition(T){return"name"in T&&"fullName"in T&&"methods"in T}function normalizeServiceDefinition(T){if(isGrpcWebServiceDefinition(T)){return fromGrpcWebServiceDefinition(T)}else if(isTsProtoServiceDefinition(T)){return fromTsProtoServiceDefinition(T)}else{return T}}function toGrpcWebMethodDefinition(T){const[,m,_]=T.path.split("/");return{service:{serviceName:m},methodName:_,requestStream:T.requestStream,responseStream:T.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(m){return T.requestDeserialize(m)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(m){return T.responseDeserialize(m)}}}}var J;(function(T){T[T["OK"]=0]="OK";T[T["CANCELLED"]=1]="CANCELLED";T[T["UNKNOWN"]=2]="UNKNOWN";T[T["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT";T[T["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED";T[T["NOT_FOUND"]=5]="NOT_FOUND";T[T["ALREADY_EXISTS"]=6]="ALREADY_EXISTS";T[T["PERMISSION_DENIED"]=7]="PERMISSION_DENIED";T[T["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED";T[T["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION";T[T["ABORTED"]=10]="ABORTED";T[T["OUT_OF_RANGE"]=11]="OUT_OF_RANGE";T[T["UNIMPLEMENTED"]=12]="UNIMPLEMENTED";T[T["INTERNAL"]=13]="INTERNAL";T[T["UNAVAILABLE"]=14]="UNAVAILABLE";T[T["DATA_LOSS"]=15]="DATA_LOSS";T[T["UNAUTHENTICATED"]=16]="UNAUTHENTICATED"})(J||(J={}));class ExtendableError extends Error{constructor(...T){super(...T);const m=T.length>0&&typeof T[0]==="string"?T[0]:"";if(this.name===undefined||this.name==="Error"){Object.defineProperty(this,"name",{configurable:true,enumerable:false,value:this.constructor.name,writable:true})}Object.defineProperty(this,"message",{configurable:true,enumerable:false,value:m,writable:true});Object.defineProperty(this,"stack",{configurable:true,enumerable:false,value:"",writable:true});if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else if(this.stack===""){this.stack=new Error(m).stack}}}class ClientError extends ExtendableError{constructor(T,m,_){super(`${T} ${J[m]}: ${_}`);this.path=T;this.code=m;this.details=_;this.name="ClientError";Object.defineProperty(this,"@@nice-grpc",{value:true});Object.defineProperty(this,"@@nice-grpc:ClientError",{value:true})}static[Symbol.hasInstance](T){if(this!==ClientError){return this.prototype.isPrototypeOf(T)}return typeof T==="object"&&T!==null&&(T.constructor===ClientError||T["@@nice-grpc:ClientError"]===true||T.name==="ClientError"&&T["@@nice-grpc"]===true)}}const G=function Metadata(T){const m=new Map;const _={set(T,S){T=normalizeKey(T);if(Array.isArray(S)){if(S.length===0){m.delete(T)}else{for(const m of S){validate(T,m)}m.set(T,T.endsWith("-bin")?S:[S.join(", ")])}}else{validate(T,S);m.set(T,[S])}return _},append(T,S){T=normalizeKey(T);validate(T,S);let E=m.get(T);if(E==null){E=[];m.set(T,E)}E.push(S);if(!T.endsWith("-bin")){m.set(T,[E.join(", ")])}return _},delete(T){T=normalizeKey(T);m.delete(T)},get(T){T=normalizeKey(T);return m.get(T)?.[0]},getAll(T){T=normalizeKey(T);return m.get(T)??[]},has(T){T=normalizeKey(T);return m.has(T)},[Symbol.iterator](){return m[Symbol.iterator]()}};if(T!=null){const m=isIterable(T)?T:Object.entries(T);for(const[T,S]of m){_.set(T,S)}}return _};function normalizeKey(T){return T.toLowerCase()}function validate(T,m){if(!/^[0-9a-z_.-]+$/.test(T)){throw new Error(`Metadata key '${T}' contains illegal characters`)}if(T.endsWith("-bin")){if(!(m instanceof Uint8Array)){throw new Error(`Metadata key '${T}' ends with '-bin', thus it must have binary value`)}}else{if(typeof m!=="string"){throw new Error(`Metadata key '${T}' doesn't end with '-bin', thus it must have string value`)}if(!/^[ -~]*$/.test(m)){throw new Error(`Metadata value '${m}' of key '${T}' contains illegal characters`)}}}function isIterable(T){return Symbol.iterator in T}function iterateHeaders(T,m){const _=T[Symbol.iterator]();let S=_.next();while(!S.done){m(S.value[0]);S=_.next()}}function iterateHeadersKeys(T,m){const _=T.keys();let S=_.next();while(!S.done){m(S.value);S=_.next()}}function normalizeName(T){if(typeof T!=="string"){T=String(T)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(T)){throw new TypeError("Invalid character in header field name")}return T.toLowerCase()}function normalizeValue(T){if(typeof T!=="string"){T=String(T)}return T}function getHeaderValues(T,m){const _=toWindowHeaders(T);if(_ instanceof Headers&&_.getAll){return _.getAll(m)}const S=_.get(m);if(S&&typeof S==="string"){return[S]}return S}function toWindowHeaders(T){return T}function getHeaderKeys(T){const m=toWindowHeaders(T);const _={};const S=[];if(m.keys){iterateHeadersKeys(m,(T=>{if(!_[T]){_[T]=true;S.push(T)}}))}else if(m.forEach){m.forEach(((T,m)=>{if(!_[m]){_[m]=true;S.push(m)}}))}else{iterateHeaders(m,(T=>{const m=T[0];if(!_[m]){_[m]=true;S.push(m)}}))}return S}function splitHeaderValue(T){const m=[];const _=T.split(", ");_.forEach((T=>{T.split(",").forEach((T=>{m.push(T)}))}));return m}function isBrowserHeaders(T){return typeof T==="object"&&typeof T.headersMap==="object"&&typeof T.forEach==="function"}class BrowserHeaders{constructor(T={},m={splitValues:false}){this.headersMap={};if(T){if(typeof Headers!=="undefined"&&T instanceof Headers){const _=getHeaderKeys(T);_.forEach((_=>{const S=getHeaderValues(T,_);S.forEach((T=>{if(m.splitValues){this.append(_,splitHeaderValue(T))}else{this.append(_,T)}}))}))}else if(isBrowserHeaders(T)){T.forEach(((T,m)=>{this.append(T,m)}))}else if(typeof Map!=="undefined"&&T instanceof Map){const m=T;m.forEach(((T,m)=>{this.append(m,T)}))}else if(typeof T==="string"){this.appendFromString(T)}else if(typeof T==="object"){Object.getOwnPropertyNames(T).forEach((m=>{const _=T;const S=_[m];if(Array.isArray(S)){S.forEach((T=>{this.append(m,T)}))}else{this.append(m,S)}}))}}}appendFromString(T){const m=T.split("\r\n");for(let T=0;T<m.length;T++){const _=m[T];const S=_.indexOf(":");if(S>0){const T=_.substring(0,S).trim();const m=_.substring(S+1).trim();this.append(T,m)}}}delete(T,m){const _=normalizeName(T);if(m===undefined){delete this.headersMap[_]}else{const T=this.headersMap[_];if(T){const S=T.indexOf(m);if(S>=0){T.splice(S,1)}if(T.length===0){delete this.headersMap[_]}}}}append(T,m){const _=normalizeName(T);if(!Array.isArray(this.headersMap[_])){this.headersMap[_]=[]}if(Array.isArray(m)){m.forEach((T=>{this.headersMap[_].push(normalizeValue(T))}))}else{this.headersMap[_].push(normalizeValue(m))}}set(T,m){const _=normalizeName(T);if(Array.isArray(m)){const T=[];m.forEach((m=>{T.push(normalizeValue(m))}));this.headersMap[_]=T}else{this.headersMap[_]=[normalizeValue(m)]}}has(T,m){const _=this.headersMap[normalizeName(T)];const S=Array.isArray(_);if(!S){return false}if(m!==undefined){const T=normalizeValue(m);return _.indexOf(T)>=0}else{return true}}get(T){const m=this.headersMap[normalizeName(T)];if(m!==undefined){return m.concat()}return[]}forEach(T){Object.getOwnPropertyNames(this.headersMap).forEach((m=>{T(m,this.headersMap[m])}),this)}toHeaders(){if(typeof Headers!=="undefined"){const T=new Headers;this.forEach(((m,_)=>{_.forEach((_=>{T.append(m,_)}))}));return T}else{throw new Error("Headers class is not defined")}}}function debug(...T){console.log.apply(null,T)}function FetchReadableStreamTransport(T){return m=>fetchRequest(m,T)}function fetchRequest(T,m){T.debug&&debug("fetchRequest",T);return new Fetch(T,m)}class Fetch{constructor(T,m){this.cancelled=false;this.controller=self.AbortController&&new AbortController;this.options=T;this.init=m}pump(T,m){this.reader=T;if(this.cancelled){this.options.debug&&debug("Fetch.pump.cancel at first pump");this.reader.cancel().catch((T=>{this.options.debug&&debug("Fetch.pump.reader.cancel exception",T)}));return}this.reader.read().then((T=>{if(T.done){this.options.onEnd();return m}this.options.onChunk(T.value);this.pump(this.reader,m)})).catch((T=>{if(this.cancelled){this.options.debug&&debug("Fetch.catch - request cancelled");return}this.cancelled=true;this.options.debug&&debug("Fetch.catch",T.message);this.options.onEnd(T)}))}send(T){fetch(this.options.url,{...this.init,headers:this.metadata.toHeaders(),method:"POST",body:T,signal:this.controller&&this.controller.signal}).then((T=>{this.options.debug&&debug("Fetch.response",T);this.options.onHeaders(new BrowserHeaders(T.headers),T.status);if(T.body){this.pump(T.body.getReader(),T);return}return T})).catch((T=>{if(this.cancelled){this.options.debug&&debug("Fetch.catch - request cancelled");return}this.cancelled=true;this.options.debug&&debug("Fetch.catch",T.message);this.options.onEnd(T)}))}sendMessage(T){this.send(T)}finishSend(){}start(T){this.metadata=T}cancel(){if(this.cancelled){this.options.debug&&debug("Fetch.cancel already cancelled");return}this.cancelled=true;if(this.controller){this.options.debug&&debug("Fetch.cancel.controller.abort");this.controller.abort()}else{this.options.debug&&debug("Fetch.cancel.missing abort controller")}if(this.reader){this.options.debug&&debug("Fetch.cancel.reader.cancel");this.reader.cancel().catch((T=>{this.options.debug&&debug("Fetch.cancel.reader.cancel exception",T)}))}else{this.options.debug&&debug("Fetch.cancel before reader")}}}function CrossBrowserHttpTransport(T){const m={credentials:T.withCredentials?"include":"same-origin"};return FetchReadableStreamTransport(m)}let defaultTransportFactory=T=>CrossBrowserHttpTransport({withCredentials:false})(T);function setDefaultTransportFactory(T){defaultTransportFactory=T}function makeDefaultTransport(T){return defaultTransportFactory(T)}const x=5;const isAllowedControlChars=T=>T===9||T===10||T===13;function isValidHeaderAscii(T){return isAllowedControlChars(T)||T>=32&&T<=126}function decodeASCII(T){for(let m=0;m!==T.length;++m){if(!isValidHeaderAscii(T[m])){throw new Error("Metadata is not valid (printable) ASCII")}}return String.fromCharCode(...Array.prototype.slice.call(T))}function encodeASCII(T){const m=new Uint8Array(T.length);for(let _=0;_!==T.length;++_){const S=T.charCodeAt(_);if(!isValidHeaderAscii(S)){throw new Error("Metadata contains invalid ASCII")}m[_]=S}return m}function isTrailerHeader(T){return(T.getUint8(0)&128)===128}function parseTrailerData(T){return new BrowserHeaders(decodeASCII(T))}function readLengthFromHeader(T){return T.getUint32(1,false)}function hasEnoughBytes(T,m,_){return T.byteLength-m>=_}function sliceUint8Array(T,m,_){if(T.slice){return T.slice(m,_)}let S=T.length;if(_!==undefined){S=_}const E=S-m;const I=new Uint8Array(E);let O=0;for(let _=m;_<S;_++){I[O++]=T[_]}return I}var q;(function(T){T[T["MESSAGE"]=1]="MESSAGE";T[T["TRAILERS"]=2]="TRAILERS"})(q||(q={}));class ChunkParser{constructor(){this.buffer=null;this.position=0}parse(T,m){if(T.length===0&&m){return[]}const _=[];if(this.buffer==null){this.buffer=T;this.position=0}else if(this.position===this.buffer.byteLength){this.buffer=T;this.position=0}else{const m=this.buffer.byteLength-this.position;const _=new Uint8Array(m+T.byteLength);const S=sliceUint8Array(this.buffer,this.position);_.set(S,0);const E=new Uint8Array(T);_.set(E,m);this.buffer=_;this.position=0}while(true){if(!hasEnoughBytes(this.buffer,this.position,x)){return _}let T=sliceUint8Array(this.buffer,this.position,this.position+x);const m=new DataView(T.buffer,T.byteOffset,T.byteLength);const S=readLengthFromHeader(m);if(!hasEnoughBytes(this.buffer,this.position,x+S)){return _}const E=sliceUint8Array(this.buffer,this.position+x,this.position+x+S);this.position+=x+S;if(isTrailerHeader(m)){_.push({chunkType:q.TRAILERS,trailers:parseTrailerData(E)});return _}else{_.push({chunkType:q.MESSAGE,data:E})}}}}let V;(function(T){T[T["FINISH_SEND"]=1]="FINISH_SEND"})(V||(V={}));const Z=new Uint8Array([1]);function WebsocketTransport(){return T=>websocketRequest(T)}function websocketRequest(T){T.debug&&debug("websocketRequest",T);let m=constructWebSocketAddress(T.url);const _=[];let S;function sendToWebsocket(T){if(T===V.FINISH_SEND){S.send(Z)}else{const m=T;const _=new Int8Array(m.byteLength+1);_.set(new Uint8Array([0]));_.set(m,1);S.send(_)}}return{sendMessage:T=>{if(!S||S.readyState===S.CONNECTING){_.push(T)}else{sendToWebsocket(T)}},finishSend:()=>{if(!S||S.readyState===S.CONNECTING){_.push(V.FINISH_SEND)}else{sendToWebsocket(V.FINISH_SEND)}},start:E=>{S=new WebSocket(m,["grpc-websockets"]);S.binaryType="arraybuffer";S.onopen=function(){T.debug&&debug("websocketRequest.onopen");S.send(headersToBytes(E));_.forEach((T=>{sendToWebsocket(T)}))};S.onclose=function(m){T.debug&&debug("websocketRequest.onclose",m);T.onEnd()};S.onerror=function(m){T.debug&&debug("websocketRequest.onerror",m)};S.onmessage=function(m){T.onChunk(new Uint8Array(m.data))}},cancel:()=>{T.debug&&debug("websocket.abort");S.close()}}}function constructWebSocketAddress(T){if(T.startsWith("https://")){return`wss://${T.substring(8)}`}else if(T.startsWith("http://")){return`ws://${T.substring(7)}`}throw new Error("Websocket transport constructed with non-https:// or http:// host.")}function headersToBytes(T){let m="";T.forEach(((T,_)=>{m+=`${T}: ${_.join(", ")}\r\n`}));return encodeASCII(m)}var X;(function(T){T[T["OK"]=0]="OK";T[T["Canceled"]=1]="Canceled";T[T["Unknown"]=2]="Unknown";T[T["InvalidArgument"]=3]="InvalidArgument";T[T["DeadlineExceeded"]=4]="DeadlineExceeded";T[T["NotFound"]=5]="NotFound";T[T["AlreadyExists"]=6]="AlreadyExists";T[T["PermissionDenied"]=7]="PermissionDenied";T[T["ResourceExhausted"]=8]="ResourceExhausted";T[T["FailedPrecondition"]=9]="FailedPrecondition";T[T["Aborted"]=10]="Aborted";T[T["OutOfRange"]=11]="OutOfRange";T[T["Unimplemented"]=12]="Unimplemented";T[T["Internal"]=13]="Internal";T[T["Unavailable"]=14]="Unavailable";T[T["DataLoss"]=15]="DataLoss";T[T["Unauthenticated"]=16]="Unauthenticated"})(X||(X={}));function httpStatusToCode(T){switch(T){case 0:return X.Internal;case 200:return X.OK;case 400:return X.InvalidArgument;case 401:return X.Unauthenticated;case 403:return X.PermissionDenied;case 404:return X.NotFound;case 409:return X.Aborted;case 412:return X.FailedPrecondition;case 429:return X.ResourceExhausted;case 499:return X.Canceled;case 500:return X.Unknown;case 501:return X.Unimplemented;case 503:return X.Unavailable;case 504:return X.DeadlineExceeded;default:return X.Unknown}}function frameRequest(T){const m=T.serializeBinary();const _=new ArrayBuffer(m.byteLength+5);new DataView(_,1,4).setUint32(0,m.length,false);new Uint8Array(_,5).set(m);return new Uint8Array(_)}function client_client(T,m){return new GrpcClient(T,m)}class GrpcClient{constructor(T,m){this.started=false;this.sentFirstMessage=false;this.completed=false;this.closed=false;this.finishedSending=false;this.onHeadersCallbacks=[];this.onMessageCallbacks=[];this.onEndCallbacks=[];this.parser=new ChunkParser;this.methodDefinition=T;this.props=m;this.createTransport()}createTransport(){const T=`${this.props.host}/${this.methodDefinition.service.serviceName}/${this.methodDefinition.methodName}`;const m={methodDefinition:this.methodDefinition,debug:this.props.debug||false,url:T,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};if(this.props.transport){this.transport=this.props.transport(m)}else{this.transport=makeDefaultTransport(m)}}onTransportHeaders(T,m){this.props.debug&&debug("onHeaders",T,m);if(this.closed){this.props.debug&&debug("grpc.onHeaders received after request was closed - ignoring");return}if(m===0){}else{this.responseHeaders=T;this.props.debug&&debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));const _=getStatusFromHeaders(T);this.props.debug&&debug("onHeaders.gRPCStatus",_);const S=_&&_>=0?_:httpStatusToCode(m);this.props.debug&&debug("onHeaders.code",S);const E=T.get("grpc-message")||[];this.props.debug&&debug("onHeaders.gRPCMessage",E);this.rawOnHeaders(T);if(S!==X.OK){const m=this.decodeGRPCStatus(E[0]);this.rawOnError(S,m,T)}}}onTransportChunk(T){if(this.closed){this.props.debug&&debug("grpc.onChunk received after request was closed - ignoring");return}let m=[];try{m=this.parser.parse(T)}catch(T){this.props.debug&&debug("onChunk.parsing error",T,T.message);this.rawOnError(X.Internal,`parsing error: ${T.message}`);return}m.forEach((T=>{if(T.chunkType===q.MESSAGE){const m=this.methodDefinition.responseType.deserializeBinary(T.data);this.rawOnMessage(m)}else if(T.chunkType===q.TRAILERS){if(!this.responseHeaders){this.responseHeaders=new BrowserHeaders(T.trailers);this.rawOnHeaders(this.responseHeaders)}else{this.responseTrailers=new BrowserHeaders(T.trailers);this.props.debug&&debug("onChunk.trailers",this.responseTrailers)}}}))}onTransportEnd(){this.props.debug&&debug("grpc.onEnd");if(this.closed){this.props.debug&&debug("grpc.onEnd received after request was closed - ignoring");return}if(this.responseTrailers===undefined){if(this.responseHeaders===undefined){this.rawOnError(X.Unknown,"Response closed without headers");return}const T=getStatusFromHeaders(this.responseHeaders);const m=this.responseHeaders.get("grpc-message");this.props.debug&&debug("grpc.headers only response ",T,m);if(T===null){this.rawOnEnd(X.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);return}const _=this.decodeGRPCStatus(m[0]);this.rawOnEnd(T,_,this.responseHeaders);return}const T=getStatusFromHeaders(this.responseTrailers);if(T===null){this.rawOnError(X.Internal,"Response closed without grpc-status (Trailers provided)");return}const m=this.responseTrailers.get("grpc-message");const _=this.decodeGRPCStatus(m[0]);this.rawOnEnd(T,_,this.responseTrailers)}decodeGRPCStatus(T){if(T){try{return decodeURIComponent(T)}catch(m){return T}}else{return""}}rawOnEnd(T,m,_){this.props.debug&&debug("rawOnEnd",T,m,_);if(this.completed)return;this.completed=true;this.onEndCallbacks.forEach((S=>{if(this.closed)return;try{S(T,m,_)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnHeaders(T){this.props.debug&&debug("rawOnHeaders",T);if(this.completed)return;this.onHeadersCallbacks.forEach((m=>{try{m(T)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnError(T,m,_=new BrowserHeaders){this.props.debug&&debug("rawOnError",T,m);if(this.completed)return;this.completed=true;this.onEndCallbacks.forEach((S=>{if(this.closed)return;try{S(T,m,_)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnMessage(T){this.props.debug&&debug("rawOnMessage",T.toObject());if(this.completed||this.closed)return;this.onMessageCallbacks.forEach((m=>{if(this.closed)return;try{m(T)}catch(T){setTimeout((()=>{throw T}),0)}}))}onHeaders(T){this.onHeadersCallbacks.push(T)}onMessage(T){this.onMessageCallbacks.push(T)}onEnd(T){this.onEndCallbacks.push(T)}start(T){if(this.started){throw new Error("Client already started - cannot .start()")}this.started=true;const m=new BrowserHeaders(T?T:{});m.set("content-type","application/grpc-web+proto");m.set("x-grpc-web","1");this.transport.start(m)}send(T){if(!this.started){throw new Error("Client not started - .start() must be called before .send()")}if(this.closed){throw new Error("Client already closed - cannot .send()")}if(this.finishedSending){throw new Error("Client already finished sending - cannot .send()")}if(!this.methodDefinition.requestStream&&this.sentFirstMessage){throw new Error("Message already sent for non-client-streaming method - cannot .send()")}this.sentFirstMessage=true;const m=frameRequest(T);this.transport.sendMessage(m)}finishSend(){if(!this.started){throw new Error("Client not started - .finishSend() must be called before .close()")}if(this.closed){throw new Error("Client already closed - cannot .send()")}if(this.finishedSending){throw new Error("Client already finished sending - cannot .finishSend()")}this.finishedSending=true;this.transport.finishSend()}close(){if(!this.started){throw new Error("Client not started - .start() must be called before .close()")}if(!this.closed){this.closed=true;this.props.debug&&debug("request.abort aborting request");this.transport.cancel()}else{throw new Error("Client already closed - cannot .close()")}}}function getStatusFromHeaders(T){const m=T.get("grpc-status")||[];if(m.length>0){try{const T=m[0];return parseInt(T,10)}catch(T){return null}}return null}function invoke(T,m){if(T.requestStream){throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.")}const _=client_client(T,{host:m.host,transport:m.transport,debug:m.debug});if(m.onHeaders){_.onHeaders(m.onHeaders)}if(m.onMessage){_.onMessage(m.onMessage)}if(m.onEnd){_.onEnd(m.onEnd)}_.start(m.metadata);_.send(m.request);_.finishSend();return{close:()=>{_.close()}}}function unary(T,m){if(T.responseStream){throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.")}if(T.requestStream){throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.")}let _=null;let S=null;const E=client_client(T,{host:m.host,transport:m.transport,debug:m.debug});E.onHeaders((T=>{_=T}));E.onMessage((T=>{S=T}));E.onEnd(((T,E,I)=>{m.onEnd({status:T,statusMessage:E,headers:_?_:new BrowserHeaders,message:S,trailers:I})}));E.start(m.metadata);E.send(m.request);E.finishSend();return{close:()=>{E.close()}}}var W;(function(T){T.setDefaultTransport=setDefaultTransportFactory;T.CrossBrowserHttpTransport=CrossBrowserHttpTransport;T.FetchReadableStreamTransport=FetchReadableStreamTransport;T.WebsocketTransport=WebsocketTransport;T.Code=X;T.Metadata=BrowserHeaders;function client(T,m){return client_client(T,m)}T.client=client;T.invoke=invoke;T.unary=unary})(W||(W={}));class AbortError extends Error{constructor(){super("The operation has been aborted");this.message="The operation has been aborted";this.name="AbortError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,this.constructor)}}}function isAbortError(T){return typeof T==="object"&&T!==null&&T.name==="AbortError"}function throwIfAborted(T){if(T.aborted){throw new AbortError}}function rethrowAbortError(T){if(isAbortError(T)){throw T}}function catchAbortError(T){if(isAbortError(T)){return}throw T}function execute(T,m){return new Promise(((_,S)=>{if(T.aborted){S(new AbortError);return}let E;let I=false;function finish(){if(!I){I=true;if(E!=null){E()}}}const O=m((T=>{_(T);finish()}),(T=>{S(T);finish()}));if(!I){const listener=()=>{const T=O();if(T==null){S(new AbortError)}else{T.then((()=>{S(new AbortError)}),(T=>{S(T)}))}finish()};T.addEventListener("abort",listener);E=()=>{T.removeEventListener("abort",listener)}}}))}const H="value";const K="error";class AsyncSink{constructor(){this._ended=false;this._values=[];this._resolvers=[]}[Symbol.asyncIterator](){return this}write(T){this._push({type:H,value:T})}error(T){this._push({type:K,error:T})}_push(T){if(this._ended){throw new Error("AsyncSink already ended")}if(this._resolvers.length>0){const{resolve:m,reject:_}=this._resolvers.shift();if(T.type===K){_(T.error)}else{m({done:false,value:T.value})}}else{this._values.push(T)}}next(){if(this._values.length>0){const{type:T,value:m,error:_}=this._values.shift();if(T===K){return Promise.reject(_)}else{return Promise.resolve({done:false,value:m})}}if(this._ended){return Promise.resolve({done:true})}return new Promise(((T,m)=>{this._resolvers.push({resolve:T,reject:m})}))}end(){while(this._resolvers.length>0){this._resolvers.shift().resolve({done:true})}this._ended=true}}function isAsyncIterable(T){return T!=null&&Symbol.asyncIterator in T}let z="3.7.3",j=z,$="function"==typeof atob,Q="function"==typeof btoa,ee="function"==typeof Buffer,te="function"==typeof TextDecoder?new TextDecoder:void 0,ne="function"==typeof TextEncoder?new TextEncoder:void 0,re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ie=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),se=(T=>{let m={};return T.forEach(((T,_)=>m[T]=_)),m})(ie),oe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ae=String.fromCharCode.bind(String),ue="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(T,m=(T=>T))=>new Uint8Array(Array.prototype.slice.call(T,0).map(m)),_mkUriSafe=T=>T.replace(/=/g,"").replace(/[+\/]/g,(T=>"+"==T?"-":"_")),_tidyB64=T=>T.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=T=>{let m,_,S,E,I="",O=T.length%3;for(let O=0;O<T.length;){if((_=T.charCodeAt(O++))>255||(S=T.charCodeAt(O++))>255||(E=T.charCodeAt(O++))>255)throw TypeError("invalid character found");I+=ie[(m=_<<16|S<<8|E)>>18&63]+ie[m>>12&63]+ie[m>>6&63]+ie[63&m]}return O?I.slice(0,O-3)+"===".substring(O):I},de=Q?T=>btoa(T):ee?T=>Buffer.from(T,"binary").toString("base64"):btoaPolyfill,ce=ee?T=>Buffer.from(T).toString("base64"):T=>{let m=[];for(let _=0,S=T.length;_<S;_+=4096)m.push(ae.apply(null,T.subarray(_,_+4096)));return de(m.join(""))},fromUint8Array=(T,m=!1)=>m?_mkUriSafe(ce(T)):ce(T),cb_utob=T=>{if(T.length<2){var m=T.charCodeAt(0);return m<128?T:m<2048?ae(192|m>>>6)+ae(128|63&m):ae(224|m>>>12&15)+ae(128|m>>>6&63)+ae(128|63&m)}var m=65536+(T.charCodeAt(0)-55296)*1024+(T.charCodeAt(1)-56320);return ae(240|m>>>18&7)+ae(128|m>>>12&63)+ae(128|m>>>6&63)+ae(128|63&m)},fe=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=T=>T.replace(fe,cb_utob),le=ee?T=>Buffer.from(T,"utf8").toString("base64"):ne?T=>ce(ne.encode(T)):T=>de(utob(T)),encode=(T,m=!1)=>m?_mkUriSafe(le(T)):le(T),base64_min_encodeURI=T=>encode(T,!0),Te=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=T=>{switch(T.length){case 4:var m,_=((7&T.charCodeAt(0))<<18|(63&T.charCodeAt(1))<<12|(63&T.charCodeAt(2))<<6|63&T.charCodeAt(3))-65536;return ae((_>>>10)+55296)+ae((1023&_)+56320);case 3:return ae((15&T.charCodeAt(0))<<12|(63&T.charCodeAt(1))<<6|63&T.charCodeAt(2));default:return ae((31&T.charCodeAt(0))<<6|63&T.charCodeAt(1))}},btou=T=>T.replace(Te,cb_btou),atobPolyfill=T=>{if(T=T.replace(/\s+/g,""),!oe.test(T))throw TypeError("malformed base64.");T+="==".slice(2-(3&T.length));let m,_="",S,E;for(let I=0;I<T.length;)m=se[T.charAt(I++)]<<18|se[T.charAt(I++)]<<12|(S=se[T.charAt(I++)])<<6|(E=se[T.charAt(I++)]),_+=64===S?ae(m>>16&255):64===E?ae(m>>16&255,m>>8&255):ae(m>>16&255,m>>8&255,255&m);return _},pe=$?T=>atob(_tidyB64(T)):ee?T=>Buffer.from(T,"base64").toString("binary"):atobPolyfill,me=ee?T=>ue(Buffer.from(T,"base64")):T=>ue(pe(T),(T=>T.charCodeAt(0))),toUint8Array=T=>me(_unURI(T)),_e=ee?T=>Buffer.from(T,"base64").toString("utf8"):te?T=>te.decode(me(T)):T=>btou(pe(T)),_unURI=T=>_tidyB64(T.replace(/[-_]/g,(T=>"-"==T?"+":"/"))),decode=T=>_e(_unURI(T)),isValid=T=>{if("string"!=typeof T)return!1;let m=T.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(m)||!/[^\s0-9a-zA-Z\-_]/.test(m)},_noEnum=T=>({value:T,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){let e=(T,m)=>Object.defineProperty(String.prototype,T,_noEnum(m));e("fromBase64",(function(){return decode(this)})),e("toBase64",(function(T){return encode(this,T)})),e("toBase64URI",(function(){return encode(this,!0)})),e("toBase64URL",(function(){return encode(this,!0)})),e("toUint8Array",(function(){return toUint8Array(this)}))},extendUint8Array=function(){let e=(T,m)=>Object.defineProperty(Uint8Array.prototype,T,_noEnum(m));e("toBase64",(function(T){return fromUint8Array(this,T)})),e("toBase64URI",(function(){return fromUint8Array(this,!0)})),e("toBase64URL",(function(){return fromUint8Array(this,!0)}))},extendBuiltins=()=>{extendString(),extendUint8Array()},Se={version:z,VERSION:j,atob:pe,atobPolyfill:atobPolyfill,btoa:de,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode,encode:encode,encodeURI:base64_min_encodeURI,encodeURL:base64_min_encodeURI,utob:utob,btou:btou,decode:decode,isValid:isValid,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:extendBuiltins};function convertMetadataToGrpcWeb(T){const m=new W.Metadata;for(const[_,S]of T){for(const T of S){m.append(_,typeof T==="string"?T:Se.fromUint8Array(T))}}return m}function convertMetadataFromGrpcWeb(T){const m=G();for(const[_,S]of Object.entries(T.headersMap)){if(_.endsWith("-bin")){for(const T of S){for(const S of T.split(/,\s?/)){m.append(_,Se.toUint8Array(S))}}}else{m.set(_,S)}}return m}function createBidiStreamingMethod(T,m,_,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*bidiStreamingMethod(_,S){if(!isAsyncIterable(_)){throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method")}const{metadata:I=G(),signal:O=(new AbortController).signal,onHeader:R,onTrailer:N}=S;const A=new AbortController;const P=new AsyncSink;const C=W.client(E,{host:m.address,transport:m.transport});C.onHeaders((T=>{R?.(convertMetadataFromGrpcWeb(T))}));C.onMessage((T=>{P.write(T)}));C.onEnd(((m,_,S)=>{N?.(convertMetadataFromGrpcWeb(S));if(m===W.Code.OK){P.end()}else{P.error(new ClientError(T.path,+m,_))}}));C.start(convertMetadataToGrpcWeb(I));let k;pipeRequest(A.signal,_,C,T).then((()=>{C.finishSend()}),(T=>{if(!isAbortError(T)){k=T;C.close();P.end()}}));const abortListener=()=>{P.error(new AbortError);A.abort();C.close()};O.addEventListener("abort",abortListener);try{yield*P}finally{A.abort();O.removeEventListener("abort",abortListener);throwIfAborted(O);if(k){throw k}}}const O=_==null?bidiStreamingMethod:(T,m)=>_({method:I,requestStream:true,request:T,responseStream:true,next:bidiStreamingMethod},m);return(T,m)=>{const _=O(T,{...S,...m});const E=_[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const T=await E.next();if(T.done&&T.value!=null){return await E.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method"))}return T},return(){return E.return()},throw(T){return E.throw(T)}}}}}}async function pipeRequest(T,m,_,S){for await(const E of m){throwIfAborted(T);_.send({serializeBinary:()=>S.requestSerialize(E)})}}function createClientStreamingMethod(T,m,_,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*clientStreamingMethod(_,S){if(!isAsyncIterable(_)){throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method")}const{metadata:I=G(),signal:O=(new AbortController).signal,onHeader:R,onTrailer:N}=S;return await execute(O,((S,O)=>{const A=new AbortController;let P;const C=W.client(E,{host:m.address,transport:m.transport});C.onHeaders((T=>{R?.(convertMetadataFromGrpcWeb(T))}));C.onMessage((T=>{P=T}));C.onEnd(((m,_,E)=>{N?.(convertMetadataFromGrpcWeb(E));A.abort();if(m===W.Code.OK){S(P)}else{O(new ClientError(T.path,+m,_))}}));C.start(convertMetadataToGrpcWeb(I));createClientStreamingMethod_pipeRequest(A.signal,_,C,T).then((()=>{C.finishSend()}),(T=>{if(!isAbortError(T)){O(T);C.close()}}));return()=>{A.abort();C.close()}}))}const O=_==null?clientStreamingMethod:(T,m)=>_({method:I,requestStream:true,request:T,responseStream:false,next:clientStreamingMethod},m);return async(T,m)=>{const _=O(T,{...S,...m});const E=_[Symbol.asyncIterator]();let I=await E.next();while(true){if(!I.done){I=await E.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(I.value==null){I=await E.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return I.value}}}async function createClientStreamingMethod_pipeRequest(T,m,_,S){for await(const E of m){throwIfAborted(T);_.send({serializeBinary:()=>S.requestSerialize(E)})}}function createServerStreamingMethod(T,m,_,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*serverStreamingMethod(_,S){if(isAsyncIterable(_)){throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method")}const{metadata:I=G(),signal:O=(new AbortController).signal,onHeader:R,onTrailer:N}=S;const A=new AsyncSink;const P=W.client(E,{host:m.address,transport:m.transport});P.onHeaders((T=>{R?.(convertMetadataFromGrpcWeb(T))}));P.onMessage((T=>{A.write(T)}));P.onEnd(((m,_,S)=>{N?.(convertMetadataFromGrpcWeb(S));if(m===W.Code.OK){A.end()}else{A.error(new ClientError(T.path,+m,_))}}));P.start(convertMetadataToGrpcWeb(I));P.send({serializeBinary:()=>T.requestSerialize(_)});P.finishSend();const abortListener=()=>{A.error(new AbortError);P.close()};O.addEventListener("abort",abortListener);try{yield*A}finally{O.removeEventListener("abort",abortListener);throwIfAborted(O)}}const O=_==null?serverStreamingMethod:(T,m)=>_({method:I,requestStream:false,request:T,responseStream:true,next:serverStreamingMethod},m);return(T,m)=>{const _=O(T,{...S,...m});const E=_[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const T=await E.next();if(T.done&&T.value!=null){return await E.throw(new Error("A middleware returned a message, but expected to return void for server streaming method"))}return T},return(){return E.return()},throw(T){return E.throw(T)}}}}}}function createUnaryMethod(T,m,_,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*unaryMethod(_,S){if(isAsyncIterable(_)){throw new Error("A middleware passed invalid request to next(): expected a single message for unary method")}const{metadata:I=G(),signal:O=(new AbortController).signal,onHeader:R,onTrailer:N}=S;return await execute(O,((S,O)=>{let A;const P=W.client(E,{host:m.address,transport:m.transport});P.onHeaders((T=>{R?.(convertMetadataFromGrpcWeb(T))}));P.onMessage((T=>{A=T}));P.onEnd(((m,_,E)=>{N?.(convertMetadataFromGrpcWeb(E));if(m===W.Code.OK){S(A)}else{O(new ClientError(T.path,+m,_))}}));P.start(convertMetadataToGrpcWeb(I));P.send({serializeBinary:()=>T.requestSerialize(_)});P.finishSend();return()=>{P.close()}}))}const O=_==null?unaryMethod:(T,m)=>_({method:I,requestStream:false,request:T,responseStream:false,next:unaryMethod},m);return async(T,m)=>{const _=O(T,{...S,...m});const E=_[Symbol.asyncIterator]();let I=await E.next();while(true){if(!I.done){I=await E.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(I.value==null){I=await E.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return I.value}}}function createClientFactory(){return createClientFactoryWithMiddleware()}function createClient(T,m,_){return createClientFactory().create(T,m,_)}function createClientFactoryWithMiddleware(T){return{use(m){return createClientFactoryWithMiddleware(T==null?m:composeClientMiddleware(T,m))},create(m,_,S={}){const E={};const I=Object.entries(normalizeServiceDefinition(m));for(const[m,O]of I){const I={...S["*"],...S[m]};if(!O.requestStream){if(!O.responseStream){E[m]=createUnaryMethod(O,_,T,I)}else{E[m]=createServerStreamingMethod(O,_,T,I)}}else{if(!O.responseStream){E[m]=createClientStreamingMethod(O,_,T,I)}else{E[m]=createBidiStreamingMethod(O,_,T,I)}}}return E}}}function createChannel(T,m){return{address:T,transport:m}}
/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
var Ee=null;try{Ee=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Ee){}function t(T,m,_){this.low=0|T,this.high=0|m,this.unsigned=!!_}function h(T){return!0===(T&&T.__isLong__)}function n(T){var m=Math.clz32(T&-T);return T?31-m:m}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=h;var Ie={},Oe={};function r(T,m){var _,S,E;return m?(E=0<=(T>>>=0)&&T<256)&&(S=Oe[T])?S:(_=o(T,0,!0),E&&(Oe[T]=_),_):(E=-128<=(T|=0)&&T<128)&&(S=Ie[T])?S:(_=o(T,T<0?-1:0,!1),E&&(Ie[T]=_),_)}function u(T,m){if(isNaN(T))return m?Pe:ge;if(m){if(T<0)return Pe;if(T>=he)return De}else{if(T<=-Ae)return we;if(T+1>=Ae)return Ue}return T<0?u(-T,m).neg():o(T%Ne|0,T/Ne|0,m)}function o(T,m,_){return new t(T,m,_)}t.fromInt=r,t.fromNumber=u,t.fromBits=o;var Re=Math.pow;function l(T,m,_){if(0===T.length)throw Error("empty string");if("number"==typeof m?(_=m,m=!1):m=!!m,"NaN"===T||"Infinity"===T||"+Infinity"===T||"-Infinity"===T)return m?Pe:ge;if((_=_||10)<2||36<_)throw RangeError("radix");var S;if((S=T.indexOf("-"))>0)throw Error("interior hyphen");if(0===S)return l(T.substring(1),m,_).neg();for(var E=u(Re(_,8)),I=ge,O=0;O<T.length;O+=8){var R=Math.min(8,T.length-O),N=parseInt(T.substring(O,O+R),_);if(R<8){var A=u(Re(_,R));I=I.mul(A).add(u(N))}else I=(I=I.mul(E)).add(u(N))}return I.unsigned=m,I}function f(T,m){return"number"==typeof T?u(T,m):"string"==typeof T?l(T,m):o(T.low,T.high,"boolean"==typeof m?m:T.unsigned)}t.fromString=l,t.fromValue=f;var Ne=4294967296,he=Ne*Ne,Ae=he/2,be=r(1<<24),ge=r(0);t.ZERO=ge;var Pe=r(0,!0);t.UZERO=Pe;var ye=r(1);t.ONE=ye;var Ce=r(1,!0);t.UONE=Ce;var ke=r(-1);t.NEG_ONE=ke;var Ue=o(-1,2147483647,!1);t.MAX_VALUE=Ue;var De=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=De;var we=o(0,-2147483648,!1);t.MIN_VALUE=we;var Be=t.prototype;Be.toInt=function(){return this.unsigned?this.low>>>0:this.low},Be.toNumber=function(){return this.unsigned?(this.high>>>0)*Ne+(this.low>>>0):this.high*Ne+(this.low>>>0)},Be.toString=function(T){if((T=T||10)<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(we)){var m=u(T),_=this.div(m),S=_.mul(m).sub(this);return _.toString(T)+S.toInt().toString(T)}return"-"+this.neg().toString(T)}for(var E=u(Re(T,6),this.unsigned),I=this,O="";;){var R=I.div(E),N=(I.sub(R.mul(E)).toInt()>>>0).toString(T);if((I=R).isZero())return N+O;for(;N.length<6;)N="0"+N;O=""+N+O}},Be.getHighBits=function(){return this.high},Be.getHighBitsUnsigned=function(){return this.high>>>0},Be.getLowBits=function(){return this.low},Be.getLowBitsUnsigned=function(){return this.low>>>0},Be.getNumBitsAbs=function(){if(this.isNegative())return this.eq(we)?64:this.neg().getNumBitsAbs();for(var T=0!=this.high?this.high:this.low,m=31;m>0&&0==(T&1<<m);m--);return 0!=this.high?m+33:m+1},Be.isZero=function(){return 0===this.high&&0===this.low},Be.eqz=Be.isZero,Be.isNegative=function(){return!this.unsigned&&this.high<0},Be.isPositive=function(){return this.unsigned||this.high>=0},Be.isOdd=function(){return 1==(1&this.low)},Be.isEven=function(){return 0==(1&this.low)},Be.equals=function(T){return h(T)||(T=f(T)),(this.unsigned===T.unsigned||this.high>>>31!=1||T.high>>>31!=1)&&(this.high===T.high&&this.low===T.low)},Be.eq=Be.equals,Be.notEquals=function(T){return!this.eq(T)},Be.neq=Be.notEquals,Be.ne=Be.notEquals,Be.lessThan=function(T){return this.comp(T)<0},Be.lt=Be.lessThan,Be.lessThanOrEqual=function(T){return this.comp(T)<=0},Be.lte=Be.lessThanOrEqual,Be.le=Be.lessThanOrEqual,Be.greaterThan=function(T){return this.comp(T)>0},Be.gt=Be.greaterThan,Be.greaterThanOrEqual=function(T){return this.comp(T)>=0},Be.gte=Be.greaterThanOrEqual,Be.ge=Be.greaterThanOrEqual,Be.compare=function(T){if(h(T)||(T=f(T)),this.eq(T))return 0;var m=this.isNegative(),_=T.isNegative();return m&&!_?-1:!m&&_?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},Be.comp=Be.compare,Be.negate=function(){return!this.unsigned&&this.eq(we)?we:this.not().add(ye)},Be.neg=Be.negate,Be.add=function(T){h(T)||(T=f(T));var m=this.high>>>16,_=65535&this.high,S=this.low>>>16,E=65535&this.low,I=T.high>>>16,O=65535&T.high,R=T.low>>>16,N=0,A=0,P=0,C=0;return P+=(C+=E+(65535&T.low))>>>16,A+=(P+=S+R)>>>16,N+=(A+=_+O)>>>16,N+=m+I,o((P&=65535)<<16|(C&=65535),(N&=65535)<<16|(A&=65535),this.unsigned)},Be.subtract=function(T){return h(T)||(T=f(T)),this.add(T.neg())},Be.sub=Be.subtract,Be.multiply=function(T){if(this.isZero())return this;if(h(T)||(T=f(T)),Ee)return o(Ee.mul(this.low,this.high,T.low,T.high),Ee.get_high(),this.unsigned);if(T.isZero())return this.unsigned?Pe:ge;if(this.eq(we))return T.isOdd()?we:ge;if(T.eq(we))return this.isOdd()?we:ge;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(be)&&T.lt(be))return u(this.toNumber()*T.toNumber(),this.unsigned);var m=this.high>>>16,_=65535&this.high,S=this.low>>>16,E=65535&this.low,I=T.high>>>16,O=65535&T.high,R=T.low>>>16,N=65535&T.low,A=0,P=0,C=0,k=0;return C+=(k+=E*N)>>>16,P+=(C+=S*N)>>>16,C&=65535,P+=(C+=E*R)>>>16,A+=(P+=_*N)>>>16,P&=65535,A+=(P+=S*R)>>>16,P&=65535,A+=(P+=E*O)>>>16,A+=m*N+_*R+S*O+E*I,o((C&=65535)<<16|(k&=65535),(A&=65535)<<16|(P&=65535),this.unsigned)},Be.mul=Be.multiply,Be.divide=function(T){if(h(T)||(T=f(T)),T.isZero())throw Error("division by zero");var m,_,S;if(Ee)return this.unsigned||-2147483648!==this.high||-1!==T.low||-1!==T.high?o((this.unsigned?Ee.div_u:Ee.div_s)(this.low,this.high,T.low,T.high),Ee.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Pe:ge;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return Pe;if(T.gt(this.shru(1)))return Ce;S=Pe}else{if(this.eq(we))return T.eq(ye)||T.eq(ke)?we:T.eq(we)?ye:(m=this.shr(1).div(T).shl(1)).eq(ge)?T.isNegative()?ye:ke:(_=this.sub(T.mul(m)),S=m.add(_.div(T)));if(T.eq(we))return this.unsigned?Pe:ge;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();S=ge}for(_=this;_.gte(T);){m=Math.max(1,Math.floor(_.toNumber()/T.toNumber()));for(var E=Math.ceil(Math.log(m)/Math.LN2),I=E<=48?1:Re(2,E-48),O=u(m),R=O.mul(T);R.isNegative()||R.gt(_);)R=(O=u(m-=I,this.unsigned)).mul(T);O.isZero()&&(O=ye),S=S.add(O),_=_.sub(R)}return S},Be.div=Be.divide,Be.modulo=function(T){return h(T)||(T=f(T)),Ee?o((this.unsigned?Ee.rem_u:Ee.rem_s)(this.low,this.high,T.low,T.high),Ee.get_high(),this.unsigned):this.sub(this.div(T).mul(T))},Be.mod=Be.modulo,Be.rem=Be.modulo,Be.not=function(){return o(~this.low,~this.high,this.unsigned)},Be.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Be.clz=Be.countLeadingZeros,Be.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},Be.ctz=Be.countTrailingZeros,Be.and=function(T){return h(T)||(T=f(T)),o(this.low&T.low,this.high&T.high,this.unsigned)},Be.or=function(T){return h(T)||(T=f(T)),o(this.low|T.low,this.high|T.high,this.unsigned)},Be.xor=function(T){return h(T)||(T=f(T)),o(this.low^T.low,this.high^T.high,this.unsigned)},Be.shiftLeft=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):o(0,this.low<<T-32,this.unsigned)},Be.shl=Be.shiftLeft,Be.shiftRight=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):o(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},Be.shr=Be.shiftRight,Be.shiftRightUnsigned=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low>>>T|this.high<<32-T,this.high>>>T,this.unsigned):o(32===T?this.high:this.high>>>T-32,0,this.unsigned)},Be.shru=Be.shiftRightUnsigned,Be.shr_u=Be.shiftRightUnsigned,Be.rotateLeft=function(T){var m;return h(T)&&(T=T.toInt()),0==(T&=63)?this:32===T?o(this.high,this.low,this.unsigned):T<32?(m=32-T,o(this.low<<T|this.high>>>m,this.high<<T|this.low>>>m,this.unsigned)):(m=32-(T-=32),o(this.high<<T|this.low>>>m,this.low<<T|this.high>>>m,this.unsigned))},Be.rotl=Be.rotateLeft,Be.rotateRight=function(T){var m;return h(T)&&(T=T.toInt()),0==(T&=63)?this:32===T?o(this.high,this.low,this.unsigned):T<32?(m=32-T,o(this.high<<m|this.low>>>T,this.low<<m|this.high>>>T,this.unsigned)):(m=32-(T-=32),o(this.low<<m|this.high>>>T,this.high<<m|this.low>>>T,this.unsigned))},Be.rotr=Be.rotateRight,Be.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},Be.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},Be.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},Be.toBytesLE=function(){var T=this.high,m=this.low;return[255&m,m>>>8&255,m>>>16&255,m>>>24,255&T,T>>>8&255,T>>>16&255,T>>>24]},Be.toBytesBE=function(){var T=this.high,m=this.low;return[T>>>24,T>>>16&255,T>>>8&255,255&T,m>>>24,m>>>16&255,m>>>8&255,255&m]},t.fromBytes=function(T,m,_){return _?t.fromBytesLE(T,m):t.fromBytesBE(T,m)},t.fromBytesLE=function(T,m){return new t(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,m)},t.fromBytesBE=function(T,m){return new t(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],m)};var Le=__nccwpck_require__(221);const ve="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}const Ye={encode(T,m=Le.Z.Writer.create()){if(T.seconds!==0){m.uint32(8).int64(T.seconds)}if(T.nanos!==0){m.uint32(16).int32(T.nanos)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTimestamp();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.seconds=longToNumber(_.int64());break;case 2:E.nanos=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{seconds:isSet(T.seconds)?Number(T.seconds):0,nanos:isSet(T.nanos)?Number(T.nanos):0}},toJSON(T){const m={};T.seconds!==undefined&&(m.seconds=Math.round(T.seconds));T.nanos!==undefined&&(m.nanos=Math.round(T.nanos));return m}};function longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function isSet(T){return T!==null&&T!==undefined}const Fe="tinkoff.public.invest.api.contract.v1";var Me;(function(T){T[T["SECURITY_TRADING_STATUS_UNSPECIFIED"]=0]="SECURITY_TRADING_STATUS_UNSPECIFIED";T[T["SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING"]=1]="SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING";T[T["SECURITY_TRADING_STATUS_OPENING_PERIOD"]=2]="SECURITY_TRADING_STATUS_OPENING_PERIOD";T[T["SECURITY_TRADING_STATUS_CLOSING_PERIOD"]=3]="SECURITY_TRADING_STATUS_CLOSING_PERIOD";T[T["SECURITY_TRADING_STATUS_BREAK_IN_TRADING"]=4]="SECURITY_TRADING_STATUS_BREAK_IN_TRADING";T[T["SECURITY_TRADING_STATUS_NORMAL_TRADING"]=5]="SECURITY_TRADING_STATUS_NORMAL_TRADING";T[T["SECURITY_TRADING_STATUS_CLOSING_AUCTION"]=6]="SECURITY_TRADING_STATUS_CLOSING_AUCTION";T[T["SECURITY_TRADING_STATUS_DARK_POOL_AUCTION"]=7]="SECURITY_TRADING_STATUS_DARK_POOL_AUCTION";T[T["SECURITY_TRADING_STATUS_DISCRETE_AUCTION"]=8]="SECURITY_TRADING_STATUS_DISCRETE_AUCTION";T[T["SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD"]=9]="SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD";T[T["SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE"]=10]="SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE";T[T["SECURITY_TRADING_STATUS_SESSION_ASSIGNED"]=11]="SECURITY_TRADING_STATUS_SESSION_ASSIGNED";T[T["SECURITY_TRADING_STATUS_SESSION_CLOSE"]=12]="SECURITY_TRADING_STATUS_SESSION_CLOSE";T[T["SECURITY_TRADING_STATUS_SESSION_OPEN"]=13]="SECURITY_TRADING_STATUS_SESSION_OPEN";T[T["SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING"]=14]="SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING";T[T["SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING"]=15]="SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING";T[T["SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING"]=16]="SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Me||(Me={}));function securityTradingStatusFromJSON(T){switch(T){case 0:case"SECURITY_TRADING_STATUS_UNSPECIFIED":return Me.SECURITY_TRADING_STATUS_UNSPECIFIED;case 1:case"SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING":return Me.SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING;case 2:case"SECURITY_TRADING_STATUS_OPENING_PERIOD":return Me.SECURITY_TRADING_STATUS_OPENING_PERIOD;case 3:case"SECURITY_TRADING_STATUS_CLOSING_PERIOD":return Me.SECURITY_TRADING_STATUS_CLOSING_PERIOD;case 4:case"SECURITY_TRADING_STATUS_BREAK_IN_TRADING":return Me.SECURITY_TRADING_STATUS_BREAK_IN_TRADING;case 5:case"SECURITY_TRADING_STATUS_NORMAL_TRADING":return Me.SECURITY_TRADING_STATUS_NORMAL_TRADING;case 6:case"SECURITY_TRADING_STATUS_CLOSING_AUCTION":return Me.SECURITY_TRADING_STATUS_CLOSING_AUCTION;case 7:case"SECURITY_TRADING_STATUS_DARK_POOL_AUCTION":return Me.SECURITY_TRADING_STATUS_DARK_POOL_AUCTION;case 8:case"SECURITY_TRADING_STATUS_DISCRETE_AUCTION":return Me.SECURITY_TRADING_STATUS_DISCRETE_AUCTION;case 9:case"SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD":return Me.SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD;case 10:case"SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE":return Me.SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE;case 11:case"SECURITY_TRADING_STATUS_SESSION_ASSIGNED":return Me.SECURITY_TRADING_STATUS_SESSION_ASSIGNED;case 12:case"SECURITY_TRADING_STATUS_SESSION_CLOSE":return Me.SECURITY_TRADING_STATUS_SESSION_CLOSE;case 13:case"SECURITY_TRADING_STATUS_SESSION_OPEN":return Me.SECURITY_TRADING_STATUS_SESSION_OPEN;case 14:case"SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING":return Me.SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING;case 15:case"SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING":return Me.SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING;case 16:case"SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING":return Me.SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING;case-1:case"UNRECOGNIZED":default:return Me.UNRECOGNIZED}}function securityTradingStatusToJSON(T){switch(T){case Me.SECURITY_TRADING_STATUS_UNSPECIFIED:return"SECURITY_TRADING_STATUS_UNSPECIFIED";case Me.SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING:return"SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING";case Me.SECURITY_TRADING_STATUS_OPENING_PERIOD:return"SECURITY_TRADING_STATUS_OPENING_PERIOD";case Me.SECURITY_TRADING_STATUS_CLOSING_PERIOD:return"SECURITY_TRADING_STATUS_CLOSING_PERIOD";case Me.SECURITY_TRADING_STATUS_BREAK_IN_TRADING:return"SECURITY_TRADING_STATUS_BREAK_IN_TRADING";case Me.SECURITY_TRADING_STATUS_NORMAL_TRADING:return"SECURITY_TRADING_STATUS_NORMAL_TRADING";case Me.SECURITY_TRADING_STATUS_CLOSING_AUCTION:return"SECURITY_TRADING_STATUS_CLOSING_AUCTION";case Me.SECURITY_TRADING_STATUS_DARK_POOL_AUCTION:return"SECURITY_TRADING_STATUS_DARK_POOL_AUCTION";case Me.SECURITY_TRADING_STATUS_DISCRETE_AUCTION:return"SECURITY_TRADING_STATUS_DISCRETE_AUCTION";case Me.SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD:return"SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD";case Me.SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE:return"SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE";case Me.SECURITY_TRADING_STATUS_SESSION_ASSIGNED:return"SECURITY_TRADING_STATUS_SESSION_ASSIGNED";case Me.SECURITY_TRADING_STATUS_SESSION_CLOSE:return"SECURITY_TRADING_STATUS_SESSION_CLOSE";case Me.SECURITY_TRADING_STATUS_SESSION_OPEN:return"SECURITY_TRADING_STATUS_SESSION_OPEN";case Me.SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING:return"SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING";case Me.SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING:return"SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING";case Me.SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING:return"SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING";case Me.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseMoneyValue(){return{currency:"",units:0,nano:0}}const Je={encode(T,m=Le.Z.Writer.create()){if(T.currency!==""){m.uint32(10).string(T.currency)}if(T.units!==0){m.uint32(16).int64(T.units)}if(T.nano!==0){m.uint32(24).int32(T.nano)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseMoneyValue();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.currency=_.string();break;case 2:E.units=common_longToNumber(_.int64());break;case 3:E.nano=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{currency:common_isSet(T.currency)?String(T.currency):"",units:common_isSet(T.units)?Number(T.units):0,nano:common_isSet(T.nano)?Number(T.nano):0}},toJSON(T){const m={};T.currency!==undefined&&(m.currency=T.currency);T.units!==undefined&&(m.units=Math.round(T.units));T.nano!==undefined&&(m.nano=Math.round(T.nano));return m}};function createBaseQuotation(){return{units:0,nano:0}}const Ge={encode(T,m=Le.Z.Writer.create()){if(T.units!==0){m.uint32(8).int64(T.units)}if(T.nano!==0){m.uint32(16).int32(T.nano)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseQuotation();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.units=common_longToNumber(_.int64());break;case 2:E.nano=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{units:common_isSet(T.units)?Number(T.units):0,nano:common_isSet(T.nano)?Number(T.nano):0}},toJSON(T){const m={};T.units!==undefined&&(m.units=Math.round(T.units));T.nano!==undefined&&(m.nano=Math.round(T.nano));return m}};function createBasePing(){return{time:undefined}}const xe={encode(T,m=Le.Z.Writer.create()){if(T.time!==undefined){Ye.encode(toTimestamp(T.time),m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePing();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.time=fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{time:common_isSet(T.time)?fromJsonTimestamp(T.time):undefined}},toJSON(T){const m={};T.time!==undefined&&(m.time=T.time.toISOString());return m}};function toTimestamp(T){const m=T.getTime()/1e3;const _=T.getTime()%1e3*1e6;return{seconds:m,nanos:_}}function fromTimestamp(T){let m=T.seconds*1e3;m+=T.nanos/1e6;return new Date(m)}function fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return fromTimestamp(Ye.fromJSON(T))}}function common_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function common_isSet(T){return T!==null&&T!==undefined}const qe="tinkoff.public.invest.api.contract.v1";var Ve;(function(T){T[T["SUBSCRIPTION_ACTION_UNSPECIFIED"]=0]="SUBSCRIPTION_ACTION_UNSPECIFIED";T[T["SUBSCRIPTION_ACTION_SUBSCRIBE"]=1]="SUBSCRIPTION_ACTION_SUBSCRIBE";T[T["SUBSCRIPTION_ACTION_UNSUBSCRIBE"]=2]="SUBSCRIPTION_ACTION_UNSUBSCRIBE";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Ve||(Ve={}));function subscriptionActionFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_ACTION_UNSPECIFIED":return Ve.SUBSCRIPTION_ACTION_UNSPECIFIED;case 1:case"SUBSCRIPTION_ACTION_SUBSCRIBE":return Ve.SUBSCRIPTION_ACTION_SUBSCRIBE;case 2:case"SUBSCRIPTION_ACTION_UNSUBSCRIBE":return Ve.SUBSCRIPTION_ACTION_UNSUBSCRIBE;case-1:case"UNRECOGNIZED":default:return Ve.UNRECOGNIZED}}function subscriptionActionToJSON(T){switch(T){case Ve.SUBSCRIPTION_ACTION_UNSPECIFIED:return"SUBSCRIPTION_ACTION_UNSPECIFIED";case Ve.SUBSCRIPTION_ACTION_SUBSCRIBE:return"SUBSCRIPTION_ACTION_SUBSCRIBE";case Ve.SUBSCRIPTION_ACTION_UNSUBSCRIBE:return"SUBSCRIPTION_ACTION_UNSUBSCRIBE";case Ve.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Ze;(function(T){T[T["SUBSCRIPTION_INTERVAL_UNSPECIFIED"]=0]="SUBSCRIPTION_INTERVAL_UNSPECIFIED";T[T["SUBSCRIPTION_INTERVAL_ONE_MINUTE"]=1]="SUBSCRIPTION_INTERVAL_ONE_MINUTE";T[T["SUBSCRIPTION_INTERVAL_FIVE_MINUTES"]=2]="SUBSCRIPTION_INTERVAL_FIVE_MINUTES";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Ze||(Ze={}));function subscriptionIntervalFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_INTERVAL_UNSPECIFIED":return Ze.SUBSCRIPTION_INTERVAL_UNSPECIFIED;case 1:case"SUBSCRIPTION_INTERVAL_ONE_MINUTE":return Ze.SUBSCRIPTION_INTERVAL_ONE_MINUTE;case 2:case"SUBSCRIPTION_INTERVAL_FIVE_MINUTES":return Ze.SUBSCRIPTION_INTERVAL_FIVE_MINUTES;case-1:case"UNRECOGNIZED":default:return Ze.UNRECOGNIZED}}function subscriptionIntervalToJSON(T){switch(T){case Ze.SUBSCRIPTION_INTERVAL_UNSPECIFIED:return"SUBSCRIPTION_INTERVAL_UNSPECIFIED";case Ze.SUBSCRIPTION_INTERVAL_ONE_MINUTE:return"SUBSCRIPTION_INTERVAL_ONE_MINUTE";case Ze.SUBSCRIPTION_INTERVAL_FIVE_MINUTES:return"SUBSCRIPTION_INTERVAL_FIVE_MINUTES";case Ze.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Xe;(function(T){T[T["SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["SUBSCRIPTION_STATUS_SUCCESS"]=1]="SUBSCRIPTION_STATUS_SUCCESS";T[T["SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND"]=2]="SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND";T[T["SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID"]=3]="SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID";T[T["SUBSCRIPTION_STATUS_DEPTH_IS_INVALID"]=4]="SUBSCRIPTION_STATUS_DEPTH_IS_INVALID";T[T["SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID"]=5]="SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID";T[T["SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED"]=6]="SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED";T[T["SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=7]="SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS"]=8]="SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Xe||(Xe={}));function subscriptionStatusFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_STATUS_UNSPECIFIED":return Xe.SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"SUBSCRIPTION_STATUS_SUCCESS":return Xe.SUBSCRIPTION_STATUS_SUCCESS;case 2:case"SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND":return Xe.SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND;case 3:case"SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID":return Xe.SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID;case 4:case"SUBSCRIPTION_STATUS_DEPTH_IS_INVALID":return Xe.SUBSCRIPTION_STATUS_DEPTH_IS_INVALID;case 5:case"SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID":return Xe.SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID;case 6:case"SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED":return Xe.SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED;case 7:case"SUBSCRIPTION_STATUS_INTERNAL_ERROR":return Xe.SUBSCRIPTION_STATUS_INTERNAL_ERROR;case 8:case"SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS":return Xe.SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS;case-1:case"UNRECOGNIZED":default:return Xe.UNRECOGNIZED}}function subscriptionStatusToJSON(T){switch(T){case Xe.SUBSCRIPTION_STATUS_UNSPECIFIED:return"SUBSCRIPTION_STATUS_UNSPECIFIED";case Xe.SUBSCRIPTION_STATUS_SUCCESS:return"SUBSCRIPTION_STATUS_SUCCESS";case Xe.SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND:return"SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND";case Xe.SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID:return"SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID";case Xe.SUBSCRIPTION_STATUS_DEPTH_IS_INVALID:return"SUBSCRIPTION_STATUS_DEPTH_IS_INVALID";case Xe.SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID:return"SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID";case Xe.SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED:return"SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED";case Xe.SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"SUBSCRIPTION_STATUS_INTERNAL_ERROR";case Xe.SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS:return"SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS";case Xe.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var We;(function(T){T[T["TRADE_DIRECTION_UNSPECIFIED"]=0]="TRADE_DIRECTION_UNSPECIFIED";T[T["TRADE_DIRECTION_BUY"]=1]="TRADE_DIRECTION_BUY";T[T["TRADE_DIRECTION_SELL"]=2]="TRADE_DIRECTION_SELL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(We||(We={}));function tradeDirectionFromJSON(T){switch(T){case 0:case"TRADE_DIRECTION_UNSPECIFIED":return We.TRADE_DIRECTION_UNSPECIFIED;case 1:case"TRADE_DIRECTION_BUY":return We.TRADE_DIRECTION_BUY;case 2:case"TRADE_DIRECTION_SELL":return We.TRADE_DIRECTION_SELL;case-1:case"UNRECOGNIZED":default:return We.UNRECOGNIZED}}function tradeDirectionToJSON(T){switch(T){case We.TRADE_DIRECTION_UNSPECIFIED:return"TRADE_DIRECTION_UNSPECIFIED";case We.TRADE_DIRECTION_BUY:return"TRADE_DIRECTION_BUY";case We.TRADE_DIRECTION_SELL:return"TRADE_DIRECTION_SELL";case We.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var He;(function(T){T[T["CANDLE_INTERVAL_UNSPECIFIED"]=0]="CANDLE_INTERVAL_UNSPECIFIED";T[T["CANDLE_INTERVAL_1_MIN"]=1]="CANDLE_INTERVAL_1_MIN";T[T["CANDLE_INTERVAL_5_MIN"]=2]="CANDLE_INTERVAL_5_MIN";T[T["CANDLE_INTERVAL_15_MIN"]=3]="CANDLE_INTERVAL_15_MIN";T[T["CANDLE_INTERVAL_HOUR"]=4]="CANDLE_INTERVAL_HOUR";T[T["CANDLE_INTERVAL_DAY"]=5]="CANDLE_INTERVAL_DAY";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(He||(He={}));function candleIntervalFromJSON(T){switch(T){case 0:case"CANDLE_INTERVAL_UNSPECIFIED":return He.CANDLE_INTERVAL_UNSPECIFIED;case 1:case"CANDLE_INTERVAL_1_MIN":return He.CANDLE_INTERVAL_1_MIN;case 2:case"CANDLE_INTERVAL_5_MIN":return He.CANDLE_INTERVAL_5_MIN;case 3:case"CANDLE_INTERVAL_15_MIN":return He.CANDLE_INTERVAL_15_MIN;case 4:case"CANDLE_INTERVAL_HOUR":return He.CANDLE_INTERVAL_HOUR;case 5:case"CANDLE_INTERVAL_DAY":return He.CANDLE_INTERVAL_DAY;case-1:case"UNRECOGNIZED":default:return He.UNRECOGNIZED}}function candleIntervalToJSON(T){switch(T){case He.CANDLE_INTERVAL_UNSPECIFIED:return"CANDLE_INTERVAL_UNSPECIFIED";case He.CANDLE_INTERVAL_1_MIN:return"CANDLE_INTERVAL_1_MIN";case He.CANDLE_INTERVAL_5_MIN:return"CANDLE_INTERVAL_5_MIN";case He.CANDLE_INTERVAL_15_MIN:return"CANDLE_INTERVAL_15_MIN";case He.CANDLE_INTERVAL_HOUR:return"CANDLE_INTERVAL_HOUR";case He.CANDLE_INTERVAL_DAY:return"CANDLE_INTERVAL_DAY";case He.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseMarketDataRequest(){return{subscribeCandlesRequest:undefined,subscribeOrderBookRequest:undefined,subscribeTradesRequest:undefined,subscribeInfoRequest:undefined,subscribeLastPriceRequest:undefined,getMySubscriptions:undefined}}const Ke={encode(T,m=Le.Z.Writer.create()){if(T.subscribeCandlesRequest!==undefined){$e.encode(T.subscribeCandlesRequest,m.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookRequest!==undefined){nt.encode(T.subscribeOrderBookRequest,m.uint32(18).fork()).ldelim()}if(T.subscribeTradesRequest!==undefined){ot.encode(T.subscribeTradesRequest,m.uint32(26).fork()).ldelim()}if(T.subscribeInfoRequest!==undefined){ct.encode(T.subscribeInfoRequest,m.uint32(34).fork()).ldelim()}if(T.subscribeLastPriceRequest!==undefined){pt.encode(T.subscribeLastPriceRequest,m.uint32(42).fork()).ldelim()}if(T.getMySubscriptions!==undefined){Lt.encode(T.getMySubscriptions,m.uint32(50).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseMarketDataRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscribeCandlesRequest=$e.decode(_,_.uint32());break;case 2:E.subscribeOrderBookRequest=nt.decode(_,_.uint32());break;case 3:E.subscribeTradesRequest=ot.decode(_,_.uint32());break;case 4:E.subscribeInfoRequest=ct.decode(_,_.uint32());break;case 5:E.subscribeLastPriceRequest=pt.decode(_,_.uint32());break;case 6:E.getMySubscriptions=Lt.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesRequest:market_data_isSet(T.subscribeCandlesRequest)?$e.fromJSON(T.subscribeCandlesRequest):undefined,subscribeOrderBookRequest:market_data_isSet(T.subscribeOrderBookRequest)?nt.fromJSON(T.subscribeOrderBookRequest):undefined,subscribeTradesRequest:market_data_isSet(T.subscribeTradesRequest)?ot.fromJSON(T.subscribeTradesRequest):undefined,subscribeInfoRequest:market_data_isSet(T.subscribeInfoRequest)?ct.fromJSON(T.subscribeInfoRequest):undefined,subscribeLastPriceRequest:market_data_isSet(T.subscribeLastPriceRequest)?pt.fromJSON(T.subscribeLastPriceRequest):undefined,getMySubscriptions:market_data_isSet(T.getMySubscriptions)?Lt.fromJSON(T.getMySubscriptions):undefined}},toJSON(T){const m={};T.subscribeCandlesRequest!==undefined&&(m.subscribeCandlesRequest=T.subscribeCandlesRequest?$e.toJSON(T.subscribeCandlesRequest):undefined);T.subscribeOrderBookRequest!==undefined&&(m.subscribeOrderBookRequest=T.subscribeOrderBookRequest?nt.toJSON(T.subscribeOrderBookRequest):undefined);T.subscribeTradesRequest!==undefined&&(m.subscribeTradesRequest=T.subscribeTradesRequest?ot.toJSON(T.subscribeTradesRequest):undefined);T.subscribeInfoRequest!==undefined&&(m.subscribeInfoRequest=T.subscribeInfoRequest?ct.toJSON(T.subscribeInfoRequest):undefined);T.subscribeLastPriceRequest!==undefined&&(m.subscribeLastPriceRequest=T.subscribeLastPriceRequest?pt.toJSON(T.subscribeLastPriceRequest):undefined);T.getMySubscriptions!==undefined&&(m.getMySubscriptions=T.getMySubscriptions?Lt.toJSON(T.getMySubscriptions):undefined);return m}};function createBaseMarketDataServerSideStreamRequest(){return{subscribeCandlesRequest:undefined,subscribeOrderBookRequest:undefined,subscribeTradesRequest:undefined,subscribeInfoRequest:undefined,subscribeLastPriceRequest:undefined}}const ze={encode(T,m=Le.Z.Writer.create()){if(T.subscribeCandlesRequest!==undefined){$e.encode(T.subscribeCandlesRequest,m.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookRequest!==undefined){nt.encode(T.subscribeOrderBookRequest,m.uint32(18).fork()).ldelim()}if(T.subscribeTradesRequest!==undefined){ot.encode(T.subscribeTradesRequest,m.uint32(26).fork()).ldelim()}if(T.subscribeInfoRequest!==undefined){ct.encode(T.subscribeInfoRequest,m.uint32(34).fork()).ldelim()}if(T.subscribeLastPriceRequest!==undefined){pt.encode(T.subscribeLastPriceRequest,m.uint32(42).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseMarketDataServerSideStreamRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscribeCandlesRequest=$e.decode(_,_.uint32());break;case 2:E.subscribeOrderBookRequest=nt.decode(_,_.uint32());break;case 3:E.subscribeTradesRequest=ot.decode(_,_.uint32());break;case 4:E.subscribeInfoRequest=ct.decode(_,_.uint32());break;case 5:E.subscribeLastPriceRequest=pt.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesRequest:market_data_isSet(T.subscribeCandlesRequest)?$e.fromJSON(T.subscribeCandlesRequest):undefined,subscribeOrderBookRequest:market_data_isSet(T.subscribeOrderBookRequest)?nt.fromJSON(T.subscribeOrderBookRequest):undefined,subscribeTradesRequest:market_data_isSet(T.subscribeTradesRequest)?ot.fromJSON(T.subscribeTradesRequest):undefined,subscribeInfoRequest:market_data_isSet(T.subscribeInfoRequest)?ct.fromJSON(T.subscribeInfoRequest):undefined,subscribeLastPriceRequest:market_data_isSet(T.subscribeLastPriceRequest)?pt.fromJSON(T.subscribeLastPriceRequest):undefined}},toJSON(T){const m={};T.subscribeCandlesRequest!==undefined&&(m.subscribeCandlesRequest=T.subscribeCandlesRequest?$e.toJSON(T.subscribeCandlesRequest):undefined);T.subscribeOrderBookRequest!==undefined&&(m.subscribeOrderBookRequest=T.subscribeOrderBookRequest?nt.toJSON(T.subscribeOrderBookRequest):undefined);T.subscribeTradesRequest!==undefined&&(m.subscribeTradesRequest=T.subscribeTradesRequest?ot.toJSON(T.subscribeTradesRequest):undefined);T.subscribeInfoRequest!==undefined&&(m.subscribeInfoRequest=T.subscribeInfoRequest?ct.toJSON(T.subscribeInfoRequest):undefined);T.subscribeLastPriceRequest!==undefined&&(m.subscribeLastPriceRequest=T.subscribeLastPriceRequest?pt.toJSON(T.subscribeLastPriceRequest):undefined);return m}};function createBaseMarketDataResponse(){return{subscribeCandlesResponse:undefined,subscribeOrderBookResponse:undefined,subscribeTradesResponse:undefined,subscribeInfoResponse:undefined,candle:undefined,trade:undefined,orderbook:undefined,tradingStatus:undefined,ping:undefined,subscribeLastPriceResponse:undefined,lastPrice:undefined}}const je={encode(T,m=Le.Z.Writer.create()){if(T.subscribeCandlesResponse!==undefined){et.encode(T.subscribeCandlesResponse,m.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookResponse!==undefined){it.encode(T.subscribeOrderBookResponse,m.uint32(18).fork()).ldelim()}if(T.subscribeTradesResponse!==undefined){ut.encode(T.subscribeTradesResponse,m.uint32(26).fork()).ldelim()}if(T.subscribeInfoResponse!==undefined){lt.encode(T.subscribeInfoResponse,m.uint32(34).fork()).ldelim()}if(T.candle!==undefined){Et.encode(T.candle,m.uint32(42).fork()).ldelim()}if(T.trade!==undefined){Rt.encode(T.trade,m.uint32(50).fork()).ldelim()}if(T.orderbook!==undefined){It.encode(T.orderbook,m.uint32(58).fork()).ldelim()}if(T.tradingStatus!==undefined){Nt.encode(T.tradingStatus,m.uint32(66).fork()).ldelim()}if(T.ping!==undefined){xe.encode(T.ping,m.uint32(74).fork()).ldelim()}if(T.subscribeLastPriceResponse!==undefined){_t.encode(T.subscribeLastPriceResponse,m.uint32(82).fork()).ldelim()}if(T.lastPrice!==undefined){yt.encode(T.lastPrice,m.uint32(90).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseMarketDataResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscribeCandlesResponse=et.decode(_,_.uint32());break;case 2:E.subscribeOrderBookResponse=it.decode(_,_.uint32());break;case 3:E.subscribeTradesResponse=ut.decode(_,_.uint32());break;case 4:E.subscribeInfoResponse=lt.decode(_,_.uint32());break;case 5:E.candle=Et.decode(_,_.uint32());break;case 6:E.trade=Rt.decode(_,_.uint32());break;case 7:E.orderbook=It.decode(_,_.uint32());break;case 8:E.tradingStatus=Nt.decode(_,_.uint32());break;case 9:E.ping=xe.decode(_,_.uint32());break;case 10:E.subscribeLastPriceResponse=_t.decode(_,_.uint32());break;case 11:E.lastPrice=yt.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesResponse:market_data_isSet(T.subscribeCandlesResponse)?et.fromJSON(T.subscribeCandlesResponse):undefined,subscribeOrderBookResponse:market_data_isSet(T.subscribeOrderBookResponse)?it.fromJSON(T.subscribeOrderBookResponse):undefined,subscribeTradesResponse:market_data_isSet(T.subscribeTradesResponse)?ut.fromJSON(T.subscribeTradesResponse):undefined,subscribeInfoResponse:market_data_isSet(T.subscribeInfoResponse)?lt.fromJSON(T.subscribeInfoResponse):undefined,candle:market_data_isSet(T.candle)?Et.fromJSON(T.candle):undefined,trade:market_data_isSet(T.trade)?Rt.fromJSON(T.trade):undefined,orderbook:market_data_isSet(T.orderbook)?It.fromJSON(T.orderbook):undefined,tradingStatus:market_data_isSet(T.tradingStatus)?Nt.fromJSON(T.tradingStatus):undefined,ping:market_data_isSet(T.ping)?xe.fromJSON(T.ping):undefined,subscribeLastPriceResponse:market_data_isSet(T.subscribeLastPriceResponse)?_t.fromJSON(T.subscribeLastPriceResponse):undefined,lastPrice:market_data_isSet(T.lastPrice)?yt.fromJSON(T.lastPrice):undefined}},toJSON(T){const m={};T.subscribeCandlesResponse!==undefined&&(m.subscribeCandlesResponse=T.subscribeCandlesResponse?et.toJSON(T.subscribeCandlesResponse):undefined);T.subscribeOrderBookResponse!==undefined&&(m.subscribeOrderBookResponse=T.subscribeOrderBookResponse?it.toJSON(T.subscribeOrderBookResponse):undefined);T.subscribeTradesResponse!==undefined&&(m.subscribeTradesResponse=T.subscribeTradesResponse?ut.toJSON(T.subscribeTradesResponse):undefined);T.subscribeInfoResponse!==undefined&&(m.subscribeInfoResponse=T.subscribeInfoResponse?lt.toJSON(T.subscribeInfoResponse):undefined);T.candle!==undefined&&(m.candle=T.candle?Et.toJSON(T.candle):undefined);T.trade!==undefined&&(m.trade=T.trade?Rt.toJSON(T.trade):undefined);T.orderbook!==undefined&&(m.orderbook=T.orderbook?It.toJSON(T.orderbook):undefined);T.tradingStatus!==undefined&&(m.tradingStatus=T.tradingStatus?Nt.toJSON(T.tradingStatus):undefined);T.ping!==undefined&&(m.ping=T.ping?xe.toJSON(T.ping):undefined);T.subscribeLastPriceResponse!==undefined&&(m.subscribeLastPriceResponse=T.subscribeLastPriceResponse?_t.toJSON(T.subscribeLastPriceResponse):undefined);T.lastPrice!==undefined&&(m.lastPrice=T.lastPrice?yt.toJSON(T.lastPrice):undefined);return m}};function createBaseSubscribeCandlesRequest(){return{subscriptionAction:0,instruments:[],waitingClose:false}}const $e={encode(T,m=Le.Z.Writer.create()){if(T.subscriptionAction!==0){m.uint32(8).int32(T.subscriptionAction)}for(const _ of T.instruments){Qe.encode(_,m.uint32(18).fork()).ldelim()}if(T.waitingClose===true){m.uint32(24).bool(T.waitingClose)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeCandlesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptionAction=_.int32();break;case 2:E.instruments.push(Qe.decode(_,_.uint32()));break;case 3:E.waitingClose=_.bool();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>Qe.fromJSON(T))):[],waitingClose:market_data_isSet(T.waitingClose)?Boolean(T.waitingClose):false}},toJSON(T){const m={};T.subscriptionAction!==undefined&&(m.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){m.instruments=T.instruments.map((T=>T?Qe.toJSON(T):undefined))}else{m.instruments=[]}T.waitingClose!==undefined&&(m.waitingClose=T.waitingClose);return m}};function createBaseCandleInstrument(){return{interval:0,instrumentId:""}}const Qe={encode(T,m=Le.Z.Writer.create()){if(T.interval!==0){m.uint32(16).int32(T.interval)}if(T.instrumentId!==""){m.uint32(26).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseCandleInstrument();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.interval=_.int32();break;case 3:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.interval!==undefined&&(m.interval=subscriptionIntervalToJSON(T.interval));T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseSubscribeCandlesResponse(){return{trackingId:"",candlesSubscriptions:[]}}const et={encode(T,m=Le.Z.Writer.create()){if(T.trackingId!==""){m.uint32(10).string(T.trackingId)}for(const _ of T.candlesSubscriptions){tt.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeCandlesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trackingId=_.string();break;case 2:E.candlesSubscriptions.push(tt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",candlesSubscriptions:Array.isArray(T?.candlesSubscriptions)?T.candlesSubscriptions.map((T=>tt.fromJSON(T))):[]}},toJSON(T){const m={};T.trackingId!==undefined&&(m.trackingId=T.trackingId);if(T.candlesSubscriptions){m.candlesSubscriptions=T.candlesSubscriptions.map((T=>T?tt.toJSON(T):undefined))}else{m.candlesSubscriptions=[]}return m}};function createBaseCandleSubscription(){return{figi:"",interval:0,subscriptionStatus:0,instrumentUid:""}}const tt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.interval!==0){m.uint32(16).int32(T.interval)}if(T.subscriptionStatus!==0){m.uint32(24).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){m.uint32(34).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseCandleSubscription();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.interval=_.int32();break;case 3:E.subscriptionStatus=_.int32();break;case 4:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.interval!==undefined&&(m.interval=subscriptionIntervalToJSON(T.interval));T.subscriptionStatus!==undefined&&(m.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseSubscribeOrderBookRequest(){return{subscriptionAction:0,instruments:[]}}const nt={encode(T,m=Le.Z.Writer.create()){if(T.subscriptionAction!==0){m.uint32(8).int32(T.subscriptionAction)}for(const _ of T.instruments){rt.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeOrderBookRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptionAction=_.int32();break;case 2:E.instruments.push(rt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>rt.fromJSON(T))):[]}},toJSON(T){const m={};T.subscriptionAction!==undefined&&(m.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){m.instruments=T.instruments.map((T=>T?rt.toJSON(T):undefined))}else{m.instruments=[]}return m}};function createBaseOrderBookInstrument(){return{depth:0,instrumentId:""}}const rt={encode(T,m=Le.Z.Writer.create()){if(T.depth!==0){m.uint32(16).int32(T.depth)}if(T.instrumentId!==""){m.uint32(26).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderBookInstrument();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.depth=_.int32();break;case 3:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{depth:market_data_isSet(T.depth)?Number(T.depth):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.depth!==undefined&&(m.depth=Math.round(T.depth));T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseSubscribeOrderBookResponse(){return{trackingId:"",orderBookSubscriptions:[]}}const it={encode(T,m=Le.Z.Writer.create()){if(T.trackingId!==""){m.uint32(10).string(T.trackingId)}for(const _ of T.orderBookSubscriptions){st.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeOrderBookResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trackingId=_.string();break;case 2:E.orderBookSubscriptions.push(st.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",orderBookSubscriptions:Array.isArray(T?.orderBookSubscriptions)?T.orderBookSubscriptions.map((T=>st.fromJSON(T))):[]}},toJSON(T){const m={};T.trackingId!==undefined&&(m.trackingId=T.trackingId);if(T.orderBookSubscriptions){m.orderBookSubscriptions=T.orderBookSubscriptions.map((T=>T?st.toJSON(T):undefined))}else{m.orderBookSubscriptions=[]}return m}};function createBaseOrderBookSubscription(){return{figi:"",depth:0,subscriptionStatus:0,instrumentUid:""}}const st={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.depth!==0){m.uint32(16).int32(T.depth)}if(T.subscriptionStatus!==0){m.uint32(24).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){m.uint32(34).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderBookSubscription();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.depth=_.int32();break;case 3:E.subscriptionStatus=_.int32();break;case 4:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.depth!==undefined&&(m.depth=Math.round(T.depth));T.subscriptionStatus!==undefined&&(m.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseSubscribeTradesRequest(){return{subscriptionAction:0,instruments:[]}}const ot={encode(T,m=Le.Z.Writer.create()){if(T.subscriptionAction!==0){m.uint32(8).int32(T.subscriptionAction)}for(const _ of T.instruments){at.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeTradesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptionAction=_.int32();break;case 2:E.instruments.push(at.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>at.fromJSON(T))):[]}},toJSON(T){const m={};T.subscriptionAction!==undefined&&(m.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){m.instruments=T.instruments.map((T=>T?at.toJSON(T):undefined))}else{m.instruments=[]}return m}};function createBaseTradeInstrument(){return{instrumentId:""}}const at={encode(T,m=Le.Z.Writer.create()){if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTradeInstrument();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseSubscribeTradesResponse(){return{trackingId:"",tradeSubscriptions:[]}}const ut={encode(T,m=Le.Z.Writer.create()){if(T.trackingId!==""){m.uint32(10).string(T.trackingId)}for(const _ of T.tradeSubscriptions){dt.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeTradesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trackingId=_.string();break;case 2:E.tradeSubscriptions.push(dt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",tradeSubscriptions:Array.isArray(T?.tradeSubscriptions)?T.tradeSubscriptions.map((T=>dt.fromJSON(T))):[]}},toJSON(T){const m={};T.trackingId!==undefined&&(m.trackingId=T.trackingId);if(T.tradeSubscriptions){m.tradeSubscriptions=T.tradeSubscriptions.map((T=>T?dt.toJSON(T):undefined))}else{m.tradeSubscriptions=[]}return m}};function createBaseTradeSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const dt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){m.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){m.uint32(26).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTradeSubscription();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.subscriptionStatus=_.int32();break;case 3:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.subscriptionStatus!==undefined&&(m.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseSubscribeInfoRequest(){return{subscriptionAction:0,instruments:[]}}const ct={encode(T,m=Le.Z.Writer.create()){if(T.subscriptionAction!==0){m.uint32(8).int32(T.subscriptionAction)}for(const _ of T.instruments){ft.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeInfoRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptionAction=_.int32();break;case 2:E.instruments.push(ft.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>ft.fromJSON(T))):[]}},toJSON(T){const m={};T.subscriptionAction!==undefined&&(m.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){m.instruments=T.instruments.map((T=>T?ft.toJSON(T):undefined))}else{m.instruments=[]}return m}};function createBaseInfoInstrument(){return{instrumentId:""}}const ft={encode(T,m=Le.Z.Writer.create()){if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseInfoInstrument();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseSubscribeInfoResponse(){return{trackingId:"",infoSubscriptions:[]}}const lt={encode(T,m=Le.Z.Writer.create()){if(T.trackingId!==""){m.uint32(10).string(T.trackingId)}for(const _ of T.infoSubscriptions){Tt.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeInfoResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trackingId=_.string();break;case 2:E.infoSubscriptions.push(Tt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",infoSubscriptions:Array.isArray(T?.infoSubscriptions)?T.infoSubscriptions.map((T=>Tt.fromJSON(T))):[]}},toJSON(T){const m={};T.trackingId!==undefined&&(m.trackingId=T.trackingId);if(T.infoSubscriptions){m.infoSubscriptions=T.infoSubscriptions.map((T=>T?Tt.toJSON(T):undefined))}else{m.infoSubscriptions=[]}return m}};function createBaseInfoSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const Tt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){m.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){m.uint32(26).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseInfoSubscription();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.subscriptionStatus=_.int32();break;case 3:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.subscriptionStatus!==undefined&&(m.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseSubscribeLastPriceRequest(){return{subscriptionAction:0,instruments:[]}}const pt={encode(T,m=Le.Z.Writer.create()){if(T.subscriptionAction!==0){m.uint32(8).int32(T.subscriptionAction)}for(const _ of T.instruments){mt.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeLastPriceRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptionAction=_.int32();break;case 2:E.instruments.push(mt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>mt.fromJSON(T))):[]}},toJSON(T){const m={};T.subscriptionAction!==undefined&&(m.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){m.instruments=T.instruments.map((T=>T?mt.toJSON(T):undefined))}else{m.instruments=[]}return m}};function createBaseLastPriceInstrument(){return{instrumentId:""}}const mt={encode(T,m=Le.Z.Writer.create()){if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseLastPriceInstrument();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseSubscribeLastPriceResponse(){return{trackingId:"",lastPriceSubscriptions:[]}}const _t={encode(T,m=Le.Z.Writer.create()){if(T.trackingId!==""){m.uint32(10).string(T.trackingId)}for(const _ of T.lastPriceSubscriptions){St.encode(_,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseSubscribeLastPriceResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trackingId=_.string();break;case 2:E.lastPriceSubscriptions.push(St.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",lastPriceSubscriptions:Array.isArray(T?.lastPriceSubscriptions)?T.lastPriceSubscriptions.map((T=>St.fromJSON(T))):[]}},toJSON(T){const m={};T.trackingId!==undefined&&(m.trackingId=T.trackingId);if(T.lastPriceSubscriptions){m.lastPriceSubscriptions=T.lastPriceSubscriptions.map((T=>T?St.toJSON(T):undefined))}else{m.lastPriceSubscriptions=[]}return m}};function createBaseLastPriceSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const St={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){m.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){m.uint32(26).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseLastPriceSubscription();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.subscriptionStatus=_.int32();break;case 3:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.subscriptionStatus!==undefined&&(m.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseCandle(){return{figi:"",interval:0,open:undefined,high:undefined,low:undefined,close:undefined,volume:0,time:undefined,lastTradeTs:undefined,instrumentUid:""}}const Et={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.interval!==0){m.uint32(16).int32(T.interval)}if(T.open!==undefined){Ge.encode(T.open,m.uint32(26).fork()).ldelim()}if(T.high!==undefined){Ge.encode(T.high,m.uint32(34).fork()).ldelim()}if(T.low!==undefined){Ge.encode(T.low,m.uint32(42).fork()).ldelim()}if(T.close!==undefined){Ge.encode(T.close,m.uint32(50).fork()).ldelim()}if(T.volume!==0){m.uint32(56).int64(T.volume)}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(66).fork()).ldelim()}if(T.lastTradeTs!==undefined){Ye.encode(market_data_toTimestamp(T.lastTradeTs),m.uint32(74).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(82).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseCandle();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.interval=_.int32();break;case 3:E.open=Ge.decode(_,_.uint32());break;case 4:E.high=Ge.decode(_,_.uint32());break;case 5:E.low=Ge.decode(_,_.uint32());break;case 6:E.close=Ge.decode(_,_.uint32());break;case 7:E.volume=market_data_longToNumber(_.int64());break;case 8:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 9:E.lastTradeTs=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 10:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,open:market_data_isSet(T.open)?Ge.fromJSON(T.open):undefined,high:market_data_isSet(T.high)?Ge.fromJSON(T.high):undefined,low:market_data_isSet(T.low)?Ge.fromJSON(T.low):undefined,close:market_data_isSet(T.close)?Ge.fromJSON(T.close):undefined,volume:market_data_isSet(T.volume)?Number(T.volume):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,lastTradeTs:market_data_isSet(T.lastTradeTs)?market_data_fromJsonTimestamp(T.lastTradeTs):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.interval!==undefined&&(m.interval=subscriptionIntervalToJSON(T.interval));T.open!==undefined&&(m.open=T.open?Ge.toJSON(T.open):undefined);T.high!==undefined&&(m.high=T.high?Ge.toJSON(T.high):undefined);T.low!==undefined&&(m.low=T.low?Ge.toJSON(T.low):undefined);T.close!==undefined&&(m.close=T.close?Ge.toJSON(T.close):undefined);T.volume!==undefined&&(m.volume=Math.round(T.volume));T.time!==undefined&&(m.time=T.time.toISOString());T.lastTradeTs!==undefined&&(m.lastTradeTs=T.lastTradeTs.toISOString());T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseOrderBook(){return{figi:"",depth:0,isConsistent:false,bids:[],asks:[],time:undefined,limitUp:undefined,limitDown:undefined,instrumentUid:""}}const It={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.depth!==0){m.uint32(16).int32(T.depth)}if(T.isConsistent===true){m.uint32(24).bool(T.isConsistent)}for(const _ of T.bids){Ot.encode(_,m.uint32(34).fork()).ldelim()}for(const _ of T.asks){Ot.encode(_,m.uint32(42).fork()).ldelim()}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(50).fork()).ldelim()}if(T.limitUp!==undefined){Ge.encode(T.limitUp,m.uint32(58).fork()).ldelim()}if(T.limitDown!==undefined){Ge.encode(T.limitDown,m.uint32(66).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(74).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderBook();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.depth=_.int32();break;case 3:E.isConsistent=_.bool();break;case 4:E.bids.push(Ot.decode(_,_.uint32()));break;case 5:E.asks.push(Ot.decode(_,_.uint32()));break;case 6:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 7:E.limitUp=Ge.decode(_,_.uint32());break;case 8:E.limitDown=Ge.decode(_,_.uint32());break;case 9:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,isConsistent:market_data_isSet(T.isConsistent)?Boolean(T.isConsistent):false,bids:Array.isArray(T?.bids)?T.bids.map((T=>Ot.fromJSON(T))):[],asks:Array.isArray(T?.asks)?T.asks.map((T=>Ot.fromJSON(T))):[],time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,limitUp:market_data_isSet(T.limitUp)?Ge.fromJSON(T.limitUp):undefined,limitDown:market_data_isSet(T.limitDown)?Ge.fromJSON(T.limitDown):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.depth!==undefined&&(m.depth=Math.round(T.depth));T.isConsistent!==undefined&&(m.isConsistent=T.isConsistent);if(T.bids){m.bids=T.bids.map((T=>T?Ot.toJSON(T):undefined))}else{m.bids=[]}if(T.asks){m.asks=T.asks.map((T=>T?Ot.toJSON(T):undefined))}else{m.asks=[]}T.time!==undefined&&(m.time=T.time.toISOString());T.limitUp!==undefined&&(m.limitUp=T.limitUp?Ge.toJSON(T.limitUp):undefined);T.limitDown!==undefined&&(m.limitDown=T.limitDown?Ge.toJSON(T.limitDown):undefined);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseOrder(){return{price:undefined,quantity:0}}const Ot={encode(T,m=Le.Z.Writer.create()){if(T.price!==undefined){Ge.encode(T.price,m.uint32(10).fork()).ldelim()}if(T.quantity!==0){m.uint32(16).int64(T.quantity)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrder();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.price=Ge.decode(_,_.uint32());break;case 2:E.quantity=market_data_longToNumber(_.int64());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{price:market_data_isSet(T.price)?Ge.fromJSON(T.price):undefined,quantity:market_data_isSet(T.quantity)?Number(T.quantity):0}},toJSON(T){const m={};T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));return m}};function createBaseTrade(){return{figi:"",direction:0,price:undefined,quantity:0,time:undefined,instrumentUid:""}}const Rt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.direction!==0){m.uint32(16).int32(T.direction)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(26).fork()).ldelim()}if(T.quantity!==0){m.uint32(32).int64(T.quantity)}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(42).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(50).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTrade();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.direction=_.int32();break;case 3:E.price=Ge.decode(_,_.uint32());break;case 4:E.quantity=market_data_longToNumber(_.int64());break;case 5:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 6:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",direction:market_data_isSet(T.direction)?tradeDirectionFromJSON(T.direction):0,price:market_data_isSet(T.price)?Ge.fromJSON(T.price):undefined,quantity:market_data_isSet(T.quantity)?Number(T.quantity):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.direction!==undefined&&(m.direction=tradeDirectionToJSON(T.direction));T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.time!==undefined&&(m.time=T.time.toISOString());T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseTradingStatus(){return{figi:"",tradingStatus:0,time:undefined,limitOrderAvailableFlag:false,marketOrderAvailableFlag:false,instrumentUid:""}}const Nt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.tradingStatus!==0){m.uint32(16).int32(T.tradingStatus)}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(26).fork()).ldelim()}if(T.limitOrderAvailableFlag===true){m.uint32(32).bool(T.limitOrderAvailableFlag)}if(T.marketOrderAvailableFlag===true){m.uint32(40).bool(T.marketOrderAvailableFlag)}if(T.instrumentUid!==""){m.uint32(50).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTradingStatus();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.tradingStatus=_.int32();break;case 3:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 4:E.limitOrderAvailableFlag=_.bool();break;case 5:E.marketOrderAvailableFlag=_.bool();break;case 6:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",tradingStatus:market_data_isSet(T.tradingStatus)?securityTradingStatusFromJSON(T.tradingStatus):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,limitOrderAvailableFlag:market_data_isSet(T.limitOrderAvailableFlag)?Boolean(T.limitOrderAvailableFlag):false,marketOrderAvailableFlag:market_data_isSet(T.marketOrderAvailableFlag)?Boolean(T.marketOrderAvailableFlag):false,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.tradingStatus!==undefined&&(m.tradingStatus=securityTradingStatusToJSON(T.tradingStatus));T.time!==undefined&&(m.time=T.time.toISOString());T.limitOrderAvailableFlag!==undefined&&(m.limitOrderAvailableFlag=T.limitOrderAvailableFlag);T.marketOrderAvailableFlag!==undefined&&(m.marketOrderAvailableFlag=T.marketOrderAvailableFlag);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseGetCandlesRequest(){return{from:undefined,to:undefined,interval:0,instrumentId:""}}const ht={encode(T,m=Le.Z.Writer.create()){if(T.from!==undefined){Ye.encode(market_data_toTimestamp(T.from),m.uint32(18).fork()).ldelim()}if(T.to!==undefined){Ye.encode(market_data_toTimestamp(T.to),m.uint32(26).fork()).ldelim()}if(T.interval!==0){m.uint32(32).int32(T.interval)}if(T.instrumentId!==""){m.uint32(42).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetCandlesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.from=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.to=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 4:E.interval=_.int32();break;case 5:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{from:market_data_isSet(T.from)?market_data_fromJsonTimestamp(T.from):undefined,to:market_data_isSet(T.to)?market_data_fromJsonTimestamp(T.to):undefined,interval:market_data_isSet(T.interval)?candleIntervalFromJSON(T.interval):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());T.interval!==undefined&&(m.interval=candleIntervalToJSON(T.interval));T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseGetCandlesResponse(){return{candles:[]}}const At={encode(T,m=Le.Z.Writer.create()){for(const _ of T.candles){bt.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetCandlesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.candles.push(bt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{candles:Array.isArray(T?.candles)?T.candles.map((T=>bt.fromJSON(T))):[]}},toJSON(T){const m={};if(T.candles){m.candles=T.candles.map((T=>T?bt.toJSON(T):undefined))}else{m.candles=[]}return m}};function createBaseHistoricCandle(){return{open:undefined,high:undefined,low:undefined,close:undefined,volume:0,time:undefined,isComplete:false}}const bt={encode(T,m=Le.Z.Writer.create()){if(T.open!==undefined){Ge.encode(T.open,m.uint32(10).fork()).ldelim()}if(T.high!==undefined){Ge.encode(T.high,m.uint32(18).fork()).ldelim()}if(T.low!==undefined){Ge.encode(T.low,m.uint32(26).fork()).ldelim()}if(T.close!==undefined){Ge.encode(T.close,m.uint32(34).fork()).ldelim()}if(T.volume!==0){m.uint32(40).int64(T.volume)}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(50).fork()).ldelim()}if(T.isComplete===true){m.uint32(56).bool(T.isComplete)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseHistoricCandle();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.open=Ge.decode(_,_.uint32());break;case 2:E.high=Ge.decode(_,_.uint32());break;case 3:E.low=Ge.decode(_,_.uint32());break;case 4:E.close=Ge.decode(_,_.uint32());break;case 5:E.volume=market_data_longToNumber(_.int64());break;case 6:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 7:E.isComplete=_.bool();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{open:market_data_isSet(T.open)?Ge.fromJSON(T.open):undefined,high:market_data_isSet(T.high)?Ge.fromJSON(T.high):undefined,low:market_data_isSet(T.low)?Ge.fromJSON(T.low):undefined,close:market_data_isSet(T.close)?Ge.fromJSON(T.close):undefined,volume:market_data_isSet(T.volume)?Number(T.volume):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,isComplete:market_data_isSet(T.isComplete)?Boolean(T.isComplete):false}},toJSON(T){const m={};T.open!==undefined&&(m.open=T.open?Ge.toJSON(T.open):undefined);T.high!==undefined&&(m.high=T.high?Ge.toJSON(T.high):undefined);T.low!==undefined&&(m.low=T.low?Ge.toJSON(T.low):undefined);T.close!==undefined&&(m.close=T.close?Ge.toJSON(T.close):undefined);T.volume!==undefined&&(m.volume=Math.round(T.volume));T.time!==undefined&&(m.time=T.time.toISOString());T.isComplete!==undefined&&(m.isComplete=T.isComplete);return m}};function createBaseGetLastPricesRequest(){return{instrumentId:[]}}const gt={encode(T,m=Le.Z.Writer.create()){for(const _ of T.instrumentId){m.uint32(18).string(_)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetLastPricesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.instrumentId.push(_.string());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:Array.isArray(T?.instrumentId)?T.instrumentId.map((T=>String(T))):[]}},toJSON(T){const m={};if(T.instrumentId){m.instrumentId=T.instrumentId.map((T=>T))}else{m.instrumentId=[]}return m}};function createBaseGetLastPricesResponse(){return{lastPrices:[]}}const Pt={encode(T,m=Le.Z.Writer.create()){for(const _ of T.lastPrices){yt.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetLastPricesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.lastPrices.push(yt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{lastPrices:Array.isArray(T?.lastPrices)?T.lastPrices.map((T=>yt.fromJSON(T))):[]}},toJSON(T){const m={};if(T.lastPrices){m.lastPrices=T.lastPrices.map((T=>T?yt.toJSON(T):undefined))}else{m.lastPrices=[]}return m}};function createBaseLastPrice(){return{figi:"",price:undefined,time:undefined,instrumentUid:""}}const yt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(18).fork()).ldelim()}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(26).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(90).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseLastPrice();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.price=Ge.decode(_,_.uint32());break;case 3:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 11:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",price:market_data_isSet(T.price)?Ge.fromJSON(T.price):undefined,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.time!==undefined&&(m.time=T.time.toISOString());T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseGetOrderBookRequest(){return{depth:0,instrumentId:""}}const Ct={encode(T,m=Le.Z.Writer.create()){if(T.depth!==0){m.uint32(16).int32(T.depth)}if(T.instrumentId!==""){m.uint32(26).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOrderBookRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.depth=_.int32();break;case 3:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{depth:market_data_isSet(T.depth)?Number(T.depth):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.depth!==undefined&&(m.depth=Math.round(T.depth));T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseGetOrderBookResponse(){return{figi:"",depth:0,bids:[],asks:[],lastPrice:undefined,closePrice:undefined,limitUp:undefined,limitDown:undefined,lastPriceTs:undefined,closePriceTs:undefined,orderbookTs:undefined,instrumentUid:""}}const kt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.depth!==0){m.uint32(16).int32(T.depth)}for(const _ of T.bids){Ot.encode(_,m.uint32(26).fork()).ldelim()}for(const _ of T.asks){Ot.encode(_,m.uint32(34).fork()).ldelim()}if(T.lastPrice!==undefined){Ge.encode(T.lastPrice,m.uint32(42).fork()).ldelim()}if(T.closePrice!==undefined){Ge.encode(T.closePrice,m.uint32(50).fork()).ldelim()}if(T.limitUp!==undefined){Ge.encode(T.limitUp,m.uint32(58).fork()).ldelim()}if(T.limitDown!==undefined){Ge.encode(T.limitDown,m.uint32(66).fork()).ldelim()}if(T.lastPriceTs!==undefined){Ye.encode(market_data_toTimestamp(T.lastPriceTs),m.uint32(170).fork()).ldelim()}if(T.closePriceTs!==undefined){Ye.encode(market_data_toTimestamp(T.closePriceTs),m.uint32(178).fork()).ldelim()}if(T.orderbookTs!==undefined){Ye.encode(market_data_toTimestamp(T.orderbookTs),m.uint32(186).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(74).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOrderBookResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.depth=_.int32();break;case 3:E.bids.push(Ot.decode(_,_.uint32()));break;case 4:E.asks.push(Ot.decode(_,_.uint32()));break;case 5:E.lastPrice=Ge.decode(_,_.uint32());break;case 6:E.closePrice=Ge.decode(_,_.uint32());break;case 7:E.limitUp=Ge.decode(_,_.uint32());break;case 8:E.limitDown=Ge.decode(_,_.uint32());break;case 21:E.lastPriceTs=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 22:E.closePriceTs=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 23:E.orderbookTs=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 9:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,bids:Array.isArray(T?.bids)?T.bids.map((T=>Ot.fromJSON(T))):[],asks:Array.isArray(T?.asks)?T.asks.map((T=>Ot.fromJSON(T))):[],lastPrice:market_data_isSet(T.lastPrice)?Ge.fromJSON(T.lastPrice):undefined,closePrice:market_data_isSet(T.closePrice)?Ge.fromJSON(T.closePrice):undefined,limitUp:market_data_isSet(T.limitUp)?Ge.fromJSON(T.limitUp):undefined,limitDown:market_data_isSet(T.limitDown)?Ge.fromJSON(T.limitDown):undefined,lastPriceTs:market_data_isSet(T.lastPriceTs)?market_data_fromJsonTimestamp(T.lastPriceTs):undefined,closePriceTs:market_data_isSet(T.closePriceTs)?market_data_fromJsonTimestamp(T.closePriceTs):undefined,orderbookTs:market_data_isSet(T.orderbookTs)?market_data_fromJsonTimestamp(T.orderbookTs):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.depth!==undefined&&(m.depth=Math.round(T.depth));if(T.bids){m.bids=T.bids.map((T=>T?Ot.toJSON(T):undefined))}else{m.bids=[]}if(T.asks){m.asks=T.asks.map((T=>T?Ot.toJSON(T):undefined))}else{m.asks=[]}T.lastPrice!==undefined&&(m.lastPrice=T.lastPrice?Ge.toJSON(T.lastPrice):undefined);T.closePrice!==undefined&&(m.closePrice=T.closePrice?Ge.toJSON(T.closePrice):undefined);T.limitUp!==undefined&&(m.limitUp=T.limitUp?Ge.toJSON(T.limitUp):undefined);T.limitDown!==undefined&&(m.limitDown=T.limitDown?Ge.toJSON(T.limitDown):undefined);T.lastPriceTs!==undefined&&(m.lastPriceTs=T.lastPriceTs.toISOString());T.closePriceTs!==undefined&&(m.closePriceTs=T.closePriceTs.toISOString());T.orderbookTs!==undefined&&(m.orderbookTs=T.orderbookTs.toISOString());T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseGetTradingStatusRequest(){return{instrumentId:""}}const Ut={encode(T,m=Le.Z.Writer.create()){if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetTradingStatusRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseGetTradingStatusResponse(){return{figi:"",tradingStatus:0,limitOrderAvailableFlag:false,marketOrderAvailableFlag:false,apiTradeAvailableFlag:false,instrumentUid:""}}const Dt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.tradingStatus!==0){m.uint32(16).int32(T.tradingStatus)}if(T.limitOrderAvailableFlag===true){m.uint32(24).bool(T.limitOrderAvailableFlag)}if(T.marketOrderAvailableFlag===true){m.uint32(32).bool(T.marketOrderAvailableFlag)}if(T.apiTradeAvailableFlag===true){m.uint32(40).bool(T.apiTradeAvailableFlag)}if(T.instrumentUid!==""){m.uint32(50).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetTradingStatusResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.tradingStatus=_.int32();break;case 3:E.limitOrderAvailableFlag=_.bool();break;case 4:E.marketOrderAvailableFlag=_.bool();break;case 5:E.apiTradeAvailableFlag=_.bool();break;case 6:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",tradingStatus:market_data_isSet(T.tradingStatus)?securityTradingStatusFromJSON(T.tradingStatus):0,limitOrderAvailableFlag:market_data_isSet(T.limitOrderAvailableFlag)?Boolean(T.limitOrderAvailableFlag):false,marketOrderAvailableFlag:market_data_isSet(T.marketOrderAvailableFlag)?Boolean(T.marketOrderAvailableFlag):false,apiTradeAvailableFlag:market_data_isSet(T.apiTradeAvailableFlag)?Boolean(T.apiTradeAvailableFlag):false,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.tradingStatus!==undefined&&(m.tradingStatus=securityTradingStatusToJSON(T.tradingStatus));T.limitOrderAvailableFlag!==undefined&&(m.limitOrderAvailableFlag=T.limitOrderAvailableFlag);T.marketOrderAvailableFlag!==undefined&&(m.marketOrderAvailableFlag=T.marketOrderAvailableFlag);T.apiTradeAvailableFlag!==undefined&&(m.apiTradeAvailableFlag=T.apiTradeAvailableFlag);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseGetLastTradesRequest(){return{from:undefined,to:undefined,instrumentId:""}}const wt={encode(T,m=Le.Z.Writer.create()){if(T.from!==undefined){Ye.encode(market_data_toTimestamp(T.from),m.uint32(18).fork()).ldelim()}if(T.to!==undefined){Ye.encode(market_data_toTimestamp(T.to),m.uint32(26).fork()).ldelim()}if(T.instrumentId!==""){m.uint32(34).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetLastTradesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.from=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.to=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;case 4:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{from:market_data_isSet(T.from)?market_data_fromJsonTimestamp(T.from):undefined,to:market_data_isSet(T.to)?market_data_fromJsonTimestamp(T.to):undefined,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseGetLastTradesResponse(){return{trades:[]}}const Bt={encode(T,m=Le.Z.Writer.create()){for(const _ of T.trades){Rt.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetLastTradesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.trades.push(Rt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trades:Array.isArray(T?.trades)?T.trades.map((T=>Rt.fromJSON(T))):[]}},toJSON(T){const m={};if(T.trades){m.trades=T.trades.map((T=>T?Rt.toJSON(T):undefined))}else{m.trades=[]}return m}};function createBaseGetMySubscriptions(){return{}}const Lt={encode(T,m=Le.Z.Writer.create()){return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetMySubscriptions();while(_.pos<S){const T=_.uint32();switch(T>>>3){default:_.skipType(T&7);break}}return E},fromJSON(T){return{}},toJSON(T){const m={};return m}};function createBaseGetClosePricesRequest(){return{instruments:[]}}const vt={encode(T,m=Le.Z.Writer.create()){for(const _ of T.instruments){Yt.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetClosePricesRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.instruments.push(Yt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>Yt.fromJSON(T))):[]}},toJSON(T){const m={};if(T.instruments){m.instruments=T.instruments.map((T=>T?Yt.toJSON(T):undefined))}else{m.instruments=[]}return m}};function createBaseInstrumentClosePriceRequest(){return{instrumentId:""}}const Yt={encode(T,m=Le.Z.Writer.create()){if(T.instrumentId!==""){m.uint32(10).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseInstrumentClosePriceRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBaseGetClosePricesResponse(){return{closePrices:[]}}const Ft={encode(T,m=Le.Z.Writer.create()){for(const _ of T.closePrices){Mt.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetClosePricesResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.closePrices.push(Mt.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{closePrices:Array.isArray(T?.closePrices)?T.closePrices.map((T=>Mt.fromJSON(T))):[]}},toJSON(T){const m={};if(T.closePrices){m.closePrices=T.closePrices.map((T=>T?Mt.toJSON(T):undefined))}else{m.closePrices=[]}return m}};function createBaseInstrumentClosePriceResponse(){return{figi:"",instrumentUid:"",price:undefined,time:undefined}}const Mt={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.instrumentUid!==""){m.uint32(18).string(T.instrumentUid)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(90).fork()).ldelim()}if(T.time!==undefined){Ye.encode(market_data_toTimestamp(T.time),m.uint32(170).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseInstrumentClosePriceResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.instrumentUid=_.string();break;case 11:E.price=Ge.decode(_,_.uint32());break;case 21:E.time=market_data_fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):"",price:market_data_isSet(T.price)?Ge.fromJSON(T.price):undefined,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.time!==undefined&&(m.time=T.time.toISOString());return m}};const Jt={name:"MarketDataService",fullName:"tinkoff.public.invest.api.contract.v1.MarketDataService",methods:{getCandles:{name:"GetCandles",requestType:ht,requestStream:false,responseType:At,responseStream:false,options:{}},getLastPrices:{name:"GetLastPrices",requestType:gt,requestStream:false,responseType:Pt,responseStream:false,options:{}},getOrderBook:{name:"GetOrderBook",requestType:Ct,requestStream:false,responseType:kt,responseStream:false,options:{}},getTradingStatus:{name:"GetTradingStatus",requestType:Ut,requestStream:false,responseType:Dt,responseStream:false,options:{}},getLastTrades:{name:"GetLastTrades",requestType:wt,requestStream:false,responseType:Bt,responseStream:false,options:{}},getClosePrices:{name:"GetClosePrices",requestType:vt,requestStream:false,responseType:Ft,responseStream:false,options:{}}}};const Gt={name:"MarketDataStreamService",fullName:"tinkoff.public.invest.api.contract.v1.MarketDataStreamService",methods:{marketDataStream:{name:"MarketDataStream",requestType:Ke,requestStream:true,responseType:je,responseStream:true,options:{}},marketDataServerSideStream:{name:"MarketDataServerSideStream",requestType:ze,requestStream:false,responseType:je,responseStream:true,options:{}}}};function market_data_toTimestamp(T){const m=T.getTime()/1e3;const _=T.getTime()%1e3*1e6;return{seconds:m,nanos:_}}function market_data_fromTimestamp(T){let m=T.seconds*1e3;m+=T.nanos/1e6;return new Date(m)}function market_data_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return market_data_fromTimestamp(Ye.fromJSON(T))}}function market_data_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function market_data_isSet(T){return T!==null&&T!==undefined}const xt="tinkoff.public.invest.api.contract.v1";var qt;(function(T){T[T["ORDER_DIRECTION_UNSPECIFIED"]=0]="ORDER_DIRECTION_UNSPECIFIED";T[T["ORDER_DIRECTION_BUY"]=1]="ORDER_DIRECTION_BUY";T[T["ORDER_DIRECTION_SELL"]=2]="ORDER_DIRECTION_SELL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(qt||(qt={}));function orderDirectionFromJSON(T){switch(T){case 0:case"ORDER_DIRECTION_UNSPECIFIED":return qt.ORDER_DIRECTION_UNSPECIFIED;case 1:case"ORDER_DIRECTION_BUY":return qt.ORDER_DIRECTION_BUY;case 2:case"ORDER_DIRECTION_SELL":return qt.ORDER_DIRECTION_SELL;case-1:case"UNRECOGNIZED":default:return qt.UNRECOGNIZED}}function orderDirectionToJSON(T){switch(T){case qt.ORDER_DIRECTION_UNSPECIFIED:return"ORDER_DIRECTION_UNSPECIFIED";case qt.ORDER_DIRECTION_BUY:return"ORDER_DIRECTION_BUY";case qt.ORDER_DIRECTION_SELL:return"ORDER_DIRECTION_SELL";case qt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Vt;(function(T){T[T["ORDER_TYPE_UNSPECIFIED"]=0]="ORDER_TYPE_UNSPECIFIED";T[T["ORDER_TYPE_LIMIT"]=1]="ORDER_TYPE_LIMIT";T[T["ORDER_TYPE_MARKET"]=2]="ORDER_TYPE_MARKET";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Vt||(Vt={}));function orderTypeFromJSON(T){switch(T){case 0:case"ORDER_TYPE_UNSPECIFIED":return Vt.ORDER_TYPE_UNSPECIFIED;case 1:case"ORDER_TYPE_LIMIT":return Vt.ORDER_TYPE_LIMIT;case 2:case"ORDER_TYPE_MARKET":return Vt.ORDER_TYPE_MARKET;case-1:case"UNRECOGNIZED":default:return Vt.UNRECOGNIZED}}function orderTypeToJSON(T){switch(T){case Vt.ORDER_TYPE_UNSPECIFIED:return"ORDER_TYPE_UNSPECIFIED";case Vt.ORDER_TYPE_LIMIT:return"ORDER_TYPE_LIMIT";case Vt.ORDER_TYPE_MARKET:return"ORDER_TYPE_MARKET";case Vt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Zt;(function(T){T[T["EXECUTION_REPORT_STATUS_UNSPECIFIED"]=0]="EXECUTION_REPORT_STATUS_UNSPECIFIED";T[T["EXECUTION_REPORT_STATUS_FILL"]=1]="EXECUTION_REPORT_STATUS_FILL";T[T["EXECUTION_REPORT_STATUS_REJECTED"]=2]="EXECUTION_REPORT_STATUS_REJECTED";T[T["EXECUTION_REPORT_STATUS_CANCELLED"]=3]="EXECUTION_REPORT_STATUS_CANCELLED";T[T["EXECUTION_REPORT_STATUS_NEW"]=4]="EXECUTION_REPORT_STATUS_NEW";T[T["EXECUTION_REPORT_STATUS_PARTIALLYFILL"]=5]="EXECUTION_REPORT_STATUS_PARTIALLYFILL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Zt||(Zt={}));function orderExecutionReportStatusFromJSON(T){switch(T){case 0:case"EXECUTION_REPORT_STATUS_UNSPECIFIED":return Zt.EXECUTION_REPORT_STATUS_UNSPECIFIED;case 1:case"EXECUTION_REPORT_STATUS_FILL":return Zt.EXECUTION_REPORT_STATUS_FILL;case 2:case"EXECUTION_REPORT_STATUS_REJECTED":return Zt.EXECUTION_REPORT_STATUS_REJECTED;case 3:case"EXECUTION_REPORT_STATUS_CANCELLED":return Zt.EXECUTION_REPORT_STATUS_CANCELLED;case 4:case"EXECUTION_REPORT_STATUS_NEW":return Zt.EXECUTION_REPORT_STATUS_NEW;case 5:case"EXECUTION_REPORT_STATUS_PARTIALLYFILL":return Zt.EXECUTION_REPORT_STATUS_PARTIALLYFILL;case-1:case"UNRECOGNIZED":default:return Zt.UNRECOGNIZED}}function orderExecutionReportStatusToJSON(T){switch(T){case Zt.EXECUTION_REPORT_STATUS_UNSPECIFIED:return"EXECUTION_REPORT_STATUS_UNSPECIFIED";case Zt.EXECUTION_REPORT_STATUS_FILL:return"EXECUTION_REPORT_STATUS_FILL";case Zt.EXECUTION_REPORT_STATUS_REJECTED:return"EXECUTION_REPORT_STATUS_REJECTED";case Zt.EXECUTION_REPORT_STATUS_CANCELLED:return"EXECUTION_REPORT_STATUS_CANCELLED";case Zt.EXECUTION_REPORT_STATUS_NEW:return"EXECUTION_REPORT_STATUS_NEW";case Zt.EXECUTION_REPORT_STATUS_PARTIALLYFILL:return"EXECUTION_REPORT_STATUS_PARTIALLYFILL";case Zt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Xt;(function(T){T[T["PRICE_TYPE_UNSPECIFIED"]=0]="PRICE_TYPE_UNSPECIFIED";T[T["PRICE_TYPE_POINT"]=1]="PRICE_TYPE_POINT";T[T["PRICE_TYPE_CURRENCY"]=2]="PRICE_TYPE_CURRENCY";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Xt||(Xt={}));function priceTypeFromJSON(T){switch(T){case 0:case"PRICE_TYPE_UNSPECIFIED":return Xt.PRICE_TYPE_UNSPECIFIED;case 1:case"PRICE_TYPE_POINT":return Xt.PRICE_TYPE_POINT;case 2:case"PRICE_TYPE_CURRENCY":return Xt.PRICE_TYPE_CURRENCY;case-1:case"UNRECOGNIZED":default:return Xt.UNRECOGNIZED}}function priceTypeToJSON(T){switch(T){case Xt.PRICE_TYPE_UNSPECIFIED:return"PRICE_TYPE_UNSPECIFIED";case Xt.PRICE_TYPE_POINT:return"PRICE_TYPE_POINT";case Xt.PRICE_TYPE_CURRENCY:return"PRICE_TYPE_CURRENCY";case Xt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseTradesStreamRequest(){return{accounts:[]}}const Wt={encode(T,m=Le.Z.Writer.create()){for(const _ of T.accounts){m.uint32(10).string(_)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTradesStreamRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accounts.push(_.string());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const m={};if(T.accounts){m.accounts=T.accounts.map((T=>T))}else{m.accounts=[]}return m}};function createBaseTradesStreamResponse(){return{orderTrades:undefined,ping:undefined}}const Ht={encode(T,m=Le.Z.Writer.create()){if(T.orderTrades!==undefined){Kt.encode(T.orderTrades,m.uint32(10).fork()).ldelim()}if(T.ping!==undefined){Ping.encode(T.ping,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseTradesStreamResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.orderTrades=Kt.decode(_,_.uint32());break;case 2:E.ping=Ping.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{orderTrades:orders_isSet(T.orderTrades)?Kt.fromJSON(T.orderTrades):undefined,ping:orders_isSet(T.ping)?Ping.fromJSON(T.ping):undefined}},toJSON(T){const m={};T.orderTrades!==undefined&&(m.orderTrades=T.orderTrades?Kt.toJSON(T.orderTrades):undefined);T.ping!==undefined&&(m.ping=T.ping?Ping.toJSON(T.ping):undefined);return m}};function createBaseOrderTrades(){return{orderId:"",createdAt:undefined,direction:0,figi:"",trades:[],accountId:"",instrumentUid:""}}const Kt={encode(T,m=Le.Z.Writer.create()){if(T.orderId!==""){m.uint32(10).string(T.orderId)}if(T.createdAt!==undefined){Ye.encode(orders_toTimestamp(T.createdAt),m.uint32(18).fork()).ldelim()}if(T.direction!==0){m.uint32(24).int32(T.direction)}if(T.figi!==""){m.uint32(34).string(T.figi)}for(const _ of T.trades){zt.encode(_,m.uint32(42).fork()).ldelim()}if(T.accountId!==""){m.uint32(50).string(T.accountId)}if(T.instrumentUid!==""){m.uint32(58).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderTrades();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.orderId=_.string();break;case 2:E.createdAt=orders_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.direction=_.int32();break;case 4:E.figi=_.string();break;case 5:E.trades.push(zt.decode(_,_.uint32()));break;case 6:E.accountId=_.string();break;case 7:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",createdAt:orders_isSet(T.createdAt)?orders_fromJsonTimestamp(T.createdAt):undefined,direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,figi:orders_isSet(T.figi)?String(T.figi):"",trades:Array.isArray(T?.trades)?T.trades.map((T=>zt.fromJSON(T))):[],accountId:orders_isSet(T.accountId)?String(T.accountId):"",instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.orderId!==undefined&&(m.orderId=T.orderId);T.createdAt!==undefined&&(m.createdAt=T.createdAt.toISOString());T.direction!==undefined&&(m.direction=orderDirectionToJSON(T.direction));T.figi!==undefined&&(m.figi=T.figi);if(T.trades){m.trades=T.trades.map((T=>T?zt.toJSON(T):undefined))}else{m.trades=[]}T.accountId!==undefined&&(m.accountId=T.accountId);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseOrderTrade(){return{dateTime:undefined,price:undefined,quantity:0,tradeId:""}}const zt={encode(T,m=Le.Z.Writer.create()){if(T.dateTime!==undefined){Ye.encode(orders_toTimestamp(T.dateTime),m.uint32(10).fork()).ldelim()}if(T.price!==undefined){Ge.encode(T.price,m.uint32(18).fork()).ldelim()}if(T.quantity!==0){m.uint32(24).int64(T.quantity)}if(T.tradeId!==""){m.uint32(34).string(T.tradeId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderTrade();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.dateTime=orders_fromTimestamp(Ye.decode(_,_.uint32()));break;case 2:E.price=Ge.decode(_,_.uint32());break;case 3:E.quantity=orders_longToNumber(_.int64());break;case 4:E.tradeId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{dateTime:orders_isSet(T.dateTime)?orders_fromJsonTimestamp(T.dateTime):undefined,price:orders_isSet(T.price)?Ge.fromJSON(T.price):undefined,quantity:orders_isSet(T.quantity)?Number(T.quantity):0,tradeId:orders_isSet(T.tradeId)?String(T.tradeId):""}},toJSON(T){const m={};T.dateTime!==undefined&&(m.dateTime=T.dateTime.toISOString());T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.tradeId!==undefined&&(m.tradeId=T.tradeId);return m}};function createBasePostOrderRequest(){return{quantity:0,price:undefined,direction:0,accountId:"",orderType:0,orderId:"",instrumentId:""}}const jt={encode(T,m=Le.Z.Writer.create()){if(T.quantity!==0){m.uint32(16).int64(T.quantity)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(26).fork()).ldelim()}if(T.direction!==0){m.uint32(32).int32(T.direction)}if(T.accountId!==""){m.uint32(42).string(T.accountId)}if(T.orderType!==0){m.uint32(48).int32(T.orderType)}if(T.orderId!==""){m.uint32(58).string(T.orderId)}if(T.instrumentId!==""){m.uint32(66).string(T.instrumentId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePostOrderRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 2:E.quantity=orders_longToNumber(_.int64());break;case 3:E.price=Ge.decode(_,_.uint32());break;case 4:E.direction=_.int32();break;case 5:E.accountId=_.string();break;case 6:E.orderType=_.int32();break;case 7:E.orderId=_.string();break;case 8:E.instrumentId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{quantity:orders_isSet(T.quantity)?Number(T.quantity):0,price:orders_isSet(T.price)?Ge.fromJSON(T.price):undefined,direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,orderId:orders_isSet(T.orderId)?String(T.orderId):"",instrumentId:orders_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const m={};T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.direction!==undefined&&(m.direction=orderDirectionToJSON(T.direction));T.accountId!==undefined&&(m.accountId=T.accountId);T.orderType!==undefined&&(m.orderType=orderTypeToJSON(T.orderType));T.orderId!==undefined&&(m.orderId=T.orderId);T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);return m}};function createBasePostOrderResponse(){return{orderId:"",executionReportStatus:0,lotsRequested:0,lotsExecuted:0,initialOrderPrice:undefined,executedOrderPrice:undefined,totalOrderAmount:undefined,initialCommission:undefined,executedCommission:undefined,aciValue:undefined,figi:"",direction:0,initialSecurityPrice:undefined,orderType:0,message:"",initialOrderPricePt:undefined,instrumentUid:""}}const $t={encode(T,m=Le.Z.Writer.create()){if(T.orderId!==""){m.uint32(10).string(T.orderId)}if(T.executionReportStatus!==0){m.uint32(16).int32(T.executionReportStatus)}if(T.lotsRequested!==0){m.uint32(24).int64(T.lotsRequested)}if(T.lotsExecuted!==0){m.uint32(32).int64(T.lotsExecuted)}if(T.initialOrderPrice!==undefined){Je.encode(T.initialOrderPrice,m.uint32(42).fork()).ldelim()}if(T.executedOrderPrice!==undefined){Je.encode(T.executedOrderPrice,m.uint32(50).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Je.encode(T.totalOrderAmount,m.uint32(58).fork()).ldelim()}if(T.initialCommission!==undefined){Je.encode(T.initialCommission,m.uint32(66).fork()).ldelim()}if(T.executedCommission!==undefined){Je.encode(T.executedCommission,m.uint32(74).fork()).ldelim()}if(T.aciValue!==undefined){Je.encode(T.aciValue,m.uint32(82).fork()).ldelim()}if(T.figi!==""){m.uint32(90).string(T.figi)}if(T.direction!==0){m.uint32(96).int32(T.direction)}if(T.initialSecurityPrice!==undefined){Je.encode(T.initialSecurityPrice,m.uint32(106).fork()).ldelim()}if(T.orderType!==0){m.uint32(112).int32(T.orderType)}if(T.message!==""){m.uint32(122).string(T.message)}if(T.initialOrderPricePt!==undefined){Ge.encode(T.initialOrderPricePt,m.uint32(130).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(138).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePostOrderResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.orderId=_.string();break;case 2:E.executionReportStatus=_.int32();break;case 3:E.lotsRequested=orders_longToNumber(_.int64());break;case 4:E.lotsExecuted=orders_longToNumber(_.int64());break;case 5:E.initialOrderPrice=Je.decode(_,_.uint32());break;case 6:E.executedOrderPrice=Je.decode(_,_.uint32());break;case 7:E.totalOrderAmount=Je.decode(_,_.uint32());break;case 8:E.initialCommission=Je.decode(_,_.uint32());break;case 9:E.executedCommission=Je.decode(_,_.uint32());break;case 10:E.aciValue=Je.decode(_,_.uint32());break;case 11:E.figi=_.string();break;case 12:E.direction=_.int32();break;case 13:E.initialSecurityPrice=Je.decode(_,_.uint32());break;case 14:E.orderType=_.int32();break;case 15:E.message=_.string();break;case 16:E.initialOrderPricePt=Ge.decode(_,_.uint32());break;case 17:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",executionReportStatus:orders_isSet(T.executionReportStatus)?orderExecutionReportStatusFromJSON(T.executionReportStatus):0,lotsRequested:orders_isSet(T.lotsRequested)?Number(T.lotsRequested):0,lotsExecuted:orders_isSet(T.lotsExecuted)?Number(T.lotsExecuted):0,initialOrderPrice:orders_isSet(T.initialOrderPrice)?Je.fromJSON(T.initialOrderPrice):undefined,executedOrderPrice:orders_isSet(T.executedOrderPrice)?Je.fromJSON(T.executedOrderPrice):undefined,totalOrderAmount:orders_isSet(T.totalOrderAmount)?Je.fromJSON(T.totalOrderAmount):undefined,initialCommission:orders_isSet(T.initialCommission)?Je.fromJSON(T.initialCommission):undefined,executedCommission:orders_isSet(T.executedCommission)?Je.fromJSON(T.executedCommission):undefined,aciValue:orders_isSet(T.aciValue)?Je.fromJSON(T.aciValue):undefined,figi:orders_isSet(T.figi)?String(T.figi):"",direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,initialSecurityPrice:orders_isSet(T.initialSecurityPrice)?Je.fromJSON(T.initialSecurityPrice):undefined,orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,message:orders_isSet(T.message)?String(T.message):"",initialOrderPricePt:orders_isSet(T.initialOrderPricePt)?Ge.fromJSON(T.initialOrderPricePt):undefined,instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.orderId!==undefined&&(m.orderId=T.orderId);T.executionReportStatus!==undefined&&(m.executionReportStatus=orderExecutionReportStatusToJSON(T.executionReportStatus));T.lotsRequested!==undefined&&(m.lotsRequested=Math.round(T.lotsRequested));T.lotsExecuted!==undefined&&(m.lotsExecuted=Math.round(T.lotsExecuted));T.initialOrderPrice!==undefined&&(m.initialOrderPrice=T.initialOrderPrice?Je.toJSON(T.initialOrderPrice):undefined);T.executedOrderPrice!==undefined&&(m.executedOrderPrice=T.executedOrderPrice?Je.toJSON(T.executedOrderPrice):undefined);T.totalOrderAmount!==undefined&&(m.totalOrderAmount=T.totalOrderAmount?Je.toJSON(T.totalOrderAmount):undefined);T.initialCommission!==undefined&&(m.initialCommission=T.initialCommission?Je.toJSON(T.initialCommission):undefined);T.executedCommission!==undefined&&(m.executedCommission=T.executedCommission?Je.toJSON(T.executedCommission):undefined);T.aciValue!==undefined&&(m.aciValue=T.aciValue?Je.toJSON(T.aciValue):undefined);T.figi!==undefined&&(m.figi=T.figi);T.direction!==undefined&&(m.direction=orderDirectionToJSON(T.direction));T.initialSecurityPrice!==undefined&&(m.initialSecurityPrice=T.initialSecurityPrice?Je.toJSON(T.initialSecurityPrice):undefined);T.orderType!==undefined&&(m.orderType=orderTypeToJSON(T.orderType));T.message!==undefined&&(m.message=T.message);T.initialOrderPricePt!==undefined&&(m.initialOrderPricePt=T.initialOrderPricePt?Ge.toJSON(T.initialOrderPricePt):undefined);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseCancelOrderRequest(){return{accountId:"",orderId:""}}const Qt={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.orderId!==""){m.uint32(18).string(T.orderId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseCancelOrderRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.orderId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.orderId!==undefined&&(m.orderId=T.orderId);return m}};function createBaseCancelOrderResponse(){return{time:undefined}}const en={encode(T,m=Le.Z.Writer.create()){if(T.time!==undefined){Ye.encode(orders_toTimestamp(T.time),m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseCancelOrderResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.time=orders_fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{time:orders_isSet(T.time)?orders_fromJsonTimestamp(T.time):undefined}},toJSON(T){const m={};T.time!==undefined&&(m.time=T.time.toISOString());return m}};function createBaseGetOrderStateRequest(){return{accountId:"",orderId:""}}const tn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.orderId!==""){m.uint32(18).string(T.orderId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOrderStateRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.orderId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.orderId!==undefined&&(m.orderId=T.orderId);return m}};function createBaseGetOrdersRequest(){return{accountId:""}}const nn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOrdersRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);return m}};function createBaseGetOrdersResponse(){return{orders:[]}}const rn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.orders){sn.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOrdersResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.orders.push(sn.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{orders:Array.isArray(T?.orders)?T.orders.map((T=>sn.fromJSON(T))):[]}},toJSON(T){const m={};if(T.orders){m.orders=T.orders.map((T=>T?sn.toJSON(T):undefined))}else{m.orders=[]}return m}};function createBaseOrderState(){return{orderId:"",executionReportStatus:0,lotsRequested:0,lotsExecuted:0,initialOrderPrice:undefined,executedOrderPrice:undefined,totalOrderAmount:undefined,averagePositionPrice:undefined,initialCommission:undefined,executedCommission:undefined,figi:"",direction:0,initialSecurityPrice:undefined,stages:[],serviceCommission:undefined,currency:"",orderType:0,orderDate:undefined,instrumentUid:""}}const sn={encode(T,m=Le.Z.Writer.create()){if(T.orderId!==""){m.uint32(10).string(T.orderId)}if(T.executionReportStatus!==0){m.uint32(16).int32(T.executionReportStatus)}if(T.lotsRequested!==0){m.uint32(24).int64(T.lotsRequested)}if(T.lotsExecuted!==0){m.uint32(32).int64(T.lotsExecuted)}if(T.initialOrderPrice!==undefined){Je.encode(T.initialOrderPrice,m.uint32(42).fork()).ldelim()}if(T.executedOrderPrice!==undefined){Je.encode(T.executedOrderPrice,m.uint32(50).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Je.encode(T.totalOrderAmount,m.uint32(58).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Je.encode(T.averagePositionPrice,m.uint32(66).fork()).ldelim()}if(T.initialCommission!==undefined){Je.encode(T.initialCommission,m.uint32(74).fork()).ldelim()}if(T.executedCommission!==undefined){Je.encode(T.executedCommission,m.uint32(82).fork()).ldelim()}if(T.figi!==""){m.uint32(90).string(T.figi)}if(T.direction!==0){m.uint32(96).int32(T.direction)}if(T.initialSecurityPrice!==undefined){Je.encode(T.initialSecurityPrice,m.uint32(106).fork()).ldelim()}for(const _ of T.stages){on.encode(_,m.uint32(114).fork()).ldelim()}if(T.serviceCommission!==undefined){Je.encode(T.serviceCommission,m.uint32(122).fork()).ldelim()}if(T.currency!==""){m.uint32(130).string(T.currency)}if(T.orderType!==0){m.uint32(136).int32(T.orderType)}if(T.orderDate!==undefined){Ye.encode(orders_toTimestamp(T.orderDate),m.uint32(146).fork()).ldelim()}if(T.instrumentUid!==""){m.uint32(154).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderState();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.orderId=_.string();break;case 2:E.executionReportStatus=_.int32();break;case 3:E.lotsRequested=orders_longToNumber(_.int64());break;case 4:E.lotsExecuted=orders_longToNumber(_.int64());break;case 5:E.initialOrderPrice=Je.decode(_,_.uint32());break;case 6:E.executedOrderPrice=Je.decode(_,_.uint32());break;case 7:E.totalOrderAmount=Je.decode(_,_.uint32());break;case 8:E.averagePositionPrice=Je.decode(_,_.uint32());break;case 9:E.initialCommission=Je.decode(_,_.uint32());break;case 10:E.executedCommission=Je.decode(_,_.uint32());break;case 11:E.figi=_.string();break;case 12:E.direction=_.int32();break;case 13:E.initialSecurityPrice=Je.decode(_,_.uint32());break;case 14:E.stages.push(on.decode(_,_.uint32()));break;case 15:E.serviceCommission=Je.decode(_,_.uint32());break;case 16:E.currency=_.string();break;case 17:E.orderType=_.int32();break;case 18:E.orderDate=orders_fromTimestamp(Ye.decode(_,_.uint32()));break;case 19:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",executionReportStatus:orders_isSet(T.executionReportStatus)?orderExecutionReportStatusFromJSON(T.executionReportStatus):0,lotsRequested:orders_isSet(T.lotsRequested)?Number(T.lotsRequested):0,lotsExecuted:orders_isSet(T.lotsExecuted)?Number(T.lotsExecuted):0,initialOrderPrice:orders_isSet(T.initialOrderPrice)?Je.fromJSON(T.initialOrderPrice):undefined,executedOrderPrice:orders_isSet(T.executedOrderPrice)?Je.fromJSON(T.executedOrderPrice):undefined,totalOrderAmount:orders_isSet(T.totalOrderAmount)?Je.fromJSON(T.totalOrderAmount):undefined,averagePositionPrice:orders_isSet(T.averagePositionPrice)?Je.fromJSON(T.averagePositionPrice):undefined,initialCommission:orders_isSet(T.initialCommission)?Je.fromJSON(T.initialCommission):undefined,executedCommission:orders_isSet(T.executedCommission)?Je.fromJSON(T.executedCommission):undefined,figi:orders_isSet(T.figi)?String(T.figi):"",direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,initialSecurityPrice:orders_isSet(T.initialSecurityPrice)?Je.fromJSON(T.initialSecurityPrice):undefined,stages:Array.isArray(T?.stages)?T.stages.map((T=>on.fromJSON(T))):[],serviceCommission:orders_isSet(T.serviceCommission)?Je.fromJSON(T.serviceCommission):undefined,currency:orders_isSet(T.currency)?String(T.currency):"",orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,orderDate:orders_isSet(T.orderDate)?orders_fromJsonTimestamp(T.orderDate):undefined,instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.orderId!==undefined&&(m.orderId=T.orderId);T.executionReportStatus!==undefined&&(m.executionReportStatus=orderExecutionReportStatusToJSON(T.executionReportStatus));T.lotsRequested!==undefined&&(m.lotsRequested=Math.round(T.lotsRequested));T.lotsExecuted!==undefined&&(m.lotsExecuted=Math.round(T.lotsExecuted));T.initialOrderPrice!==undefined&&(m.initialOrderPrice=T.initialOrderPrice?Je.toJSON(T.initialOrderPrice):undefined);T.executedOrderPrice!==undefined&&(m.executedOrderPrice=T.executedOrderPrice?Je.toJSON(T.executedOrderPrice):undefined);T.totalOrderAmount!==undefined&&(m.totalOrderAmount=T.totalOrderAmount?Je.toJSON(T.totalOrderAmount):undefined);T.averagePositionPrice!==undefined&&(m.averagePositionPrice=T.averagePositionPrice?Je.toJSON(T.averagePositionPrice):undefined);T.initialCommission!==undefined&&(m.initialCommission=T.initialCommission?Je.toJSON(T.initialCommission):undefined);T.executedCommission!==undefined&&(m.executedCommission=T.executedCommission?Je.toJSON(T.executedCommission):undefined);T.figi!==undefined&&(m.figi=T.figi);T.direction!==undefined&&(m.direction=orderDirectionToJSON(T.direction));T.initialSecurityPrice!==undefined&&(m.initialSecurityPrice=T.initialSecurityPrice?Je.toJSON(T.initialSecurityPrice):undefined);if(T.stages){m.stages=T.stages.map((T=>T?on.toJSON(T):undefined))}else{m.stages=[]}T.serviceCommission!==undefined&&(m.serviceCommission=T.serviceCommission?Je.toJSON(T.serviceCommission):undefined);T.currency!==undefined&&(m.currency=T.currency);T.orderType!==undefined&&(m.orderType=orderTypeToJSON(T.orderType));T.orderDate!==undefined&&(m.orderDate=T.orderDate.toISOString());T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBaseOrderStage(){return{price:undefined,quantity:0,tradeId:""}}const on={encode(T,m=Le.Z.Writer.create()){if(T.price!==undefined){Je.encode(T.price,m.uint32(10).fork()).ldelim()}if(T.quantity!==0){m.uint32(16).int64(T.quantity)}if(T.tradeId!==""){m.uint32(26).string(T.tradeId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOrderStage();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.price=Je.decode(_,_.uint32());break;case 2:E.quantity=orders_longToNumber(_.int64());break;case 3:E.tradeId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{price:orders_isSet(T.price)?Je.fromJSON(T.price):undefined,quantity:orders_isSet(T.quantity)?Number(T.quantity):0,tradeId:orders_isSet(T.tradeId)?String(T.tradeId):""}},toJSON(T){const m={};T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.tradeId!==undefined&&(m.tradeId=T.tradeId);return m}};function createBaseReplaceOrderRequest(){return{accountId:"",orderId:"",idempotencyKey:"",quantity:0,price:undefined,priceType:0}}const an={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.orderId!==""){m.uint32(50).string(T.orderId)}if(T.idempotencyKey!==""){m.uint32(58).string(T.idempotencyKey)}if(T.quantity!==0){m.uint32(88).int64(T.quantity)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(98).fork()).ldelim()}if(T.priceType!==0){m.uint32(104).int32(T.priceType)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseReplaceOrderRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 6:E.orderId=_.string();break;case 7:E.idempotencyKey=_.string();break;case 11:E.quantity=orders_longToNumber(_.int64());break;case 12:E.price=Ge.decode(_,_.uint32());break;case 13:E.priceType=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):"",idempotencyKey:orders_isSet(T.idempotencyKey)?String(T.idempotencyKey):"",quantity:orders_isSet(T.quantity)?Number(T.quantity):0,price:orders_isSet(T.price)?Ge.fromJSON(T.price):undefined,priceType:orders_isSet(T.priceType)?priceTypeFromJSON(T.priceType):0}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.orderId!==undefined&&(m.orderId=T.orderId);T.idempotencyKey!==undefined&&(m.idempotencyKey=T.idempotencyKey);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.price!==undefined&&(m.price=T.price?Ge.toJSON(T.price):undefined);T.priceType!==undefined&&(m.priceType=priceTypeToJSON(T.priceType));return m}};function createBaseGetMaxLotsRequest(){return{accountId:"",instrumentId:"",price:undefined}}const un={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}if(T.price!==undefined){Ge.encode(T.price,m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetMaxLotsRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:if(T!==10){break}E.accountId=_.string();continue;case 2:if(T!==18){break}E.instrumentId=_.string();continue;case 3:if(T!==26){break}E.price=Ge.decode(_,_.uint32());continue}if((T&7)===4||T===0){break}_.skipType(T&7)}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?globalThis.String(T.accountId):"",instrumentId:orders_isSet(T.instrumentId)?globalThis.String(T.instrumentId):"",price:orders_isSet(T.price)?Ge.fromJSON(T.price):undefined}},toJSON(T){const m={};if(T.accountId!==""){m.accountId=T.accountId}if(T.instrumentId!==""){m.instrumentId=T.instrumentId}if(T.price!==undefined){m.price=Ge.toJSON(T.price)}return m}};function createBaseGetMaxLotsResponse(){return{currency:"",buyLimits:undefined,buyMarginLimits:undefined,sellLimits:undefined,sellMarginLimits:undefined}}const dn={encode(T,m=Le.Z.Writer.create()){if(T.currency!==""){m.uint32(10).string(T.currency)}if(T.buyLimits!==undefined){cn.encode(T.buyLimits,m.uint32(18).fork()).ldelim()}if(T.buyMarginLimits!==undefined){cn.encode(T.buyMarginLimits,m.uint32(26).fork()).ldelim()}if(T.sellLimits!==undefined){fn.encode(T.sellLimits,m.uint32(34).fork()).ldelim()}if(T.sellMarginLimits!==undefined){fn.encode(T.sellMarginLimits,m.uint32(42).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetMaxLotsResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:if(T!==10){break}E.currency=_.string();continue;case 2:if(T!==18){break}E.buyLimits=cn.decode(_,_.uint32());continue;case 3:if(T!==26){break}E.buyMarginLimits=cn.decode(_,_.uint32());continue;case 4:if(T!==34){break}E.sellLimits=fn.decode(_,_.uint32());continue;case 5:if(T!==42){break}E.sellMarginLimits=fn.decode(_,_.uint32());continue}if((T&7)===4||T===0){break}_.skipType(T&7)}return E},fromJSON(T){return{currency:orders_isSet(T.currency)?globalThis.String(T.currency):"",buyLimits:orders_isSet(T.buyLimits)?cn.fromJSON(T.buyLimits):undefined,buyMarginLimits:orders_isSet(T.buyMarginLimits)?cn.fromJSON(T.buyMarginLimits):undefined,sellLimits:orders_isSet(T.sellLimits)?fn.fromJSON(T.sellLimits):undefined,sellMarginLimits:orders_isSet(T.sellMarginLimits)?fn.fromJSON(T.sellMarginLimits):undefined}},toJSON(T){const m={};if(T.currency!==""){m.currency=T.currency}if(T.buyLimits!==undefined){m.buyLimits=cn.toJSON(T.buyLimits)}if(T.buyMarginLimits!==undefined){m.buyMarginLimits=cn.toJSON(T.buyMarginLimits)}if(T.sellLimits!==undefined){m.sellLimits=fn.toJSON(T.sellLimits)}if(T.sellMarginLimits!==undefined){m.sellMarginLimits=fn.toJSON(T.sellMarginLimits)}return m}};function createBaseGetMaxLotsResponse_BuyLimitsView(){return{buyMoneyAmount:undefined,buyMaxLots:0,buyMaxMarketLots:0}}const cn={encode(T,m=Le.Z.Writer.create()){if(T.buyMoneyAmount!==undefined){Ge.encode(T.buyMoneyAmount,m.uint32(10).fork()).ldelim()}if(T.buyMaxLots!==0){m.uint32(16).int64(T.buyMaxLots)}if(T.buyMaxMarketLots!==0){m.uint32(24).int64(T.buyMaxMarketLots)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetMaxLotsResponse_BuyLimitsView();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:if(T!==10){break}E.buyMoneyAmount=Ge.decode(_,_.uint32());continue;case 2:if(T!==16){break}E.buyMaxLots=orders_longToNumber(_.int64());continue;case 3:if(T!==24){break}E.buyMaxMarketLots=orders_longToNumber(_.int64());continue}if((T&7)===4||T===0){break}_.skipType(T&7)}return E},fromJSON(T){return{buyMoneyAmount:orders_isSet(T.buyMoneyAmount)?Ge.fromJSON(T.buyMoneyAmount):undefined,buyMaxLots:orders_isSet(T.buyMaxLots)?globalThis.Number(T.buyMaxLots):0,buyMaxMarketLots:orders_isSet(T.buyMaxMarketLots)?globalThis.Number(T.buyMaxMarketLots):0}},toJSON(T){const m={};if(T.buyMoneyAmount!==undefined){m.buyMoneyAmount=Ge.toJSON(T.buyMoneyAmount)}if(T.buyMaxLots!==0){m.buyMaxLots=Math.round(T.buyMaxLots)}if(T.buyMaxMarketLots!==0){m.buyMaxMarketLots=Math.round(T.buyMaxMarketLots)}return m}};function createBaseGetMaxLotsResponse_SellLimitsView(){return{sellMaxLots:0}}const fn={encode(T,m=Le.Z.Writer.create()){if(T.sellMaxLots!==0){m.uint32(8).int64(T.sellMaxLots)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetMaxLotsResponse_SellLimitsView();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:if(T!==8){break}E.sellMaxLots=orders_longToNumber(_.int64());continue}if((T&7)===4||T===0){break}_.skipType(T&7)}return E},fromJSON(T){return{sellMaxLots:orders_isSet(T.sellMaxLots)?globalThis.Number(T.sellMaxLots):0}},toJSON(T){const m={};if(T.sellMaxLots!==0){m.sellMaxLots=Math.round(T.sellMaxLots)}return m}};const ln={name:"OrdersStreamService",fullName:"tinkoff.public.invest.api.contract.v1.OrdersStreamService",methods:{tradesStream:{name:"TradesStream",requestType:Wt,requestStream:false,responseType:Ht,responseStream:true,options:{}}}};const Tn={name:"OrdersService",fullName:"tinkoff.public.invest.api.contract.v1.OrdersService",methods:{postOrder:{name:"PostOrder",requestType:jt,requestStream:false,responseType:$t,responseStream:false,options:{}},cancelOrder:{name:"CancelOrder",requestType:Qt,requestStream:false,responseType:en,responseStream:false,options:{}},getOrderState:{name:"GetOrderState",requestType:tn,requestStream:false,responseType:sn,responseStream:false,options:{}},getOrders:{name:"GetOrders",requestType:nn,requestStream:false,responseType:rn,responseStream:false,options:{}},replaceOrder:{name:"ReplaceOrder",requestType:an,requestStream:false,responseType:$t,responseStream:false,options:{}},getMaxLots:{name:"GetMaxLots",requestType:un,requestStream:false,responseType:dn,responseStream:false,options:{}}}};function orders_toTimestamp(T){const m=T.getTime()/1e3;const _=T.getTime()%1e3*1e6;return{seconds:m,nanos:_}}function orders_fromTimestamp(T){let m=T.seconds*1e3;m+=T.nanos/1e6;return new Date(m)}function orders_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return orders_fromTimestamp(Ye.fromJSON(T))}}function orders_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function orders_isSet(T){return T!==null&&T!==undefined}function parseJwt(T){const[,m]=T.split(".");return JSON.parse(typeof Buffer!=="undefined"?Buffer.from(m,"base64"):atob(m))}function isJWTTokenExpired(T){if(T){try{const{exp:m}=parseJwt(T);if(typeof m==="number"){return Date.now()+1e3>=m*1e3}}catch{return true}}return true}function stringToBuffer(T){const m=typeof Buffer!=="undefined"?Buffer.from(T,"base64").toString("binary"):globalThis.atob(T);const _=new ArrayBuffer(m.length);const S=new Uint8Array(_);for(let T=0;T<m.length;T++){S[T]=m.charCodeAt(T)}return _}function bufferToString(T){const m=String.fromCharCode.apply(null,new Uint8Array(T));return typeof Buffer!=="undefined"?Buffer.from(T).toString("base64"):globalThis.btoa(m)}function generateIV(){return globalThis.crypto.getRandomValues(new Uint8Array(12))}function uuidv4(){return globalThis.crypto.randomUUID()}async function sha256(T){const m=(new TextEncoder).encode(T);const _=await globalThis.crypto.subtle.digest("SHA-256",m);const S=Array.from(new Uint8Array(_));return S.map((T=>T.toString(16).padStart(2,"0"))).join("")}async function HMAC(T,m,_={}){let S=T;const E=new TextEncoder;const I=E.encode(m);if(typeof T==="string"){S=E.encode(T)}const O=await globalThis.crypto.subtle.importKey("raw",S,{name:"HMAC",hash:_.algorithm??"SHA-256"},false,["sign"]);const R=await globalThis.crypto.subtle.sign("HMAC",O,I);if(_?.format==="hex"){const T=Array.from(new Uint8Array(R));const m=T.map((T=>T.toString(16).padStart(2,"0"))).join("");return m}else{return R}}async function generateAWSSigningKey({ycStaticKeySecret:T,date:m,region:_}){const S=await HMAC(`AWS4${T}`,m);const E=await HMAC(S,_);const I=await HMAC(E,"s3");return HMAC(I,"aws4_request")}const pn="tinkoff.public.invest.api.contract.v1";var mn;(function(T){T[T["OPERATION_STATE_UNSPECIFIED"]=0]="OPERATION_STATE_UNSPECIFIED";T[T["OPERATION_STATE_EXECUTED"]=1]="OPERATION_STATE_EXECUTED";T[T["OPERATION_STATE_CANCELED"]=2]="OPERATION_STATE_CANCELED";T[T["OPERATION_STATE_PROGRESS"]=3]="OPERATION_STATE_PROGRESS";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(mn||(mn={}));function operationStateFromJSON(T){switch(T){case 0:case"OPERATION_STATE_UNSPECIFIED":return mn.OPERATION_STATE_UNSPECIFIED;case 1:case"OPERATION_STATE_EXECUTED":return mn.OPERATION_STATE_EXECUTED;case 2:case"OPERATION_STATE_CANCELED":return mn.OPERATION_STATE_CANCELED;case 3:case"OPERATION_STATE_PROGRESS":return mn.OPERATION_STATE_PROGRESS;case-1:case"UNRECOGNIZED":default:return mn.UNRECOGNIZED}}function operationStateToJSON(T){switch(T){case mn.OPERATION_STATE_UNSPECIFIED:return"OPERATION_STATE_UNSPECIFIED";case mn.OPERATION_STATE_EXECUTED:return"OPERATION_STATE_EXECUTED";case mn.OPERATION_STATE_CANCELED:return"OPERATION_STATE_CANCELED";case mn.OPERATION_STATE_PROGRESS:return"OPERATION_STATE_PROGRESS";case mn.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var _n;(function(T){T[T["OPERATION_TYPE_UNSPECIFIED"]=0]="OPERATION_TYPE_UNSPECIFIED";T[T["OPERATION_TYPE_INPUT"]=1]="OPERATION_TYPE_INPUT";T[T["OPERATION_TYPE_BOND_TAX"]=2]="OPERATION_TYPE_BOND_TAX";T[T["OPERATION_TYPE_OUTPUT_SECURITIES"]=3]="OPERATION_TYPE_OUTPUT_SECURITIES";T[T["OPERATION_TYPE_OVERNIGHT"]=4]="OPERATION_TYPE_OVERNIGHT";T[T["OPERATION_TYPE_TAX"]=5]="OPERATION_TYPE_TAX";T[T["OPERATION_TYPE_BOND_REPAYMENT_FULL"]=6]="OPERATION_TYPE_BOND_REPAYMENT_FULL";T[T["OPERATION_TYPE_SELL_CARD"]=7]="OPERATION_TYPE_SELL_CARD";T[T["OPERATION_TYPE_DIVIDEND_TAX"]=8]="OPERATION_TYPE_DIVIDEND_TAX";T[T["OPERATION_TYPE_OUTPUT"]=9]="OPERATION_TYPE_OUTPUT";T[T["OPERATION_TYPE_BOND_REPAYMENT"]=10]="OPERATION_TYPE_BOND_REPAYMENT";T[T["OPERATION_TYPE_TAX_CORRECTION"]=11]="OPERATION_TYPE_TAX_CORRECTION";T[T["OPERATION_TYPE_SERVICE_FEE"]=12]="OPERATION_TYPE_SERVICE_FEE";T[T["OPERATION_TYPE_BENEFIT_TAX"]=13]="OPERATION_TYPE_BENEFIT_TAX";T[T["OPERATION_TYPE_MARGIN_FEE"]=14]="OPERATION_TYPE_MARGIN_FEE";T[T["OPERATION_TYPE_BUY"]=15]="OPERATION_TYPE_BUY";T[T["OPERATION_TYPE_BUY_CARD"]=16]="OPERATION_TYPE_BUY_CARD";T[T["OPERATION_TYPE_INPUT_SECURITIES"]=17]="OPERATION_TYPE_INPUT_SECURITIES";T[T["OPERATION_TYPE_SELL_MARGIN"]=18]="OPERATION_TYPE_SELL_MARGIN";T[T["OPERATION_TYPE_BROKER_FEE"]=19]="OPERATION_TYPE_BROKER_FEE";T[T["OPERATION_TYPE_BUY_MARGIN"]=20]="OPERATION_TYPE_BUY_MARGIN";T[T["OPERATION_TYPE_DIVIDEND"]=21]="OPERATION_TYPE_DIVIDEND";T[T["OPERATION_TYPE_SELL"]=22]="OPERATION_TYPE_SELL";T[T["OPERATION_TYPE_COUPON"]=23]="OPERATION_TYPE_COUPON";T[T["OPERATION_TYPE_SUCCESS_FEE"]=24]="OPERATION_TYPE_SUCCESS_FEE";T[T["OPERATION_TYPE_DIVIDEND_TRANSFER"]=25]="OPERATION_TYPE_DIVIDEND_TRANSFER";T[T["OPERATION_TYPE_ACCRUING_VARMARGIN"]=26]="OPERATION_TYPE_ACCRUING_VARMARGIN";T[T["OPERATION_TYPE_WRITING_OFF_VARMARGIN"]=27]="OPERATION_TYPE_WRITING_OFF_VARMARGIN";T[T["OPERATION_TYPE_DELIVERY_BUY"]=28]="OPERATION_TYPE_DELIVERY_BUY";T[T["OPERATION_TYPE_DELIVERY_SELL"]=29]="OPERATION_TYPE_DELIVERY_SELL";T[T["OPERATION_TYPE_TRACK_MFEE"]=30]="OPERATION_TYPE_TRACK_MFEE";T[T["OPERATION_TYPE_TRACK_PFEE"]=31]="OPERATION_TYPE_TRACK_PFEE";T[T["OPERATION_TYPE_TAX_PROGRESSIVE"]=32]="OPERATION_TYPE_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BOND_TAX_PROGRESSIVE"]=33]="OPERATION_TYPE_BOND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE"]=34]="OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE"]=35]="OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE"]=36]="OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_PROGRESSIVE"]=37]="OPERATION_TYPE_TAX_REPO_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO"]=38]="OPERATION_TYPE_TAX_REPO";T[T["OPERATION_TYPE_TAX_REPO_HOLD"]=39]="OPERATION_TYPE_TAX_REPO_HOLD";T[T["OPERATION_TYPE_TAX_REPO_REFUND"]=40]="OPERATION_TYPE_TAX_REPO_REFUND";T[T["OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE"]=41]="OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE"]=42]="OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";T[T["OPERATION_TYPE_DIV_EXT"]=43]="OPERATION_TYPE_DIV_EXT";T[T["OPERATION_TYPE_TAX_CORRECTION_COUPON"]=44]="OPERATION_TYPE_TAX_CORRECTION_COUPON";T[T["OPERATION_TYPE_CASH_FEE"]=45]="OPERATION_TYPE_CASH_FEE";T[T["OPERATION_TYPE_OUT_FEE"]=46]="OPERATION_TYPE_OUT_FEE";T[T["OPERATION_TYPE_OUT_STAMP_DUTY"]=47]="OPERATION_TYPE_OUT_STAMP_DUTY";T[T["OPERATION_TYPE_OUTPUT_SWIFT"]=50]="OPERATION_TYPE_OUTPUT_SWIFT";T[T["OPERATION_TYPE_INPUT_SWIFT"]=51]="OPERATION_TYPE_INPUT_SWIFT";T[T["OPERATION_TYPE_OUTPUT_ACQUIRING"]=53]="OPERATION_TYPE_OUTPUT_ACQUIRING";T[T["OPERATION_TYPE_INPUT_ACQUIRING"]=54]="OPERATION_TYPE_INPUT_ACQUIRING";T[T["OPERATION_TYPE_OUTPUT_PENALTY"]=55]="OPERATION_TYPE_OUTPUT_PENALTY";T[T["OPERATION_TYPE_ADVICE_FEE"]=56]="OPERATION_TYPE_ADVICE_FEE";T[T["OPERATION_TYPE_TRANS_IIS_BS"]=57]="OPERATION_TYPE_TRANS_IIS_BS";T[T["OPERATION_TYPE_TRANS_BS_BS"]=58]="OPERATION_TYPE_TRANS_BS_BS";T[T["OPERATION_TYPE_OUT_MULTI"]=59]="OPERATION_TYPE_OUT_MULTI";T[T["OPERATION_TYPE_INP_MULTI"]=60]="OPERATION_TYPE_INP_MULTI";T[T["OPERATION_TYPE_OVER_PLACEMENT"]=61]="OPERATION_TYPE_OVER_PLACEMENT";T[T["OPERATION_TYPE_OVER_COM"]=62]="OPERATION_TYPE_OVER_COM";T[T["OPERATION_TYPE_OVER_INCOME"]=63]="OPERATION_TYPE_OVER_INCOME";T[T["OPERATION_TYPE_OPTION_EXPIRATION"]=64]="OPERATION_TYPE_OPTION_EXPIRATION";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(_n||(_n={}));function operationTypeFromJSON(T){switch(T){case 0:case"OPERATION_TYPE_UNSPECIFIED":return _n.OPERATION_TYPE_UNSPECIFIED;case 1:case"OPERATION_TYPE_INPUT":return _n.OPERATION_TYPE_INPUT;case 2:case"OPERATION_TYPE_BOND_TAX":return _n.OPERATION_TYPE_BOND_TAX;case 3:case"OPERATION_TYPE_OUTPUT_SECURITIES":return _n.OPERATION_TYPE_OUTPUT_SECURITIES;case 4:case"OPERATION_TYPE_OVERNIGHT":return _n.OPERATION_TYPE_OVERNIGHT;case 5:case"OPERATION_TYPE_TAX":return _n.OPERATION_TYPE_TAX;case 6:case"OPERATION_TYPE_BOND_REPAYMENT_FULL":return _n.OPERATION_TYPE_BOND_REPAYMENT_FULL;case 7:case"OPERATION_TYPE_SELL_CARD":return _n.OPERATION_TYPE_SELL_CARD;case 8:case"OPERATION_TYPE_DIVIDEND_TAX":return _n.OPERATION_TYPE_DIVIDEND_TAX;case 9:case"OPERATION_TYPE_OUTPUT":return _n.OPERATION_TYPE_OUTPUT;case 10:case"OPERATION_TYPE_BOND_REPAYMENT":return _n.OPERATION_TYPE_BOND_REPAYMENT;case 11:case"OPERATION_TYPE_TAX_CORRECTION":return _n.OPERATION_TYPE_TAX_CORRECTION;case 12:case"OPERATION_TYPE_SERVICE_FEE":return _n.OPERATION_TYPE_SERVICE_FEE;case 13:case"OPERATION_TYPE_BENEFIT_TAX":return _n.OPERATION_TYPE_BENEFIT_TAX;case 14:case"OPERATION_TYPE_MARGIN_FEE":return _n.OPERATION_TYPE_MARGIN_FEE;case 15:case"OPERATION_TYPE_BUY":return _n.OPERATION_TYPE_BUY;case 16:case"OPERATION_TYPE_BUY_CARD":return _n.OPERATION_TYPE_BUY_CARD;case 17:case"OPERATION_TYPE_INPUT_SECURITIES":return _n.OPERATION_TYPE_INPUT_SECURITIES;case 18:case"OPERATION_TYPE_SELL_MARGIN":return _n.OPERATION_TYPE_SELL_MARGIN;case 19:case"OPERATION_TYPE_BROKER_FEE":return _n.OPERATION_TYPE_BROKER_FEE;case 20:case"OPERATION_TYPE_BUY_MARGIN":return _n.OPERATION_TYPE_BUY_MARGIN;case 21:case"OPERATION_TYPE_DIVIDEND":return _n.OPERATION_TYPE_DIVIDEND;case 22:case"OPERATION_TYPE_SELL":return _n.OPERATION_TYPE_SELL;case 23:case"OPERATION_TYPE_COUPON":return _n.OPERATION_TYPE_COUPON;case 24:case"OPERATION_TYPE_SUCCESS_FEE":return _n.OPERATION_TYPE_SUCCESS_FEE;case 25:case"OPERATION_TYPE_DIVIDEND_TRANSFER":return _n.OPERATION_TYPE_DIVIDEND_TRANSFER;case 26:case"OPERATION_TYPE_ACCRUING_VARMARGIN":return _n.OPERATION_TYPE_ACCRUING_VARMARGIN;case 27:case"OPERATION_TYPE_WRITING_OFF_VARMARGIN":return _n.OPERATION_TYPE_WRITING_OFF_VARMARGIN;case 28:case"OPERATION_TYPE_DELIVERY_BUY":return _n.OPERATION_TYPE_DELIVERY_BUY;case 29:case"OPERATION_TYPE_DELIVERY_SELL":return _n.OPERATION_TYPE_DELIVERY_SELL;case 30:case"OPERATION_TYPE_TRACK_MFEE":return _n.OPERATION_TYPE_TRACK_MFEE;case 31:case"OPERATION_TYPE_TRACK_PFEE":return _n.OPERATION_TYPE_TRACK_PFEE;case 32:case"OPERATION_TYPE_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_PROGRESSIVE;case 33:case"OPERATION_TYPE_BOND_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_BOND_TAX_PROGRESSIVE;case 34:case"OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE;case 35:case"OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE;case 36:case"OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE;case 37:case"OPERATION_TYPE_TAX_REPO_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_PROGRESSIVE;case 38:case"OPERATION_TYPE_TAX_REPO":return _n.OPERATION_TYPE_TAX_REPO;case 39:case"OPERATION_TYPE_TAX_REPO_HOLD":return _n.OPERATION_TYPE_TAX_REPO_HOLD;case 40:case"OPERATION_TYPE_TAX_REPO_REFUND":return _n.OPERATION_TYPE_TAX_REPO_REFUND;case 41:case"OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE;case 42:case"OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE;case 43:case"OPERATION_TYPE_DIV_EXT":return _n.OPERATION_TYPE_DIV_EXT;case 44:case"OPERATION_TYPE_TAX_CORRECTION_COUPON":return _n.OPERATION_TYPE_TAX_CORRECTION_COUPON;case 45:case"OPERATION_TYPE_CASH_FEE":return _n.OPERATION_TYPE_CASH_FEE;case 46:case"OPERATION_TYPE_OUT_FEE":return _n.OPERATION_TYPE_OUT_FEE;case 47:case"OPERATION_TYPE_OUT_STAMP_DUTY":return _n.OPERATION_TYPE_OUT_STAMP_DUTY;case 50:case"OPERATION_TYPE_OUTPUT_SWIFT":return _n.OPERATION_TYPE_OUTPUT_SWIFT;case 51:case"OPERATION_TYPE_INPUT_SWIFT":return _n.OPERATION_TYPE_INPUT_SWIFT;case 53:case"OPERATION_TYPE_OUTPUT_ACQUIRING":return _n.OPERATION_TYPE_OUTPUT_ACQUIRING;case 54:case"OPERATION_TYPE_INPUT_ACQUIRING":return _n.OPERATION_TYPE_INPUT_ACQUIRING;case 55:case"OPERATION_TYPE_OUTPUT_PENALTY":return _n.OPERATION_TYPE_OUTPUT_PENALTY;case 56:case"OPERATION_TYPE_ADVICE_FEE":return _n.OPERATION_TYPE_ADVICE_FEE;case 57:case"OPERATION_TYPE_TRANS_IIS_BS":return _n.OPERATION_TYPE_TRANS_IIS_BS;case 58:case"OPERATION_TYPE_TRANS_BS_BS":return _n.OPERATION_TYPE_TRANS_BS_BS;case 59:case"OPERATION_TYPE_OUT_MULTI":return _n.OPERATION_TYPE_OUT_MULTI;case 60:case"OPERATION_TYPE_INP_MULTI":return _n.OPERATION_TYPE_INP_MULTI;case 61:case"OPERATION_TYPE_OVER_PLACEMENT":return _n.OPERATION_TYPE_OVER_PLACEMENT;case 62:case"OPERATION_TYPE_OVER_COM":return _n.OPERATION_TYPE_OVER_COM;case 63:case"OPERATION_TYPE_OVER_INCOME":return _n.OPERATION_TYPE_OVER_INCOME;case 64:case"OPERATION_TYPE_OPTION_EXPIRATION":return _n.OPERATION_TYPE_OPTION_EXPIRATION;case-1:case"UNRECOGNIZED":default:return _n.UNRECOGNIZED}}function operationTypeToJSON(T){switch(T){case _n.OPERATION_TYPE_UNSPECIFIED:return"OPERATION_TYPE_UNSPECIFIED";case _n.OPERATION_TYPE_INPUT:return"OPERATION_TYPE_INPUT";case _n.OPERATION_TYPE_BOND_TAX:return"OPERATION_TYPE_BOND_TAX";case _n.OPERATION_TYPE_OUTPUT_SECURITIES:return"OPERATION_TYPE_OUTPUT_SECURITIES";case _n.OPERATION_TYPE_OVERNIGHT:return"OPERATION_TYPE_OVERNIGHT";case _n.OPERATION_TYPE_TAX:return"OPERATION_TYPE_TAX";case _n.OPERATION_TYPE_BOND_REPAYMENT_FULL:return"OPERATION_TYPE_BOND_REPAYMENT_FULL";case _n.OPERATION_TYPE_SELL_CARD:return"OPERATION_TYPE_SELL_CARD";case _n.OPERATION_TYPE_DIVIDEND_TAX:return"OPERATION_TYPE_DIVIDEND_TAX";case _n.OPERATION_TYPE_OUTPUT:return"OPERATION_TYPE_OUTPUT";case _n.OPERATION_TYPE_BOND_REPAYMENT:return"OPERATION_TYPE_BOND_REPAYMENT";case _n.OPERATION_TYPE_TAX_CORRECTION:return"OPERATION_TYPE_TAX_CORRECTION";case _n.OPERATION_TYPE_SERVICE_FEE:return"OPERATION_TYPE_SERVICE_FEE";case _n.OPERATION_TYPE_BENEFIT_TAX:return"OPERATION_TYPE_BENEFIT_TAX";case _n.OPERATION_TYPE_MARGIN_FEE:return"OPERATION_TYPE_MARGIN_FEE";case _n.OPERATION_TYPE_BUY:return"OPERATION_TYPE_BUY";case _n.OPERATION_TYPE_BUY_CARD:return"OPERATION_TYPE_BUY_CARD";case _n.OPERATION_TYPE_INPUT_SECURITIES:return"OPERATION_TYPE_INPUT_SECURITIES";case _n.OPERATION_TYPE_SELL_MARGIN:return"OPERATION_TYPE_SELL_MARGIN";case _n.OPERATION_TYPE_BROKER_FEE:return"OPERATION_TYPE_BROKER_FEE";case _n.OPERATION_TYPE_BUY_MARGIN:return"OPERATION_TYPE_BUY_MARGIN";case _n.OPERATION_TYPE_DIVIDEND:return"OPERATION_TYPE_DIVIDEND";case _n.OPERATION_TYPE_SELL:return"OPERATION_TYPE_SELL";case _n.OPERATION_TYPE_COUPON:return"OPERATION_TYPE_COUPON";case _n.OPERATION_TYPE_SUCCESS_FEE:return"OPERATION_TYPE_SUCCESS_FEE";case _n.OPERATION_TYPE_DIVIDEND_TRANSFER:return"OPERATION_TYPE_DIVIDEND_TRANSFER";case _n.OPERATION_TYPE_ACCRUING_VARMARGIN:return"OPERATION_TYPE_ACCRUING_VARMARGIN";case _n.OPERATION_TYPE_WRITING_OFF_VARMARGIN:return"OPERATION_TYPE_WRITING_OFF_VARMARGIN";case _n.OPERATION_TYPE_DELIVERY_BUY:return"OPERATION_TYPE_DELIVERY_BUY";case _n.OPERATION_TYPE_DELIVERY_SELL:return"OPERATION_TYPE_DELIVERY_SELL";case _n.OPERATION_TYPE_TRACK_MFEE:return"OPERATION_TYPE_TRACK_MFEE";case _n.OPERATION_TYPE_TRACK_PFEE:return"OPERATION_TYPE_TRACK_PFEE";case _n.OPERATION_TYPE_TAX_PROGRESSIVE:return"OPERATION_TYPE_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_BOND_TAX_PROGRESSIVE:return"OPERATION_TYPE_BOND_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE:return"OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE:return"OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE:return"OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO:return"OPERATION_TYPE_TAX_REPO";case _n.OPERATION_TYPE_TAX_REPO_HOLD:return"OPERATION_TYPE_TAX_REPO_HOLD";case _n.OPERATION_TYPE_TAX_REPO_REFUND:return"OPERATION_TYPE_TAX_REPO_REFUND";case _n.OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";case _n.OPERATION_TYPE_DIV_EXT:return"OPERATION_TYPE_DIV_EXT";case _n.OPERATION_TYPE_TAX_CORRECTION_COUPON:return"OPERATION_TYPE_TAX_CORRECTION_COUPON";case _n.OPERATION_TYPE_CASH_FEE:return"OPERATION_TYPE_CASH_FEE";case _n.OPERATION_TYPE_OUT_FEE:return"OPERATION_TYPE_OUT_FEE";case _n.OPERATION_TYPE_OUT_STAMP_DUTY:return"OPERATION_TYPE_OUT_STAMP_DUTY";case _n.OPERATION_TYPE_OUTPUT_SWIFT:return"OPERATION_TYPE_OUTPUT_SWIFT";case _n.OPERATION_TYPE_INPUT_SWIFT:return"OPERATION_TYPE_INPUT_SWIFT";case _n.OPERATION_TYPE_OUTPUT_ACQUIRING:return"OPERATION_TYPE_OUTPUT_ACQUIRING";case _n.OPERATION_TYPE_INPUT_ACQUIRING:return"OPERATION_TYPE_INPUT_ACQUIRING";case _n.OPERATION_TYPE_OUTPUT_PENALTY:return"OPERATION_TYPE_OUTPUT_PENALTY";case _n.OPERATION_TYPE_ADVICE_FEE:return"OPERATION_TYPE_ADVICE_FEE";case _n.OPERATION_TYPE_TRANS_IIS_BS:return"OPERATION_TYPE_TRANS_IIS_BS";case _n.OPERATION_TYPE_TRANS_BS_BS:return"OPERATION_TYPE_TRANS_BS_BS";case _n.OPERATION_TYPE_OUT_MULTI:return"OPERATION_TYPE_OUT_MULTI";case _n.OPERATION_TYPE_INP_MULTI:return"OPERATION_TYPE_INP_MULTI";case _n.OPERATION_TYPE_OVER_PLACEMENT:return"OPERATION_TYPE_OVER_PLACEMENT";case _n.OPERATION_TYPE_OVER_COM:return"OPERATION_TYPE_OVER_COM";case _n.OPERATION_TYPE_OVER_INCOME:return"OPERATION_TYPE_OVER_INCOME";case _n.OPERATION_TYPE_OPTION_EXPIRATION:return"OPERATION_TYPE_OPTION_EXPIRATION";case _n.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Sn;(function(T){T[T["PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS"]=1]="PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND"]=2]="PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=3]="PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Sn||(Sn={}));function portfolioSubscriptionStatusFromJSON(T){switch(T){case 0:case"PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED":return Sn.PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS":return Sn.PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS;case 2:case"PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND":return Sn.PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND;case 3:case"PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR":return Sn.PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR;case-1:case"UNRECOGNIZED":default:return Sn.UNRECOGNIZED}}function portfolioSubscriptionStatusToJSON(T){switch(T){case Sn.PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED:return"PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED";case Sn.PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS:return"PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS";case Sn.PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND:return"PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";case Sn.PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR";case Sn.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var En;(function(T){T[T["INSTRUMENT_TYPE_UNSPECIFIED"]=0]="INSTRUMENT_TYPE_UNSPECIFIED";T[T["INSTRUMENT_TYPE_BOND"]=1]="INSTRUMENT_TYPE_BOND";T[T["INSTRUMENT_TYPE_SHARE"]=2]="INSTRUMENT_TYPE_SHARE";T[T["INSTRUMENT_TYPE_CURRENCY"]=3]="INSTRUMENT_TYPE_CURRENCY";T[T["INSTRUMENT_TYPE_ETF"]=4]="INSTRUMENT_TYPE_ETF";T[T["INSTRUMENT_TYPE_FUTURES"]=5]="INSTRUMENT_TYPE_FUTURES";T[T["INSTRUMENT_TYPE_SP"]=6]="INSTRUMENT_TYPE_SP";T[T["INSTRUMENT_TYPE_OPTION"]=7]="INSTRUMENT_TYPE_OPTION";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(En||(En={}));function instrumentTypeFromJSON(T){switch(T){case 0:case"INSTRUMENT_TYPE_UNSPECIFIED":return En.INSTRUMENT_TYPE_UNSPECIFIED;case 1:case"INSTRUMENT_TYPE_BOND":return En.INSTRUMENT_TYPE_BOND;case 2:case"INSTRUMENT_TYPE_SHARE":return En.INSTRUMENT_TYPE_SHARE;case 3:case"INSTRUMENT_TYPE_CURRENCY":return En.INSTRUMENT_TYPE_CURRENCY;case 4:case"INSTRUMENT_TYPE_ETF":return En.INSTRUMENT_TYPE_ETF;case 5:case"INSTRUMENT_TYPE_FUTURES":return En.INSTRUMENT_TYPE_FUTURES;case 6:case"INSTRUMENT_TYPE_SP":return En.INSTRUMENT_TYPE_SP;case 7:case"INSTRUMENT_TYPE_OPTION":return En.INSTRUMENT_TYPE_OPTION;case-1:case"UNRECOGNIZED":default:return En.UNRECOGNIZED}}function instrumentTypeToJSON(T){switch(T){case En.INSTRUMENT_TYPE_UNSPECIFIED:return"INSTRUMENT_TYPE_UNSPECIFIED";case En.INSTRUMENT_TYPE_BOND:return"INSTRUMENT_TYPE_BOND";case En.INSTRUMENT_TYPE_SHARE:return"INSTRUMENT_TYPE_SHARE";case En.INSTRUMENT_TYPE_CURRENCY:return"INSTRUMENT_TYPE_CURRENCY";case En.INSTRUMENT_TYPE_ETF:return"INSTRUMENT_TYPE_ETF";case En.INSTRUMENT_TYPE_FUTURES:return"INSTRUMENT_TYPE_FUTURES";case En.INSTRUMENT_TYPE_SP:return"INSTRUMENT_TYPE_SP";case En.INSTRUMENT_TYPE_OPTION:return"INSTRUMENT_TYPE_OPTION";case En.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var In;(function(T){T[T["POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["POSITIONS_SUBSCRIPTION_STATUS_SUCCESS"]=1]="POSITIONS_SUBSCRIPTION_STATUS_SUCCESS";T[T["POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND"]=2]="POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";T[T["POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=3]="POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(In||(In={}));function positionsAccountSubscriptionStatusFromJSON(T){switch(T){case 0:case"POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED":return In.POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"POSITIONS_SUBSCRIPTION_STATUS_SUCCESS":return In.POSITIONS_SUBSCRIPTION_STATUS_SUCCESS;case 2:case"POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND":return In.POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND;case 3:case"POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR":return In.POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR;case-1:case"UNRECOGNIZED":default:return In.UNRECOGNIZED}}function positionsAccountSubscriptionStatusToJSON(T){switch(T){case In.POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED:return"POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED";case In.POSITIONS_SUBSCRIPTION_STATUS_SUCCESS:return"POSITIONS_SUBSCRIPTION_STATUS_SUCCESS";case In.POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND:return"POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";case In.POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR";case In.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var On;(function(T){T[T["RUB"]=0]="RUB";T[T["USD"]=1]="USD";T[T["EUR"]=2]="EUR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(On||(On={}));function portfolioRequest_CurrencyRequestFromJSON(T){switch(T){case 0:case"RUB":return On.RUB;case 1:case"USD":return On.USD;case 2:case"EUR":return On.EUR;case-1:case"UNRECOGNIZED":default:return On.UNRECOGNIZED}}function portfolioRequest_CurrencyRequestToJSON(T){switch(T){case On.RUB:return"RUB";case On.USD:return"USD";case On.EUR:return"EUR";case On.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseOperationsRequest(){return{accountId:"",from:undefined,to:undefined,state:0,figi:""}}const Rn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.from!==undefined){Ye.encode(operations_toTimestamp(T.from),m.uint32(18).fork()).ldelim()}if(T.to!==undefined){Ye.encode(operations_toTimestamp(T.to),m.uint32(26).fork()).ldelim()}if(T.state!==0){m.uint32(32).int32(T.state)}if(T.figi!==""){m.uint32(42).string(T.figi)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationsRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.from=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.to=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 4:E.state=_.int32();break;case 5:E.figi=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined,state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,figi:operations_isSet(T.figi)?String(T.figi):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());T.state!==undefined&&(m.state=operationStateToJSON(T.state));T.figi!==undefined&&(m.figi=T.figi);return m}};function createBaseOperationsResponse(){return{operations:[]}}const Nn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.operations){hn.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationsResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.operations.push(hn.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{operations:Array.isArray(T?.operations)?T.operations.map((T=>hn.fromJSON(T))):[]}},toJSON(T){const m={};if(T.operations){m.operations=T.operations.map((T=>T?hn.toJSON(T):undefined))}else{m.operations=[]}return m}};function createBaseOperation(){return{id:"",parentOperationId:"",currency:"",payment:undefined,price:undefined,state:0,quantity:0,quantityRest:0,figi:"",instrumentType:"",date:undefined,type:"",operationType:0,trades:[],assetUid:""}}const hn={encode(T,m=Le.Z.Writer.create()){if(T.id!==""){m.uint32(10).string(T.id)}if(T.parentOperationId!==""){m.uint32(18).string(T.parentOperationId)}if(T.currency!==""){m.uint32(26).string(T.currency)}if(T.payment!==undefined){Je.encode(T.payment,m.uint32(34).fork()).ldelim()}if(T.price!==undefined){Je.encode(T.price,m.uint32(42).fork()).ldelim()}if(T.state!==0){m.uint32(48).int32(T.state)}if(T.quantity!==0){m.uint32(56).int64(T.quantity)}if(T.quantityRest!==0){m.uint32(64).int64(T.quantityRest)}if(T.figi!==""){m.uint32(74).string(T.figi)}if(T.instrumentType!==""){m.uint32(82).string(T.instrumentType)}if(T.date!==undefined){Ye.encode(operations_toTimestamp(T.date),m.uint32(90).fork()).ldelim()}if(T.type!==""){m.uint32(98).string(T.type)}if(T.operationType!==0){m.uint32(104).int32(T.operationType)}for(const _ of T.trades){An.encode(_,m.uint32(114).fork()).ldelim()}if(T.assetUid!==""){m.uint32(130).string(T.assetUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperation();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.id=_.string();break;case 2:E.parentOperationId=_.string();break;case 3:E.currency=_.string();break;case 4:E.payment=Je.decode(_,_.uint32());break;case 5:E.price=Je.decode(_,_.uint32());break;case 6:E.state=_.int32();break;case 7:E.quantity=operations_longToNumber(_.int64());break;case 8:E.quantityRest=operations_longToNumber(_.int64());break;case 9:E.figi=_.string();break;case 10:E.instrumentType=_.string();break;case 11:E.date=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 12:E.type=_.string();break;case 13:E.operationType=_.int32();break;case 14:E.trades.push(An.decode(_,_.uint32()));break;case 16:E.assetUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{id:operations_isSet(T.id)?String(T.id):"",parentOperationId:operations_isSet(T.parentOperationId)?String(T.parentOperationId):"",currency:operations_isSet(T.currency)?String(T.currency):"",payment:operations_isSet(T.payment)?Je.fromJSON(T.payment):undefined,price:operations_isSet(T.price)?Je.fromJSON(T.price):undefined,state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,quantityRest:operations_isSet(T.quantityRest)?Number(T.quantityRest):0,figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,type:operations_isSet(T.type)?String(T.type):"",operationType:operations_isSet(T.operationType)?operationTypeFromJSON(T.operationType):0,trades:Array.isArray(T?.trades)?T.trades.map((T=>An.fromJSON(T))):[],assetUid:operations_isSet(T.assetUid)?String(T.assetUid):""}},toJSON(T){const m={};T.id!==undefined&&(m.id=T.id);T.parentOperationId!==undefined&&(m.parentOperationId=T.parentOperationId);T.currency!==undefined&&(m.currency=T.currency);T.payment!==undefined&&(m.payment=T.payment?Je.toJSON(T.payment):undefined);T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);T.state!==undefined&&(m.state=operationStateToJSON(T.state));T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.quantityRest!==undefined&&(m.quantityRest=Math.round(T.quantityRest));T.figi!==undefined&&(m.figi=T.figi);T.instrumentType!==undefined&&(m.instrumentType=T.instrumentType);T.date!==undefined&&(m.date=T.date.toISOString());T.type!==undefined&&(m.type=T.type);T.operationType!==undefined&&(m.operationType=operationTypeToJSON(T.operationType));if(T.trades){m.trades=T.trades.map((T=>T?An.toJSON(T):undefined))}else{m.trades=[]}T.assetUid!==undefined&&(m.assetUid=T.assetUid);return m}};function createBaseOperationTrade(){return{tradeId:"",dateTime:undefined,quantity:0,price:undefined}}const An={encode(T,m=Le.Z.Writer.create()){if(T.tradeId!==""){m.uint32(10).string(T.tradeId)}if(T.dateTime!==undefined){Ye.encode(operations_toTimestamp(T.dateTime),m.uint32(18).fork()).ldelim()}if(T.quantity!==0){m.uint32(24).int64(T.quantity)}if(T.price!==undefined){Je.encode(T.price,m.uint32(34).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationTrade();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.tradeId=_.string();break;case 2:E.dateTime=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.quantity=operations_longToNumber(_.int64());break;case 4:E.price=Je.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{tradeId:operations_isSet(T.tradeId)?String(T.tradeId):"",dateTime:operations_isSet(T.dateTime)?operations_fromJsonTimestamp(T.dateTime):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,price:operations_isSet(T.price)?Je.fromJSON(T.price):undefined}},toJSON(T){const m={};T.tradeId!==undefined&&(m.tradeId=T.tradeId);T.dateTime!==undefined&&(m.dateTime=T.dateTime.toISOString());T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);return m}};function createBasePortfolioRequest(){return{accountId:"",currency:0}}const bn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.currency!==0){m.uint32(16).int32(T.currency)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.currency=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",currency:operations_isSet(T.currency)?portfolioRequest_CurrencyRequestFromJSON(T.currency):0}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.currency!==undefined&&(m.currency=portfolioRequest_CurrencyRequestToJSON(T.currency));return m}};function createBasePortfolioResponse(){return{totalAmountShares:undefined,totalAmountBonds:undefined,totalAmountEtf:undefined,totalAmountCurrencies:undefined,totalAmountFutures:undefined,expectedYield:undefined,positions:[],accountId:"",totalAmountOptions:undefined,totalAmountSp:undefined,totalAmountPortfolio:undefined,virtualPositions:[]}}const gn={encode(T,m=Le.Z.Writer.create()){if(T.totalAmountShares!==undefined){Je.encode(T.totalAmountShares,m.uint32(10).fork()).ldelim()}if(T.totalAmountBonds!==undefined){Je.encode(T.totalAmountBonds,m.uint32(18).fork()).ldelim()}if(T.totalAmountEtf!==undefined){Je.encode(T.totalAmountEtf,m.uint32(26).fork()).ldelim()}if(T.totalAmountCurrencies!==undefined){Je.encode(T.totalAmountCurrencies,m.uint32(34).fork()).ldelim()}if(T.totalAmountFutures!==undefined){Je.encode(T.totalAmountFutures,m.uint32(42).fork()).ldelim()}if(T.expectedYield!==undefined){Ge.encode(T.expectedYield,m.uint32(50).fork()).ldelim()}for(const _ of T.positions){Un.encode(_,m.uint32(58).fork()).ldelim()}if(T.accountId!==""){m.uint32(66).string(T.accountId)}if(T.totalAmountOptions!==undefined){Je.encode(T.totalAmountOptions,m.uint32(74).fork()).ldelim()}if(T.totalAmountSp!==undefined){Je.encode(T.totalAmountSp,m.uint32(82).fork()).ldelim()}if(T.totalAmountPortfolio!==undefined){Je.encode(T.totalAmountPortfolio,m.uint32(90).fork()).ldelim()}for(const _ of T.virtualPositions){Dn.encode(_,m.uint32(98).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.totalAmountShares=Je.decode(_,_.uint32());break;case 2:E.totalAmountBonds=Je.decode(_,_.uint32());break;case 3:E.totalAmountEtf=Je.decode(_,_.uint32());break;case 4:E.totalAmountCurrencies=Je.decode(_,_.uint32());break;case 5:E.totalAmountFutures=Je.decode(_,_.uint32());break;case 6:E.expectedYield=Ge.decode(_,_.uint32());break;case 7:E.positions.push(Un.decode(_,_.uint32()));break;case 8:E.accountId=_.string();break;case 9:E.totalAmountOptions=Je.decode(_,_.uint32());break;case 10:E.totalAmountSp=Je.decode(_,_.uint32());break;case 11:E.totalAmountPortfolio=Je.decode(_,_.uint32());break;case 12:E.virtualPositions.push(Dn.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{totalAmountShares:operations_isSet(T.totalAmountShares)?Je.fromJSON(T.totalAmountShares):undefined,totalAmountBonds:operations_isSet(T.totalAmountBonds)?Je.fromJSON(T.totalAmountBonds):undefined,totalAmountEtf:operations_isSet(T.totalAmountEtf)?Je.fromJSON(T.totalAmountEtf):undefined,totalAmountCurrencies:operations_isSet(T.totalAmountCurrencies)?Je.fromJSON(T.totalAmountCurrencies):undefined,totalAmountFutures:operations_isSet(T.totalAmountFutures)?Je.fromJSON(T.totalAmountFutures):undefined,expectedYield:operations_isSet(T.expectedYield)?Ge.fromJSON(T.expectedYield):undefined,positions:Array.isArray(T?.positions)?T.positions.map((T=>Un.fromJSON(T))):[],accountId:operations_isSet(T.accountId)?String(T.accountId):"",totalAmountOptions:operations_isSet(T.totalAmountOptions)?Je.fromJSON(T.totalAmountOptions):undefined,totalAmountSp:operations_isSet(T.totalAmountSp)?Je.fromJSON(T.totalAmountSp):undefined,totalAmountPortfolio:operations_isSet(T.totalAmountPortfolio)?Je.fromJSON(T.totalAmountPortfolio):undefined,virtualPositions:Array.isArray(T?.virtualPositions)?T.virtualPositions.map((T=>Dn.fromJSON(T))):[]}},toJSON(T){const m={};T.totalAmountShares!==undefined&&(m.totalAmountShares=T.totalAmountShares?Je.toJSON(T.totalAmountShares):undefined);T.totalAmountBonds!==undefined&&(m.totalAmountBonds=T.totalAmountBonds?Je.toJSON(T.totalAmountBonds):undefined);T.totalAmountEtf!==undefined&&(m.totalAmountEtf=T.totalAmountEtf?Je.toJSON(T.totalAmountEtf):undefined);T.totalAmountCurrencies!==undefined&&(m.totalAmountCurrencies=T.totalAmountCurrencies?Je.toJSON(T.totalAmountCurrencies):undefined);T.totalAmountFutures!==undefined&&(m.totalAmountFutures=T.totalAmountFutures?Je.toJSON(T.totalAmountFutures):undefined);T.expectedYield!==undefined&&(m.expectedYield=T.expectedYield?Ge.toJSON(T.expectedYield):undefined);if(T.positions){m.positions=T.positions.map((T=>T?Un.toJSON(T):undefined))}else{m.positions=[]}T.accountId!==undefined&&(m.accountId=T.accountId);T.totalAmountOptions!==undefined&&(m.totalAmountOptions=T.totalAmountOptions?Je.toJSON(T.totalAmountOptions):undefined);T.totalAmountSp!==undefined&&(m.totalAmountSp=T.totalAmountSp?Je.toJSON(T.totalAmountSp):undefined);T.totalAmountPortfolio!==undefined&&(m.totalAmountPortfolio=T.totalAmountPortfolio?Je.toJSON(T.totalAmountPortfolio):undefined);if(T.virtualPositions){m.virtualPositions=T.virtualPositions.map((T=>T?Dn.toJSON(T):undefined))}else{m.virtualPositions=[]}return m}};function createBasePositionsRequest(){return{accountId:""}}const Pn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);return m}};function createBasePositionsResponse(){return{money:[],blocked:[],securities:[],limitsLoadingInProgress:false,futures:[],options:[]}}const yn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.money){Je.encode(_,m.uint32(10).fork()).ldelim()}for(const _ of T.blocked){Je.encode(_,m.uint32(18).fork()).ldelim()}for(const _ of T.securities){wn.encode(_,m.uint32(26).fork()).ldelim()}if(T.limitsLoadingInProgress===true){m.uint32(32).bool(T.limitsLoadingInProgress)}for(const _ of T.futures){Bn.encode(_,m.uint32(42).fork()).ldelim()}for(const _ of T.options){Ln.encode(_,m.uint32(50).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.money.push(Je.decode(_,_.uint32()));break;case 2:E.blocked.push(Je.decode(_,_.uint32()));break;case 3:E.securities.push(wn.decode(_,_.uint32()));break;case 4:E.limitsLoadingInProgress=_.bool();break;case 5:E.futures.push(Bn.decode(_,_.uint32()));break;case 6:E.options.push(Ln.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{money:Array.isArray(T?.money)?T.money.map((T=>Je.fromJSON(T))):[],blocked:Array.isArray(T?.blocked)?T.blocked.map((T=>Je.fromJSON(T))):[],securities:Array.isArray(T?.securities)?T.securities.map((T=>wn.fromJSON(T))):[],limitsLoadingInProgress:operations_isSet(T.limitsLoadingInProgress)?Boolean(T.limitsLoadingInProgress):false,futures:Array.isArray(T?.futures)?T.futures.map((T=>Bn.fromJSON(T))):[],options:Array.isArray(T?.options)?T.options.map((T=>Ln.fromJSON(T))):[]}},toJSON(T){const m={};if(T.money){m.money=T.money.map((T=>T?Je.toJSON(T):undefined))}else{m.money=[]}if(T.blocked){m.blocked=T.blocked.map((T=>T?Je.toJSON(T):undefined))}else{m.blocked=[]}if(T.securities){m.securities=T.securities.map((T=>T?wn.toJSON(T):undefined))}else{m.securities=[]}T.limitsLoadingInProgress!==undefined&&(m.limitsLoadingInProgress=T.limitsLoadingInProgress);if(T.futures){m.futures=T.futures.map((T=>T?Bn.toJSON(T):undefined))}else{m.futures=[]}if(T.options){m.options=T.options.map((T=>T?Ln.toJSON(T):undefined))}else{m.options=[]}return m}};function createBaseWithdrawLimitsRequest(){return{accountId:""}}const Cn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseWithdrawLimitsRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);return m}};function createBaseWithdrawLimitsResponse(){return{money:[],blocked:[],blockedGuarantee:[]}}const kn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.money){Je.encode(_,m.uint32(10).fork()).ldelim()}for(const _ of T.blocked){Je.encode(_,m.uint32(18).fork()).ldelim()}for(const _ of T.blockedGuarantee){Je.encode(_,m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseWithdrawLimitsResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.money.push(Je.decode(_,_.uint32()));break;case 2:E.blocked.push(Je.decode(_,_.uint32()));break;case 3:E.blockedGuarantee.push(Je.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{money:Array.isArray(T?.money)?T.money.map((T=>Je.fromJSON(T))):[],blocked:Array.isArray(T?.blocked)?T.blocked.map((T=>Je.fromJSON(T))):[],blockedGuarantee:Array.isArray(T?.blockedGuarantee)?T.blockedGuarantee.map((T=>Je.fromJSON(T))):[]}},toJSON(T){const m={};if(T.money){m.money=T.money.map((T=>T?Je.toJSON(T):undefined))}else{m.money=[]}if(T.blocked){m.blocked=T.blocked.map((T=>T?Je.toJSON(T):undefined))}else{m.blocked=[]}if(T.blockedGuarantee){m.blockedGuarantee=T.blockedGuarantee.map((T=>T?Je.toJSON(T):undefined))}else{m.blockedGuarantee=[]}return m}};function createBasePortfolioPosition(){return{figi:"",instrumentType:"",quantity:undefined,averagePositionPrice:undefined,expectedYield:undefined,currentNkd:undefined,averagePositionPricePt:undefined,currentPrice:undefined,averagePositionPriceFifo:undefined,quantityLots:undefined,blocked:false,positionUid:"",instrumentUid:"",varMargin:undefined,expectedYieldFifo:undefined}}const Un={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.instrumentType!==""){m.uint32(18).string(T.instrumentType)}if(T.quantity!==undefined){Ge.encode(T.quantity,m.uint32(26).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Je.encode(T.averagePositionPrice,m.uint32(34).fork()).ldelim()}if(T.expectedYield!==undefined){Ge.encode(T.expectedYield,m.uint32(42).fork()).ldelim()}if(T.currentNkd!==undefined){Je.encode(T.currentNkd,m.uint32(50).fork()).ldelim()}if(T.averagePositionPricePt!==undefined){Ge.encode(T.averagePositionPricePt,m.uint32(58).fork()).ldelim()}if(T.currentPrice!==undefined){Je.encode(T.currentPrice,m.uint32(66).fork()).ldelim()}if(T.averagePositionPriceFifo!==undefined){Je.encode(T.averagePositionPriceFifo,m.uint32(74).fork()).ldelim()}if(T.quantityLots!==undefined){Ge.encode(T.quantityLots,m.uint32(82).fork()).ldelim()}if(T.blocked===true){m.uint32(168).bool(T.blocked)}if(T.positionUid!==""){m.uint32(194).string(T.positionUid)}if(T.instrumentUid!==""){m.uint32(202).string(T.instrumentUid)}if(T.varMargin!==undefined){Je.encode(T.varMargin,m.uint32(210).fork()).ldelim()}if(T.expectedYieldFifo!==undefined){Ge.encode(T.expectedYieldFifo,m.uint32(218).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioPosition();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.instrumentType=_.string();break;case 3:E.quantity=Ge.decode(_,_.uint32());break;case 4:E.averagePositionPrice=Je.decode(_,_.uint32());break;case 5:E.expectedYield=Ge.decode(_,_.uint32());break;case 6:E.currentNkd=Je.decode(_,_.uint32());break;case 7:E.averagePositionPricePt=Ge.decode(_,_.uint32());break;case 8:E.currentPrice=Je.decode(_,_.uint32());break;case 9:E.averagePositionPriceFifo=Je.decode(_,_.uint32());break;case 10:E.quantityLots=Ge.decode(_,_.uint32());break;case 21:E.blocked=_.bool();break;case 24:E.positionUid=_.string();break;case 25:E.instrumentUid=_.string();break;case 26:E.varMargin=Je.decode(_,_.uint32());break;case 27:E.expectedYieldFifo=Ge.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",quantity:operations_isSet(T.quantity)?Ge.fromJSON(T.quantity):undefined,averagePositionPrice:operations_isSet(T.averagePositionPrice)?Je.fromJSON(T.averagePositionPrice):undefined,expectedYield:operations_isSet(T.expectedYield)?Ge.fromJSON(T.expectedYield):undefined,currentNkd:operations_isSet(T.currentNkd)?Je.fromJSON(T.currentNkd):undefined,averagePositionPricePt:operations_isSet(T.averagePositionPricePt)?Ge.fromJSON(T.averagePositionPricePt):undefined,currentPrice:operations_isSet(T.currentPrice)?Je.fromJSON(T.currentPrice):undefined,averagePositionPriceFifo:operations_isSet(T.averagePositionPriceFifo)?Je.fromJSON(T.averagePositionPriceFifo):undefined,quantityLots:operations_isSet(T.quantityLots)?Ge.fromJSON(T.quantityLots):undefined,blocked:operations_isSet(T.blocked)?Boolean(T.blocked):false,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",varMargin:operations_isSet(T.varMargin)?Je.fromJSON(T.varMargin):undefined,expectedYieldFifo:operations_isSet(T.expectedYieldFifo)?Ge.fromJSON(T.expectedYieldFifo):undefined}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.instrumentType!==undefined&&(m.instrumentType=T.instrumentType);T.quantity!==undefined&&(m.quantity=T.quantity?Ge.toJSON(T.quantity):undefined);T.averagePositionPrice!==undefined&&(m.averagePositionPrice=T.averagePositionPrice?Je.toJSON(T.averagePositionPrice):undefined);T.expectedYield!==undefined&&(m.expectedYield=T.expectedYield?Ge.toJSON(T.expectedYield):undefined);T.currentNkd!==undefined&&(m.currentNkd=T.currentNkd?Je.toJSON(T.currentNkd):undefined);T.averagePositionPricePt!==undefined&&(m.averagePositionPricePt=T.averagePositionPricePt?Ge.toJSON(T.averagePositionPricePt):undefined);T.currentPrice!==undefined&&(m.currentPrice=T.currentPrice?Je.toJSON(T.currentPrice):undefined);T.averagePositionPriceFifo!==undefined&&(m.averagePositionPriceFifo=T.averagePositionPriceFifo?Je.toJSON(T.averagePositionPriceFifo):undefined);T.quantityLots!==undefined&&(m.quantityLots=T.quantityLots?Ge.toJSON(T.quantityLots):undefined);T.blocked!==undefined&&(m.blocked=T.blocked);T.positionUid!==undefined&&(m.positionUid=T.positionUid);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.varMargin!==undefined&&(m.varMargin=T.varMargin?Je.toJSON(T.varMargin):undefined);T.expectedYieldFifo!==undefined&&(m.expectedYieldFifo=T.expectedYieldFifo?Ge.toJSON(T.expectedYieldFifo):undefined);return m}};function createBaseVirtualPortfolioPosition(){return{positionUid:"",instrumentUid:"",figi:"",instrumentType:"",quantity:undefined,averagePositionPrice:undefined,expectedYield:undefined,expectedYieldFifo:undefined,expireDate:undefined,currentPrice:undefined,averagePositionPriceFifo:undefined}}const Dn={encode(T,m=Le.Z.Writer.create()){if(T.positionUid!==""){m.uint32(10).string(T.positionUid)}if(T.instrumentUid!==""){m.uint32(18).string(T.instrumentUid)}if(T.figi!==""){m.uint32(26).string(T.figi)}if(T.instrumentType!==""){m.uint32(34).string(T.instrumentType)}if(T.quantity!==undefined){Ge.encode(T.quantity,m.uint32(42).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Je.encode(T.averagePositionPrice,m.uint32(50).fork()).ldelim()}if(T.expectedYield!==undefined){Ge.encode(T.expectedYield,m.uint32(58).fork()).ldelim()}if(T.expectedYieldFifo!==undefined){Ge.encode(T.expectedYieldFifo,m.uint32(66).fork()).ldelim()}if(T.expireDate!==undefined){Ye.encode(operations_toTimestamp(T.expireDate),m.uint32(74).fork()).ldelim()}if(T.currentPrice!==undefined){Je.encode(T.currentPrice,m.uint32(82).fork()).ldelim()}if(T.averagePositionPriceFifo!==undefined){Je.encode(T.averagePositionPriceFifo,m.uint32(90).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseVirtualPortfolioPosition();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.positionUid=_.string();break;case 2:E.instrumentUid=_.string();break;case 3:E.figi=_.string();break;case 4:E.instrumentType=_.string();break;case 5:E.quantity=Ge.decode(_,_.uint32());break;case 6:E.averagePositionPrice=Je.decode(_,_.uint32());break;case 7:E.expectedYield=Ge.decode(_,_.uint32());break;case 8:E.expectedYieldFifo=Ge.decode(_,_.uint32());break;case 9:E.expireDate=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 10:E.currentPrice=Je.decode(_,_.uint32());break;case 11:E.averagePositionPriceFifo=Je.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",quantity:operations_isSet(T.quantity)?Ge.fromJSON(T.quantity):undefined,averagePositionPrice:operations_isSet(T.averagePositionPrice)?Je.fromJSON(T.averagePositionPrice):undefined,expectedYield:operations_isSet(T.expectedYield)?Ge.fromJSON(T.expectedYield):undefined,expectedYieldFifo:operations_isSet(T.expectedYieldFifo)?Ge.fromJSON(T.expectedYieldFifo):undefined,expireDate:operations_isSet(T.expireDate)?operations_fromJsonTimestamp(T.expireDate):undefined,currentPrice:operations_isSet(T.currentPrice)?Je.fromJSON(T.currentPrice):undefined,averagePositionPriceFifo:operations_isSet(T.averagePositionPriceFifo)?Je.fromJSON(T.averagePositionPriceFifo):undefined}},toJSON(T){const m={};T.positionUid!==undefined&&(m.positionUid=T.positionUid);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.figi!==undefined&&(m.figi=T.figi);T.instrumentType!==undefined&&(m.instrumentType=T.instrumentType);T.quantity!==undefined&&(m.quantity=T.quantity?Ge.toJSON(T.quantity):undefined);T.averagePositionPrice!==undefined&&(m.averagePositionPrice=T.averagePositionPrice?Je.toJSON(T.averagePositionPrice):undefined);T.expectedYield!==undefined&&(m.expectedYield=T.expectedYield?Ge.toJSON(T.expectedYield):undefined);T.expectedYieldFifo!==undefined&&(m.expectedYieldFifo=T.expectedYieldFifo?Ge.toJSON(T.expectedYieldFifo):undefined);T.expireDate!==undefined&&(m.expireDate=T.expireDate.toISOString());T.currentPrice!==undefined&&(m.currentPrice=T.currentPrice?Je.toJSON(T.currentPrice):undefined);T.averagePositionPriceFifo!==undefined&&(m.averagePositionPriceFifo=T.averagePositionPriceFifo?Je.toJSON(T.averagePositionPriceFifo):undefined);return m}};function createBasePositionsSecurities(){return{figi:"",blocked:0,balance:0,positionUid:"",instrumentUid:"",exchangeBlocked:false,instrumentType:""}}const wn={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.blocked!==0){m.uint32(16).int64(T.blocked)}if(T.balance!==0){m.uint32(24).int64(T.balance)}if(T.positionUid!==""){m.uint32(34).string(T.positionUid)}if(T.instrumentUid!==""){m.uint32(42).string(T.instrumentUid)}if(T.exchangeBlocked===true){m.uint32(88).bool(T.exchangeBlocked)}if(T.instrumentType!==""){m.uint32(130).string(T.instrumentType)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsSecurities();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.blocked=operations_longToNumber(_.int64());break;case 3:E.balance=operations_longToNumber(_.int64());break;case 4:E.positionUid=_.string();break;case 5:E.instrumentUid=_.string();break;case 11:E.exchangeBlocked=_.bool();break;case 16:E.instrumentType=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",exchangeBlocked:operations_isSet(T.exchangeBlocked)?Boolean(T.exchangeBlocked):false,instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.blocked!==undefined&&(m.blocked=Math.round(T.blocked));T.balance!==undefined&&(m.balance=Math.round(T.balance));T.positionUid!==undefined&&(m.positionUid=T.positionUid);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.exchangeBlocked!==undefined&&(m.exchangeBlocked=T.exchangeBlocked);T.instrumentType!==undefined&&(m.instrumentType=T.instrumentType);return m}};function createBasePositionsFutures(){return{figi:"",blocked:0,balance:0,positionUid:"",instrumentUid:""}}const Bn={encode(T,m=Le.Z.Writer.create()){if(T.figi!==""){m.uint32(10).string(T.figi)}if(T.blocked!==0){m.uint32(16).int64(T.blocked)}if(T.balance!==0){m.uint32(24).int64(T.balance)}if(T.positionUid!==""){m.uint32(34).string(T.positionUid)}if(T.instrumentUid!==""){m.uint32(42).string(T.instrumentUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsFutures();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.figi=_.string();break;case 2:E.blocked=operations_longToNumber(_.int64());break;case 3:E.balance=operations_longToNumber(_.int64());break;case 4:E.positionUid=_.string();break;case 5:E.instrumentUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const m={};T.figi!==undefined&&(m.figi=T.figi);T.blocked!==undefined&&(m.blocked=Math.round(T.blocked));T.balance!==undefined&&(m.balance=Math.round(T.balance));T.positionUid!==undefined&&(m.positionUid=T.positionUid);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);return m}};function createBasePositionsOptions(){return{positionUid:"",instrumentUid:"",blocked:0,balance:0}}const Ln={encode(T,m=Le.Z.Writer.create()){if(T.positionUid!==""){m.uint32(10).string(T.positionUid)}if(T.instrumentUid!==""){m.uint32(18).string(T.instrumentUid)}if(T.blocked!==0){m.uint32(88).int64(T.blocked)}if(T.balance!==0){m.uint32(168).int64(T.balance)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsOptions();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.positionUid=_.string();break;case 2:E.instrumentUid=_.string();break;case 11:E.blocked=operations_longToNumber(_.int64());break;case 21:E.balance=operations_longToNumber(_.int64());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0}},toJSON(T){const m={};T.positionUid!==undefined&&(m.positionUid=T.positionUid);T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.blocked!==undefined&&(m.blocked=Math.round(T.blocked));T.balance!==undefined&&(m.balance=Math.round(T.balance));return m}};function createBaseBrokerReportRequest(){return{generateBrokerReportRequest:undefined,getBrokerReportRequest:undefined}}const vn={encode(T,m=Le.Z.Writer.create()){if(T.generateBrokerReportRequest!==undefined){Fn.encode(T.generateBrokerReportRequest,m.uint32(10).fork()).ldelim()}if(T.getBrokerReportRequest!==undefined){Jn.encode(T.getBrokerReportRequest,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseBrokerReportRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.generateBrokerReportRequest=Fn.decode(_,_.uint32());break;case 2:E.getBrokerReportRequest=Jn.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{generateBrokerReportRequest:operations_isSet(T.generateBrokerReportRequest)?Fn.fromJSON(T.generateBrokerReportRequest):undefined,getBrokerReportRequest:operations_isSet(T.getBrokerReportRequest)?Jn.fromJSON(T.getBrokerReportRequest):undefined}},toJSON(T){const m={};T.generateBrokerReportRequest!==undefined&&(m.generateBrokerReportRequest=T.generateBrokerReportRequest?Fn.toJSON(T.generateBrokerReportRequest):undefined);T.getBrokerReportRequest!==undefined&&(m.getBrokerReportRequest=T.getBrokerReportRequest?Jn.toJSON(T.getBrokerReportRequest):undefined);return m}};function createBaseBrokerReportResponse(){return{generateBrokerReportResponse:undefined,getBrokerReportResponse:undefined}}const Yn={encode(T,m=Le.Z.Writer.create()){if(T.generateBrokerReportResponse!==undefined){Mn.encode(T.generateBrokerReportResponse,m.uint32(10).fork()).ldelim()}if(T.getBrokerReportResponse!==undefined){Gn.encode(T.getBrokerReportResponse,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseBrokerReportResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.generateBrokerReportResponse=Mn.decode(_,_.uint32());break;case 2:E.getBrokerReportResponse=Gn.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{generateBrokerReportResponse:operations_isSet(T.generateBrokerReportResponse)?Mn.fromJSON(T.generateBrokerReportResponse):undefined,getBrokerReportResponse:operations_isSet(T.getBrokerReportResponse)?Gn.fromJSON(T.getBrokerReportResponse):undefined}},toJSON(T){const m={};T.generateBrokerReportResponse!==undefined&&(m.generateBrokerReportResponse=T.generateBrokerReportResponse?Mn.toJSON(T.generateBrokerReportResponse):undefined);T.getBrokerReportResponse!==undefined&&(m.getBrokerReportResponse=T.getBrokerReportResponse?Gn.toJSON(T.getBrokerReportResponse):undefined);return m}};function createBaseGenerateBrokerReportRequest(){return{accountId:"",from:undefined,to:undefined}}const Fn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.from!==undefined){Ye.encode(operations_toTimestamp(T.from),m.uint32(18).fork()).ldelim()}if(T.to!==undefined){Ye.encode(operations_toTimestamp(T.to),m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGenerateBrokerReportRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.from=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.to=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());return m}};function createBaseGenerateBrokerReportResponse(){return{taskId:""}}const Mn={encode(T,m=Le.Z.Writer.create()){if(T.taskId!==""){m.uint32(10).string(T.taskId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGenerateBrokerReportResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.taskId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):""}},toJSON(T){const m={};T.taskId!==undefined&&(m.taskId=T.taskId);return m}};function createBaseGetBrokerReportRequest(){return{taskId:"",page:0}}const Jn={encode(T,m=Le.Z.Writer.create()){if(T.taskId!==""){m.uint32(10).string(T.taskId)}if(T.page!==0){m.uint32(16).int32(T.page)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetBrokerReportRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.taskId=_.string();break;case 2:E.page=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):"",page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const m={};T.taskId!==undefined&&(m.taskId=T.taskId);T.page!==undefined&&(m.page=Math.round(T.page));return m}};function createBaseGetBrokerReportResponse(){return{brokerReport:[],itemsCount:0,pagesCount:0,page:0}}const Gn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.brokerReport){xn.encode(_,m.uint32(10).fork()).ldelim()}if(T.itemsCount!==0){m.uint32(16).int32(T.itemsCount)}if(T.pagesCount!==0){m.uint32(24).int32(T.pagesCount)}if(T.page!==0){m.uint32(32).int32(T.page)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetBrokerReportResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.brokerReport.push(xn.decode(_,_.uint32()));break;case 2:E.itemsCount=_.int32();break;case 3:E.pagesCount=_.int32();break;case 4:E.page=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{brokerReport:Array.isArray(T?.brokerReport)?T.brokerReport.map((T=>xn.fromJSON(T))):[],itemsCount:operations_isSet(T.itemsCount)?Number(T.itemsCount):0,pagesCount:operations_isSet(T.pagesCount)?Number(T.pagesCount):0,page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const m={};if(T.brokerReport){m.brokerReport=T.brokerReport.map((T=>T?xn.toJSON(T):undefined))}else{m.brokerReport=[]}T.itemsCount!==undefined&&(m.itemsCount=Math.round(T.itemsCount));T.pagesCount!==undefined&&(m.pagesCount=Math.round(T.pagesCount));T.page!==undefined&&(m.page=Math.round(T.page));return m}};function createBaseBrokerReport(){return{tradeId:"",orderId:"",figi:"",executeSign:"",tradeDatetime:undefined,exchange:"",classCode:"",direction:"",name:"",ticker:"",price:undefined,quantity:0,orderAmount:undefined,aciValue:undefined,totalOrderAmount:undefined,brokerCommission:undefined,exchangeCommission:undefined,exchangeClearingCommission:undefined,repoRate:undefined,party:"",clearValueDate:undefined,secValueDate:undefined,brokerStatus:"",separateAgreementType:"",separateAgreementNumber:"",separateAgreementDate:"",deliveryType:""}}const xn={encode(T,m=Le.Z.Writer.create()){if(T.tradeId!==""){m.uint32(10).string(T.tradeId)}if(T.orderId!==""){m.uint32(18).string(T.orderId)}if(T.figi!==""){m.uint32(26).string(T.figi)}if(T.executeSign!==""){m.uint32(34).string(T.executeSign)}if(T.tradeDatetime!==undefined){Ye.encode(operations_toTimestamp(T.tradeDatetime),m.uint32(42).fork()).ldelim()}if(T.exchange!==""){m.uint32(50).string(T.exchange)}if(T.classCode!==""){m.uint32(58).string(T.classCode)}if(T.direction!==""){m.uint32(66).string(T.direction)}if(T.name!==""){m.uint32(74).string(T.name)}if(T.ticker!==""){m.uint32(82).string(T.ticker)}if(T.price!==undefined){Je.encode(T.price,m.uint32(90).fork()).ldelim()}if(T.quantity!==0){m.uint32(96).int64(T.quantity)}if(T.orderAmount!==undefined){Je.encode(T.orderAmount,m.uint32(106).fork()).ldelim()}if(T.aciValue!==undefined){Ge.encode(T.aciValue,m.uint32(114).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Je.encode(T.totalOrderAmount,m.uint32(122).fork()).ldelim()}if(T.brokerCommission!==undefined){Je.encode(T.brokerCommission,m.uint32(130).fork()).ldelim()}if(T.exchangeCommission!==undefined){Je.encode(T.exchangeCommission,m.uint32(138).fork()).ldelim()}if(T.exchangeClearingCommission!==undefined){Je.encode(T.exchangeClearingCommission,m.uint32(146).fork()).ldelim()}if(T.repoRate!==undefined){Ge.encode(T.repoRate,m.uint32(154).fork()).ldelim()}if(T.party!==""){m.uint32(162).string(T.party)}if(T.clearValueDate!==undefined){Ye.encode(operations_toTimestamp(T.clearValueDate),m.uint32(170).fork()).ldelim()}if(T.secValueDate!==undefined){Ye.encode(operations_toTimestamp(T.secValueDate),m.uint32(178).fork()).ldelim()}if(T.brokerStatus!==""){m.uint32(186).string(T.brokerStatus)}if(T.separateAgreementType!==""){m.uint32(194).string(T.separateAgreementType)}if(T.separateAgreementNumber!==""){m.uint32(202).string(T.separateAgreementNumber)}if(T.separateAgreementDate!==""){m.uint32(210).string(T.separateAgreementDate)}if(T.deliveryType!==""){m.uint32(218).string(T.deliveryType)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseBrokerReport();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.tradeId=_.string();break;case 2:E.orderId=_.string();break;case 3:E.figi=_.string();break;case 4:E.executeSign=_.string();break;case 5:E.tradeDatetime=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 6:E.exchange=_.string();break;case 7:E.classCode=_.string();break;case 8:E.direction=_.string();break;case 9:E.name=_.string();break;case 10:E.ticker=_.string();break;case 11:E.price=Je.decode(_,_.uint32());break;case 12:E.quantity=operations_longToNumber(_.int64());break;case 13:E.orderAmount=Je.decode(_,_.uint32());break;case 14:E.aciValue=Ge.decode(_,_.uint32());break;case 15:E.totalOrderAmount=Je.decode(_,_.uint32());break;case 16:E.brokerCommission=Je.decode(_,_.uint32());break;case 17:E.exchangeCommission=Je.decode(_,_.uint32());break;case 18:E.exchangeClearingCommission=Je.decode(_,_.uint32());break;case 19:E.repoRate=Ge.decode(_,_.uint32());break;case 20:E.party=_.string();break;case 21:E.clearValueDate=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 22:E.secValueDate=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 23:E.brokerStatus=_.string();break;case 24:E.separateAgreementType=_.string();break;case 25:E.separateAgreementNumber=_.string();break;case 26:E.separateAgreementDate=_.string();break;case 27:E.deliveryType=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{tradeId:operations_isSet(T.tradeId)?String(T.tradeId):"",orderId:operations_isSet(T.orderId)?String(T.orderId):"",figi:operations_isSet(T.figi)?String(T.figi):"",executeSign:operations_isSet(T.executeSign)?String(T.executeSign):"",tradeDatetime:operations_isSet(T.tradeDatetime)?operations_fromJsonTimestamp(T.tradeDatetime):undefined,exchange:operations_isSet(T.exchange)?String(T.exchange):"",classCode:operations_isSet(T.classCode)?String(T.classCode):"",direction:operations_isSet(T.direction)?String(T.direction):"",name:operations_isSet(T.name)?String(T.name):"",ticker:operations_isSet(T.ticker)?String(T.ticker):"",price:operations_isSet(T.price)?Je.fromJSON(T.price):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,orderAmount:operations_isSet(T.orderAmount)?Je.fromJSON(T.orderAmount):undefined,aciValue:operations_isSet(T.aciValue)?Ge.fromJSON(T.aciValue):undefined,totalOrderAmount:operations_isSet(T.totalOrderAmount)?Je.fromJSON(T.totalOrderAmount):undefined,brokerCommission:operations_isSet(T.brokerCommission)?Je.fromJSON(T.brokerCommission):undefined,exchangeCommission:operations_isSet(T.exchangeCommission)?Je.fromJSON(T.exchangeCommission):undefined,exchangeClearingCommission:operations_isSet(T.exchangeClearingCommission)?Je.fromJSON(T.exchangeClearingCommission):undefined,repoRate:operations_isSet(T.repoRate)?Ge.fromJSON(T.repoRate):undefined,party:operations_isSet(T.party)?String(T.party):"",clearValueDate:operations_isSet(T.clearValueDate)?operations_fromJsonTimestamp(T.clearValueDate):undefined,secValueDate:operations_isSet(T.secValueDate)?operations_fromJsonTimestamp(T.secValueDate):undefined,brokerStatus:operations_isSet(T.brokerStatus)?String(T.brokerStatus):"",separateAgreementType:operations_isSet(T.separateAgreementType)?String(T.separateAgreementType):"",separateAgreementNumber:operations_isSet(T.separateAgreementNumber)?String(T.separateAgreementNumber):"",separateAgreementDate:operations_isSet(T.separateAgreementDate)?String(T.separateAgreementDate):"",deliveryType:operations_isSet(T.deliveryType)?String(T.deliveryType):""}},toJSON(T){const m={};T.tradeId!==undefined&&(m.tradeId=T.tradeId);T.orderId!==undefined&&(m.orderId=T.orderId);T.figi!==undefined&&(m.figi=T.figi);T.executeSign!==undefined&&(m.executeSign=T.executeSign);T.tradeDatetime!==undefined&&(m.tradeDatetime=T.tradeDatetime.toISOString());T.exchange!==undefined&&(m.exchange=T.exchange);T.classCode!==undefined&&(m.classCode=T.classCode);T.direction!==undefined&&(m.direction=T.direction);T.name!==undefined&&(m.name=T.name);T.ticker!==undefined&&(m.ticker=T.ticker);T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.orderAmount!==undefined&&(m.orderAmount=T.orderAmount?Je.toJSON(T.orderAmount):undefined);T.aciValue!==undefined&&(m.aciValue=T.aciValue?Ge.toJSON(T.aciValue):undefined);T.totalOrderAmount!==undefined&&(m.totalOrderAmount=T.totalOrderAmount?Je.toJSON(T.totalOrderAmount):undefined);T.brokerCommission!==undefined&&(m.brokerCommission=T.brokerCommission?Je.toJSON(T.brokerCommission):undefined);T.exchangeCommission!==undefined&&(m.exchangeCommission=T.exchangeCommission?Je.toJSON(T.exchangeCommission):undefined);T.exchangeClearingCommission!==undefined&&(m.exchangeClearingCommission=T.exchangeClearingCommission?Je.toJSON(T.exchangeClearingCommission):undefined);T.repoRate!==undefined&&(m.repoRate=T.repoRate?Ge.toJSON(T.repoRate):undefined);T.party!==undefined&&(m.party=T.party);T.clearValueDate!==undefined&&(m.clearValueDate=T.clearValueDate.toISOString());T.secValueDate!==undefined&&(m.secValueDate=T.secValueDate.toISOString());T.brokerStatus!==undefined&&(m.brokerStatus=T.brokerStatus);T.separateAgreementType!==undefined&&(m.separateAgreementType=T.separateAgreementType);T.separateAgreementNumber!==undefined&&(m.separateAgreementNumber=T.separateAgreementNumber);T.separateAgreementDate!==undefined&&(m.separateAgreementDate=T.separateAgreementDate);T.deliveryType!==undefined&&(m.deliveryType=T.deliveryType);return m}};function createBaseGetDividendsForeignIssuerRequest(){return{generateDivForeignIssuerReport:undefined,getDivForeignIssuerReport:undefined}}const qn={encode(T,m=Le.Z.Writer.create()){if(T.generateDivForeignIssuerReport!==undefined){Zn.encode(T.generateDivForeignIssuerReport,m.uint32(10).fork()).ldelim()}if(T.getDivForeignIssuerReport!==undefined){Xn.encode(T.getDivForeignIssuerReport,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetDividendsForeignIssuerRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.generateDivForeignIssuerReport=Zn.decode(_,_.uint32());break;case 2:E.getDivForeignIssuerReport=Xn.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{generateDivForeignIssuerReport:operations_isSet(T.generateDivForeignIssuerReport)?Zn.fromJSON(T.generateDivForeignIssuerReport):undefined,getDivForeignIssuerReport:operations_isSet(T.getDivForeignIssuerReport)?Xn.fromJSON(T.getDivForeignIssuerReport):undefined}},toJSON(T){const m={};T.generateDivForeignIssuerReport!==undefined&&(m.generateDivForeignIssuerReport=T.generateDivForeignIssuerReport?Zn.toJSON(T.generateDivForeignIssuerReport):undefined);T.getDivForeignIssuerReport!==undefined&&(m.getDivForeignIssuerReport=T.getDivForeignIssuerReport?Xn.toJSON(T.getDivForeignIssuerReport):undefined);return m}};function createBaseGetDividendsForeignIssuerResponse(){return{generateDivForeignIssuerReportResponse:undefined,divForeignIssuerReport:undefined}}const Vn={encode(T,m=Le.Z.Writer.create()){if(T.generateDivForeignIssuerReportResponse!==undefined){Wn.encode(T.generateDivForeignIssuerReportResponse,m.uint32(10).fork()).ldelim()}if(T.divForeignIssuerReport!==undefined){Hn.encode(T.divForeignIssuerReport,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetDividendsForeignIssuerResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.generateDivForeignIssuerReportResponse=Wn.decode(_,_.uint32());break;case 2:E.divForeignIssuerReport=Hn.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{generateDivForeignIssuerReportResponse:operations_isSet(T.generateDivForeignIssuerReportResponse)?Wn.fromJSON(T.generateDivForeignIssuerReportResponse):undefined,divForeignIssuerReport:operations_isSet(T.divForeignIssuerReport)?Hn.fromJSON(T.divForeignIssuerReport):undefined}},toJSON(T){const m={};T.generateDivForeignIssuerReportResponse!==undefined&&(m.generateDivForeignIssuerReportResponse=T.generateDivForeignIssuerReportResponse?Wn.toJSON(T.generateDivForeignIssuerReportResponse):undefined);T.divForeignIssuerReport!==undefined&&(m.divForeignIssuerReport=T.divForeignIssuerReport?Hn.toJSON(T.divForeignIssuerReport):undefined);return m}};function createBaseGenerateDividendsForeignIssuerReportRequest(){return{accountId:"",from:undefined,to:undefined}}const Zn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.from!==undefined){Ye.encode(operations_toTimestamp(T.from),m.uint32(18).fork()).ldelim()}if(T.to!==undefined){Ye.encode(operations_toTimestamp(T.to),m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGenerateDividendsForeignIssuerReportRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.from=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.to=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());return m}};function createBaseGetDividendsForeignIssuerReportRequest(){return{taskId:"",page:0}}const Xn={encode(T,m=Le.Z.Writer.create()){if(T.taskId!==""){m.uint32(10).string(T.taskId)}if(T.page!==0){m.uint32(16).int32(T.page)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetDividendsForeignIssuerReportRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.taskId=_.string();break;case 2:E.page=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):"",page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const m={};T.taskId!==undefined&&(m.taskId=T.taskId);T.page!==undefined&&(m.page=Math.round(T.page));return m}};function createBaseGenerateDividendsForeignIssuerReportResponse(){return{taskId:""}}const Wn={encode(T,m=Le.Z.Writer.create()){if(T.taskId!==""){m.uint32(10).string(T.taskId)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGenerateDividendsForeignIssuerReportResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.taskId=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):""}},toJSON(T){const m={};T.taskId!==undefined&&(m.taskId=T.taskId);return m}};function createBaseGetDividendsForeignIssuerReportResponse(){return{dividendsForeignIssuerReport:[],itemsCount:0,pagesCount:0,page:0}}const Hn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.dividendsForeignIssuerReport){Kn.encode(_,m.uint32(10).fork()).ldelim()}if(T.itemsCount!==0){m.uint32(16).int32(T.itemsCount)}if(T.pagesCount!==0){m.uint32(24).int32(T.pagesCount)}if(T.page!==0){m.uint32(32).int32(T.page)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetDividendsForeignIssuerReportResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.dividendsForeignIssuerReport.push(Kn.decode(_,_.uint32()));break;case 2:E.itemsCount=_.int32();break;case 3:E.pagesCount=_.int32();break;case 4:E.page=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{dividendsForeignIssuerReport:Array.isArray(T?.dividendsForeignIssuerReport)?T.dividendsForeignIssuerReport.map((T=>Kn.fromJSON(T))):[],itemsCount:operations_isSet(T.itemsCount)?Number(T.itemsCount):0,pagesCount:operations_isSet(T.pagesCount)?Number(T.pagesCount):0,page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const m={};if(T.dividendsForeignIssuerReport){m.dividendsForeignIssuerReport=T.dividendsForeignIssuerReport.map((T=>T?Kn.toJSON(T):undefined))}else{m.dividendsForeignIssuerReport=[]}T.itemsCount!==undefined&&(m.itemsCount=Math.round(T.itemsCount));T.pagesCount!==undefined&&(m.pagesCount=Math.round(T.pagesCount));T.page!==undefined&&(m.page=Math.round(T.page));return m}};function createBaseDividendsForeignIssuerReport(){return{recordDate:undefined,paymentDate:undefined,securityName:"",isin:"",issuerCountry:"",quantity:0,dividend:undefined,externalCommission:undefined,dividendGross:undefined,tax:undefined,dividendAmount:undefined,currency:""}}const Kn={encode(T,m=Le.Z.Writer.create()){if(T.recordDate!==undefined){Ye.encode(operations_toTimestamp(T.recordDate),m.uint32(10).fork()).ldelim()}if(T.paymentDate!==undefined){Ye.encode(operations_toTimestamp(T.paymentDate),m.uint32(18).fork()).ldelim()}if(T.securityName!==""){m.uint32(26).string(T.securityName)}if(T.isin!==""){m.uint32(34).string(T.isin)}if(T.issuerCountry!==""){m.uint32(42).string(T.issuerCountry)}if(T.quantity!==0){m.uint32(48).int64(T.quantity)}if(T.dividend!==undefined){Ge.encode(T.dividend,m.uint32(58).fork()).ldelim()}if(T.externalCommission!==undefined){Ge.encode(T.externalCommission,m.uint32(66).fork()).ldelim()}if(T.dividendGross!==undefined){Ge.encode(T.dividendGross,m.uint32(74).fork()).ldelim()}if(T.tax!==undefined){Ge.encode(T.tax,m.uint32(82).fork()).ldelim()}if(T.dividendAmount!==undefined){Ge.encode(T.dividendAmount,m.uint32(90).fork()).ldelim()}if(T.currency!==""){m.uint32(98).string(T.currency)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseDividendsForeignIssuerReport();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.recordDate=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 2:E.paymentDate=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 3:E.securityName=_.string();break;case 4:E.isin=_.string();break;case 5:E.issuerCountry=_.string();break;case 6:E.quantity=operations_longToNumber(_.int64());break;case 7:E.dividend=Ge.decode(_,_.uint32());break;case 8:E.externalCommission=Ge.decode(_,_.uint32());break;case 9:E.dividendGross=Ge.decode(_,_.uint32());break;case 10:E.tax=Ge.decode(_,_.uint32());break;case 11:E.dividendAmount=Ge.decode(_,_.uint32());break;case 12:E.currency=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{recordDate:operations_isSet(T.recordDate)?operations_fromJsonTimestamp(T.recordDate):undefined,paymentDate:operations_isSet(T.paymentDate)?operations_fromJsonTimestamp(T.paymentDate):undefined,securityName:operations_isSet(T.securityName)?String(T.securityName):"",isin:operations_isSet(T.isin)?String(T.isin):"",issuerCountry:operations_isSet(T.issuerCountry)?String(T.issuerCountry):"",quantity:operations_isSet(T.quantity)?Number(T.quantity):0,dividend:operations_isSet(T.dividend)?Ge.fromJSON(T.dividend):undefined,externalCommission:operations_isSet(T.externalCommission)?Ge.fromJSON(T.externalCommission):undefined,dividendGross:operations_isSet(T.dividendGross)?Ge.fromJSON(T.dividendGross):undefined,tax:operations_isSet(T.tax)?Ge.fromJSON(T.tax):undefined,dividendAmount:operations_isSet(T.dividendAmount)?Ge.fromJSON(T.dividendAmount):undefined,currency:operations_isSet(T.currency)?String(T.currency):""}},toJSON(T){const m={};T.recordDate!==undefined&&(m.recordDate=T.recordDate.toISOString());T.paymentDate!==undefined&&(m.paymentDate=T.paymentDate.toISOString());T.securityName!==undefined&&(m.securityName=T.securityName);T.isin!==undefined&&(m.isin=T.isin);T.issuerCountry!==undefined&&(m.issuerCountry=T.issuerCountry);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.dividend!==undefined&&(m.dividend=T.dividend?Ge.toJSON(T.dividend):undefined);T.externalCommission!==undefined&&(m.externalCommission=T.externalCommission?Ge.toJSON(T.externalCommission):undefined);T.dividendGross!==undefined&&(m.dividendGross=T.dividendGross?Ge.toJSON(T.dividendGross):undefined);T.tax!==undefined&&(m.tax=T.tax?Ge.toJSON(T.tax):undefined);T.dividendAmount!==undefined&&(m.dividendAmount=T.dividendAmount?Ge.toJSON(T.dividendAmount):undefined);T.currency!==undefined&&(m.currency=T.currency);return m}};function createBasePortfolioStreamRequest(){return{accounts:[]}}const zn={encode(T,m=Le.Z.Writer.create()){for(const _ of T.accounts){m.uint32(10).string(_)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioStreamRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accounts.push(_.string());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const m={};if(T.accounts){m.accounts=T.accounts.map((T=>T))}else{m.accounts=[]}return m}};function createBasePortfolioStreamResponse(){return{subscriptions:undefined,portfolio:undefined,ping:undefined}}const jn={encode(T,m=Le.Z.Writer.create()){if(T.subscriptions!==undefined){$n.encode(T.subscriptions,m.uint32(10).fork()).ldelim()}if(T.portfolio!==undefined){gn.encode(T.portfolio,m.uint32(18).fork()).ldelim()}if(T.ping!==undefined){xe.encode(T.ping,m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioStreamResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptions=$n.decode(_,_.uint32());break;case 2:E.portfolio=gn.decode(_,_.uint32());break;case 3:E.ping=xe.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptions:operations_isSet(T.subscriptions)?$n.fromJSON(T.subscriptions):undefined,portfolio:operations_isSet(T.portfolio)?gn.fromJSON(T.portfolio):undefined,ping:operations_isSet(T.ping)?xe.fromJSON(T.ping):undefined}},toJSON(T){const m={};T.subscriptions!==undefined&&(m.subscriptions=T.subscriptions?$n.toJSON(T.subscriptions):undefined);T.portfolio!==undefined&&(m.portfolio=T.portfolio?gn.toJSON(T.portfolio):undefined);T.ping!==undefined&&(m.ping=T.ping?xe.toJSON(T.ping):undefined);return m}};function createBasePortfolioSubscriptionResult(){return{accounts:[]}}const $n={encode(T,m=Le.Z.Writer.create()){for(const _ of T.accounts){Qn.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePortfolioSubscriptionResult();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accounts.push(Qn.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>Qn.fromJSON(T))):[]}},toJSON(T){const m={};if(T.accounts){m.accounts=T.accounts.map((T=>T?Qn.toJSON(T):undefined))}else{m.accounts=[]}return m}};function createBaseAccountSubscriptionStatus(){return{accountId:"",subscriptionStatus:0}}const Qn={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.subscriptionStatus!==0){m.uint32(48).int32(T.subscriptionStatus)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseAccountSubscriptionStatus();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 6:E.subscriptionStatus=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",subscriptionStatus:operations_isSet(T.subscriptionStatus)?portfolioSubscriptionStatusFromJSON(T.subscriptionStatus):0}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.subscriptionStatus!==undefined&&(m.subscriptionStatus=portfolioSubscriptionStatusToJSON(T.subscriptionStatus));return m}};function createBaseGetOperationsByCursorRequest(){return{accountId:"",instrumentId:"",from:undefined,to:undefined,cursor:"",limit:0,operationTypes:[],state:0,withoutCommissions:false,withoutTrades:false,withoutOvernights:false}}const er={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.instrumentId!==""){m.uint32(18).string(T.instrumentId)}if(T.from!==undefined){Ye.encode(operations_toTimestamp(T.from),m.uint32(50).fork()).ldelim()}if(T.to!==undefined){Ye.encode(operations_toTimestamp(T.to),m.uint32(58).fork()).ldelim()}if(T.cursor!==""){m.uint32(90).string(T.cursor)}if(T.limit!==0){m.uint32(96).int32(T.limit)}m.uint32(106).fork();for(const _ of T.operationTypes){m.int32(_)}m.ldelim();if(T.state!==0){m.uint32(112).int32(T.state)}if(T.withoutCommissions===true){m.uint32(120).bool(T.withoutCommissions)}if(T.withoutTrades===true){m.uint32(128).bool(T.withoutTrades)}if(T.withoutOvernights===true){m.uint32(136).bool(T.withoutOvernights)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOperationsByCursorRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.instrumentId=_.string();break;case 6:E.from=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 7:E.to=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 11:E.cursor=_.string();break;case 12:E.limit=_.int32();break;case 13:if((T&7)===2){const T=_.uint32()+_.pos;while(_.pos<T){E.operationTypes.push(_.int32())}}else{E.operationTypes.push(_.int32())}break;case 14:E.state=_.int32();break;case 15:E.withoutCommissions=_.bool();break;case 16:E.withoutTrades=_.bool();break;case 17:E.withoutOvernights=_.bool();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",instrumentId:operations_isSet(T.instrumentId)?String(T.instrumentId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined,cursor:operations_isSet(T.cursor)?String(T.cursor):"",limit:operations_isSet(T.limit)?Number(T.limit):0,operationTypes:Array.isArray(T?.operationTypes)?T.operationTypes.map((T=>operationTypeFromJSON(T))):[],state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,withoutCommissions:operations_isSet(T.withoutCommissions)?Boolean(T.withoutCommissions):false,withoutTrades:operations_isSet(T.withoutTrades)?Boolean(T.withoutTrades):false,withoutOvernights:operations_isSet(T.withoutOvernights)?Boolean(T.withoutOvernights):false}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.instrumentId!==undefined&&(m.instrumentId=T.instrumentId);T.from!==undefined&&(m.from=T.from.toISOString());T.to!==undefined&&(m.to=T.to.toISOString());T.cursor!==undefined&&(m.cursor=T.cursor);T.limit!==undefined&&(m.limit=Math.round(T.limit));if(T.operationTypes){m.operationTypes=T.operationTypes.map((T=>operationTypeToJSON(T)))}else{m.operationTypes=[]}T.state!==undefined&&(m.state=operationStateToJSON(T.state));T.withoutCommissions!==undefined&&(m.withoutCommissions=T.withoutCommissions);T.withoutTrades!==undefined&&(m.withoutTrades=T.withoutTrades);T.withoutOvernights!==undefined&&(m.withoutOvernights=T.withoutOvernights);return m}};function createBaseGetOperationsByCursorResponse(){return{hasNext:false,nextCursor:"",items:[]}}const tr={encode(T,m=Le.Z.Writer.create()){if(T.hasNext===true){m.uint32(8).bool(T.hasNext)}if(T.nextCursor!==""){m.uint32(18).string(T.nextCursor)}for(const _ of T.items){nr.encode(_,m.uint32(50).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseGetOperationsByCursorResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.hasNext=_.bool();break;case 2:E.nextCursor=_.string();break;case 6:E.items.push(nr.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{hasNext:operations_isSet(T.hasNext)?Boolean(T.hasNext):false,nextCursor:operations_isSet(T.nextCursor)?String(T.nextCursor):"",items:Array.isArray(T?.items)?T.items.map((T=>nr.fromJSON(T))):[]}},toJSON(T){const m={};T.hasNext!==undefined&&(m.hasNext=T.hasNext);T.nextCursor!==undefined&&(m.nextCursor=T.nextCursor);if(T.items){m.items=T.items.map((T=>T?nr.toJSON(T):undefined))}else{m.items=[]}return m}};function createBaseOperationItem(){return{cursor:"",brokerAccountId:"",id:"",parentOperationId:"",name:"",date:undefined,type:0,description:"",state:0,instrumentUid:"",figi:"",instrumentType:"",instrumentKind:0,payment:undefined,price:undefined,commission:undefined,yield:undefined,yieldRelative:undefined,accruedInt:undefined,quantity:0,quantityRest:0,quantityDone:0,cancelDateTime:undefined,cancelReason:"",tradesInfo:undefined,assetUid:""}}const nr={encode(T,m=Le.Z.Writer.create()){if(T.cursor!==""){m.uint32(10).string(T.cursor)}if(T.brokerAccountId!==""){m.uint32(50).string(T.brokerAccountId)}if(T.id!==""){m.uint32(130).string(T.id)}if(T.parentOperationId!==""){m.uint32(138).string(T.parentOperationId)}if(T.name!==""){m.uint32(146).string(T.name)}if(T.date!==undefined){Ye.encode(operations_toTimestamp(T.date),m.uint32(170).fork()).ldelim()}if(T.type!==0){m.uint32(176).int32(T.type)}if(T.description!==""){m.uint32(186).string(T.description)}if(T.state!==0){m.uint32(192).int32(T.state)}if(T.instrumentUid!==""){m.uint32(250).string(T.instrumentUid)}if(T.figi!==""){m.uint32(258).string(T.figi)}if(T.instrumentType!==""){m.uint32(266).string(T.instrumentType)}if(T.instrumentKind!==0){m.uint32(272).int32(T.instrumentKind)}if(T.payment!==undefined){Je.encode(T.payment,m.uint32(330).fork()).ldelim()}if(T.price!==undefined){Je.encode(T.price,m.uint32(338).fork()).ldelim()}if(T.commission!==undefined){Je.encode(T.commission,m.uint32(346).fork()).ldelim()}if(T.yield!==undefined){Je.encode(T.yield,m.uint32(354).fork()).ldelim()}if(T.yieldRelative!==undefined){Ge.encode(T.yieldRelative,m.uint32(362).fork()).ldelim()}if(T.accruedInt!==undefined){Je.encode(T.accruedInt,m.uint32(370).fork()).ldelim()}if(T.quantity!==0){m.uint32(408).int64(T.quantity)}if(T.quantityRest!==0){m.uint32(416).int64(T.quantityRest)}if(T.quantityDone!==0){m.uint32(424).int64(T.quantityDone)}if(T.cancelDateTime!==undefined){Ye.encode(operations_toTimestamp(T.cancelDateTime),m.uint32(450).fork()).ldelim()}if(T.cancelReason!==""){m.uint32(458).string(T.cancelReason)}if(T.tradesInfo!==undefined){rr.encode(T.tradesInfo,m.uint32(490).fork()).ldelim()}if(T.assetUid!==""){m.uint32(514).string(T.assetUid)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationItem();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.cursor=_.string();break;case 6:E.brokerAccountId=_.string();break;case 16:E.id=_.string();break;case 17:E.parentOperationId=_.string();break;case 18:E.name=_.string();break;case 21:E.date=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 22:E.type=_.int32();break;case 23:E.description=_.string();break;case 24:E.state=_.int32();break;case 31:E.instrumentUid=_.string();break;case 32:E.figi=_.string();break;case 33:E.instrumentType=_.string();break;case 34:E.instrumentKind=_.int32();break;case 41:E.payment=Je.decode(_,_.uint32());break;case 42:E.price=Je.decode(_,_.uint32());break;case 43:E.commission=Je.decode(_,_.uint32());break;case 44:E.yield=Je.decode(_,_.uint32());break;case 45:E.yieldRelative=Ge.decode(_,_.uint32());break;case 46:E.accruedInt=Je.decode(_,_.uint32());break;case 51:E.quantity=operations_longToNumber(_.int64());break;case 52:E.quantityRest=operations_longToNumber(_.int64());break;case 53:E.quantityDone=operations_longToNumber(_.int64());break;case 56:E.cancelDateTime=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 57:E.cancelReason=_.string();break;case 61:E.tradesInfo=rr.decode(_,_.uint32());break;case 64:E.assetUid=_.string();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{cursor:operations_isSet(T.cursor)?String(T.cursor):"",brokerAccountId:operations_isSet(T.brokerAccountId)?String(T.brokerAccountId):"",id:operations_isSet(T.id)?String(T.id):"",parentOperationId:operations_isSet(T.parentOperationId)?String(T.parentOperationId):"",name:operations_isSet(T.name)?String(T.name):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,type:operations_isSet(T.type)?operationTypeFromJSON(T.type):0,description:operations_isSet(T.description)?String(T.description):"",state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",instrumentKind:operations_isSet(T.instrumentKind)?instrumentTypeFromJSON(T.instrumentKind):0,payment:operations_isSet(T.payment)?Je.fromJSON(T.payment):undefined,price:operations_isSet(T.price)?Je.fromJSON(T.price):undefined,commission:operations_isSet(T.commission)?Je.fromJSON(T.commission):undefined,yield:operations_isSet(T.yield)?Je.fromJSON(T.yield):undefined,yieldRelative:operations_isSet(T.yieldRelative)?Ge.fromJSON(T.yieldRelative):undefined,accruedInt:operations_isSet(T.accruedInt)?Je.fromJSON(T.accruedInt):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,quantityRest:operations_isSet(T.quantityRest)?Number(T.quantityRest):0,quantityDone:operations_isSet(T.quantityDone)?Number(T.quantityDone):0,cancelDateTime:operations_isSet(T.cancelDateTime)?operations_fromJsonTimestamp(T.cancelDateTime):undefined,cancelReason:operations_isSet(T.cancelReason)?String(T.cancelReason):"",tradesInfo:operations_isSet(T.tradesInfo)?rr.fromJSON(T.tradesInfo):undefined,assetUid:operations_isSet(T.assetUid)?String(T.assetUid):""}},toJSON(T){const m={};T.cursor!==undefined&&(m.cursor=T.cursor);T.brokerAccountId!==undefined&&(m.brokerAccountId=T.brokerAccountId);T.id!==undefined&&(m.id=T.id);T.parentOperationId!==undefined&&(m.parentOperationId=T.parentOperationId);T.name!==undefined&&(m.name=T.name);T.date!==undefined&&(m.date=T.date.toISOString());T.type!==undefined&&(m.type=operationTypeToJSON(T.type));T.description!==undefined&&(m.description=T.description);T.state!==undefined&&(m.state=operationStateToJSON(T.state));T.instrumentUid!==undefined&&(m.instrumentUid=T.instrumentUid);T.figi!==undefined&&(m.figi=T.figi);T.instrumentType!==undefined&&(m.instrumentType=T.instrumentType);T.instrumentKind!==undefined&&(m.instrumentKind=instrumentTypeToJSON(T.instrumentKind));T.payment!==undefined&&(m.payment=T.payment?Je.toJSON(T.payment):undefined);T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);T.commission!==undefined&&(m.commission=T.commission?Je.toJSON(T.commission):undefined);T.yield!==undefined&&(m.yield=T.yield?Je.toJSON(T.yield):undefined);T.yieldRelative!==undefined&&(m.yieldRelative=T.yieldRelative?Ge.toJSON(T.yieldRelative):undefined);T.accruedInt!==undefined&&(m.accruedInt=T.accruedInt?Je.toJSON(T.accruedInt):undefined);T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.quantityRest!==undefined&&(m.quantityRest=Math.round(T.quantityRest));T.quantityDone!==undefined&&(m.quantityDone=Math.round(T.quantityDone));T.cancelDateTime!==undefined&&(m.cancelDateTime=T.cancelDateTime.toISOString());T.cancelReason!==undefined&&(m.cancelReason=T.cancelReason);T.tradesInfo!==undefined&&(m.tradesInfo=T.tradesInfo?rr.toJSON(T.tradesInfo):undefined);T.assetUid!==undefined&&(m.assetUid=T.assetUid);return m}};function createBaseOperationItemTrades(){return{trades:[]}}const rr={encode(T,m=Le.Z.Writer.create()){for(const _ of T.trades){ir.encode(_,m.uint32(50).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationItemTrades();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 6:E.trades.push(ir.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{trades:Array.isArray(T?.trades)?T.trades.map((T=>ir.fromJSON(T))):[]}},toJSON(T){const m={};if(T.trades){m.trades=T.trades.map((T=>T?ir.toJSON(T):undefined))}else{m.trades=[]}return m}};function createBaseOperationItemTrade(){return{num:"",date:undefined,quantity:0,price:undefined,yield:undefined,yieldRelative:undefined}}const ir={encode(T,m=Le.Z.Writer.create()){if(T.num!==""){m.uint32(10).string(T.num)}if(T.date!==undefined){Ye.encode(operations_toTimestamp(T.date),m.uint32(50).fork()).ldelim()}if(T.quantity!==0){m.uint32(88).int64(T.quantity)}if(T.price!==undefined){Je.encode(T.price,m.uint32(130).fork()).ldelim()}if(T.yield!==undefined){Je.encode(T.yield,m.uint32(170).fork()).ldelim()}if(T.yieldRelative!==undefined){Ge.encode(T.yieldRelative,m.uint32(178).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBaseOperationItemTrade();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.num=_.string();break;case 6:E.date=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;case 11:E.quantity=operations_longToNumber(_.int64());break;case 16:E.price=Je.decode(_,_.uint32());break;case 21:E.yield=Je.decode(_,_.uint32());break;case 22:E.yieldRelative=Ge.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{num:operations_isSet(T.num)?String(T.num):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,price:operations_isSet(T.price)?Je.fromJSON(T.price):undefined,yield:operations_isSet(T.yield)?Je.fromJSON(T.yield):undefined,yieldRelative:operations_isSet(T.yieldRelative)?Ge.fromJSON(T.yieldRelative):undefined}},toJSON(T){const m={};T.num!==undefined&&(m.num=T.num);T.date!==undefined&&(m.date=T.date.toISOString());T.quantity!==undefined&&(m.quantity=Math.round(T.quantity));T.price!==undefined&&(m.price=T.price?Je.toJSON(T.price):undefined);T.yield!==undefined&&(m.yield=T.yield?Je.toJSON(T.yield):undefined);T.yieldRelative!==undefined&&(m.yieldRelative=T.yieldRelative?Ge.toJSON(T.yieldRelative):undefined);return m}};function createBasePositionsStreamRequest(){return{accounts:[]}}const sr={encode(T,m=Le.Z.Writer.create()){for(const _ of T.accounts){m.uint32(10).string(_)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsStreamRequest();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accounts.push(_.string());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const m={};if(T.accounts){m.accounts=T.accounts.map((T=>T))}else{m.accounts=[]}return m}};function createBasePositionsStreamResponse(){return{subscriptions:undefined,position:undefined,ping:undefined}}const or={encode(T,m=Le.Z.Writer.create()){if(T.subscriptions!==undefined){ar.encode(T.subscriptions,m.uint32(10).fork()).ldelim()}if(T.position!==undefined){dr.encode(T.position,m.uint32(18).fork()).ldelim()}if(T.ping!==undefined){xe.encode(T.ping,m.uint32(26).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsStreamResponse();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.subscriptions=ar.decode(_,_.uint32());break;case 2:E.position=dr.decode(_,_.uint32());break;case 3:E.ping=xe.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{subscriptions:operations_isSet(T.subscriptions)?ar.fromJSON(T.subscriptions):undefined,position:operations_isSet(T.position)?dr.fromJSON(T.position):undefined,ping:operations_isSet(T.ping)?xe.fromJSON(T.ping):undefined}},toJSON(T){const m={};T.subscriptions!==undefined&&(m.subscriptions=T.subscriptions?ar.toJSON(T.subscriptions):undefined);T.position!==undefined&&(m.position=T.position?dr.toJSON(T.position):undefined);T.ping!==undefined&&(m.ping=T.ping?xe.toJSON(T.ping):undefined);return m}};function createBasePositionsSubscriptionResult(){return{accounts:[]}}const ar={encode(T,m=Le.Z.Writer.create()){for(const _ of T.accounts){ur.encode(_,m.uint32(10).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsSubscriptionResult();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accounts.push(ur.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>ur.fromJSON(T))):[]}},toJSON(T){const m={};if(T.accounts){m.accounts=T.accounts.map((T=>T?ur.toJSON(T):undefined))}else{m.accounts=[]}return m}};function createBasePositionsSubscriptionStatus(){return{accountId:"",subscriptionStatus:0}}const ur={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}if(T.subscriptionStatus!==0){m.uint32(48).int32(T.subscriptionStatus)}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsSubscriptionStatus();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 6:E.subscriptionStatus=_.int32();break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",subscriptionStatus:operations_isSet(T.subscriptionStatus)?positionsAccountSubscriptionStatusFromJSON(T.subscriptionStatus):0}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);T.subscriptionStatus!==undefined&&(m.subscriptionStatus=positionsAccountSubscriptionStatusToJSON(T.subscriptionStatus));return m}};function createBasePositionData(){return{accountId:"",money:[],securities:[],futures:[],options:[],date:undefined}}const dr={encode(T,m=Le.Z.Writer.create()){if(T.accountId!==""){m.uint32(10).string(T.accountId)}for(const _ of T.money){cr.encode(_,m.uint32(18).fork()).ldelim()}for(const _ of T.securities){wn.encode(_,m.uint32(26).fork()).ldelim()}for(const _ of T.futures){Bn.encode(_,m.uint32(34).fork()).ldelim()}for(const _ of T.options){Ln.encode(_,m.uint32(42).fork()).ldelim()}if(T.date!==undefined){Ye.encode(operations_toTimestamp(T.date),m.uint32(50).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionData();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.accountId=_.string();break;case 2:E.money.push(cr.decode(_,_.uint32()));break;case 3:E.securities.push(wn.decode(_,_.uint32()));break;case 4:E.futures.push(Bn.decode(_,_.uint32()));break;case 5:E.options.push(Ln.decode(_,_.uint32()));break;case 6:E.date=operations_fromTimestamp(Ye.decode(_,_.uint32()));break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",money:Array.isArray(T?.money)?T.money.map((T=>cr.fromJSON(T))):[],securities:Array.isArray(T?.securities)?T.securities.map((T=>wn.fromJSON(T))):[],futures:Array.isArray(T?.futures)?T.futures.map((T=>Bn.fromJSON(T))):[],options:Array.isArray(T?.options)?T.options.map((T=>Ln.fromJSON(T))):[],date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined}},toJSON(T){const m={};T.accountId!==undefined&&(m.accountId=T.accountId);if(T.money){m.money=T.money.map((T=>T?cr.toJSON(T):undefined))}else{m.money=[]}if(T.securities){m.securities=T.securities.map((T=>T?wn.toJSON(T):undefined))}else{m.securities=[]}if(T.futures){m.futures=T.futures.map((T=>T?Bn.toJSON(T):undefined))}else{m.futures=[]}if(T.options){m.options=T.options.map((T=>T?Ln.toJSON(T):undefined))}else{m.options=[]}T.date!==undefined&&(m.date=T.date.toISOString());return m}};function createBasePositionsMoney(){return{availableValue:undefined,blockedValue:undefined}}const cr={encode(T,m=Le.Z.Writer.create()){if(T.availableValue!==undefined){Je.encode(T.availableValue,m.uint32(10).fork()).ldelim()}if(T.blockedValue!==undefined){Je.encode(T.blockedValue,m.uint32(18).fork()).ldelim()}return m},decode(T,m){const _=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=m===undefined?_.len:_.pos+m;const E=createBasePositionsMoney();while(_.pos<S){const T=_.uint32();switch(T>>>3){case 1:E.availableValue=Je.decode(_,_.uint32());break;case 2:E.blockedValue=Je.decode(_,_.uint32());break;default:_.skipType(T&7);break}}return E},fromJSON(T){return{availableValue:operations_isSet(T.availableValue)?Je.fromJSON(T.availableValue):undefined,blockedValue:operations_isSet(T.blockedValue)?Je.fromJSON(T.blockedValue):undefined}},toJSON(T){const m={};T.availableValue!==undefined&&(m.availableValue=T.availableValue?Je.toJSON(T.availableValue):undefined);T.blockedValue!==undefined&&(m.blockedValue=T.blockedValue?Je.toJSON(T.blockedValue):undefined);return m}};const fr={name:"OperationsService",fullName:"tinkoff.public.invest.api.contract.v1.OperationsService",methods:{getOperations:{name:"GetOperations",requestType:Rn,requestStream:false,responseType:Nn,responseStream:false,options:{}},getPortfolio:{name:"GetPortfolio",requestType:bn,requestStream:false,responseType:gn,responseStream:false,options:{}},getPositions:{name:"GetPositions",requestType:Pn,requestStream:false,responseType:yn,responseStream:false,options:{}},getWithdrawLimits:{name:"GetWithdrawLimits",requestType:Cn,requestStream:false,responseType:kn,responseStream:false,options:{}},getBrokerReport:{name:"GetBrokerReport",requestType:vn,requestStream:false,responseType:Yn,responseStream:false,options:{}},getDividendsForeignIssuer:{name:"GetDividendsForeignIssuer",requestType:qn,requestStream:false,responseType:Vn,responseStream:false,options:{}},getOperationsByCursor:{name:"GetOperationsByCursor",requestType:er,requestStream:false,responseType:tr,responseStream:false,options:{}}}};const lr={name:"OperationsStreamService",fullName:"tinkoff.public.invest.api.contract.v1.OperationsStreamService",methods:{portfolioStream:{name:"PortfolioStream",requestType:zn,requestStream:false,responseType:jn,responseStream:true,options:{}},positionsStream:{name:"PositionsStream",requestType:sr,requestStream:false,responseType:or,responseStream:true,options:{}}}};function operations_toTimestamp(T){const m=T.getTime()/1e3;const _=T.getTime()%1e3*1e6;return{seconds:m,nanos:_}}function operations_fromTimestamp(T){let m=T.seconds*1e3;m+=T.nanos/1e6;return new Date(m)}function operations_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return operations_fromTimestamp(Ye.fromJSON(T))}}function operations_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function operations_isSet(T){return T!==null&&T!==undefined}const __decorate=function(T,m,_,S){let E=arguments.length,I=E<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,_):S,O;for(let S=T.length-1;S>=0;S--)if(O=T[S])I=(E<3?O(I):E>3?O(m,_,I):O(m,_))||I;return E>3&&I&&Object.defineProperty(m,_,I),I};function toQuotation(T){const m=T<0?-1:1;const _=Math.abs(T);const S=Math.floor(_);const E=Math.round((_-S)*1e9);return{units:m*S,nano:m*E}}function toNumber(T){return T?+T.units+ +T.nano/1e9:T}const Tr={BBG0013J7V24:"AMD",BBG0013HG026:"KZT",BBG0013J7Y00:"KGS",BBG0013HQ310:"UZS",BBG0013HGFT4:"USD",BBG0013HRTL0:"CNY",BBG0013J11P1:"TJS",BBG00D87WQY7:"BYN",BBG0013HSW87:"HKD",BBG000VJ5YR4:"XAU",BBG0013J12N1:"TRY",BBG000VHQTD1:"XAG",RUB000UTSTOM:"RUB"};class TinkoffTraderDatum extends TraderDatum{filter(T,m,_,S){if(m.exchange===R.SPBX){return[R.SPBX,R.US,R.UTEX_MARGIN_STOCKS].includes(_?.instrument?.exchange)}return _?.instrument?.exchange===m.exchange}}class OrderbookDatum extends TinkoffTraderDatum{async firstReferenceAdded(T){const m=this.trader.adoptInstrument(T.instrument);if(!m.notSupported&&m.tinkoffFigi){this.dataArrived(await this.trader.getOrCreateClient(Jt).getOrderBook({instrumentId:m.tinkoffFigi,depth:50}),m)}return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[w.ORDERBOOK](T,m){let _=+toNumber(T.limitDown).toFixed(getInstrumentPrecision(m));let S=+toNumber(T.limitUp).toFixed(getInstrumentPrecision(m));if(m.type==="bond"){_=this.trader.relativeBondPriceToPrice(_,m);S=this.trader.relativeBondPriceToPrice(S,m)}return{bids:(T?.bids?.map?.((T=>{if(T.pool){return T}const _=+toNumber(T.price).toFixed(getInstrumentPrecision(m));return{price:m.type==="bond"?this.trader.relativeBondPriceToPrice(_,m):_,volume:T.quantity,pool:m.exchange}}))??[]).concat([{price:_,pool:"LD",volume:0}]).sort(((T,m)=>m.price-T.price)),asks:(T?.asks?.map?.((T=>{if(T.pool){return T}const _=+toNumber(T.price).toFixed(getInstrumentPrecision(m));return{price:m.type==="bond"?this.trader.relativeBondPriceToPrice(_,m):_,volume:T.quantity,pool:m.exchange}}))??[]).concat({price:S,pool:"LU",volume:0}).sort(((T,m)=>T.price-m.price))}}}class TimeAndSalesDatum extends TinkoffTraderDatum{async firstReferenceAdded(){return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[w.MARKET_PRINT](T,m){const _=T.time.valueOf();const S=m.type==="bond"?this.trader.relativeBondPriceToPrice(toNumber(T.price),m):+toNumber(T.price).toFixed(getInstrumentPrecision(m));return{tradeId:`${m.symbol}|${T.direction}|${S}|${T.quantity}|${_}`,side:T.direction===We.TRADE_DIRECTION_BUY?"buy":T.direction===We.TRADE_DIRECTION_SELL?"sell":"",time:T.time.toISOString(),timestamp:_,symbol:m.symbol,price:S,volume:T.quantity,pool:m.exchange}}}class CandleDatum extends TinkoffTraderDatum{async firstReferenceAdded(){return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[w.CANDLE](T,m){if(m.type==="bond"){return{open:this.trader.relativeBondPriceToPrice(toNumber(T.open),m),high:this.trader.relativeBondPriceToPrice(toNumber(T.high),m),low:this.trader.relativeBondPriceToPrice(toNumber(T.low),m),close:this.trader.relativeBondPriceToPrice(toNumber(T.close),m),time:T.time.toISOString(),volume:T.volume}}else{return{open:+toNumber(T.open).toFixed(getInstrumentPrecision(m)),high:+toNumber(T.high).toFixed(getInstrumentPrecision(m)),low:+toNumber(T.low).toFixed(getInstrumentPrecision(m)),close:+toNumber(T.close).toFixed(getInstrumentPrecision(m)),time:T.time.toISOString(),volume:T.volume}}}}class PositionsDatum extends GlobalTraderDatum{portfolio;positions={money:new Map,blockedMoney:new Map,securities:new Map,futures:new Map,options:new Map};onPortfolio(T){if(T){this.portfolio=T;this.portfolio.positionsMap=new Map;this.portfolio.positions.forEach((T=>this.portfolio.positionsMap.set(T.figi,T)));this.broadcastPortfolio()}}onPositions(T){if(T){const{money:m,blocked:_,securities:S,futures:E,options:I}=T;for(const T of m){this.positions.money.set(T.currency.toUpperCase(),toNumber(T))}for(const T of _){this.positions.blockedMoney.set(T.currency.toUpperCase(),toNumber(T))}for(const T of S){if(T.instrumentType==="share"||T.instrumentType==="bond"||T.instrumentType==="etf"){this.positions.securities.set(T.figi,T)}}for(const T of E){this.positions.futures.set(T.figi,T)}}this.broadcastPortfolio()}broadcastPortfolio(){if(typeof this.portfolio==="undefined"){return}for(const[T,m]of this.positions.money){this.dataArrived({symbol:T,isCurrency:true,isBalance:true,lot:1,size:m,accountId:this.trader.document.account})}for(const[T,m]of this.positions.securities){const _=this.trader.figis.get(T);const S=this.portfolio.positionsMap.get(T);if(_){if(m.instrumentType==="share"||m.instrumentType==="bond"||m.instrumentType==="etf"){this.dataArrived({figi:T,instrument:_,lot:_.lot,symbol:_.symbol,exchange:_.exchange,isCurrency:false,isBalance:false,averagePrice:S?+toNumber(S.averagePositionPrice).toFixed(getInstrumentPrecision(_)):void 0,size:(m.balance+m.blocked)/_.lot,accountId:this.trader.document.account})}}}for(const[T,m]of this.positions.futures){const _=this.trader.figis.get(T);const S=this.portfolio.positionsMap.get(T);if(_){this.dataArrived({figi:T,instrument:_,lot:_.lot,symbol:_.symbol,exchange:_.exchange,isCurrency:false,isBalance:false,averagePrice:S?+toNumber(S.averagePositionPrice).toFixed(getInstrumentPrecision(_)):void 0,size:(m.balance+m.blocked)/_.lot,accountId:this.trader.document.account})}}}valueKeyForData(T){return T?.figi??T?.symbol}filter(T,m,_,S){if(S!==w.POSITION){if(T.isBalance){return T.symbol===m.getAttribute("balance")}return T.figi===m.instrument?.tinkoffFigi}else{return true}}async firstReferenceAdded(){this.portfolio=await this.trader.getOrCreateClient(fr).getPortfolio({accountId:this.trader.document.account});this.onPositions(await this.trader.getOrCreateClient(fr).getPositions({accountId:this.trader.document.account}));this.onPortfolio(this.portfolio);await this.trader.resubscribeToPortfolioStream();return this.trader.resubscribeToPositionsStream()}async lastReferenceRemoved(){await this.trader.resubscribeToPortfolioStream();return this.trader.resubscribeToPositionsStream()}[w.POSITION](T){return T}#m(T){switch(T.instrument.type){case"stock":case"etf":case"bond":return this.positions.securities.get(T.figi);case"future":return this.positions.futures.get(T.figi)}}[w.POSITION_SIZE](T){if(T.isBalance){return T.size}else if(T.instrument){const m=this.#m(T);if(!m||+(m?.balance+m?.blocked)===0){return 0}else{return(m.balance+m.blocked)/T.instrument.lot}}}[w.POSITION_AVERAGE](T){if(!T.isBalance){if(T.instrument){const m=this.#m(T);if(!m||+(m?.balance+m?.blocked)===0){return 0}else{const m=this.portfolio.positionsMap?.get(T.figi);if(m){return+toNumber(m.averagePositionPrice).toFixed(getInstrumentPrecision(T.instrument))}else{return 0}}}}}}class TimelineDatum extends GlobalTraderDatum{manualAssignment=true;#_=[];#S;#E=false;async#I(){if(this.#E){try{if(!this.#_.length){this.#_=(await this.trader.historicalTimeline({cursor:""})).items;for(const T of this.#_){this.dataArrived(T)}}else{const T=await this.trader.historicalTimeline({cursor:"",limit:10});const m=[];for(const _ of T.items){if(_.id&&_.id!==this.#_[0]?.id){m.push(_)}else{break}}this.#_.unshift(...m);for(const T of m){this.dataArrived(T)}}this.#S=setTimeout((()=>{this.#I()}),750)}catch(T){console.error(T);this.#S=setTimeout((()=>{this.#I()}),750)}}}firstReferenceAdded(){this.#_=[];clearTimeout(this.#S);this.#E=true;return this.#I()}lastReferenceRemoved(){this.#_=[];clearTimeout(this.#S);this.#E=false}valueKeyForData(T){return T.id}[w.TIMELINE_ITEM](T,m,_,S){const E=this.trader.figis.get(T.figi);if(E&&Array.isArray(T.tradesInfo?.trades)){for(const _ of T.tradesInfo.trades){this.trader.assignSourceField(m,S,{instrument:E,operationId:_.num,accruedInterest:toNumber(T.accruedInt),commission:toNumber(T.commission),parentId:T.id,symbol:E.symbol,cursor:T.cursor,type:T.type,exchange:E.exchange,quantity:_.quantity/E.lot,price:+toNumber(_.price).toFixed(getInstrumentPrecision(E)),createdAt:_.date.toISOString(),parentCreatedAt:T.date.toISOString()})}}}}class ActiveOrderDatum extends GlobalTraderDatum{#S;#E=false;orders=new Map;async#O(){if(this.#E){try{const T=this.trader.getOrCreateClient(Tn);const{orders:m}=await this.trader.getOrders(T);const _=new Set;for(const T of m){_.add(`${T.orderId}|${toNumber(T.initialSecurityPrice)}|${T.lotsExecuted}|${T.lotsRequested}`);if(!this.orders.has(T.orderId)){this.orders.set(T.orderId,T);this.dataArrived(T)}}for(const[T,m]of this.orders){if(!_.has(`${T}|${toNumber(m.initialSecurityPrice)}|${m.lotsExecuted}|${m.lotsRequested}`)){m.executionReportStatus=Zt.EXECUTION_REPORT_STATUS_UNSPECIFIED;this.dataArrived(m);this.orders.delete(T)}}this.#S=setTimeout((()=>{this.#O()}),750)}catch(T){console.error(T);this.#S=setTimeout((()=>{this.#O()}),750)}}}firstReferenceAdded(){this.orders.clear();clearTimeout(this.#S);this.#E=true;return this.#O()}lastReferenceRemoved(){this.orders.clear();clearTimeout(this.#S);this.#E=false}valueKeyForData(T){return T.orderId}[w.ACTIVE_ORDER](T){const m=this.trader.figis.get(T.figi);if(m){return{instrument:m,orderId:T.orderId,symbol:T.figi,exchange:m.exchange,orderType:T.orderType===Vt.ORDER_TYPE_LIMIT?"limit":"market",side:T.direction===qt.ORDER_DIRECTION_BUY?"buy":"sell",status:this.trader.getOrderStatus(T),placedAt:T.orderDate.toISOString(),endsAt:null,quantity:T.lotsRequested,filled:T.lotsExecuted,price:m.type==="bond"?this.trader.relativeBondPriceToPrice(toNumber(T.initialSecurityPrice),m):+toNumber(T.initialSecurityPrice).toFixed(getInstrumentPrecision(m))}}}}class TinkoffGrpcWebTrader extends Trader{#R=new Map;#N;#h;#A;#b;#g=new Map;get figis(){return this.#g}#P=new Map;constructor(T){super(T,[{type:OrderbookDatum,datums:[w.ORDERBOOK]},{type:TimeAndSalesDatum,datums:[w.MARKET_PRINT]},{type:CandleDatum,datums:[w.CANDLE]},{type:PositionsDatum,datums:[w.POSITION,w.POSITION_SIZE,w.POSITION_AVERAGE]},{type:ActiveOrderDatum,datums:[w.ACTIVE_ORDER]},{type:TimelineDatum,datums:[w.TIMELINE_ITEM]},{type:TraderEventDatum,datums:[w.TRADER]},{type:ConditionalOrderDatum,datums:[w.CONDITIONAL_ORDER]}]);this.#N=new G({Authorization:`Bearer ${this.document.broker.apiToken}`,"x-app-name":"johnpantini.ppp"})}getTimeframeList(){return[k["1m"],k["2m"],k["3m"],k["5m"],k["10m"],k["15m"],k["30m"],k["1h"],k["2h"],k["4h"],k["1D"],k["1W"],k["1M"]]}async oneTimeInitializationCallback(){const{payload:T}=await(await fetch("https://api.tinkoff.ru/trading/futures/list")).json();for(const m of T.values){this.#P.set(m.instrumentInfo.ticker.toUpperCase(),m.orderInfo?.minPriceIncrementAmount?.value??1)}}async instrumentsArrived(T){for(const[,m]of T){if(m.tinkoffFigi){this.#g.set(m.tinkoffFigi,m)}}return super.instrumentsArrived(T)}getOrCreateClient(T){if(!this.#R.has(T)){this.#R.set(T,createClient(T,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}}))}return this.#R.get(T)}resubscribeToMarketDataStream(){return this.#y()}resubscribeToPortfolioStream(){return this.#C()}resubscribeToPositionsStream(){return this.#k()}async#y(){if(!this.datums[w.ORDERBOOK].refs.size&&!this.datums[w.MARKET_PRINT].refs.size&&!this.datums[w.CANDLE].refs.size){return}const T={};const m=[];const _=[];const S=[];for(const[T,_]of this.datums[w.ORDERBOOK].refs){if(_>0){m.push(T)}}for(const[T,m]of this.datums[w.MARKET_PRINT].refs){if(m>0){_.push(T)}}for(const[T,m]of this.datums[w.CANDLE].refs){if(m>0){S.push(T)}}if(m.length){T.subscribeOrderBookRequest={subscriptionAction:Ve.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[]};m.forEach((m=>{const _=this.instruments.get(m);if(_){T.subscribeOrderBookRequest.instruments.push({instrumentId:_.tinkoffFigi,depth:50})}}))}if(_.length){T.subscribeTradesRequest={subscriptionAction:Ve.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[]};_.forEach((m=>{const _=this.instruments.get(m);if(_){T.subscribeTradesRequest.instruments.push({instrumentId:_.tinkoffFigi})}}))}if(S.length){T.subscribeCandlesRequest={subscriptionAction:Ve.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[],waitingClose:false};S.forEach((m=>{const _=this.instruments.get(m);if(_){T.subscribeCandlesRequest.instruments.push({instrumentId:_.tinkoffFigi,interval:Ze.SUBSCRIPTION_INTERVAL_ONE_MINUTE})}}))}const E=createClient(Gt,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});this.#h?.abort?.();this.#h=new AbortController;const I=E.marketDataServerSideStream(T,{signal:this.#h?.signal});try{for await(const T of I){if(T.orderbook){this.datums[w.ORDERBOOK].dataArrived(T.orderbook,this.#g.get(T.orderbook.figi))}else if(T.trade){this.datums[w.MARKET_PRINT].dataArrived(T.trade,this.#g.get(T.trade.figi))}else if(T.candle){this.datums[w.CANDLE].dataArrived(T.candle,this.#g.get(T.candle.figi))}}await this.resubscribe([w.ORDERBOOK]);this.resubscribeToMarketDataStream();this.traderEvent({event:"reconnect"})}catch(T){if(!isAbortError(T)){console.error(T);setTimeout((async()=>{await this.resubscribe([w.ORDERBOOK]);this.resubscribeToMarketDataStream();this.traderEvent({event:"reconnect"})}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async#C(){if(this.datums[w.POSITION].refCount<1){return}const T=createClient(lr,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});this.#A?.abort?.();this.#A=new AbortController;const m=T.portfolioStream({accounts:[this.document.account]},{signal:this.#A?.signal});try{for await(const T of m){if(T.portfolio){this.datums[w.POSITION].onPortfolio(T.portfolio)}}this.resubscribeToPortfolioStream()}catch(T){if(!isAbortError(T)){console.error(T);setTimeout((()=>{this.resubscribeToPortfolioStream()}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async#k(){if(this.datums[w.POSITION].refCount<1){return}const T=createClient(lr,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});this.#b?.abort?.();this.#b=new AbortController;const m=T.positionsStream({accounts:[this.document.account]},{signal:this.#b?.signal});try{for await(const T of m){if(T.position){const m=[];const _=[];(T.position.money??[]).forEach((T=>{m.push(T.availableValue);_.push(T.blockedValue)}));this.datums[w.POSITION].onPositions({money:m,blocked:_,securities:T.position.securities,futures:T.position.futures,options:T.position.options})}}this.resubscribeToPositionsStream()}catch(T){if(!isAbortError(T)){console.error(T);setTimeout((()=>{this.resubscribeToPositionsStream()}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async historicalTimeline({cursor:T,from:m,to:_,limit:S=100}){return this.getOrCreateClient(fr).getOperationsByCursor({accountId:this.document.account,instrumentId:"",from:m,to:_,cursor:T,limit:S,operationTypes:[_n.OPERATION_TYPE_BUY,_n.OPERATION_TYPE_SELL,_n.OPERATION_TYPE_BUY_CARD,_n.OPERATION_TYPE_BUY_MARGIN,_n.OPERATION_TYPE_SELL_MARGIN],state:mn.OPERATION_STATE_EXECUTED,withoutCommissions:true})}async historicalTimeAndSales({instrument:T,depth:m}){if(T){const _=new Date;const S=new Date;_.setUTCHours(_.getUTCHours()+1);S.setUTCHours(S.getUTCHours()-1);const{trades:E}=await this.getOrCreateClient(Jt).getLastTrades({instrumentId:T.tinkoffFigi,from:S,to:_});return E.slice(-m).reverse().map((m=>{const _=m.time.valueOf();const S=T.type==="bond"?this.relativeBondPriceToPrice(toNumber(m.price),T):+toNumber(m.price).toFixed(getInstrumentPrecision(T));return{tradeId:`${T.symbol}|${m.direction}|${S}|${m.quantity}|${_}`,side:m.direction===We.TRADE_DIRECTION_BUY?"buy":m.direction===We.TRADE_DIRECTION_SELL?"sell":"",timestamp:_,symbol:T.symbol,price:S,volume:m.quantity,pool:T.exchange}}))}return[]}async historicalCandles({instrument:T,tf:m,from:_,to:S}){if(typeof S==="undefined"){S=new Date}if(typeof _==="undefined"){_=new Date;_.setUTCHours(_.getUTCHours()-24)}if(T?.tinkoffFigi){const{candles:E}=await this.getOrCreateClient(Jt).getCandles({instrumentId:T.tinkoffFigi,interval:m,from:_,to:S});return{prev:_,next:S,candles:E.map((m=>{if(T.type==="bond"){return{open:this.relativeBondPriceToPrice(toNumber(m.open),T),high:this.relativeBondPriceToPrice(toNumber(m.high),T),low:this.relativeBondPriceToPrice(toNumber(m.low),T),close:this.relativeBondPriceToPrice(toNumber(m.close),T),time:m.time.toISOString(),volume:m.volume}}return{open:+toNumber(m.open).toFixed(getInstrumentPrecision(T)),high:+toNumber(m.high).toFixed(getInstrumentPrecision(T)),low:+toNumber(m.low).toFixed(getInstrumentPrecision(T)),close:+toNumber(m.close).toFixed(getInstrumentPrecision(T)),time:m.time.toISOString(),volume:m.volume}}))}}return{candles:[]}}async getOrders(T){const m=[];for(const _ of(await T.getOrders({accountId:this.document.account})).orders){const T=this.#g.get(_.figi);if(T?.type==="future"){const S=this.#P.get(T.symbol);const{initialSecurityPrice:E}=_;const I=toNumber(E);let O=I*T.minPriceIncrement/S;const R=getInstrumentPrecision(T,O);O=parseFloat(O.toFixed(R));const N=toQuotation(O);_.initialSecurityPrice.units=N.units;_.initialSecurityPrice.nano=N.nano;m.push(_)}else{m.push(_)}}return{orders:m}}#U(){return uuidv4()}async placeLimitOrder({instrument:T,price:m,quantity:_,direction:S}){try{const E=this.#U();const I=await this.getOrCreateClient(Tn).postOrder({instrumentId:T.tinkoffFigi,quantity:_,price:toQuotation(this.fixPrice(T,m)),direction:S.toLowerCase()==="buy"?qt.ORDER_DIRECTION_BUY:qt.ORDER_DIRECTION_SELL,accountId:this.document.account,orderType:Vt.ORDER_TYPE_LIMIT,orderId:E});return{orderId:I.orderId}}catch(T){console.dir(T);throw new TradingError({message:T.message,details:T.details})}}async placeMarketOrder({instrument:T,quantity:m,direction:_}){try{const S=await this.getOrCreateClient(Tn).postOrder({instrumentId:T.tinkoffFigi,quantity:m,direction:_.toLowerCase()==="buy"?qt.ORDER_DIRECTION_BUY:qt.ORDER_DIRECTION_SELL,accountId:this.document.account,orderType:Vt.ORDER_TYPE_MARKET,orderId:this.#U()});return{orderId:S.orderId}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async cancelRealOrder(T){try{if(T.orderType==="limit"){const m=createClient(Tn,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});await m.cancelOrder({accountId:this.document.account,orderId:T.orderId});return{orderId:T.orderId}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async cancelAllRealOrders({instrument:T,filter:m}={}){try{const _=createClient(Tn,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});const{orders:S}=await this.getOrders(_);for(const E of S){const S=this.getOrderStatus(E);if(S==="working"){if(T&&E.figi!==T.tinkoffFigi)continue;if(m==="buy"&&E.direction!==qt.ORDER_DIRECTION_BUY){continue}if(m==="sell"&&E.direction!==qt.ORDER_DIRECTION_SELL){continue}await _.cancelOrder({accountId:this.document.account,orderId:E.orderId})}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async modifyRealOrders({instrument:T,side:m,value:_}){try{const S=createClient(Tn,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#N}});const{orders:E}=await this.getOrders(S);for(const I of E){const E=this.getOrderStatus(I);const O=I.direction===qt.ORDER_DIRECTION_BUY?"buy":"sell";if(E==="working"&&(O===m||m==="all")){if(T&&I.figi!==T.tinkoffFigi)continue;const m=this.#g.get(I.figi);if(m?.minPriceIncrement>0){let T;if(m.type==="bond"){T=this.fixPrice(m,this.relativeBondPriceToPrice(toNumber(I.initialSecurityPrice)+m.minPriceIncrement*_,m))}else{T=this.fixPrice(m,+toNumber(I.initialSecurityPrice).toFixed(getInstrumentPrecision(m))+m.minPriceIncrement*_)}if(I.executionReportStatus===Zt.EXECUTION_REPORT_STATUS_NEW){await S.replaceOrder({accountId:this.document.account,orderId:I.orderId,idempotencyKey:this.#U(),quantity:I.lotsRequested-I.lotsExecuted,price:toQuotation(T),priceType:Xt.PRICE_TYPE_CURRENCY})}else if(I.executionReportStatus===Zt.EXECUTION_REPORT_STATUS_PARTIALLYFILL){const _=I.lotsRequested-I.lotsExecuted;await this.cancelRealOrder({orderId:I.orderId,orderType:"limit"});await this.placeLimitOrder({instrument:m,price:T,quantity:_,direction:O})}}}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async estimate(T,m){if(this.unsupportedInstrument)return{};const _=await this.getOrCreateClient(Tn).getMaxLots({accountId:this.document.account,instrumentId:T.tinkoffFigi,price:toQuotation(m)});return{marginSellingPowerQuantity:_.sellMarginLimits.sellMaxLots,marginBuyingPowerQuantity:_.buyMarginLimits.buyMaxLots,sellingPowerQuantity:_.sellLimits.sellMaxLots,buyingPowerQuantity:_.buyLimits.buyMaxLots}}getOrderStatus(T={}){switch(T.executionReportStatus){case Zt.EXECUTION_REPORT_STATUS_CANCELLED:return"canceled";case Zt.EXECUTION_REPORT_STATUS_REJECTED:return"rejected";case Zt.EXECUTION_REPORT_STATUS_FILL:return"filled";case Zt.EXECUTION_REPORT_STATUS_PARTIALLYFILL:case Zt.EXECUTION_REPORT_STATUS_NEW:return"working";case Zt.EXECUTION_REPORT_STATUS_UNSPECIFIED:return"unspecified"}}getBroker(){return A.TINKOFF}getDictionary(){return C.TINKOFF}getExchange(){return R.RUS}getObservedAttributes(){return["balance"]}getSymbol(T={}){if(T.symbol==="ASTR~MOEX"||T.symbol==="GOLD~MOEX"){return T.symbol}return super.getSymbol(T)}adoptInstrument(T={}){if(T.symbol==="SPB"&&(T.currency==="USD"||T.currency==="USDT")){return this.instruments.get("SPB@US")}if(T?.exchange===R.MOEX&&this.getSymbol(T)==="ASTR"){return this.instruments.get(`ASTR~MOEX`)}if(T?.exchange===R.MOEX&&this.getSymbol(T)==="GOLD"){return this.instruments.get(`GOLD~MOEX`)}let m=true;["TCS","FIVE","CARM"].forEach((_=>{if(this.getSymbol(T)===_&&(T.exchange===R.US||T.exchange===R.UTEX_MARGIN_STOCKS)){m=false}}));if(!m){return unsupportedInstrument(T.symbol)}if(T.symbol?.endsWith("~US")){return super.adoptInstrument({...T,...{symbol:T.symbol.replace("~US","")}})}return super.adoptInstrument(T)}getErrorI18nKey({error:T}){const m=+T.details;switch(m){case 30042:return"E_INSUFFICIENT_FUNDS";case 30052:return"E_NO_API_AVAILABLE_FOR_INSTRUMENT";case 30068:return"E_LIMIT_ORDERS_ONLY";case 30079:return"E_INSTRUMENT_NOT_TRADEABLE";case 30081:return"E_ACCOUNT_CLOSED";case 30082:return"E_ACCOUNT_BLOCKED";case 30083:return"E_WRONG_ORDER_TYPE";case 30097:return"E_INACTIVE_TRADING_SESSION";case 30099:return"E_PRICE_OUT_OF_LIMITS";case 30100:return"E_PRICE_MUST_BE_POSITIVE";case 40002:return"E_INSUFFICIENT_PRIVILEGES";case 40003:return"E_NO_ACCESS_TOKEN";case 80002:return"E_RATE_LIMIT_EXCEEDED";case 90001:return"E_CONFIRMATION_NEEDED";case 90002:return"E_NO_QUALIFICATION"}}}pppTraderInstanceForWorkerIs(TinkoffGrpcWebTrader);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToPositionsStream",null);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToPortfolioStream",null);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToMarketDataStream",null);__decorate([debounce(100)],PositionsDatum.prototype,"broadcastPortfolio",null);const pr=TinkoffGrpcWebTrader})();module.exports=__webpack_exports__})();