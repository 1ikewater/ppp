(()=>{var __webpack_modules__={723:T=>{function webpackEmptyAsyncContext(T){return Promise.resolve().then((()=>{var _=new Error("Cannot find module '"+T+"'");_.code="MODULE_NOT_FOUND";throw _}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=723;T.exports=webpackEmptyAsyncContext},930:T=>{function webpackEmptyAsyncContext(T){return Promise.resolve().then((()=>{var _=new Error("Cannot find module '"+T+"'");_.code="MODULE_NOT_FOUND";throw _}))}webpackEmptyAsyncContext.keys=()=>[];webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=930;T.exports=webpackEmptyAsyncContext},221:(module,__webpack_exports__,__nccwpck_require__)=>{"use strict";__nccwpck_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});module=__nccwpck_require__.hmd(module);let protobuf;(function(undefined){"use strict";(function t(T,_,m){function n(m){var S=_[m];if(!S)T[m][0].call(S=_[m]={exports:{}},n,S,S.exports);return S.exports}protobuf=n(m[0]);protobuf.util.global.protobuf=protobuf;if(typeof define==="function"&&define.amd)define(["long"],(function(T){if(T&&T.isLong){protobuf.util.Long=T;protobuf.configure()}return protobuf}));if(true&&module&&module.exports)module.exports=protobuf})({1:[function(T,_,m){"use strict";_.exports=i;function i(T,_){var m=new Array(arguments.length-1),S=0,E=2,I=true;while(E<arguments.length)m[S++]=arguments[E++];return new Promise((function n(E,O){m[S]=function t(T){if(I){I=false;if(T)O(T);else{var _=new Array(arguments.length-1),m=0;while(m<_.length)_[m++]=arguments[m];E.apply(null,_)}}};try{T.apply(_||null,m)}catch(T){if(I){I=false;O(T)}}}))}},{}],2:[function(T,_,m){"use strict";var S=m;S.length=function t(T){var _=T.length;if(!_)return 0;var m=0;while(--_%4>1&&T.charAt(_)==="=")++m;return Math.ceil(T.length*3)/4-m};var E=new Array(64);var I=new Array(123);for(var O=0;O<64;)I[E[O]=O<26?O+65:O<52?O+71:O<62?O-4:O-59|43]=O++;S.encode=function t(T,_,m){var S=null,I=[];var O=0,N=0,R;while(_<m){var A=T[_++];switch(N){case 0:I[O++]=E[A>>2];R=(A&3)<<4;N=1;break;case 1:I[O++]=E[R|A>>4];R=(A&15)<<2;N=2;break;case 2:I[O++]=E[R|A>>6];I[O++]=E[A&63];N=0;break}if(O>8191){(S||(S=[])).push(String.fromCharCode.apply(String,I));O=0}}if(N){I[O++]=E[R];I[O++]=61;if(N===1)I[O++]=61}if(S){if(O)S.push(String.fromCharCode.apply(String,I.slice(0,O)));return S.join("")}return String.fromCharCode.apply(String,I.slice(0,O))};var N="invalid encoding";S.decode=function t(T,_,m){var S=m;var E=0,O;for(var R=0;R<T.length;){var A=T.charCodeAt(R++);if(A===61&&E>1)break;if((A=I[A])===undefined)throw Error(N);switch(E){case 0:O=A;E=1;break;case 1:_[m++]=O<<2|(A&48)>>4;O=A;E=2;break;case 2:_[m++]=(O&15)<<4|(A&60)>>2;O=A;E=3;break;case 3:_[m++]=(O&3)<<6|A;E=0;break}}if(E===1)throw Error(N);return m-S};S.test=function t(T){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(T)}},{}],3:[function(T,_,m){"use strict";_.exports=i;function i(){this._listeners={}}i.prototype.on=function t(T,_,m){(this._listeners[T]||(this._listeners[T]=[])).push({fn:_,ctx:m||this});return this};i.prototype.off=function t(T,_){if(T===undefined)this._listeners={};else{if(_===undefined)this._listeners[T]=[];else{var m=this._listeners[T];for(var S=0;S<m.length;)if(m[S].fn===_)m.splice(S,1);else++S}}return this};i.prototype.emit=function t(T){var _=this._listeners[T];if(_){var m=[],S=1;for(;S<arguments.length;)m.push(arguments[S++]);for(S=0;S<_.length;)_[S].fn.apply(_[S++].ctx,m)}return this}},{}],4:[function(T,_,m){"use strict";_.exports=i(i);function i(T){if(typeof Float32Array!=="undefined")(function(){var _=new Float32Array([-0]),m=new Uint8Array(_.buffer),S=m[3]===128;function n(T,S,E){_[0]=T;S[E]=m[0];S[E+1]=m[1];S[E+2]=m[2];S[E+3]=m[3]}function o(T,S,E){_[0]=T;S[E]=m[3];S[E+1]=m[2];S[E+2]=m[1];S[E+3]=m[0]}T.writeFloatLE=S?n:o;T.writeFloatBE=S?o:n;function s(T,S){m[0]=T[S];m[1]=T[S+1];m[2]=T[S+2];m[3]=T[S+3];return _[0]}function u(T,S){m[3]=T[S];m[2]=T[S+1];m[1]=T[S+2];m[0]=T[S+3];return _[0]}T.readFloatLE=S?s:u;T.readFloatBE=S?u:s})();else(function(){function e(T,_,m,S){var E=_<0?1:0;if(E)_=-_;if(_===0)T(1/_>0?0:2147483648,m,S);else if(isNaN(_))T(2143289344,m,S);else if(_>34028234663852886e22)T((E<<31|2139095040)>>>0,m,S);else if(_<11754943508222875e-54)T((E<<31|Math.round(_/1401298464324817e-60))>>>0,m,S);else{var I=Math.floor(Math.log(_)/Math.LN2),O=Math.round(_*Math.pow(2,-I)*8388608)&8388607;T((E<<31|I+127<<23|O)>>>0,m,S)}}T.writeFloatLE=e.bind(null,n);T.writeFloatBE=e.bind(null,o);function r(T,_,m){var S=T(_,m),E=(S>>31)*2+1,I=S>>>23&255,O=S&8388607;return I===255?O?NaN:E*Infinity:I===0?E*1401298464324817e-60*O:E*Math.pow(2,I-150)*(O+8388608)}T.readFloatLE=r.bind(null,s);T.readFloatBE=r.bind(null,u)})();if(typeof Float64Array!=="undefined")(function(){var _=new Float64Array([-0]),m=new Uint8Array(_.buffer),S=m[7]===128;function n(T,S,E){_[0]=T;S[E]=m[0];S[E+1]=m[1];S[E+2]=m[2];S[E+3]=m[3];S[E+4]=m[4];S[E+5]=m[5];S[E+6]=m[6];S[E+7]=m[7]}function o(T,S,E){_[0]=T;S[E]=m[7];S[E+1]=m[6];S[E+2]=m[5];S[E+3]=m[4];S[E+4]=m[3];S[E+5]=m[2];S[E+6]=m[1];S[E+7]=m[0]}T.writeDoubleLE=S?n:o;T.writeDoubleBE=S?o:n;function s(T,S){m[0]=T[S];m[1]=T[S+1];m[2]=T[S+2];m[3]=T[S+3];m[4]=T[S+4];m[5]=T[S+5];m[6]=T[S+6];m[7]=T[S+7];return _[0]}function u(T,S){m[7]=T[S];m[6]=T[S+1];m[5]=T[S+2];m[4]=T[S+3];m[3]=T[S+4];m[2]=T[S+5];m[1]=T[S+6];m[0]=T[S+7];return _[0]}T.readDoubleLE=S?s:u;T.readDoubleBE=S?u:s})();else(function(){function e(T,_,m,S,E,I){var O=S<0?1:0;if(O)S=-S;if(S===0){T(0,E,I+_);T(1/S>0?0:2147483648,E,I+m)}else if(isNaN(S)){T(0,E,I+_);T(2146959360,E,I+m)}else if(S>17976931348623157e292){T(0,E,I+_);T((O<<31|2146435072)>>>0,E,I+m)}else{var N;if(S<22250738585072014e-324){N=S/5e-324;T(N>>>0,E,I+_);T((O<<31|N/4294967296)>>>0,E,I+m)}else{var R=Math.floor(Math.log(S)/Math.LN2);if(R===1024)R=1023;N=S*Math.pow(2,-R);T(N*4503599627370496>>>0,E,I+_);T((O<<31|R+1023<<20|N*1048576&1048575)>>>0,E,I+m)}}}T.writeDoubleLE=e.bind(null,n,0,4);T.writeDoubleBE=e.bind(null,o,4,0);function r(T,_,m,S,E){var I=T(S,E+_),O=T(S,E+m);var N=(O>>31)*2+1,R=O>>>20&2047,A=4294967296*(O&1048575)+I;return R===2047?A?NaN:N*Infinity:R===0?N*5e-324*A:N*Math.pow(2,R-1075)*(A+4503599627370496)}T.readDoubleLE=r.bind(null,s,0,4);T.readDoubleBE=r.bind(null,u,4,0)})();return T}function n(T,_,m){_[m]=T&255;_[m+1]=T>>>8&255;_[m+2]=T>>>16&255;_[m+3]=T>>>24}function o(T,_,m){_[m]=T>>>24;_[m+1]=T>>>16&255;_[m+2]=T>>>8&255;_[m+3]=T&255}function s(T,_){return(T[_]|T[_+1]<<8|T[_+2]<<16|T[_+3]<<24)>>>0}function u(T,_){return(T[_]<<24|T[_+1]<<16|T[_+2]<<8|T[_+3])>>>0}},{}],5:[function(require,module,exports){"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(T){}return null}},{}],6:[function(T,_,m){"use strict";_.exports=i;function i(T,_,m){var S=m||8192;var E=S>>>1;var I=null;var O=S;return function r(m){if(m<1||m>E)return T(m);if(O+m>S){I=T(S);O=0}var N=_.call(I,O,O+=m);if(O&7)O=(O|7)+1;return N}}},{}],7:[function(T,_,m){"use strict";var S=m;S.length=function t(T){var _=0,m=0;for(var S=0;S<T.length;++S){m=T.charCodeAt(S);if(m<128)_+=1;else if(m<2048)_+=2;else if((m&64512)===55296&&(T.charCodeAt(S+1)&64512)===56320){++S;_+=4}else _+=3}return _};S.read=function t(T,_,m){var S=m-_;if(S<1)return"";var E=null,I=[],O=0,N;while(_<m){N=T[_++];if(N<128)I[O++]=N;else if(N>191&&N<224)I[O++]=(N&31)<<6|T[_++]&63;else if(N>239&&N<365){N=((N&7)<<18|(T[_++]&63)<<12|(T[_++]&63)<<6|T[_++]&63)-65536;I[O++]=55296+(N>>10);I[O++]=56320+(N&1023)}else I[O++]=(N&15)<<12|(T[_++]&63)<<6|T[_++]&63;if(O>8191){(E||(E=[])).push(String.fromCharCode.apply(String,I));O=0}}if(E){if(O)E.push(String.fromCharCode.apply(String,I.slice(0,O)));return E.join("")}return String.fromCharCode.apply(String,I.slice(0,O))};S.write=function t(T,_,m){var S=m,E,I;for(var O=0;O<T.length;++O){E=T.charCodeAt(O);if(E<128){_[m++]=E}else if(E<2048){_[m++]=E>>6|192;_[m++]=E&63|128}else if((E&64512)===55296&&((I=T.charCodeAt(O+1))&64512)===56320){E=65536+((E&1023)<<10)+(I&1023);++O;_[m++]=E>>18|240;_[m++]=E>>12&63|128;_[m++]=E>>6&63|128;_[m++]=E&63|128}else{_[m++]=E>>12|224;_[m++]=E>>6&63|128;_[m++]=E&63|128}}return m-S}},{}],8:[function(T,_,m){"use strict";var S=m;S.build="minimal";S.Writer=T(16);S.BufferWriter=T(17);S.Reader=T(9);S.BufferReader=T(10);S.util=T(15);S.rpc=T(12);S.roots=T(11);S.configure=n;function n(){S.util._configure();S.Writer._configure(S.BufferWriter);S.Reader._configure(S.BufferReader)}n()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(T,_,m){"use strict";_.exports=f;var S=T(15);var E;var I=S.LongBits,O=S.utf8;function u(T,_){return RangeError("index out of range: "+T.pos+" + "+(_||1)+" > "+T.len)}function f(T){this.buf=T;this.pos=0;this.len=T.length}var N=typeof Uint8Array!=="undefined"?function t(T){if(T instanceof Uint8Array||Array.isArray(T))return new f(T);throw Error("illegal buffer")}:function t(T){if(Array.isArray(T))return new f(T);throw Error("illegal buffer")};var R=function t(){return S.Buffer?function t(T){return(f.create=function t(T){return S.Buffer.isBuffer(T)?new E(T):N(T)})(T)}:N};f.create=R();f.prototype._slice=S.Array.prototype.subarray||S.Array.prototype.slice;f.prototype.uint32=function t(){var T=4294967295;return function t(){T=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return T;T=(T|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return T;if((this.pos+=5)>this.len){this.pos=this.len;throw u(this,10)}return T}}();f.prototype.int32=function t(){return this.uint32()|0};f.prototype.sint32=function t(){var T=this.uint32();return T>>>1^-(T&1)|0};function a(){var T=new I(0,0);var _=0;if(this.len-this.pos>4){for(;_<4;++_){T.lo=(T.lo|(this.buf[this.pos]&127)<<_*7)>>>0;if(this.buf[this.pos++]<128)return T}T.lo=(T.lo|(this.buf[this.pos]&127)<<28)>>>0;T.hi=(T.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return T;_=0}else{for(;_<3;++_){if(this.pos>=this.len)throw u(this);T.lo=(T.lo|(this.buf[this.pos]&127)<<_*7)>>>0;if(this.buf[this.pos++]<128)return T}T.lo=(T.lo|(this.buf[this.pos++]&127)<<_*7)>>>0;return T}if(this.len-this.pos>4){for(;_<5;++_){T.hi=(T.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0;if(this.buf[this.pos++]<128)return T}}else{for(;_<5;++_){if(this.pos>=this.len)throw u(this);T.hi=(T.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0;if(this.buf[this.pos++]<128)return T}}throw Error("invalid varint encoding")}f.prototype.bool=function t(){return this.uint32()!==0};function c(T,_){return(T[_-4]|T[_-3]<<8|T[_-2]<<16|T[_-1]<<24)>>>0}f.prototype.fixed32=function t(){if(this.pos+4>this.len)throw u(this,4);return c(this.buf,this.pos+=4)};f.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw u(this,4);return c(this.buf,this.pos+=4)|0};function p(){if(this.pos+8>this.len)throw u(this,8);return new I(c(this.buf,this.pos+=4),c(this.buf,this.pos+=4))}f.prototype.float=function t(){if(this.pos+4>this.len)throw u(this,4);var T=S.float.readFloatLE(this.buf,this.pos);this.pos+=4;return T};f.prototype.double=function t(){if(this.pos+8>this.len)throw u(this,4);var T=S.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return T};f.prototype.bytes=function t(){var T=this.uint32(),_=this.pos,m=this.pos+T;if(m>this.len)throw u(this,T);this.pos+=T;if(Array.isArray(this.buf))return this.buf.slice(_,m);return _===m?new this.buf.constructor(0):this._slice.call(this.buf,_,m)};f.prototype.string=function t(){var T=this.bytes();return O.read(T,0,T.length)};f.prototype.skip=function t(T){if(typeof T==="number"){if(this.pos+T>this.len)throw u(this,T);this.pos+=T}else{do{if(this.pos>=this.len)throw u(this)}while(this.buf[this.pos++]&128)}return this};f.prototype.skipType=function(T){switch(T){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((T=this.uint32()&7)!==4){this.skipType(T)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+T+" at offset "+this.pos)}return this};f._configure=function(T){E=T;f.create=R();E._configure();var _=S.Long?"toLong":"toNumber";S.merge(f.prototype,{int64:function t(){return a.call(this)[_](false)},uint64:function t(){return a.call(this)[_](true)},sint64:function t(){return a.call(this).zzDecode()[_](false)},fixed64:function t(){return p.call(this)[_](true)},sfixed64:function t(){return p.call(this)[_](false)}})}},{15:15}],10:[function(T,_,m){"use strict";_.exports=o;var S=T(9);(o.prototype=Object.create(S.prototype)).constructor=o;var E=T(15);function o(T){S.call(this,T)}o._configure=function(){if(E.Buffer)o.prototype._slice=E.Buffer.prototype.slice};o.prototype.string=function t(){var T=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+T,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+T,this.len))};o._configure()},{15:15,9:9}],11:[function(T,_,m){"use strict";_.exports={}},{}],12:[function(T,_,m){"use strict";var S=m;S.Service=T(13)},{13:13}],13:[function(T,_,m){"use strict";_.exports=n;var S=T(15);(n.prototype=Object.create(S.EventEmitter.prototype)).constructor=n;function n(T,_,m){if(typeof T!=="function")throw TypeError("rpcImpl must be a function");S.EventEmitter.call(this);this.rpcImpl=T;this.requestDelimited=Boolean(_);this.responseDelimited=Boolean(m)}n.prototype.rpcCall=function t(T,_,m,E,I){if(!E)throw TypeError("request must be specified");var O=this;if(!I)return S.asPromise(t,O,T,_,m,E);if(!O.rpcImpl){setTimeout((function(){I(Error("already ended"))}),0);return undefined}try{return O.rpcImpl(T,_[O.requestDelimited?"encodeDelimited":"encode"](E).finish(),(function t(_,S){if(_){O.emit("error",_,T);return I(_)}if(S===null){O.end(true);return undefined}if(!(S instanceof m)){try{S=m[O.responseDelimited?"decodeDelimited":"decode"](S)}catch(_){O.emit("error",_,T);return I(_)}}O.emit("data",S,T);return I(null,S)}))}catch(t){O.emit("error",t,T);setTimeout((function(){I(t)}),0);return undefined}};n.prototype.end=function t(T){if(this.rpcImpl){if(!T)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},{15:15}],14:[function(T,_,m){"use strict";_.exports=n;var S=T(15);function n(T,_){this.lo=T>>>0;this.hi=_>>>0}var E=n.zero=new n(0,0);E.toNumber=function(){return 0};E.zzEncode=E.zzDecode=function(){return this};E.length=function(){return 1};var I=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function t(T){if(T===0)return E;var _=T<0;if(_)T=-T;var m=T>>>0,S=(T-m)/4294967296>>>0;if(_){S=~S>>>0;m=~m>>>0;if(++m>4294967295){m=0;if(++S>4294967295)S=0}}return new n(m,S)};n.from=function t(T){if(typeof T==="number")return n.fromNumber(T);if(S.isString(T)){if(S.Long)T=S.Long.fromString(T);else return n.fromNumber(parseInt(T,10))}return T.low||T.high?new n(T.low>>>0,T.high>>>0):E};n.prototype.toNumber=function t(T){if(!T&&this.hi>>>31){var _=~this.lo+1>>>0,m=~this.hi>>>0;if(!_)m=m+1>>>0;return-(_+m*4294967296)}return this.lo+this.hi*4294967296};n.prototype.toLong=function t(T){return S.Long?new S.Long(this.lo|0,this.hi|0,Boolean(T)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(T)}};var O=String.prototype.charCodeAt;n.fromHash=function t(T){if(T===I)return E;return new n((O.call(T,0)|O.call(T,1)<<8|O.call(T,2)<<16|O.call(T,3)<<24)>>>0,(O.call(T,4)|O.call(T,5)<<8|O.call(T,6)<<16|O.call(T,7)<<24)>>>0)};n.prototype.toHash=function t(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};n.prototype.zzEncode=function t(){var T=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^T)>>>0;this.lo=(this.lo<<1^T)>>>0;return this};n.prototype.zzDecode=function t(){var T=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^T)>>>0;this.hi=(this.hi>>>1^T)>>>0;return this};n.prototype.length=function t(){var T=this.lo,_=(this.lo>>>28|this.hi<<4)>>>0,m=this.hi>>>24;return m===0?_===0?T<16384?T<128?1:2:T<2097152?3:4:_<16384?_<128?5:6:_<2097152?7:8:m<128?9:10}},{15:15}],15:[function(T,_,m){"use strict";var S=m;S.asPromise=T(1);S.base64=T(2);S.EventEmitter=T(3);S.float=T(4);S.inquire=T(5);S.utf8=T(7);S.pool=T(6);S.LongBits=T(14);S.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);S.global=S.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;S.emptyArray=Object.freeze?Object.freeze([]):[];S.emptyObject=Object.freeze?Object.freeze({}):{};S.isInteger=Number.isInteger||function t(T){return typeof T==="number"&&isFinite(T)&&Math.floor(T)===T};S.isString=function t(T){return typeof T==="string"||T instanceof String};S.isObject=function t(T){return T&&typeof T==="object"};S.isset=S.isSet=function t(T,_){var m=T[_];if(m!=null&&T.hasOwnProperty(_))return typeof m!=="object"||(Array.isArray(m)?m.length:Object.keys(m).length)>0;return false};S.Buffer=function(){try{var T=S.inquire("buffer").Buffer;return T.prototype.utf8Write?T:null}catch(T){return null}}();S._Buffer_from=null;S._Buffer_allocUnsafe=null;S.newBuffer=function t(T){return typeof T==="number"?S.Buffer?S._Buffer_allocUnsafe(T):new S.Array(T):S.Buffer?S._Buffer_from(T):typeof Uint8Array==="undefined"?T:new Uint8Array(T)};S.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;S.Long=S.global.dcodeIO&&S.global.dcodeIO.Long||S.global.Long||S.inquire("long");S.key2Re=/^true|false|0|1$/;S.key32Re=/^-?(?:0|[1-9][0-9]*)$/;S.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;S.longToHash=function t(T){return T?S.LongBits.from(T).toHash():S.LongBits.zeroHash};S.longFromHash=function t(T,_){var m=S.LongBits.fromHash(T);if(S.Long)return S.Long.fromBits(m.lo,m.hi,_);return m.toNumber(Boolean(_))};function n(T,_,m){for(var S=Object.keys(_),E=0;E<S.length;++E)if(T[S[E]]===undefined||!m)T[S[E]]=_[S[E]];return T}S.merge=n;S.lcFirst=function t(T){return T.charAt(0).toLowerCase()+T.substring(1)};function o(T){function e(T,_){if(!(this instanceof e))return new e(T,_);Object.defineProperty(this,"message",{get:function(){return T}});if(Error.captureStackTrace)Error.captureStackTrace(this,e);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(_)n(this,_)}e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:true,enumerable:false,configurable:true},name:{get(){return T},set:undefined,enumerable:false,configurable:true},toString:{value(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}});return e}S.newError=o;S.ProtocolError=o("ProtocolError");S.oneOfGetter=function t(T){var _={};for(var m=0;m<T.length;++m)_[T[m]]=1;return function(){for(var T=Object.keys(this),m=T.length-1;m>-1;--m)if(_[T[m]]===1&&this[T[m]]!==undefined&&this[T[m]]!==null)return T[m]}};S.oneOfSetter=function t(T){return function(_){for(var m=0;m<T.length;++m)if(T[m]!==_)delete this[T[m]]}};S.toJSONOptions={longs:String,enums:String,bytes:String,json:true};S._configure=function(){var T=S.Buffer;if(!T){S._Buffer_from=S._Buffer_allocUnsafe=null;return}S._Buffer_from=T.from!==Uint8Array.from&&T.from||function e(_,m){return new T(_,m)};S._Buffer_allocUnsafe=T.allocUnsafe||function e(_){return new T(_)}}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(T,_,m){"use strict";_.exports=a;var S=T(15);var E;var I=S.LongBits,O=S.base64,N=S.utf8;function f(T,_,m){this.fn=T;this.len=_;this.next=undefined;this.val=m}function h(){}function l(T){this.head=T.head;this.tail=T.tail;this.len=T.len;this.next=T.states}function a(){this.len=0;this.head=new f(h,0,0);this.tail=this.head;this.states=null}var R=function t(){return S.Buffer?function t(){return(a.create=function t(){return new E})()}:function t(){return new a}};a.create=R();a.alloc=function t(T){return new S.Array(T)};if(S.Array!==Array)a.alloc=S.pool(a.alloc,S.Array.prototype.subarray);a.prototype._push=function t(T,_,m){this.tail=this.tail.next=new f(T,_,m);this.len+=_;return this};function p(T,_,m){_[m]=T&255}function d(T,_,m){while(T>127){_[m++]=T&127|128;T>>>=7}_[m]=T}function y(T,_){this.len=T;this.next=undefined;this.val=_}y.prototype=Object.create(f.prototype);y.prototype.fn=d;a.prototype.uint32=function t(T){this.len+=(this.tail=this.tail.next=new y((T=T>>>0)<128?1:T<16384?2:T<2097152?3:T<268435456?4:5,T)).len;return this};a.prototype.int32=function t(T){return T<0?this._push(b,10,I.fromNumber(T)):this.uint32(T)};a.prototype.sint32=function t(T){return this.uint32((T<<1^T>>31)>>>0)};function b(T,_,m){while(T.hi){_[m++]=T.lo&127|128;T.lo=(T.lo>>>7|T.hi<<25)>>>0;T.hi>>>=7}while(T.lo>127){_[m++]=T.lo&127|128;T.lo=T.lo>>>7}_[m++]=T.lo}a.prototype.uint64=function t(T){var _=I.from(T);return this._push(b,_.length(),_)};a.prototype.int64=a.prototype.uint64;a.prototype.sint64=function t(T){var _=I.from(T).zzEncode();return this._push(b,_.length(),_)};a.prototype.bool=function t(T){return this._push(p,1,T?1:0)};function g(T,_,m){_[m]=T&255;_[m+1]=T>>>8&255;_[m+2]=T>>>16&255;_[m+3]=T>>>24}a.prototype.fixed32=function t(T){return this._push(g,4,T>>>0)};a.prototype.sfixed32=a.prototype.fixed32;a.prototype.fixed64=function t(T){var _=I.from(T);return this._push(g,4,_.lo)._push(g,4,_.hi)};a.prototype.sfixed64=a.prototype.fixed64;a.prototype.float=function t(T){return this._push(S.float.writeFloatLE,4,T)};a.prototype.double=function t(T){return this._push(S.float.writeDoubleLE,8,T)};var A=S.Array.prototype.set?function t(T,_,m){_.set(T,m)}:function t(T,_,m){for(var S=0;S<T.length;++S)_[m+S]=T[S]};a.prototype.bytes=function t(T){var _=T.length>>>0;if(!_)return this._push(p,1,0);if(S.isString(T)){var m=a.alloc(_=O.length(T));O.decode(T,m,0);T=m}return this.uint32(_)._push(A,_,T)};a.prototype.string=function t(T){var _=N.length(T);return _?this.uint32(_)._push(N.write,_,T):this._push(p,1,0)};a.prototype.fork=function t(){this.states=new l(this);this.head=this.tail=new f(h,0,0);this.len=0;return this};a.prototype.reset=function t(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new f(h,0,0);this.len=0}return this};a.prototype.ldelim=function t(){var T=this.head,_=this.tail,m=this.len;this.reset().uint32(m);if(m){this.tail.next=T.next;this.tail=_;this.len+=m}return this};a.prototype.finish=function t(){var T=this.head.next,_=this.constructor.alloc(this.len),m=0;while(T){T.fn(T.val,_,m);m+=T.len;T=T.next}return _};a._configure=function(T){E=T;a.create=R();E._configure()}},{15:15}],17:[function(T,_,m){"use strict";_.exports=o;var S=T(16);(o.prototype=Object.create(S.prototype)).constructor=o;var E=T(15);function o(){S.call(this)}o._configure=function(){o.alloc=E._Buffer_allocUnsafe;o.writeBytesBuffer=E.Buffer&&E.Buffer.prototype instanceof Uint8Array&&E.Buffer.prototype.set.name==="set"?function t(T,_,m){_.set(T,m)}:function t(T,_,m){if(T.copy)T.copy(_,m,0,T.length);else for(var S=0;S<T.length;)_[m++]=T[S++]}};o.prototype.bytes=function t(T){if(E.isString(T))T=E._Buffer_from(T,"base64");var _=T.length>>>0;this.uint32(_);if(_)this._push(o.writeBytesBuffer,_,T);return this};function s(T,_,m){if(T.length<40)E.utf8.write(T,_,m);else if(_.utf8Write)_.utf8Write(T,m);else _.write(T,m)}o.prototype.string=function t(T){var _=E.Buffer.byteLength(T);this.uint32(_);if(_)this._push(s,_,T);return this};o._configure()},{15:15,16:16}]},{},[8])})();const __WEBPACK_DEFAULT_EXPORT__=protobuf}};var __webpack_module_cache__={};function __nccwpck_require__(T){var _=__webpack_module_cache__[T];if(_!==undefined){return _.exports}var m=__webpack_module_cache__[T]={id:T,loaded:false,exports:{}};var S=true;try{__webpack_modules__[T](m,m.exports,__nccwpck_require__);S=false}finally{if(S)delete __webpack_module_cache__[T]}m.loaded=true;return m.exports}(()=>{__nccwpck_require__.d=(T,_)=>{for(var m in _){if(__nccwpck_require__.o(_,m)&&!__nccwpck_require__.o(T,m)){Object.defineProperty(T,m,{enumerable:true,get:_[m]})}}}})();(()=>{__nccwpck_require__.hmd=T=>{T=Object.create(T);if(!T.children)T.children=[];Object.defineProperty(T,"exports",{enumerable:true,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+T.id)}});return T}})();(()=>{__nccwpck_require__.o=(T,_)=>Object.prototype.hasOwnProperty.call(T,_)})();(()=>{__nccwpck_require__.r=T=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(T,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(T,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__={};(()=>{"use strict";__nccwpck_require__.r(__webpack_exports__);__nccwpck_require__.d(__webpack_exports__,{default:()=>Tr,toNumber:()=>toNumber,toQuotation:()=>toQuotation});const T={NOT_READY:"not-ready",READY:"ready",OPERATION_STARTED:"operation-started",OPERATION_ENDED:"operation-ended",OPERATION_FAILED:"operation-failed"};const _={OK:"ok",OLD:"old",OFF:"off"};const m={PASSWORD:"password",KEY:"key"};const S={OK:"ok",FAILED:"failed"};const E={SUPABASE:"supabase",PUSHER:"pusher",ASTRADB:"astradb",SEATABLE:"seatable",NORTHFLANK:"northflank",RENDER:"render",REDIS:"redis",CLOUDFLARE:"cloudflare",POSTGRESQL:"postgresql",BITIO:"bitio",YC:"yc"};const I={PPP_ASPIRANT_WORKER:"ppp-aspirant-worker",CLOUDFLARE_WORKER:"cloudflare-worker",CLOUD_PPP_ASPIRANT:"cloud-ppp-aspirant",DEPLOYED_PPP_ASPIRANT:"deployed-ppp-aspirant",SYSTEMD_PPP_ASPIRANT:"systemd-ppp-aspirant",SUPABASE_PARSER:"supabase-parser",NYSE_NSDQ_HALTS:"nyse-nsdq-halts"};const O={ACTIVE:"active",STOPPED:"stopped",FAILED:"failed"};const N={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",MOEX:"MOEX",SPBX:"SPBX",US:"US",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",RUS:"RUS",CUSTOM:"CUSTOM",MOEX_SECURITIES:"MOEX_SECURITIES",MOEX_FX_METALS:"MOEX_FX_METALS",MOEX_FORTS:"MOEX_FORTS",CAPITALCOM:"CAPITALCOM"};const R=[N.BINANCE,N.BYBIT_SPOT,N.BYBIT_LINEAR];const A={ALPACA:"alpaca",ALOR:"alor",TINKOFF:"tinkoff",UTEX:"utex",PSINA:"psina",BINANCE:"binance",HUOBI:"huobi",BYBIT:"bybit",MEXC:"mexc",FINAM:"finam",IB:"ib",CAPITALCOM:"capitalcom",UNKNOWN:"unknown"};const P={MARKET_DATA_RECORDER:"market-data-recorder",STOP_LOSS_TAKE_PROFIT:"stop-loss-take-profit",CUSTOM:"custom"};const C={BINANCE:"BINANCE",BYBIT_LINEAR:"BYBIT_LINEAR",BYBIT_SPOT:"BYBIT_SPOT",UTEX_MARGIN_STOCKS:"UTEX_MARGIN_STOCKS",PSINA_US_STOCKS:"PSINA_US_STOCKS",ALOR_SPBX:"ALOR_SPBX",ALOR_MOEX_SECURITIES:"ALOR_MOEX_SECURITIES",ALOR_MOEX_FX_METALS:"ALOR_MOEX_FX_METALS",ALOR_FORTS:"ALOR_FORTS",TINKOFF:"TINKOFF",FINAM:"FINAM",ALPACA:"ALPACA",IB:"IB",CAPITALCOM:"CAPITALCOM"};const k={ALOR_OPENAPI_V2:"alor-openapi-v2",ALPACA_V2_PLUS:"alpaca-v2-plus",TINKOFF_GRPC_WEB:"tinkoff-grpc-web",IB:"ib",CAPITALCOM:"capitalcom",UTEX_MARGIN_STOCKS:"utex-margin-stocks",BINANCE_V3:"binance-v3",MEXC_V3:"mexc-v3",BYBIT_V5:"bybit-v5",FINAM_TRADE_API:"finam-trade-api",PAPER_TRADE:"paper-trade",COMBINED_L1:"combined-l1",COMBINED_ORDERBOOK:"combined-orderbook",CUSTOM:"custom"};const U={CAPS_LIMIT_ORDERS:"caps-limit-orders",CAPS_MARKET_ORDERS:"caps-marker-orders",CAPS_ACTIVE_ORDERS:"caps-active-orders",CAPS_CONDITIONAL_ORDERS:"caps-conditional-orders",CAPS_ORDERBOOK:"caps-orderbook",CAPS_TIME_AND_SALES:"caps-time-and-sales",CAPS_POSITIONS:"caps-positions",CAPS_TIMELINE:"caps-timeline",CAPS_LEVEL1:"caps-level1",CAPS_EXTENDED_LEVEL1:"caps-extended-level1",CAPS_CHARTS:"caps-charts",CAPS_MIC:"caps-mic",CAPS_ORDER_DESTINATION:"caps-order-destination",CAPS_ORDER_TIF:"caps-order-tif",CAPS_ORDER_DISPLAY_SIZE:"caps-order-display-size",CAPS_US_NBBO:"caps-us-nbbo",CAPS_NSDQ_TOTALVIEW:"caps-nsdq-totalview",CAPS_ARCABOOK:"caps-arcabook",CAPS_BLUEATS:"caps-blueats",CAPS_NYSE_OPENBOOK:"caps-nyse-openbook",CAPS_DIRECTEDGE_BOOK:"caps-directedge-book",CAPS_BZX_BOOK:"caps-bzx-book",CAPS_NOII:"caps-noii",CAPS_PAPER:"caps-paper"};const D={TRADER:"trader",DAY_VOLUME:"day-volume",STATUS:"status",TRADING_STATUS:"trading-status",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",BEST_BID:"best-bid",BEST_ASK:"best-ask",MIDPOINT:"midpoint",ORDERBOOK:"orderbook",MARKET_PRINT:"market-print",POSITION:"position",POSITION_SIZE:"position-size",POSITION_AVERAGE:"position-average",REAL_ORDER:"real-order",CONDITIONAL_ORDER:"conditional-order",TIMELINE_ITEM:"timeline-item",CANDLE:"candle",NOII:"noii",SPRINT:"sprint",LOCATE:"locate"};const w={INSTRUMENT:"instrument",SYMBOL:"symbol",INSTRUMENT_TYPE:"instrument-type",POSITION_AVAILABLE:"position-available",POSITION_AVERAGE:"position-average",TOTAL_AMOUNT:"total-amount",EXTENDED_TOTAL_AMOUNT:"extended-total-amount",BEST_BID:"best-bid",BEST_ASK:"best-ask",LAST_PRICE:"last-price",LAST_PRICE_ABSOLUTE_CHANGE:"last-price-absolute-change",LAST_PRICE_RELATIVE_CHANGE:"last-price-relative-change",EXTENDED_LAST_PRICE:"extended-last-price",EXTENDED_LAST_PRICE_ABSOLUTE_CHANGE:"extended-last-price-absolute-change",EXTENDED_LAST_PRICE_RELATIVE_CHANGE:"extended-last-price-relative-change",PL_ABSOLUTE:"pl-absolute",PL_RELATIVE:"pl-relative",EXTENDED_PL_ABSOLUTE:"extended-pl-absolute",EXTENDED_PL_RELATIVE:"extended-pl-relative",DAY_VOLUME:"day-volume",TRADING_STATUS:"trading-status",FORMATTED_VALUE:"formatted-value"};const L={ORDER:"order",SCALPING_BUTTONS:"scalping-buttons",ACTIVE_ORDERS:"active-orders",LIGHT_CHART:"light-chart",ORDERBOOK:"orderbook",TIME_AND_SALES:"time-and-sales",PORTFOLIO:"portfolio",BALANCES:"balances",LIST:"list",TIMELINE:"timeline",CLOCK:"clock",MARQUEE:"marquee",TCC:"tcc",FRAME:"frame",NOII:"noii",MIGRATION:"migration",OTHER:"other"};let B;(function(T){T[T["OPERATION_TYPE_UNSPECIFIED"]=0]="OPERATION_TYPE_UNSPECIFIED";T[T["OPERATION_TYPE_INPUT"]=1]="OPERATION_TYPE_INPUT";T[T["OPERATION_TYPE_BOND_TAX"]=2]="OPERATION_TYPE_BOND_TAX";T[T["OPERATION_TYPE_OUTPUT_SECURITIES"]=3]="OPERATION_TYPE_OUTPUT_SECURITIES";T[T["OPERATION_TYPE_OVERNIGHT"]=4]="OPERATION_TYPE_OVERNIGHT";T[T["OPERATION_TYPE_TAX"]=5]="OPERATION_TYPE_TAX";T[T["OPERATION_TYPE_BOND_REPAYMENT_FULL"]=6]="OPERATION_TYPE_BOND_REPAYMENT_FULL";T[T["OPERATION_TYPE_SELL_CARD"]=7]="OPERATION_TYPE_SELL_CARD";T[T["OPERATION_TYPE_DIVIDEND_TAX"]=8]="OPERATION_TYPE_DIVIDEND_TAX";T[T["OPERATION_TYPE_OUTPUT"]=9]="OPERATION_TYPE_OUTPUT";T[T["OPERATION_TYPE_BOND_REPAYMENT"]=10]="OPERATION_TYPE_BOND_REPAYMENT";T[T["OPERATION_TYPE_TAX_CORRECTION"]=11]="OPERATION_TYPE_TAX_CORRECTION";T[T["OPERATION_TYPE_SERVICE_FEE"]=12]="OPERATION_TYPE_SERVICE_FEE";T[T["OPERATION_TYPE_BENEFIT_TAX"]=13]="OPERATION_TYPE_BENEFIT_TAX";T[T["OPERATION_TYPE_MARGIN_FEE"]=14]="OPERATION_TYPE_MARGIN_FEE";T[T["OPERATION_TYPE_BUY"]=15]="OPERATION_TYPE_BUY";T[T["OPERATION_TYPE_BUY_CARD"]=16]="OPERATION_TYPE_BUY_CARD";T[T["OPERATION_TYPE_INPUT_SECURITIES"]=17]="OPERATION_TYPE_INPUT_SECURITIES";T[T["OPERATION_TYPE_SELL_MARGIN"]=18]="OPERATION_TYPE_SELL_MARGIN";T[T["OPERATION_TYPE_BROKER_FEE"]=19]="OPERATION_TYPE_BROKER_FEE";T[T["OPERATION_TYPE_BUY_MARGIN"]=20]="OPERATION_TYPE_BUY_MARGIN";T[T["OPERATION_TYPE_DIVIDEND"]=21]="OPERATION_TYPE_DIVIDEND";T[T["OPERATION_TYPE_SELL"]=22]="OPERATION_TYPE_SELL";T[T["OPERATION_TYPE_COUPON"]=23]="OPERATION_TYPE_COUPON";T[T["OPERATION_TYPE_SUCCESS_FEE"]=24]="OPERATION_TYPE_SUCCESS_FEE";T[T["OPERATION_TYPE_DIVIDEND_TRANSFER"]=25]="OPERATION_TYPE_DIVIDEND_TRANSFER";T[T["OPERATION_TYPE_ACCRUING_VARMARGIN"]=26]="OPERATION_TYPE_ACCRUING_VARMARGIN";T[T["OPERATION_TYPE_WRITING_OFF_VARMARGIN"]=27]="OPERATION_TYPE_WRITING_OFF_VARMARGIN";T[T["OPERATION_TYPE_DELIVERY_BUY"]=28]="OPERATION_TYPE_DELIVERY_BUY";T[T["OPERATION_TYPE_DELIVERY_SELL"]=29]="OPERATION_TYPE_DELIVERY_SELL";T[T["OPERATION_TYPE_TRACK_MFEE"]=30]="OPERATION_TYPE_TRACK_MFEE";T[T["OPERATION_TYPE_TRACK_PFEE"]=31]="OPERATION_TYPE_TRACK_PFEE";T[T["OPERATION_TYPE_TAX_PROGRESSIVE"]=32]="OPERATION_TYPE_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BOND_TAX_PROGRESSIVE"]=33]="OPERATION_TYPE_BOND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE"]=34]="OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE"]=35]="OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE"]=36]="OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_PROGRESSIVE"]=37]="OPERATION_TYPE_TAX_REPO_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO"]=38]="OPERATION_TYPE_TAX_REPO";T[T["OPERATION_TYPE_TAX_REPO_HOLD"]=39]="OPERATION_TYPE_TAX_REPO_HOLD";T[T["OPERATION_TYPE_TAX_REPO_REFUND"]=40]="OPERATION_TYPE_TAX_REPO_REFUND";T[T["OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE"]=41]="OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE"]=42]="OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";T[T["OPERATION_TYPE_DIV_EXT"]=43]="OPERATION_TYPE_DIV_EXT";T[T["OPERATION_TYPE_TAX_CORRECTION_COUPON"]=44]="OPERATION_TYPE_TAX_CORRECTION_COUPON";T[T["OPERATION_TYPE_CASH_FEE"]=45]="OPERATION_TYPE_CASH_FEE";T[T["OPERATION_TYPE_OUT_FEE"]=46]="OPERATION_TYPE_OUT_FEE";T[T["OPERATION_TYPE_OUT_STAMP_DUTY"]=47]="OPERATION_TYPE_OUT_STAMP_DUTY";T[T["OPERATION_TYPE_OUTPUT_SWIFT"]=50]="OPERATION_TYPE_OUTPUT_SWIFT";T[T["OPERATION_TYPE_INPUT_SWIFT"]=51]="OPERATION_TYPE_INPUT_SWIFT";T[T["OPERATION_TYPE_OUTPUT_ACQUIRING"]=53]="OPERATION_TYPE_OUTPUT_ACQUIRING";T[T["OPERATION_TYPE_INPUT_ACQUIRING"]=54]="OPERATION_TYPE_INPUT_ACQUIRING";T[T["OPERATION_TYPE_OUTPUT_PENALTY"]=55]="OPERATION_TYPE_OUTPUT_PENALTY";T[T["OPERATION_TYPE_ADVICE_FEE"]=56]="OPERATION_TYPE_ADVICE_FEE";T[T["OPERATION_TYPE_TRANS_IIS_BS"]=57]="OPERATION_TYPE_TRANS_IIS_BS";T[T["OPERATION_TYPE_TRANS_BS_BS"]=58]="OPERATION_TYPE_TRANS_BS_BS";T[T["OPERATION_TYPE_OUT_MULTI"]=59]="OPERATION_TYPE_OUT_MULTI";T[T["OPERATION_TYPE_INP_MULTI"]=60]="OPERATION_TYPE_INP_MULTI";T[T["OPERATION_TYPE_OVER_PLACEMENT"]=61]="OPERATION_TYPE_OVER_PLACEMENT";T[T["OPERATION_TYPE_OVER_COM"]=62]="OPERATION_TYPE_OVER_COM";T[T["OPERATION_TYPE_OVER_INCOME"]=63]="OPERATION_TYPE_OVER_INCOME";T[T["OPERATION_TYPE_OPTION_EXPIRATION"]=64]="OPERATION_TYPE_OPTION_EXPIRATION";T[T["OPERATION_TYPE_LOCATE_FEE"]=800]="OPERATION_TYPE_LOCATE_FEE";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(B||(B={}));const v={UNSPECIFIED:"UNSPECIFIED",NOT_AVAILABLE_FOR_TRADING:"NOT_AVAILABLE_FOR_TRADING",OPENING_PERIOD:"OPENING_PERIOD",CLOSING_PERIOD:"CLOSING_PERIOD",BREAK_IN_TRADING:"BREAK_IN_TRADING",NORMAL_TRADING:"NORMAL_TRADING",CLOSING_AUCTION:"CLOSING_AUCTION",DARK_POOL_AUCTION:"DARK_POOL_AUCTION",DISCRETE_AUCTION:"DISCRETE_AUCTION",OPENING_AUCTION_PERIOD:"OPENING_AUCTION_PERIOD",TRADING_AT_CLOSING_AUCTION_PRICE:"TRADING_AT_CLOSING_AUCTION_PRICE",SESSION_ASSIGNED:"SESSION_ASSIGNED",SESSION_CLOSE:"SESSION_CLOSE",SESSION_OPEN:"SESSION_OPEN",DEALER_NORMAL_TRADING:"DEALER_NORMAL_TRADING",DEALER_BREAK_IN_TRADING:"DEALER_BREAK_IN_TRADING",DEALER_NOT_AVAILABLE_FOR_TRADING:"DEALER_NOT_AVAILABLE_FOR_TRADING",PREMARKET:"PREMARKET",AFTER_HOURS:"AFTER_HOURS",TRADING_SUSPENDED:"TRADING_SUSPENDED",DELISTED:"DELISTED",IPO_TODAY:"IPO_TODAY",QUOTATION_RESUMPTION:"QUOTATION_RESUMPTION",SHORT_SALE_RESTRICTION:"SHORT_SALE_RESTRICTION",MARKET_IMBALANCE:"MARKET_IMBALANCE",MARKET_CLOSE_IMBALANCE:"MARKET_CLOSE_IMBALANCE",PRICE_INDICATION:"PRICE_INDICATION",TRADING_RANGE_INDICATION:"TRADING_RANGE_INDICATION"};function isPredefinedWidgetType(T){return[L.ORDER,L.SCALPING_BUTTONS,L.ACTIVE_ORDERS,L.LIGHT_CHART,L.ORDERBOOK,L.TIME_AND_SALES,L.PORTFOLIO,L.BALANCES,L.LIST,L.TIMELINE,L.CLOCK,L.MARQUEE,L.TCC].includes(T)}function getInstrumentDictionaryMeta(T){let _;let m;let S;switch(T){case C.BYBIT_LINEAR:_=N.BYBIT_LINEAR;m=A.BYBIT;S=[N.BYBIT_LINEAR];break;case C.BYBIT_SPOT:_=N.BYBIT_SPOT;m=A.BYBIT;S=[N.BYBIT_SPOT];break;case C.BINANCE:_=N.BINANCE;m=A.BINANCE;S=[N.BINANCE];break;case C.UTEX_MARGIN_STOCKS:_=N.UTEX_MARGIN_STOCKS;m=A.UTEX;S=[N.UTEX_MARGIN_STOCKS];break;case C.ALPACA:_=N.US;m=A.ALPACA;S=[N.ALPACA];break;case C.IB:_=N.CUSTOM;m=A.IB;S=[N.US];break;case C.PSINA_US_STOCKS:_=N.US;m=A.PSINA;S=[N.US];break;case C.ALOR_SPBX:_=N.SPBX;m=A.ALOR;S=[N.SPBX];break;case C.ALOR_MOEX_SECURITIES:_=N.MOEX_SECURITIES;m=A.ALOR;S=[N.MOEX];break;case C.ALOR_MOEX_FX_METALS:_=N.MOEX_FX_METALS;m=A.ALOR;S=[N.MOEX];break;case C.ALOR_FORTS:_=N.MOEX_FORTS;m=A.ALOR;S=[N.MOEX];break;case C.TINKOFF:_=N.RUS;m=A.TINKOFF;S=[N.MOEX,N.SPBX];break;case C.FINAM:_=N.CUSTOM;m=A.FINAM;S=[N.MOEX,N.US,N.SPBX];break;case C.CAPITALCOM:_=N.CAPITALCOM;m=A.CAPITALCOM;S=[N.CAPITALCOM];break}return{exchange:_,broker:m,exchangeList:S}}if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.ppp??={i18nLocale:"en-US"}}const Y=null&&["EUR","AMD","KZT","KGS","UZS","USD","CNY","TJS","BYN","HKD","XAU","TRY","XAG","RUB"];function stringToFloat(T){if(typeof T==="number"){return T}if(!T){return 0}if(T.includes(",")&&T.includes(".")){T=T.replaceAll(/,/gi,"")}return parseFloat(T.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,""))}function decimalSeparator(){const T=1.1;return Intl.NumberFormat(ppp.i18nLocale).formatToParts(T).find((T=>T.type==="decimal")).value}const F=decimalSeparator();function getInstrumentMinPriceIncrement(T,_,m){if(!T)return 0;if(typeof _!=="number"||isNaN(_))return T.minPriceIncrement||.01;_=stringToFloat(_);let S=T.minPriceIncrement;if(!S||m){S=_<1?1e-4:.01}return S}function getInstrumentPrecision(T,_,m){if(!T)return 0;if(T.type==="currency"){return 4}if(_===0||_==="0"){return 2}const S=getInstrumentMinPriceIncrement(T,_,m);const[E,I]=S.toString().split(".");return I?I.length:0}function getInstrumentQuantityPrecision(T){if(!T)return 0;const[_,m]=(T.minQuantityIncrement??0).toString().split(".");return m?m.length:0}function formatDateWithOptions(T,_={}){if(!T)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,Object.assign({hour12:false},_)).format(new Date(T))}function formatDate(T){if(!T)return"—";return new Intl.DateTimeFormat(ppp.i18nLocale,{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:false}).format(new Date(T))}function formatDuration(T=0,_={}){if(typeof T!=="number")return"—";return new Date(T*1e3).toLocaleTimeString(ppp.i18nLocale,Object.assign({timeZone:"Etc/UTC",hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"},_))}function formatPrice(T,_,m={}){if(!_||typeof T!=="number"||isNaN(T))return"—";if(!_.currency)return"—";const S=getInstrumentPrecision(_,T);if(_.type==="future"||_.type==="index"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S}).format(T)+" pt."}if(!Y.includes(_?.currency)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S},m)).format(T)+(_.currency==="N/A"?"":` ${_.currency}`)}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",currency:_.currency,minimumFractionDigits:S,maximumFractionDigits:S},m)).format(T)+` ${priceCurrencySymbol(_)}`}function formatPriceWithoutCurrency(T,_,m){if(typeof _==="undefined"){return(T||"").toString().replace(".",F)}if(typeof T!=="number"||isNaN(T))return"—";const S=getInstrumentPrecision(_,T,m);return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:S,maximumFractionDigits:S}).format(T)}function formatCommission(T,_,m={}){if(!_||typeof T!=="number"||isNaN(T))return"—";if(!_.currency)return"—";if(Y.indexOf(_?.currency)===-1){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:3},m)).format(T)+` ${_.currency}`}return new Intl.NumberFormat(ppp.i18nLocale,{style:"currency",currency:_.currency,minimumFractionDigits:2,maximumFractionDigits:3}).format(T)}function formatAmount(T,_={},m={}){const S=_.currency??_.quoteCryptoAsset;if(!S||typeof T!=="number"||isNaN(T))return"—";if(_.type==="future"){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal"},m)).format(T)+" пт."}if(!Y.includes(S)){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:0},m)).format(T)+` ${S}`}return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"currency",minimumFractionDigits:0,currency:S},m)).format(T)}function formatAbsoluteChange(T,_,m={}){if(!_||typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",minimumFractionDigits:2,maximumFractionDigits:Math.max(2,getInstrumentPrecision(_,T)),signDisplay:"always"},m)).format(T)}function formatRelativeChange(T,_={}){if(typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"always"},_)).format(T)}function formatPercentage(T){if(typeof T!=="number"||isNaN(T))return"—";return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:3}).format(T)}function formatQuantity(T,_){if(typeof T!=="number"||isNaN(T))return"—";let m=0;if(typeof _?.minQuantityIncrement==="number"){const[T,S]=_.minQuantityIncrement.toString().split(".");m=S?.length??0}return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal",minimumFractionDigits:m,maximumFractionDigits:m}).format(T)}function cyrillicToLatin(T){if(/^\p{Script=Cyrillic}+$/u.test(T)){const _='QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>~';const m="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁ";const S={};for(let T=0;T<m.length;T++){S[m[T]]=_[T]}return T.split("").map((T=>S[T.toUpperCase()])).join("")}else{return T}}function latinToCyrillic(T){if(/[a-z]+/i.test(T)){const _="QWERTYUIOP{}ASDFGHJKL:\"ZXCVBNM<>~,.`'[];";const m="ЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮЁБЮЁЭХЪЖ";const S={};for(let T=0;T<m.length;T++){S[_[T]]=m[T]}return T.split("").map((T=>S[T.toUpperCase()])).join("")}else{return T}}function priceCurrencySymbol(T){if(T?.type==="future"||T?.type==="index")return"pt.";if(T?.type==="cryptocurrency")return T.quoteCryptoAsset;if(T?.currency==="USDT")return"USDT";if(T?.currency&&T.currency!=="N/A"){return(0).toLocaleString(ppp.i18nLocale,{style:"currency",currency:T.currency,minimumFractionDigits:0,maximumFractionDigits:0}).replace(/\d/g,"").trim()}else return""}function currencyName(T){if(Y.indexOf(T)===-1){return T}if(!T)return"—";const _=new Intl.DisplayNames([ppp.i18nLocale],{type:"currency"});return _.of(T)}function isDST(){const T=new Date;const _=T.getFullYear();const m=new Date(_,2,1);const S=(7-m.getDay())%7;const E=m.getDate()+S+7;const I=new Date(_,2,E);const O=new Date(_,10,1);const N=(7-O.getDay())%7;const R=O.getDate()+N;const A=new Date(_,10,R);return T.getTime()<=A.getTime()&&T.getTime()>=I.getTime()}function formatFileSize(T,{si:_=true,dp:m=1,useIntl:S=false}={}){if(S){return new Intl.NumberFormat(ppp.i18nLocale,{style:"unit",unit:"byte",notation:"compact",unitDisplay:"narrow"}).format(T)}const E=_?1e3:1024;if(Math.abs(T)<E){return T+" B"}const I=_?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let O=-1;const N=10**m;do{T/=E;++O}while(Math.round(Math.abs(T)*N)/N>=E&&O<I.length-1);return T.toFixed(m)+" "+I[O]}function formatNumber(T,_={}){return new Intl.NumberFormat(ppp.i18nLocale,_).format(T)}function formatVolume(T,_={}){return new Intl.NumberFormat(ppp.i18nLocale,Object.assign({style:"decimal",notation:"compact",minimumFractionDigits:1,maximumFractionDigits:2},_)).format(T)}function parseDistance(T=""){let _="";T=T.trim();if(T.endsWith("%")){_="%"}else if(T.endsWith("+")){_="+"}T=T.replace(",",".").replace(/\s/g,"").replace(/[^\x20-\x7E]/g,"");let m=parseFloat(T);if(_==="+"){m=Math.trunc(m)}if(isNaN(m)){return{}}return{value:m,unit:_}}function distanceToString({value:T,unit:_}={}){if(typeof T==="undefined"){return""}if(_==="%"){return new Intl.NumberFormat(ppp.i18nLocale,{style:"percent",maximumFractionDigits:2}).format(T/100)}else if(_==="+"){return`${Math.trunc(T)} +`}else{return new Intl.NumberFormat(ppp.i18nLocale,{style:"decimal"}).format(T)}}class ConflictError extends Error{constructor({message:T="Conflict.",href:_,status:m=409,pppMessage:S}={}){super(T);this.name=this.constructor.name;this.status=m;this.href=_;this.pppMessage=S}}class AllocationNotFoundError extends Error{constructor({message:T}={}){super(T);this.name=this.constructor.name}}class DocumentNotFoundError extends Error{constructor({message:T,documentId:_}={}){super(T);this.name=this.constructor.name;this.documentId=_}}class ValidationError extends Error{constructor({message:T,status:_=422,element:m}={}){super(T);this.name="ValidationError";this.element=m;this.status=_}}class FetchError extends Error{constructor({message:T="Fetch failed.",status:_=400,pppMessage:m}={}){super(T);this.name=this.constructor.name;this.status=_;this.pppMessage=m}}async function maybeFetchError(T,_){let m,S;if(typeof T==="function"){const _=await T();m=_.ok;S=_.response}else{m=T.ok;S=T}if(!m){throw new FetchError({...S,...{message:await S.text(),pppMessage:_}})}else return S}class TradingError extends Error{constructor({message:T="Trading error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}serialize(){return{name:this.name,args:{message:this.message,details:this.details}}}}class RemoteTraderError extends Error{constructor({message:T="Trader error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}serialize(){return{name:this.name,args:{message:this.message,details:this.details}}}}class AuthorizationError extends Error{constructor({message:T="Authorization error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}}class ConnectionLimitExceededError extends Error{constructor({message:T="Connection limit exceeded."}={}){super(T);this.name=this.constructor.name}}class TraderTrinityError extends Error{constructor({message:T="Trader trinity error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}}class ConnectionError extends Error{constructor({message:T="Connection error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}}class UTEXBlockError extends Error{constructor({message:T="UTEX block error.",details:_}={}){super(T);this.name=this.constructor.name;this.details=_}}class NoInstrumentsError extends Error{constructor({message:T="No instruments.",trader:_,currentCacheVersion:m,lastCacheVersion:S}={}){super(T);this.name=this.constructor.name;this.trader=_;this.currentCacheVersion=m;this.lastCacheVersion=S}}class StaleInstrumentCacheError extends Error{constructor({message:T="Stale instrument cache.",trader:_,currentCacheVersion:m,lastCacheVersion:S}={}){super(T);this.name=this.constructor.name;this.trader=_;this.currentCacheVersion=m;this.lastCacheVersion=S}}class EventBus{#e={};isValidType(T){return typeof T==="string"}isValidHandler(T){return typeof T==="function"}on(T,_){if(!T||!_)return false;if(!this.isValidType(T))return false;if(!this.isValidHandler(_))return false;let m=this.#e[T];if(!m)m=this.#e[T]=[];if(m.indexOf(_)>=0)return false;_._once=false;m.push(_);return true}once(T,_){if(!T||!_)return false;if(!this.isValidType(T))return false;if(!this.isValidHandler(_))return false;const m=this.on(T,_);if(m){_._once=true}return m}off(T,_){if(!T)return this.offAll();if(!_){this.#e[T]=[];return}if(!this.isValidType(T))return;if(!this.isValidHandler(_))return;const m=this.#e[T];if(!m||!m.length)return;for(let T=0;T<m.length;T++){const S=m[T];if(S===_){m.splice(T,1);break}}}offAll(){this.#e={}}emit(T,_){if(!T||!this.isValidType(T))return;const m=this.#e[T];if(!m||!m.length)return;const S=this.createEvent(T,_);for(const _ of m){if(!this.isValidHandler(_))continue;if(_._once)S.once=true;_(S);if(S.once)this.off(T,_)}}has(T,_){if(!T||!this.isValidType(T))return false;const m=this.#e[T];if(!m||!m.length)return false;if(!_||!this.isValidHandler(_))return true;return m.indexOf(_)>=0}getHandlers(T){if(!T||!this.isValidType(T))return[];return this.#e[T]||[]}createEvent(T,_,m=false){const S={type:T,detail:_,timestamp:Date.now(),once:m};return S}}function $throttle(T,_){let m=false,S,E;function wrapper(){if(m){S=arguments;E=this;return}T.apply(this,arguments);m=true;setTimeout((function(){m=false;if(S){wrapper.apply(E,S);S=E=null}}),_)}return wrapper}function $debounce(T,_){let m;return function(){clearTimeout(m);m=setTimeout((()=>T.apply(this,arguments)),_)}}function throttle(T=0){return(_,m,S)=>{if(!S||typeof S.value!=="function"){throw new Error("throttle can only decorate functions.")}const E=S.value;S.value=$throttle(E,T);Object.defineProperty(_,m,S)}}function debounce(T=0){return(_,m,S)=>{if(!S||typeof S.value!=="function"){throw new Error("debounce can only decorate functions.")}const E=S.value;S.value=$debounce(E,T);Object.defineProperty(_,m,S)}}async function later(T){return new Promise((function(_){setTimeout(_,T)}))}function unsupportedInstrument(T=""){return{symbol:T,fullName:"Инструмент не поддерживается",notSupported:true}}class TraderDatum{sources={};refs=new Map;values=new Map;#t=new Map;trader;doNotSaveValue;constructor(T){this.trader=T}filter(T,_,m,S,E){return true}hasSource(T){for(const _ in this.sources){if(this.sources[_].has(T)){return true}}return false}dataArrived(T,_,m={}){if(!_){return}if(this.doNotSaveValue!==true&&m.doNotSaveValue!==true){const S=this.trader.getSymbol(_);if(typeof m.saveSlot==="undefined"){this.values.set(S,T)}else if(m.saveSlot>=0){const _=this.values.get(S)??[];_[m.saveSlot]=T;this.values.set(S,_)}}for(const S in this.sources){for(const[E,I]of this.sources[S]){if(this.trader.instrumentsAreEqual(E.instrument,_)&&this.filter(T,_,E,S,m)){this.trader.assignSourceField(E,I,this[S]?.(T,_,{source:E,options:m})??this.emptyValue(S)??"—")}}}}emptyValue(T){switch(T){case D.CANDLE:case D.MARKET_PRINT:case D.ORDERBOOK:case D.NOII:return{};case D.TRADING_STATUS:case D.STATUS:return""}return"—"}async subscribe(T,_,m){if(!this.#t.has(T)&&T.canChangeInstrument){const listener=async({detail:T})=>{const{source:_,oldValue:m}=T;for(const T of Object.keys(this.sources)){if(this.sources[T].has(_)){const S=this.sources[T].get(_);if(m){await this.unsubscribe(_,m)}await this.subscribe(_,S,T)}}};T.addEventListener("instrumentchange",listener);this.#t.set(T,listener)}if(!T.instrument){return}const S=this.trader.getSymbol(T.instrument);const E=this.refs.get(S)??0;if(E===0){this.refs.set(S,1);return this.firstReferenceAdded?.(T,S,m)}else{this.refs.set(S,E+1);const I=this.values.get(S);if(!Array.isArray(I)||this.slotted===false){if(typeof I!=="undefined"){if(this.filter(I,T.instrument,T,m,{origin:"datum"})){if(T.instrument){this.trader.assignSourceField(T,_,this[m]?.(I,T.instrument,{source:T,origin:"datum"})??this.emptyValue(m)??"—")}else{this.trader.assignSourceField(T,_,this.emptyValue(m)??"—")}}}}else{for(const S of I){if(this.filter(S,T.instrument,T,m,{origin:"datum"})){if(T.instrument&&typeof S!=="undefined"){this.trader.assignSourceField(T,_,this[m]?.(S,T.instrument,{source:T,origin:"datum"})??this.emptyValue(m)??"—")}else{this.trader.assignSourceField(T,_,this.emptyValue(m)??"—")}}}}}}async unsubscribe(T,_){if(!this.hasSource(T)&&T.canChangeInstrument){const _=this.#t.get(T);if(_){T.removeEventListener("instrumentchange",_);this.#t.delete(T)}}if(!_&&!T.instrument){return}const m=this.trader.getSymbol(_??T.instrument);const S=this.refs.get(m)??0;if(S===1){this.refs.delete(m);if(this.doNotClearValue!==true){this.values.delete(m)}return this.lastReferenceRemoved?.(T,m)}else if(S>1){this.refs.set(m,Math.max(0,S-1))}}}class GlobalTraderDatum{sources={};refCount=0;trader;value=new Map;#t=new Map;doNotSaveValue;doNotClearValue;manualAssignment;constructor(T){this.trader=T}filter(T,_,m,S,E){return true}dataArrived(T,_={}){const m=this.valueKeyForData(T);if(typeof m!=="undefined"){if(this.doNotSaveValue!==true&&_.doNotSaveValue!==true){this.value.set(m,T)}for(const S in this.sources){for(const[E,I]of this.sources[S]){if(this.filter(T,E,m,S,_)){if(this.manualAssignment!==true){this.trader.assignSourceField(E,I,this[S]?.(T,E,{key:m,field:I,origin:_.origin})??this.emptyValue(S)??"—")}else{this[S]?.(T,E,{key:m,field:I,origin:_.origin})}}}}}else{this.trader.$$debug("no key for data: %o",T)}}emptyValue(T){switch(T){case D.POSITION_SIZE:return 0;case D.POSITION_AVERAGE:return 0;case D.POSITION:case D.REAL_ORDER:case D.TIMELINE_ITEM:case D.TRADER:return{}}return"—"}valueKeyForData(T){return T?.symbol}async subscribe(T,_,m){if(!this.#t.has(T)&&T.canChangeInstrument){const listener=async({detail:T})=>{const{source:_}=T;for(const T of Object.keys(this.sources)){if(this.sources[T].has(_)){const m=this.sources[T].get(_);this.trader.assignSourceField(_,m,this.emptyValue(T));for(const[S,E]of this.value){if(this.filter(E,_,S,T,{origin:"datum"})){if(this.manualAssignment!==true){this.trader.assignSourceField(_,m,this[T]?.(E,_,{key:S,field:m,origin:"datum"})??this.emptyValue(T)??"—")}else{this[T]?.(E,_,{key:S,field:m,origin:"datum"})}}}}}};T.addEventListener("instrumentchange",listener);this.#t.set(T,listener)}if(this.refCount===0){this.refCount=1;return this.firstReferenceAdded?.(T,_,m)}else{this.refCount++;for(const[S,E]of this.value){if(this.filter(E,T,S,m,{origin:"datum"})){if(this.manualAssignment!==true){this.trader.assignSourceField(T,_,this[m]?.(E,T,{key:S,field:_,origin:"datum"})??this.emptyValue(m)??"—")}else{this[m]?.(E,T,{key:S,field:_,origin:"datum"})}}}}}async unsubscribe(T,_,m){if(!this.hasSource(T)&&T.canChangeInstrument){const _=this.#t.get(T);if(_){T.removeEventListener("instrumentchange",_);this.#t.delete(T)}}if(this.refCount===1){this.refCount=0;if(this.doNotClearValue!==true){this.value.clear()}return this.lastReferenceRemoved?.(T,_,m)}else if(this.refCount>1){this.refCount--}}}class TraderEventDatum extends GlobalTraderDatum{}class ConditionalOrderDatum extends GlobalTraderDatum{async firstReferenceAdded(){for(const T of await this.trader.conditionalOrders()){this.dataArrived(T,{origin:"datum"})}}valueKeyForData(T){return T?.orderId}[D.CONDITIONAL_ORDER](T){return T}}GlobalTraderDatum.prototype.hasSource=TraderDatum.prototype.hasSource;class Trader{datums={};document={};#n=new Map;get instruments(){return this.#n}#r=[];#i=[];createdAt=(new Date).toISOString();constructor(T,_=[]){this.document=T;_.forEach((({type:T,datums:_})=>{const m=new(this.getRealDatumType(T))(this);_.forEach((T=>{m.sources[T]=new Map;this.datums[T]=m}));this.#r.push(m)}))}conditionalOrderIdCounter=0;nextConditionalOrderId(){return`${Date.now()}:${this.conditionalOrderIdCounter++}`}getRealDatumType(T){return T}call(T){return T}serialize(){return{createdAt:this.createdAt,document:this.document,broker:this.getBroker(),dictionary:this.getDictionary(),exchange:this.getExchange(),observedAttributes:this.getObservedAttributes()}}#s(T,_,m){if(T==="global"){return this.#i.find((T=>T.payload.orderId===_))}else if(T==="instrument"){return this.#i.find((T=>T.payload.orderId===_&&this.instrumentsAreEqual(T.instrument,m)))}}async placeConditionalOrder({instrument:T,direction:_,payload:m,implUrl:S,code:E,instance:I}){if(!m?.orderId){throw new TradingError({message:"Missing payload.orderId.",details:{instrument:T,direction:_,payload:m}})}const O=m.order.singleton;const N=m.order.oneOff===true;let R;if(typeof S==="string"){R=this.#s(O,m.orderId,T);if(!R){const{default:T}=await __nccwpck_require__(930)(`${S}?t=${Date.now()}`);R=new T(this);R.factory=T;!N&&this.#i.push(R)}}else if(typeof E==="string"&&typeof process!=="undefined"&&process.release.name==="node"){R=this.#s(O,m.orderId,T);if(!R){if(!E){throw new TradingError({message:"Missing code.",details:{instrument:T,direction:_,payload:m}})}let S;globalThis.pppOrderInstanceForWorkerRecv=T=>S=T;try{globalThis.vm.runInThisContext(E,{filename:m.orderId})}finally{globalThis.pppOrderInstanceForWorkerRecv=null}if(!S){throw new TradingError({message:"Missing pppOrderInstanceForWorkerRecv.",details:{instrument:T,direction:_,payload:m}})}R=new S(this);R.factory=S;!N&&this.#i.push(R)}}else if(typeof I==="function"){R=this.#s(O,m.orderId,T);if(!R){R=new I(this);R.factory=I;!N&&this.#i.push(R)}}if(R){return R.place({instrument:T,direction:_,payload:m})}else{throw new TradingError({message:"Missing orderInstance.",details:{instrument:T,direction:_,payload:m}})}}async pco({instrument:T,direction:_,payload:m,implUrl:S,code:E,instance:I}){return this.placeConditionalOrder({instrument:T,direction:_,payload:m,implUrl:S,code:E,instance:I})}conditionalOrders(){const T=[];for(const _ of this.#i){if(typeof _.serialize==="function"){T.push(_.serialize())}}return T}async performConditionalOrderAction(T,_,m={}){const S=this.#i.find((_=>_.orderId===T));if(typeof S[_]==="function"){return S[_](m)}}async pcoa(T,_,m={}){return this.performConditionalOrderAction(T,_,m)}async cancelConditionalOrder(T,_={}){const m=this.#i.find((_=>_.orderId===T));if(m){this.#i.splice(this.#i.indexOf(m),1);if(typeof m.cancel==="function"){return m.cancel(_)}}}async cco(T,_={}){return this.cancelConditionalOrder(T,_)}async cancelAllConditionalOrders({instrument:T,filter:_,payload:m={}}={}){const S=[];for(const T of this.#i){S.push({orderId:T.orderId,instrument:T.instrument,side:T.side})}for(const E of S){if(T&&!this.instrumentsAreEqual(E.instrument,T)){continue}if(_==="buy"&&E.side!=="buy"){continue}if(_==="sell"&&E.side!=="sell"){continue}void this.cancelConditionalOrder(E.orderId,m)}}async instrumentsArrived(T){this.#n=T}async subscribeField({source:T,field:_,datum:m}){const S=this.datums[m];if(typeof S!=="undefined"){if(!S.sources[m].has(T)){S.sources[m].set(T,_);return S.subscribe(T,_,m)}}}async subscribeFields({source:T,fieldDatumPairs:_={}}){for(const[m,S]of Object.entries(_)){if(typeof S==="string"){await this.subscribeField({source:T,field:m,datum:S})}else if(typeof S==="object"){await this.subscribeField({source:T,field:m,datum:S.datum})}}}async unsubscribeField({source:T,datum:_}){const m=this.datums[_];if(typeof m!=="undefined"){if(m.sources[_].has(T)){m.sources[_].delete(T);return m.unsubscribe(T)}}}async unsubscribeFields({source:T,fieldDatumPairs:_={}}){for(const[m,S]of Object.entries(_)){await this.unsubscribeField({source:T,field:m,datum:S})}}async resubscribe(T=[]){const _=[];for(const m of this.#r){for(const S of Object.keys(m.sources)){for(const[E,I]of m.sources[S]){if(!T.length||T.includes(S)){_.push({source:E,field:I,datum:S})}}}}for(const{source:T,field:m,datum:S}of _){await this.unsubscribeField({source:T,field:m,datum:S})}for(const{source:T,field:m,datum:S}of _){await this.subscribeField({source:T,field:m,datum:S})}}async estimate(){return{}}async redisCommand(T,_=[]){if(globalThis.ppp?.runtime?.redis){return globalThis.ppp?.runtime?.redis.call(T,..._)}else{return null}}getEnvVar(T){if(typeof process!=="undefined"&&typeof process.env!=="undefined"){return process.env[T]}}assignSourceField(T,_,m){switch(this.document.runtime){case"main-thread":T[_]=m;break;case"shared-worker":if(T.mainTrader&&T.mainTrader.document._id===self.pppTrader.document._id){T[_]=m;return}T.port.postMessage({type:"assign",sourceID:T.sourceID,field:_,value:m});break;case"url":if(T.mainTrader===this){T[_]=m;return}!T.ws.closed&&T.ws.send(JSON.stringify([{T:"assign",sourceID:T.sourceID,field:_,value:m}]));break}}traderEvent(T={}){if(this.datums[D.TRADER]){for(const[_,m]of this.datums[D.TRADER].sources[D.TRADER]){this.assignSourceField(_,m,T)}}}relativeBondPriceToPrice(T,_){return this.fixPrice(_,T*_.nominal/100)}bondPriceToRelativeBondPrice(T,_){return+(T*100/_.nominal).toFixed(2)}caps(){return this.document.caps??[]}hasCap(T){const _=this.caps();if(typeof T==="string")return _.indexOf(T)>-1;else if(Array.isArray(T))return T.every((T=>_.indexOf(T)>-1));else return false}fixPrice(T,_){_=stringToFloat(_);const m=getInstrumentPrecision(T,_);if(!_||isNaN(_))_=0;const S=getInstrumentMinPriceIncrement(T,_);_=Math.round(_/S)*S;return+_.toFixed(m)}calcDistantPrice(T,_,m,S="down"){if(S!=="down"&&S!=="up"){S="down"}if(!T){return 0}_=stringToFloat(_);if(!_||isNaN(_)){return 0}let E=0;if(m.value>0){if(m.unit==="+"){const I=getInstrumentMinPriceIncrement(T,_)*m.value;E=S==="down"?_-I:_+I}else if(m.unit==="%"){E=S==="down"?_-_*m.value/100:_+_*m.value/100}else{E=Math.max(0,S==="down"?_-m.value:_+m.value)}if(E>0){return this.fixPrice(T,E)}else{return 0}}else{return _}}getSymbol(T={}){let _=T.symbol;if(!_)return"";if(/~/gi.test(_))_=_.split("~")[0];return _}symbolToCanonical(T=""){return T.replace("."," ").replace("-"," ").replace("/"," ")}adoptInstrument(T={},_={}){const m=this.#n.get(T.symbol)??{};let S=T.symbol===m.symbol;if(T.exchange===N.MOEX&&m.exchange!==N.MOEX){S=false}if(m.exchange===N.MOEX&&T.exchange!==N.MOEX){S=false}if(S){return m}else{return unsupportedInstrument(T.symbol)}}instrumentsAreEqual(T,_){const m=this.adoptInstrument(T);const S=this.adoptInstrument(_);return m.symbol===S.symbol&&m.exchange===S.exchange}getBroker(){return"*"}getDictionary(){return null}getExchange(){return"*"}getObservedAttributes(){return[]}getInstrumentIconUrl(T){if(!T||T?.symbol==="PRN"){return"static/instruments/unknown.svg"}if(T?.type==="currency"){return`static/currency/${T.symbol.slice(0,3)}.svg`}let _=T?.symbol;if(_==="TCS"&&T.exchange===N.SPBX){return"static/instruments/stocks/rus/TCSG.svg"}if((T.symbol==="GOLD"||T.symbol==="GOLD~MOEX")&&T.exchange===N.MOEX){return"static/instruments/etfs/rus/GOLD.svg"}if(typeof _==="string"){_=_.split("/")[0].split("-")[0].split("-RM")[0];if(_.endsWith("@GS")||_.endsWith("@DE")||_.endsWith("@GR")||_.endsWith("@UR")||_.endsWith("@KT")){return"static/instruments/unknown.svg"}_=_.split("@US")[0]}if(T?.currency==="HKD"){return`static/instruments/stocks/hk/${_.replace(" ","-")}.svg`}if(T?.currency==="CNY"){return`static/instruments/${T?.type}s/cny/${_.replace(" ","-")}.svg`}const m=T?.symbol?.endsWith("-RM");if(!m){if(T?.exchange===N.MOEX||T?.currency==="RUB"){return`static/instruments/${T?.type}s/rus/${_.replace(" ","-")}.svg`}}if((T?.exchange===N.SPBX||m)&&_!=="TCS"){return`static/instruments/stocks/us/${_.replace(" ","-")}.svg`}if(T?.exchange===N.US){return`static/instruments/stocks/us/${_.replace(" ","-").split("~")[0]}.svg`}return"static/instruments/unknown.svg"}search(T=""){let _=null;const m=[];const S=[];const E=[];const I=[];const O=T.trim().replaceAll(/[^~a-z0-9\.\s\u0400-\u04FF]/gi,"").toUpperCase();const N=cyrillicToLatin(O);const R=latinToCyrillic(O);if(typeof this.instrumentsSearchIndex==="undefined"){this.instrumentsSearchIndex=[];for(const[T,_]of this.instruments){if(T){const T=this.getSymbol(_);const m=T.length;this.instrumentsSearchIndex[m]??={};this.instrumentsSearchIndex[m][T]??=[];this.instrumentsSearchIndex[m][T].push(_)}}}if(O.length){for(const T of this.instrumentsSearchIndex){if(T){for(const A in T){for(const P of T[A]){if(P.removed)continue;let T=P.symbol.replaceAll(/[^~a-z0-9\s\u0400-\u04FF]/gi,"").toUpperCase();const A=this.getSymbol(P);const C=P.fullName.toUpperCase();if((T===O||A===O)&&_===null){_=P}if(m.length<10&&(T.startsWith(O)||T.startsWith(N)||T.startsWith(R))){m.push(P)}if(E.length<10&&(C.startsWith(O)||C.startsWith(N)||C.startsWith(R))){E.push(P)}if(S.length<10&&(new RegExp(O,"ig").test(T)||new RegExp(N,"ig").test(T)||new RegExp(R,"ig").test(T))){S.push(P)}if(C&&I.length<10&&(new RegExp(O,"ig").test(C)||new RegExp(N,"ig").test(C)||new RegExp(R,"ig").test(C))){I.push(P)}}}}}}return{exactSymbolMatch:_,startsWithSymbolMatches:m,regexSymbolMatches:S.sort(((T,_)=>T.fullName.localeCompare(_.fullName))),startsWithFullNameMatches:E.sort(((T,_)=>T.fullName.localeCompare(_.fullName))),regexFullNameMatches:I.sort(((T,_)=>T.fullName.localeCompare(_.fullName)))}}}class USTrader extends(null&&Trader){adoptInstrument(T={}){if(![EXCHANGE.SPBX,EXCHANGE.US,EXCHANGE.UTEX_MARGIN_STOCKS].includes(T.exchange)){return unsupportedInstrument(T.symbol)}if(T.symbol==="SPB@US"){return this.instruments.get("SPB")}if(T.symbol==="TCS"&&T.exchange===EXCHANGE.SPBX){return unsupportedInstrument(T.symbol)}let _=true;["FIVE","CARM","ASTR","GOLD"].forEach((m=>{if(this.getSymbol(T)===m&&T.exchange===EXCHANGE.MOEX){_=false}}));if(!_){return unsupportedInstrument(T.symbol)}if(T.symbol?.endsWith("~US")){return super.adoptInstrument({...T,...{symbol:T.symbol.replace("~US","")}})}return super.adoptInstrument(T)}getInstrumentIconUrl(T){if(!T){return"static/instruments/unknown.svg"}if(T.symbol==="PRN"){return"static/instruments/stocks/us/PRN@US.svg"}if(T.currency==="USD"||T.currency==="USDT"){return`static/instruments/stocks/us/${T.symbol.replace(" ","-").replace("/","-")}.svg`}return super.getInstrumentIconUrl(T)}}function pppTraderInstanceForWorkerIs(T){if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.pppTraderInstance??=T}else if(typeof process!=="undefined"&&process.release.name==="node"){globalThis.pppTraderInstanceForWorkerRecv?.(T)}}class RemoteSource{bus=new EventBus;port;sourceID;canChangeInstrument;constructor(T,_,m){this.sourceID=T;this.canChangeInstrument=!!_;this.port=m}instrument;attributes=new Map;getAttribute(T){return this.attributes.get(T)}addEventListener(T,_){return this.bus.on(T,_)}removeEventListener(T,_){return this.bus.off(T,_)}}class RemoteTraderRuntime{document;#o;#a;#u;#d;#c;#f;#l=new Map;get worker(){return this.#u}constructor(T){this.document=T;if(this.document.runtime==="url"){const T=new URL(this.document.runtimeUrl);if(T.protocol==="http:"){T.protocol="ws:"}else{T.protocol="wss:"}this.#f=new URL(T).toString()}}#T(){if(typeof this.#c==="undefined"){this.#c=100}else{this.#c+=100;if(this.#c>500){this.#c=500}}return this.#c}#p(T){if(this.#d?.readyState===WebSocket.OPEN){return this.#d}else if(this.#a&&!T){return this.#a}else{this.#a=new Promise((T=>{this.#d=new WebSocket(this.#f);this.#d.onclose=async()=>{await later(this.#T());T(this.#p(true))};this.#d.onerror=()=>this.#d.close();this.#d.onmessage=({data:_})=>{const m=JSON.parse(_);if(Array.isArray(m)){for(const _ of m){if(_.T==="ready"){return T(this.#d)}else if(_.T==="success"&&_.msg==="connected"){return this.#d.send(JSON.stringify({T:"connack",_id:this.document._id}))}else if(_.T==="assign"){const T=this.#l.get(_.sourceID);if(T?.sourceID===_.sourceID){T[_.field]=_.value}}}}}}));return this.#a}}async subscribeField({source:T,field:_,datum:m}){if(this.document.runtime==="shared-worker"){const S=new MessageChannel;S.port1.onmessage=({data:_})=>{if(_?.type==="assign"){if(T.sourceID===_.sourceID){T[_.field]=_.value}}};self.pppPorts[0].postMessage({type:"shared-worker-subscribe-field",document:this.document,port2:S.port2,sourceID:T.sourceID,instrument:T.instrument,canChangeInstrument:T.canChangeInstrument,field:_,datum:m},[S.port2])}else if(this.document.runtime==="url"){await this.#p();this.#d.send(JSON.stringify({T:"source-changed",sourceID:T.sourceID,reason:"instrument",oldValue:null,newValue:T.instrument,canChangeInstrument:T.canChangeInstrument,doNotFire:true}));this.#l.set(T.sourceID,T);return this.#d.send(JSON.stringify({T:"subscribe-field",sourceID:T.sourceID,field:_,datum:m,canChangeInstrument:T.canChangeInstrument}))}}async subscribeFields({source:T,fieldDatumPairs:_={}}){for(const[m,S]of Object.entries(_)){if(typeof S==="string"){await this.subscribeField({source:T,field:m,datum:S})}else if(typeof S==="object"){await this.subscribeField({source:T,field:m,datum:S.datum})}}}async unsubscribeField({source:T,field:_,datum:m}){if(this.document.runtime==="shared-worker"){return self.pppPorts[0].postMessage({type:"shared-worker-unsubscribe-field",document:this.document,sourceID:T.sourceID,field:_,datum:m})}else if(this.document.runtime==="url"){await this.#p();return this.#d.send(JSON.stringify({T:"unsubscribe-field",sourceID:T.sourceID,field:_,datum:m}))}}async unsubscribeFields({source:T,fieldDatumPairs:_={}}){for(const[m,S]of Object.entries(_)){await this.unsubscribeField({source:T,field:m,datum:S})}}async resubscribe(T=[]){if(this.document.runtime==="shared-worker"){return self.pppPorts[0].postMessage({type:"shared-worker-resubscribe",document:this.document,onlyForDatums:T})}else if(this.document.runtime==="url"){await this.#p();return this.#d.send(JSON.stringify({T:"resubscribe",onlyForDatums:T}))}}async loadSharedOrRemoteTrader(){if(this.#o){return this.#o}else{switch(this.document.runtime){case"main-thread":return null;case"shared-worker":if(this.document._id===self.pppTrader?.document?._id){return self.pppTrader}return this.#o=new Promise((T=>{const _=new MessageChannel;const m=setTimeout((()=>T(null)),5e3);_.port1.onmessage=({data:_})=>{if(_.type==="shared-worker-created"){clearTimeout(m);T(this)}};self.pppPorts[0].postMessage({type:"shared-worker-needed",document:this.document,port2:_.port2},[_.port2])}));case"url":await this.#p();return this}}}}class RemoteTradersFromSharedWorker{runtimes=new Map;async getOrCreateTrader(T){if(T){if(T.runtime==="main-thread"){return null}if(!this.runtimes.has(T._id)){this.runtimes.set(T._id,new RemoteTraderRuntime(T))}return this.runtimes.get(T._id).loadSharedOrRemoteTrader()}}}if(typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope){self.ppp=new class{traders=new RemoteTradersFromSharedWorker;async getOrCreateTrader(T){return this.traders.getOrCreateTrader(T)}async fetch(T,_={},m=[]){const S=self.globalProxyUrl;if(S){const E=new URL(T);_.headers??={};_.headers["X-Host"]=E.hostname;for(const T of Object.keys(_.headers)){const _=T.toLowerCase();if(_==="x-host"){continue}if(!m.includes(_)){m.push(T)}}_.headers["X-Allowed-Headers"]=m.join(",");E.hostname=new URL(S).hostname;return fetch(E.toString(),_)}else{return fetch(T,_)}}};self.sessionStorage=new class{#_=new Map;getItem(T){return this.#_.get(T)}setItem(T,_){this.#_.set(T,_)}removeItem(T){this.#_.delete(T)}};self.pppSources=new Map;self.pppPortSources=new WeakMap;self.pppPorts=[];self.onconnect=T=>{const _=T.ports[0];self.pppPortSources.set(_,new Set);const multiPurposeEventListener=async({data:T})=>{if(T?.type==="close"){const T=self.pppPorts.indexOf(_);if(T>-1){self.pppPorts.splice(T,1)}_.removeEventListener("message",multiPurposeEventListener);if(self.pppPortSources.has(_)){for(const T of self.pppPortSources.get(_)){for(const _ in self.pppTrader.datums){const m=self.pppTrader.datums[_].sources[_];if(m.has(T)){await self.pppTrader.unsubscribeField({source:T,datum:_})}}}self.pppPortSources.delete(_)}}else if(T?.type==="connack"){if(typeof self.pppTrader==="undefined"){self.pppTrader=new self.pppTraderInstance(T.document);self.globalProxyUrl=T.globalProxyUrl;self.rootUrl=T.rootUrl;await __nccwpck_require__(723)(`${self.rootUrl}/lib/debug.js`);self.pppTrader.$$debug??=globalThis.ppp.$debug(T.document._id);self.pppTrader.$$connection??=self.pppTrader.$$debug.extend("connection");if(typeof self.pppTrader.oneTimeInitializationCallback==="function"){await self.pppTrader.oneTimeInitializationCallback()}}_.postMessage({type:"init"})}else if(T?.type==="instruments"){if(typeof self.pppTrader!=="undefined"){await(self.pppTrader.instrumentsArrived?.(T.instruments));_.postMessage({type:"ready"})}}else if(T?.type==="rpc"){try{_.postMessage({type:`rpc-${T.rid}`,response:await self.pppTrader[T.method](...T.args)})}catch(m){_.postMessage({type:`rpc-${T.rid}`,exception:m.serialize?.()??{name:m.name??"RemoteTraderError",args:{details:m.name,message:m.message}}})}}else if(T?.type==="source-changed"){if(!self.pppSources.has(T.sourceID)){self.pppSources.set(T.sourceID,new RemoteSource(T.sourceID,T.canChangeInstrument,T.port2??_));if(!T.port2){self.pppPortSources.get(_).add(self.pppSources.get(T.sourceID))}}const m=self.pppSources.get(T.sourceID);switch(T.reason){case"attribute":m.attributes.set(T.attribute,T.value);break;case"instrument":m.instrument=T.newValue;if(!T.doNotFire){m.bus.emit("instrumentchange",{source:m,oldValue:T.oldValue,newValue:T.newValue})}break}}else if(T?.type==="subscribe-field"){const m=self.pppSources.get(T.sourceID);if(m){try{await self.pppTrader.subscribeField({source:m,field:T.field,datum:T.datum})}catch(m){console.error(m);_.postMessage({type:"subscription-exception",sourceKey:`${T.sourceID}:${T.field}`,exception:m.serialize?.()??{name:m.name??"RemoteTraderError",args:{details:m.name,message:m.message}}})}}}else if(T?.type==="unsubscribe-field"){const _=self.pppSources.get(T.sourceID);if(_){self.pppTrader.unsubscribeField({source:_,field:T.field,datum:T.datum})}}else if(T?.type==="resubscribe"){self.pppTrader.resubscribe(T.onlyForDatums??[])}else if(T?.type==="terminate"){_.removeEventListener("message",multiPurposeEventListener);self.close()}};_.addEventListener("message",multiPurposeEventListener);!self.pppPorts.includes(_)&&self.pppPorts.push(_);_.start();_.postMessage({type:"conn"})}}function composeClientMiddleware(T,_){return(m,S)=>_({...m,next:(_,S)=>T({...m,request:_},S)},S)}function fromGrpcWebServiceDefinition(T){const _={};for(const[m,S]of Object.entries(T)){if(m==="serviceName"){continue}const E=S;_[uncapitalize(m)]={path:`/${T.serviceName}/${m}`,requestStream:E.requestStream,responseStream:E.responseStream,requestDeserialize:E.requestType.deserializeBinary,requestSerialize:T=>T.serializeBinary(),responseDeserialize:E.responseType.deserializeBinary,responseSerialize:T=>T.serializeBinary(),options:{}}}return _}function isGrpcWebServiceDefinition(T){return"prototype"in T}function uncapitalize(T){if(T.length===0){return T}return T[0].toLowerCase()+T.slice(1)}function fromTsProtoServiceDefinition(T){const _={};for(const[m,S]of Object.entries(T.methods)){const E=S.requestType.encode;const I=S.requestType.fromPartial;const O=S.responseType.encode;const N=S.responseType.fromPartial;_[m]={path:`/${T.fullName}/${S.name}`,requestStream:S.requestStream,responseStream:S.responseStream,requestDeserialize:S.requestType.decode,requestSerialize:I!=null?T=>E(I(T)).finish():T=>E(T).finish(),responseDeserialize:S.responseType.decode,responseSerialize:N!=null?T=>O(N(T)).finish():T=>O(T).finish(),options:S.options}}return _}function isTsProtoServiceDefinition(T){return"name"in T&&"fullName"in T&&"methods"in T}function normalizeServiceDefinition(T){if(isGrpcWebServiceDefinition(T)){return fromGrpcWebServiceDefinition(T)}else if(isTsProtoServiceDefinition(T)){return fromTsProtoServiceDefinition(T)}else{return T}}function toGrpcWebMethodDefinition(T){const[,_,m]=T.path.split("/");return{service:{serviceName:_},methodName:m,requestStream:T.requestStream,responseStream:T.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(_){return T.requestDeserialize(_)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(_){return T.responseDeserialize(_)}}}}var M;(function(T){T[T["OK"]=0]="OK";T[T["CANCELLED"]=1]="CANCELLED";T[T["UNKNOWN"]=2]="UNKNOWN";T[T["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT";T[T["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED";T[T["NOT_FOUND"]=5]="NOT_FOUND";T[T["ALREADY_EXISTS"]=6]="ALREADY_EXISTS";T[T["PERMISSION_DENIED"]=7]="PERMISSION_DENIED";T[T["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED";T[T["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION";T[T["ABORTED"]=10]="ABORTED";T[T["OUT_OF_RANGE"]=11]="OUT_OF_RANGE";T[T["UNIMPLEMENTED"]=12]="UNIMPLEMENTED";T[T["INTERNAL"]=13]="INTERNAL";T[T["UNAVAILABLE"]=14]="UNAVAILABLE";T[T["DATA_LOSS"]=15]="DATA_LOSS";T[T["UNAUTHENTICATED"]=16]="UNAUTHENTICATED"})(M||(M={}));class ExtendableError extends Error{constructor(...T){super(...T);const _=T.length>0&&typeof T[0]==="string"?T[0]:"";if(this.name===undefined||this.name==="Error"){Object.defineProperty(this,"name",{configurable:true,enumerable:false,value:this.constructor.name,writable:true})}Object.defineProperty(this,"message",{configurable:true,enumerable:false,value:_,writable:true});Object.defineProperty(this,"stack",{configurable:true,enumerable:false,value:"",writable:true});if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor)}else if(this.stack===""){this.stack=new Error(_).stack}}}class ClientError extends ExtendableError{constructor(T,_,m){super(`${T} ${M[_]}: ${m}`);this.path=T;this.code=_;this.details=m;this.name="ClientError";Object.defineProperty(this,"@@nice-grpc",{value:true});Object.defineProperty(this,"@@nice-grpc:ClientError",{value:true})}static[Symbol.hasInstance](T){if(this!==ClientError){return this.prototype.isPrototypeOf(T)}return typeof T==="object"&&T!==null&&(T.constructor===ClientError||T["@@nice-grpc:ClientError"]===true||T.name==="ClientError"&&T["@@nice-grpc"]===true)}}const J=function Metadata(T){const _=new Map;const m={set(T,S){T=normalizeKey(T);if(Array.isArray(S)){if(S.length===0){_.delete(T)}else{for(const _ of S){validate(T,_)}_.set(T,T.endsWith("-bin")?S:[S.join(", ")])}}else{validate(T,S);_.set(T,[S])}return m},append(T,S){T=normalizeKey(T);validate(T,S);let E=_.get(T);if(E==null){E=[];_.set(T,E)}E.push(S);if(!T.endsWith("-bin")){_.set(T,[E.join(", ")])}return m},delete(T){T=normalizeKey(T);_.delete(T)},get(T){T=normalizeKey(T);return _.get(T)?.[0]},getAll(T){T=normalizeKey(T);return _.get(T)??[]},has(T){T=normalizeKey(T);return _.has(T)},[Symbol.iterator](){return _[Symbol.iterator]()}};if(T!=null){const _=isIterable(T)?T:Object.entries(T);for(const[T,S]of _){m.set(T,S)}}return m};function normalizeKey(T){return T.toLowerCase()}function validate(T,_){if(!/^[0-9a-z_.-]+$/.test(T)){throw new Error(`Metadata key '${T}' contains illegal characters`)}if(T.endsWith("-bin")){if(!(_ instanceof Uint8Array)){throw new Error(`Metadata key '${T}' ends with '-bin', thus it must have binary value`)}}else{if(typeof _!=="string"){throw new Error(`Metadata key '${T}' doesn't end with '-bin', thus it must have string value`)}if(!/^[ -~]*$/.test(_)){throw new Error(`Metadata value '${_}' of key '${T}' contains illegal characters`)}}}function isIterable(T){return Symbol.iterator in T}function iterateHeaders(T,_){const m=T[Symbol.iterator]();let S=m.next();while(!S.done){_(S.value[0]);S=m.next()}}function iterateHeadersKeys(T,_){const m=T.keys();let S=m.next();while(!S.done){_(S.value);S=m.next()}}function normalizeName(T){if(typeof T!=="string"){T=String(T)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(T)){throw new TypeError("Invalid character in header field name")}return T.toLowerCase()}function normalizeValue(T){if(typeof T!=="string"){T=String(T)}return T}function getHeaderValues(T,_){const m=toWindowHeaders(T);if(m instanceof Headers&&m.getAll){return m.getAll(_)}const S=m.get(_);if(S&&typeof S==="string"){return[S]}return S}function toWindowHeaders(T){return T}function getHeaderKeys(T){const _=toWindowHeaders(T);const m={};const S=[];if(_.keys){iterateHeadersKeys(_,(T=>{if(!m[T]){m[T]=true;S.push(T)}}))}else if(_.forEach){_.forEach(((T,_)=>{if(!m[_]){m[_]=true;S.push(_)}}))}else{iterateHeaders(_,(T=>{const _=T[0];if(!m[_]){m[_]=true;S.push(_)}}))}return S}function splitHeaderValue(T){const _=[];const m=T.split(", ");m.forEach((T=>{T.split(",").forEach((T=>{_.push(T)}))}));return _}function isBrowserHeaders(T){return typeof T==="object"&&typeof T.headersMap==="object"&&typeof T.forEach==="function"}class BrowserHeaders{constructor(T={},_={splitValues:false}){this.headersMap={};if(T){if(typeof Headers!=="undefined"&&T instanceof Headers){const m=getHeaderKeys(T);m.forEach((m=>{const S=getHeaderValues(T,m);S.forEach((T=>{if(_.splitValues){this.append(m,splitHeaderValue(T))}else{this.append(m,T)}}))}))}else if(isBrowserHeaders(T)){T.forEach(((T,_)=>{this.append(T,_)}))}else if(typeof Map!=="undefined"&&T instanceof Map){const _=T;_.forEach(((T,_)=>{this.append(_,T)}))}else if(typeof T==="string"){this.appendFromString(T)}else if(typeof T==="object"){Object.getOwnPropertyNames(T).forEach((_=>{const m=T;const S=m[_];if(Array.isArray(S)){S.forEach((T=>{this.append(_,T)}))}else{this.append(_,S)}}))}}}appendFromString(T){const _=T.split("\r\n");for(let T=0;T<_.length;T++){const m=_[T];const S=m.indexOf(":");if(S>0){const T=m.substring(0,S).trim();const _=m.substring(S+1).trim();this.append(T,_)}}}delete(T,_){const m=normalizeName(T);if(_===undefined){delete this.headersMap[m]}else{const T=this.headersMap[m];if(T){const S=T.indexOf(_);if(S>=0){T.splice(S,1)}if(T.length===0){delete this.headersMap[m]}}}}append(T,_){const m=normalizeName(T);if(!Array.isArray(this.headersMap[m])){this.headersMap[m]=[]}if(Array.isArray(_)){_.forEach((T=>{this.headersMap[m].push(normalizeValue(T))}))}else{this.headersMap[m].push(normalizeValue(_))}}set(T,_){const m=normalizeName(T);if(Array.isArray(_)){const T=[];_.forEach((_=>{T.push(normalizeValue(_))}));this.headersMap[m]=T}else{this.headersMap[m]=[normalizeValue(_)]}}has(T,_){const m=this.headersMap[normalizeName(T)];const S=Array.isArray(m);if(!S){return false}if(_!==undefined){const T=normalizeValue(_);return m.indexOf(T)>=0}else{return true}}get(T){const _=this.headersMap[normalizeName(T)];if(_!==undefined){return _.concat()}return[]}forEach(T){Object.getOwnPropertyNames(this.headersMap).forEach((_=>{T(_,this.headersMap[_])}),this)}toHeaders(){if(typeof Headers!=="undefined"){const T=new Headers;this.forEach(((_,m)=>{m.forEach((m=>{T.append(_,m)}))}));return T}else{throw new Error("Headers class is not defined")}}}function debug(...T){console.log.apply(null,T)}function FetchReadableStreamTransport(T){return _=>fetchRequest(_,T)}function fetchRequest(T,_){T.debug&&debug("fetchRequest",T);return new Fetch(T,_)}class Fetch{constructor(T,_){this.cancelled=false;this.controller=self.AbortController&&new AbortController;this.options=T;this.init=_}pump(T,_){this.reader=T;if(this.cancelled){this.options.debug&&debug("Fetch.pump.cancel at first pump");this.reader.cancel().catch((T=>{this.options.debug&&debug("Fetch.pump.reader.cancel exception",T)}));return}this.reader.read().then((T=>{if(T.done){this.options.onEnd();return _}this.options.onChunk(T.value);this.pump(this.reader,_)})).catch((T=>{if(this.cancelled){this.options.debug&&debug("Fetch.catch - request cancelled");return}this.cancelled=true;this.options.debug&&debug("Fetch.catch",T.message);this.options.onEnd(T)}))}send(T){fetch(this.options.url,{...this.init,headers:this.metadata.toHeaders(),method:"POST",body:T,signal:this.controller&&this.controller.signal}).then((T=>{this.options.debug&&debug("Fetch.response",T);this.options.onHeaders(new BrowserHeaders(T.headers),T.status);if(T.body){this.pump(T.body.getReader(),T);return}return T})).catch((T=>{if(this.cancelled){this.options.debug&&debug("Fetch.catch - request cancelled");return}this.cancelled=true;this.options.debug&&debug("Fetch.catch",T.message);this.options.onEnd(T)}))}sendMessage(T){this.send(T)}finishSend(){}start(T){this.metadata=T}cancel(){if(this.cancelled){this.options.debug&&debug("Fetch.cancel already cancelled");return}this.cancelled=true;if(this.controller){this.options.debug&&debug("Fetch.cancel.controller.abort");this.controller.abort()}else{this.options.debug&&debug("Fetch.cancel.missing abort controller")}if(this.reader){this.options.debug&&debug("Fetch.cancel.reader.cancel");this.reader.cancel().catch((T=>{this.options.debug&&debug("Fetch.cancel.reader.cancel exception",T)}))}else{this.options.debug&&debug("Fetch.cancel before reader")}}}function CrossBrowserHttpTransport(T){const _={credentials:T.withCredentials?"include":"same-origin"};return FetchReadableStreamTransport(_)}let defaultTransportFactory=T=>CrossBrowserHttpTransport({withCredentials:false})(T);function setDefaultTransportFactory(T){defaultTransportFactory=T}function makeDefaultTransport(T){return defaultTransportFactory(T)}const G=5;const isAllowedControlChars=T=>T===9||T===10||T===13;function isValidHeaderAscii(T){return isAllowedControlChars(T)||T>=32&&T<=126}function decodeASCII(T){for(let _=0;_!==T.length;++_){if(!isValidHeaderAscii(T[_])){throw new Error("Metadata is not valid (printable) ASCII")}}return String.fromCharCode(...Array.prototype.slice.call(T))}function encodeASCII(T){const _=new Uint8Array(T.length);for(let m=0;m!==T.length;++m){const S=T.charCodeAt(m);if(!isValidHeaderAscii(S)){throw new Error("Metadata contains invalid ASCII")}_[m]=S}return _}function isTrailerHeader(T){return(T.getUint8(0)&128)===128}function parseTrailerData(T){return new BrowserHeaders(decodeASCII(T))}function readLengthFromHeader(T){return T.getUint32(1,false)}function hasEnoughBytes(T,_,m){return T.byteLength-_>=m}function sliceUint8Array(T,_,m){if(T.slice){return T.slice(_,m)}let S=T.length;if(m!==undefined){S=m}const E=S-_;const I=new Uint8Array(E);let O=0;for(let m=_;m<S;m++){I[O++]=T[m]}return I}var x;(function(T){T[T["MESSAGE"]=1]="MESSAGE";T[T["TRAILERS"]=2]="TRAILERS"})(x||(x={}));class ChunkParser{constructor(){this.buffer=null;this.position=0}parse(T,_){if(T.length===0&&_){return[]}const m=[];if(this.buffer==null){this.buffer=T;this.position=0}else if(this.position===this.buffer.byteLength){this.buffer=T;this.position=0}else{const _=this.buffer.byteLength-this.position;const m=new Uint8Array(_+T.byteLength);const S=sliceUint8Array(this.buffer,this.position);m.set(S,0);const E=new Uint8Array(T);m.set(E,_);this.buffer=m;this.position=0}while(true){if(!hasEnoughBytes(this.buffer,this.position,G)){return m}let T=sliceUint8Array(this.buffer,this.position,this.position+G);const _=new DataView(T.buffer,T.byteOffset,T.byteLength);const S=readLengthFromHeader(_);if(!hasEnoughBytes(this.buffer,this.position,G+S)){return m}const E=sliceUint8Array(this.buffer,this.position+G,this.position+G+S);this.position+=G+S;if(isTrailerHeader(_)){m.push({chunkType:x.TRAILERS,trailers:parseTrailerData(E)});return m}else{m.push({chunkType:x.MESSAGE,data:E})}}}}let q;(function(T){T[T["FINISH_SEND"]=1]="FINISH_SEND"})(q||(q={}));const V=new Uint8Array([1]);function WebsocketTransport(){return T=>websocketRequest(T)}function websocketRequest(T){T.debug&&debug("websocketRequest",T);let _=constructWebSocketAddress(T.url);const m=[];let S;function sendToWebsocket(T){if(T===q.FINISH_SEND){S.send(V)}else{const _=T;const m=new Int8Array(_.byteLength+1);m.set(new Uint8Array([0]));m.set(_,1);S.send(m)}}return{sendMessage:T=>{if(!S||S.readyState===S.CONNECTING){m.push(T)}else{sendToWebsocket(T)}},finishSend:()=>{if(!S||S.readyState===S.CONNECTING){m.push(q.FINISH_SEND)}else{sendToWebsocket(q.FINISH_SEND)}},start:E=>{S=new WebSocket(_,["grpc-websockets"]);S.binaryType="arraybuffer";S.onopen=function(){T.debug&&debug("websocketRequest.onopen");S.send(headersToBytes(E));m.forEach((T=>{sendToWebsocket(T)}))};S.onclose=function(_){T.debug&&debug("websocketRequest.onclose",_);T.onEnd()};S.onerror=function(_){T.debug&&debug("websocketRequest.onerror",_)};S.onmessage=function(_){T.onChunk(new Uint8Array(_.data))}},cancel:()=>{T.debug&&debug("websocket.abort");S.close()}}}function constructWebSocketAddress(T){if(T.startsWith("https://")){return`wss://${T.substring(8)}`}else if(T.startsWith("http://")){return`ws://${T.substring(7)}`}throw new Error("Websocket transport constructed with non-https:// or http:// host.")}function headersToBytes(T){let _="";T.forEach(((T,m)=>{_+=`${T}: ${m.join(", ")}\r\n`}));return encodeASCII(_)}var Z;(function(T){T[T["OK"]=0]="OK";T[T["Canceled"]=1]="Canceled";T[T["Unknown"]=2]="Unknown";T[T["InvalidArgument"]=3]="InvalidArgument";T[T["DeadlineExceeded"]=4]="DeadlineExceeded";T[T["NotFound"]=5]="NotFound";T[T["AlreadyExists"]=6]="AlreadyExists";T[T["PermissionDenied"]=7]="PermissionDenied";T[T["ResourceExhausted"]=8]="ResourceExhausted";T[T["FailedPrecondition"]=9]="FailedPrecondition";T[T["Aborted"]=10]="Aborted";T[T["OutOfRange"]=11]="OutOfRange";T[T["Unimplemented"]=12]="Unimplemented";T[T["Internal"]=13]="Internal";T[T["Unavailable"]=14]="Unavailable";T[T["DataLoss"]=15]="DataLoss";T[T["Unauthenticated"]=16]="Unauthenticated"})(Z||(Z={}));function httpStatusToCode(T){switch(T){case 0:return Z.Internal;case 200:return Z.OK;case 400:return Z.InvalidArgument;case 401:return Z.Unauthenticated;case 403:return Z.PermissionDenied;case 404:return Z.NotFound;case 409:return Z.Aborted;case 412:return Z.FailedPrecondition;case 429:return Z.ResourceExhausted;case 499:return Z.Canceled;case 500:return Z.Unknown;case 501:return Z.Unimplemented;case 503:return Z.Unavailable;case 504:return Z.DeadlineExceeded;default:return Z.Unknown}}function frameRequest(T){const _=T.serializeBinary();const m=new ArrayBuffer(_.byteLength+5);new DataView(m,1,4).setUint32(0,_.length,false);new Uint8Array(m,5).set(_);return new Uint8Array(m)}function client_client(T,_){return new GrpcClient(T,_)}class GrpcClient{constructor(T,_){this.started=false;this.sentFirstMessage=false;this.completed=false;this.closed=false;this.finishedSending=false;this.onHeadersCallbacks=[];this.onMessageCallbacks=[];this.onEndCallbacks=[];this.parser=new ChunkParser;this.methodDefinition=T;this.props=_;this.createTransport()}createTransport(){const T=`${this.props.host}/${this.methodDefinition.service.serviceName}/${this.methodDefinition.methodName}`;const _={methodDefinition:this.methodDefinition,debug:this.props.debug||false,url:T,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};if(this.props.transport){this.transport=this.props.transport(_)}else{this.transport=makeDefaultTransport(_)}}onTransportHeaders(T,_){this.props.debug&&debug("onHeaders",T,_);if(this.closed){this.props.debug&&debug("grpc.onHeaders received after request was closed - ignoring");return}if(_===0){}else{this.responseHeaders=T;this.props.debug&&debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));const m=getStatusFromHeaders(T);this.props.debug&&debug("onHeaders.gRPCStatus",m);const S=m&&m>=0?m:httpStatusToCode(_);this.props.debug&&debug("onHeaders.code",S);const E=T.get("grpc-message")||[];this.props.debug&&debug("onHeaders.gRPCMessage",E);this.rawOnHeaders(T);if(S!==Z.OK){const _=this.decodeGRPCStatus(E[0]);this.rawOnError(S,_,T)}}}onTransportChunk(T){if(this.closed){this.props.debug&&debug("grpc.onChunk received after request was closed - ignoring");return}let _=[];try{_=this.parser.parse(T)}catch(T){this.props.debug&&debug("onChunk.parsing error",T,T.message);this.rawOnError(Z.Internal,`parsing error: ${T.message}`);return}_.forEach((T=>{if(T.chunkType===x.MESSAGE){const _=this.methodDefinition.responseType.deserializeBinary(T.data);this.rawOnMessage(_)}else if(T.chunkType===x.TRAILERS){if(!this.responseHeaders){this.responseHeaders=new BrowserHeaders(T.trailers);this.rawOnHeaders(this.responseHeaders)}else{this.responseTrailers=new BrowserHeaders(T.trailers);this.props.debug&&debug("onChunk.trailers",this.responseTrailers)}}}))}onTransportEnd(){this.props.debug&&debug("grpc.onEnd");if(this.closed){this.props.debug&&debug("grpc.onEnd received after request was closed - ignoring");return}if(this.responseTrailers===undefined){if(this.responseHeaders===undefined){this.rawOnError(Z.Unknown,"Response closed without headers");return}const T=getStatusFromHeaders(this.responseHeaders);const _=this.responseHeaders.get("grpc-message");this.props.debug&&debug("grpc.headers only response ",T,_);if(T===null){this.rawOnEnd(Z.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);return}const m=this.decodeGRPCStatus(_[0]);this.rawOnEnd(T,m,this.responseHeaders);return}const T=getStatusFromHeaders(this.responseTrailers);if(T===null){this.rawOnError(Z.Internal,"Response closed without grpc-status (Trailers provided)");return}const _=this.responseTrailers.get("grpc-message");const m=this.decodeGRPCStatus(_[0]);this.rawOnEnd(T,m,this.responseTrailers)}decodeGRPCStatus(T){if(T){try{return decodeURIComponent(T)}catch(_){return T}}else{return""}}rawOnEnd(T,_,m){this.props.debug&&debug("rawOnEnd",T,_,m);if(this.completed)return;this.completed=true;this.onEndCallbacks.forEach((S=>{if(this.closed)return;try{S(T,_,m)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnHeaders(T){this.props.debug&&debug("rawOnHeaders",T);if(this.completed)return;this.onHeadersCallbacks.forEach((_=>{try{_(T)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnError(T,_,m=new BrowserHeaders){this.props.debug&&debug("rawOnError",T,_);if(this.completed)return;this.completed=true;this.onEndCallbacks.forEach((S=>{if(this.closed)return;try{S(T,_,m)}catch(T){setTimeout((()=>{throw T}),0)}}))}rawOnMessage(T){this.props.debug&&debug("rawOnMessage",T.toObject());if(this.completed||this.closed)return;this.onMessageCallbacks.forEach((_=>{if(this.closed)return;try{_(T)}catch(T){setTimeout((()=>{throw T}),0)}}))}onHeaders(T){this.onHeadersCallbacks.push(T)}onMessage(T){this.onMessageCallbacks.push(T)}onEnd(T){this.onEndCallbacks.push(T)}start(T){if(this.started){throw new Error("Client already started - cannot .start()")}this.started=true;const _=new BrowserHeaders(T?T:{});_.set("content-type","application/grpc-web+proto");_.set("x-grpc-web","1");this.transport.start(_)}send(T){if(!this.started){throw new Error("Client not started - .start() must be called before .send()")}if(this.closed){throw new Error("Client already closed - cannot .send()")}if(this.finishedSending){throw new Error("Client already finished sending - cannot .send()")}if(!this.methodDefinition.requestStream&&this.sentFirstMessage){throw new Error("Message already sent for non-client-streaming method - cannot .send()")}this.sentFirstMessage=true;const _=frameRequest(T);this.transport.sendMessage(_)}finishSend(){if(!this.started){throw new Error("Client not started - .finishSend() must be called before .close()")}if(this.closed){throw new Error("Client already closed - cannot .send()")}if(this.finishedSending){throw new Error("Client already finished sending - cannot .finishSend()")}this.finishedSending=true;this.transport.finishSend()}close(){if(!this.started){throw new Error("Client not started - .start() must be called before .close()")}if(!this.closed){this.closed=true;this.props.debug&&debug("request.abort aborting request");this.transport.cancel()}else{throw new Error("Client already closed - cannot .close()")}}}function getStatusFromHeaders(T){const _=T.get("grpc-status")||[];if(_.length>0){try{const T=_[0];return parseInt(T,10)}catch(T){return null}}return null}function invoke(T,_){if(T.requestStream){throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.")}const m=client_client(T,{host:_.host,transport:_.transport,debug:_.debug});if(_.onHeaders){m.onHeaders(_.onHeaders)}if(_.onMessage){m.onMessage(_.onMessage)}if(_.onEnd){m.onEnd(_.onEnd)}m.start(_.metadata);m.send(_.request);m.finishSend();return{close:()=>{m.close()}}}function unary(T,_){if(T.responseStream){throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.")}if(T.requestStream){throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.")}let m=null;let S=null;const E=client_client(T,{host:_.host,transport:_.transport,debug:_.debug});E.onHeaders((T=>{m=T}));E.onMessage((T=>{S=T}));E.onEnd(((T,E,I)=>{_.onEnd({status:T,statusMessage:E,headers:m?m:new BrowserHeaders,message:S,trailers:I})}));E.start(_.metadata);E.send(_.request);E.finishSend();return{close:()=>{E.close()}}}var X;(function(T){T.setDefaultTransport=setDefaultTransportFactory;T.CrossBrowserHttpTransport=CrossBrowserHttpTransport;T.FetchReadableStreamTransport=FetchReadableStreamTransport;T.WebsocketTransport=WebsocketTransport;T.Code=Z;T.Metadata=BrowserHeaders;function client(T,_){return client_client(T,_)}T.client=client;T.invoke=invoke;T.unary=unary})(X||(X={}));class AbortError extends Error{constructor(){super("The operation has been aborted");this.message="The operation has been aborted";this.name="AbortError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,this.constructor)}}}function isAbortError(T){return typeof T==="object"&&T!==null&&T.name==="AbortError"}function throwIfAborted(T){if(T.aborted){throw new AbortError}}function rethrowAbortError(T){if(isAbortError(T)){throw T}}function catchAbortError(T){if(isAbortError(T)){return}throw T}function execute(T,_){return new Promise(((m,S)=>{if(T.aborted){S(new AbortError);return}let E;let I=false;function finish(){if(!I){I=true;if(E!=null){E()}}}const O=_((T=>{m(T);finish()}),(T=>{S(T);finish()}));if(!I){const listener=()=>{const T=O();if(T==null){S(new AbortError)}else{T.then((()=>{S(new AbortError)}),(T=>{S(T)}))}finish()};T.addEventListener("abort",listener);E=()=>{T.removeEventListener("abort",listener)}}}))}const W="value";const H="error";class AsyncSink{constructor(){this._ended=false;this._values=[];this._resolvers=[]}[Symbol.asyncIterator](){return this}write(T){this._push({type:W,value:T})}error(T){this._push({type:H,error:T})}_push(T){if(this._ended){throw new Error("AsyncSink already ended")}if(this._resolvers.length>0){const{resolve:_,reject:m}=this._resolvers.shift();if(T.type===H){m(T.error)}else{_({done:false,value:T.value})}}else{this._values.push(T)}}next(){if(this._values.length>0){const{type:T,value:_,error:m}=this._values.shift();if(T===H){return Promise.reject(m)}else{return Promise.resolve({done:false,value:_})}}if(this._ended){return Promise.resolve({done:true})}return new Promise(((T,_)=>{this._resolvers.push({resolve:T,reject:_})}))}end(){while(this._resolvers.length>0){this._resolvers.shift().resolve({done:true})}this._ended=true}}function isAsyncIterable(T){return T!=null&&Symbol.asyncIterator in T}let K="3.7.3",z=K,$="function"==typeof atob,j="function"==typeof btoa,Q="function"==typeof Buffer,ee="function"==typeof TextDecoder?new TextDecoder:void 0,te="function"==typeof TextEncoder?new TextEncoder:void 0,ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",re=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),ie=(T=>{let _={};return T.forEach(((T,m)=>_[T]=m)),_})(re),se=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,oe=String.fromCharCode.bind(String),ae="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(T,_=(T=>T))=>new Uint8Array(Array.prototype.slice.call(T,0).map(_)),_mkUriSafe=T=>T.replace(/=/g,"").replace(/[+\/]/g,(T=>"+"==T?"-":"_")),_tidyB64=T=>T.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=T=>{let _,m,S,E,I="",O=T.length%3;for(let O=0;O<T.length;){if((m=T.charCodeAt(O++))>255||(S=T.charCodeAt(O++))>255||(E=T.charCodeAt(O++))>255)throw TypeError("invalid character found");I+=re[(_=m<<16|S<<8|E)>>18&63]+re[_>>12&63]+re[_>>6&63]+re[63&_]}return O?I.slice(0,O-3)+"===".substring(O):I},ue=j?T=>btoa(T):Q?T=>Buffer.from(T,"binary").toString("base64"):btoaPolyfill,de=Q?T=>Buffer.from(T).toString("base64"):T=>{let _=[];for(let m=0,S=T.length;m<S;m+=4096)_.push(oe.apply(null,T.subarray(m,m+4096)));return ue(_.join(""))},fromUint8Array=(T,_=!1)=>_?_mkUriSafe(de(T)):de(T),cb_utob=T=>{if(T.length<2){var _=T.charCodeAt(0);return _<128?T:_<2048?oe(192|_>>>6)+oe(128|63&_):oe(224|_>>>12&15)+oe(128|_>>>6&63)+oe(128|63&_)}var _=65536+(T.charCodeAt(0)-55296)*1024+(T.charCodeAt(1)-56320);return oe(240|_>>>18&7)+oe(128|_>>>12&63)+oe(128|_>>>6&63)+oe(128|63&_)},ce=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=T=>T.replace(ce,cb_utob),fe=Q?T=>Buffer.from(T,"utf8").toString("base64"):te?T=>de(te.encode(T)):T=>ue(utob(T)),encode=(T,_=!1)=>_?_mkUriSafe(fe(T)):fe(T),base64_min_encodeURI=T=>encode(T,!0),le=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=T=>{switch(T.length){case 4:var _,m=((7&T.charCodeAt(0))<<18|(63&T.charCodeAt(1))<<12|(63&T.charCodeAt(2))<<6|63&T.charCodeAt(3))-65536;return oe((m>>>10)+55296)+oe((1023&m)+56320);case 3:return oe((15&T.charCodeAt(0))<<12|(63&T.charCodeAt(1))<<6|63&T.charCodeAt(2));default:return oe((31&T.charCodeAt(0))<<6|63&T.charCodeAt(1))}},btou=T=>T.replace(le,cb_btou),atobPolyfill=T=>{if(T=T.replace(/\s+/g,""),!se.test(T))throw TypeError("malformed base64.");T+="==".slice(2-(3&T.length));let _,m="",S,E;for(let I=0;I<T.length;)_=ie[T.charAt(I++)]<<18|ie[T.charAt(I++)]<<12|(S=ie[T.charAt(I++)])<<6|(E=ie[T.charAt(I++)]),m+=64===S?oe(_>>16&255):64===E?oe(_>>16&255,_>>8&255):oe(_>>16&255,_>>8&255,255&_);return m},Te=$?T=>atob(_tidyB64(T)):Q?T=>Buffer.from(T,"base64").toString("binary"):atobPolyfill,pe=Q?T=>ae(Buffer.from(T,"base64")):T=>ae(Te(T),(T=>T.charCodeAt(0))),toUint8Array=T=>pe(_unURI(T)),_e=Q?T=>Buffer.from(T,"base64").toString("utf8"):ee?T=>ee.decode(pe(T)):T=>btou(Te(T)),_unURI=T=>_tidyB64(T.replace(/[-_]/g,(T=>"-"==T?"+":"/"))),decode=T=>_e(_unURI(T)),isValid=T=>{if("string"!=typeof T)return!1;let _=T.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(_)||!/[^\s0-9a-zA-Z\-_]/.test(_)},_noEnum=T=>({value:T,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){let e=(T,_)=>Object.defineProperty(String.prototype,T,_noEnum(_));e("fromBase64",(function(){return decode(this)})),e("toBase64",(function(T){return encode(this,T)})),e("toBase64URI",(function(){return encode(this,!0)})),e("toBase64URL",(function(){return encode(this,!0)})),e("toUint8Array",(function(){return toUint8Array(this)}))},extendUint8Array=function(){let e=(T,_)=>Object.defineProperty(Uint8Array.prototype,T,_noEnum(_));e("toBase64",(function(T){return fromUint8Array(this,T)})),e("toBase64URI",(function(){return fromUint8Array(this,!0)})),e("toBase64URL",(function(){return fromUint8Array(this,!0)}))},extendBuiltins=()=>{extendString(),extendUint8Array()},me={version:K,VERSION:z,atob:Te,atobPolyfill:atobPolyfill,btoa:ue,btoaPolyfill:btoaPolyfill,fromBase64:decode,toBase64:encode,encode:encode,encodeURI:base64_min_encodeURI,encodeURL:base64_min_encodeURI,utob:utob,btou:btou,decode:decode,isValid:isValid,fromUint8Array:fromUint8Array,toUint8Array:toUint8Array,extendString:extendString,extendUint8Array:extendUint8Array,extendBuiltins:extendBuiltins};function convertMetadataToGrpcWeb(T){const _=new X.Metadata;for(const[m,S]of T){for(const T of S){_.append(m,typeof T==="string"?T:me.fromUint8Array(T))}}return _}function convertMetadataFromGrpcWeb(T){const _=J();for(const[m,S]of Object.entries(T.headersMap)){if(m.endsWith("-bin")){for(const T of S){for(const S of T.split(/,\s?/)){_.append(m,me.toUint8Array(S))}}}else{_.set(m,S)}}return _}function createBidiStreamingMethod(T,_,m,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*bidiStreamingMethod(m,S){if(!isAsyncIterable(m)){throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method")}const{metadata:I=J(),signal:O=(new AbortController).signal,onHeader:N,onTrailer:R}=S;const A=new AbortController;const P=new AsyncSink;const C=X.client(E,{host:_.address,transport:_.transport});C.onHeaders((T=>{N?.(convertMetadataFromGrpcWeb(T))}));C.onMessage((T=>{P.write(T)}));C.onEnd(((_,m,S)=>{R?.(convertMetadataFromGrpcWeb(S));if(_===X.Code.OK){P.end()}else{P.error(new ClientError(T.path,+_,m))}}));C.start(convertMetadataToGrpcWeb(I));let k;pipeRequest(A.signal,m,C,T).then((()=>{C.finishSend()}),(T=>{if(!isAbortError(T)){k=T;C.close();P.end()}}));const abortListener=()=>{P.error(new AbortError);A.abort();C.close()};O.addEventListener("abort",abortListener);try{yield*P}finally{A.abort();O.removeEventListener("abort",abortListener);throwIfAborted(O);if(k){throw k}}}const O=m==null?bidiStreamingMethod:(T,_)=>m({method:I,requestStream:true,request:T,responseStream:true,next:bidiStreamingMethod},_);return(T,_)=>{const m=O(T,{...S,..._});const E=m[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const T=await E.next();if(T.done&&T.value!=null){return await E.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method"))}return T},return(){return E.return()},throw(T){return E.throw(T)}}}}}}async function pipeRequest(T,_,m,S){for await(const E of _){throwIfAborted(T);m.send({serializeBinary:()=>S.requestSerialize(E)})}}function createClientStreamingMethod(T,_,m,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*clientStreamingMethod(m,S){if(!isAsyncIterable(m)){throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method")}const{metadata:I=J(),signal:O=(new AbortController).signal,onHeader:N,onTrailer:R}=S;return await execute(O,((S,O)=>{const A=new AbortController;let P;const C=X.client(E,{host:_.address,transport:_.transport});C.onHeaders((T=>{N?.(convertMetadataFromGrpcWeb(T))}));C.onMessage((T=>{P=T}));C.onEnd(((_,m,E)=>{R?.(convertMetadataFromGrpcWeb(E));A.abort();if(_===X.Code.OK){S(P)}else{O(new ClientError(T.path,+_,m))}}));C.start(convertMetadataToGrpcWeb(I));createClientStreamingMethod_pipeRequest(A.signal,m,C,T).then((()=>{C.finishSend()}),(T=>{if(!isAbortError(T)){O(T);C.close()}}));return()=>{A.abort();C.close()}}))}const O=m==null?clientStreamingMethod:(T,_)=>m({method:I,requestStream:true,request:T,responseStream:false,next:clientStreamingMethod},_);return async(T,_)=>{const m=O(T,{...S,..._});const E=m[Symbol.asyncIterator]();let I=await E.next();while(true){if(!I.done){I=await E.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(I.value==null){I=await E.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return I.value}}}async function createClientStreamingMethod_pipeRequest(T,_,m,S){for await(const E of _){throwIfAborted(T);m.send({serializeBinary:()=>S.requestSerialize(E)})}}function createServerStreamingMethod(T,_,m,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*serverStreamingMethod(m,S){if(isAsyncIterable(m)){throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method")}const{metadata:I=J(),signal:O=(new AbortController).signal,onHeader:N,onTrailer:R}=S;const A=new AsyncSink;const P=X.client(E,{host:_.address,transport:_.transport});P.onHeaders((T=>{N?.(convertMetadataFromGrpcWeb(T))}));P.onMessage((T=>{A.write(T)}));P.onEnd(((_,m,S)=>{R?.(convertMetadataFromGrpcWeb(S));if(_===X.Code.OK){A.end()}else{A.error(new ClientError(T.path,+_,m))}}));P.start(convertMetadataToGrpcWeb(I));P.send({serializeBinary:()=>T.requestSerialize(m)});P.finishSend();const abortListener=()=>{A.error(new AbortError);P.close()};O.addEventListener("abort",abortListener);try{yield*A}finally{O.removeEventListener("abort",abortListener);throwIfAborted(O)}}const O=m==null?serverStreamingMethod:(T,_)=>m({method:I,requestStream:false,request:T,responseStream:true,next:serverStreamingMethod},_);return(T,_)=>{const m=O(T,{...S,..._});const E=m[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const T=await E.next();if(T.done&&T.value!=null){return await E.throw(new Error("A middleware returned a message, but expected to return void for server streaming method"))}return T},return(){return E.return()},throw(T){return E.throw(T)}}}}}}function createUnaryMethod(T,_,m,S){const E=toGrpcWebMethodDefinition(T);const I={path:T.path,requestStream:T.requestStream,responseStream:T.responseStream,options:T.options};async function*unaryMethod(m,S){if(isAsyncIterable(m)){throw new Error("A middleware passed invalid request to next(): expected a single message for unary method")}const{metadata:I=J(),signal:O=(new AbortController).signal,onHeader:N,onTrailer:R}=S;return await execute(O,((S,O)=>{let A;const P=X.client(E,{host:_.address,transport:_.transport});P.onHeaders((T=>{N?.(convertMetadataFromGrpcWeb(T))}));P.onMessage((T=>{A=T}));P.onEnd(((_,m,E)=>{R?.(convertMetadataFromGrpcWeb(E));if(_===X.Code.OK){S(A)}else{O(new ClientError(T.path,+_,m))}}));P.start(convertMetadataToGrpcWeb(I));P.send({serializeBinary:()=>T.requestSerialize(m)});P.finishSend();return()=>{P.close()}}))}const O=m==null?unaryMethod:(T,_)=>m({method:I,requestStream:false,request:T,responseStream:false,next:unaryMethod},_);return async(T,_)=>{const m=O(T,{...S,..._});const E=m[Symbol.asyncIterator]();let I=await E.next();while(true){if(!I.done){I=await E.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(I.value==null){I=await E.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return I.value}}}function createClientFactory(){return createClientFactoryWithMiddleware()}function createClient(T,_,m){return createClientFactory().create(T,_,m)}function createClientFactoryWithMiddleware(T){return{use(_){return createClientFactoryWithMiddleware(T==null?_:composeClientMiddleware(T,_))},create(_,m,S={}){const E={};const I=Object.entries(normalizeServiceDefinition(_));for(const[_,O]of I){const I={...S["*"],...S[_]};if(!O.requestStream){if(!O.responseStream){E[_]=createUnaryMethod(O,m,T,I)}else{E[_]=createServerStreamingMethod(O,m,T,I)}}else{if(!O.responseStream){E[_]=createClientStreamingMethod(O,m,T,I)}else{E[_]=createBidiStreamingMethod(O,m,T,I)}}}return E}}}function createChannel(T,_){return{address:T,transport:_}}
/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
var Se=null;try{Se=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Se){}function t(T,_,m){this.low=0|T,this.high=0|_,this.unsigned=!!m}function h(T){return!0===(T&&T.__isLong__)}function n(T){var _=Math.clz32(T&-T);return T?31-_:_}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=h;var Ee={},Ie={};function r(T,_){var m,S,E;return _?(E=0<=(T>>>=0)&&T<256)&&(S=Ie[T])?S:(m=o(T,0,!0),E&&(Ie[T]=m),m):(E=-128<=(T|=0)&&T<128)&&(S=Ee[T])?S:(m=o(T,T<0?-1:0,!1),E&&(Ee[T]=m),m)}function u(T,_){if(isNaN(T))return _?be:ge;if(_){if(T<0)return be;if(T>=Re)return Ue}else{if(T<=-he)return De;if(T+1>=he)return ke}return T<0?u(-T,_).neg():o(T%Ne|0,T/Ne|0,_)}function o(T,_,m){return new t(T,_,m)}t.fromInt=r,t.fromNumber=u,t.fromBits=o;var Oe=Math.pow;function l(T,_,m){if(0===T.length)throw Error("empty string");if("number"==typeof _?(m=_,_=!1):_=!!_,"NaN"===T||"Infinity"===T||"+Infinity"===T||"-Infinity"===T)return _?be:ge;if((m=m||10)<2||36<m)throw RangeError("radix");var S;if((S=T.indexOf("-"))>0)throw Error("interior hyphen");if(0===S)return l(T.substring(1),_,m).neg();for(var E=u(Oe(m,8)),I=ge,O=0;O<T.length;O+=8){var N=Math.min(8,T.length-O),R=parseInt(T.substring(O,O+N),m);if(N<8){var A=u(Oe(m,N));I=I.mul(A).add(u(R))}else I=(I=I.mul(E)).add(u(R))}return I.unsigned=_,I}function f(T,_){return"number"==typeof T?u(T,_):"string"==typeof T?l(T,_):o(T.low,T.high,"boolean"==typeof _?_:T.unsigned)}t.fromString=l,t.fromValue=f;var Ne=4294967296,Re=Ne*Ne,he=Re/2,Ae=r(1<<24),ge=r(0);t.ZERO=ge;var be=r(0,!0);t.UZERO=be;var Pe=r(1);t.ONE=Pe;var ye=r(1,!0);t.UONE=ye;var Ce=r(-1);t.NEG_ONE=Ce;var ke=o(-1,2147483647,!1);t.MAX_VALUE=ke;var Ue=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=Ue;var De=o(0,-2147483648,!1);t.MIN_VALUE=De;var we=t.prototype;we.toInt=function(){return this.unsigned?this.low>>>0:this.low},we.toNumber=function(){return this.unsigned?(this.high>>>0)*Ne+(this.low>>>0):this.high*Ne+(this.low>>>0)},we.toString=function(T){if((T=T||10)<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(De)){var _=u(T),m=this.div(_),S=m.mul(_).sub(this);return m.toString(T)+S.toInt().toString(T)}return"-"+this.neg().toString(T)}for(var E=u(Oe(T,6),this.unsigned),I=this,O="";;){var N=I.div(E),R=(I.sub(N.mul(E)).toInt()>>>0).toString(T);if((I=N).isZero())return R+O;for(;R.length<6;)R="0"+R;O=""+R+O}},we.getHighBits=function(){return this.high},we.getHighBitsUnsigned=function(){return this.high>>>0},we.getLowBits=function(){return this.low},we.getLowBitsUnsigned=function(){return this.low>>>0},we.getNumBitsAbs=function(){if(this.isNegative())return this.eq(De)?64:this.neg().getNumBitsAbs();for(var T=0!=this.high?this.high:this.low,_=31;_>0&&0==(T&1<<_);_--);return 0!=this.high?_+33:_+1},we.isZero=function(){return 0===this.high&&0===this.low},we.eqz=we.isZero,we.isNegative=function(){return!this.unsigned&&this.high<0},we.isPositive=function(){return this.unsigned||this.high>=0},we.isOdd=function(){return 1==(1&this.low)},we.isEven=function(){return 0==(1&this.low)},we.equals=function(T){return h(T)||(T=f(T)),(this.unsigned===T.unsigned||this.high>>>31!=1||T.high>>>31!=1)&&(this.high===T.high&&this.low===T.low)},we.eq=we.equals,we.notEquals=function(T){return!this.eq(T)},we.neq=we.notEquals,we.ne=we.notEquals,we.lessThan=function(T){return this.comp(T)<0},we.lt=we.lessThan,we.lessThanOrEqual=function(T){return this.comp(T)<=0},we.lte=we.lessThanOrEqual,we.le=we.lessThanOrEqual,we.greaterThan=function(T){return this.comp(T)>0},we.gt=we.greaterThan,we.greaterThanOrEqual=function(T){return this.comp(T)>=0},we.gte=we.greaterThanOrEqual,we.ge=we.greaterThanOrEqual,we.compare=function(T){if(h(T)||(T=f(T)),this.eq(T))return 0;var _=this.isNegative(),m=T.isNegative();return _&&!m?-1:!_&&m?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},we.comp=we.compare,we.negate=function(){return!this.unsigned&&this.eq(De)?De:this.not().add(Pe)},we.neg=we.negate,we.add=function(T){h(T)||(T=f(T));var _=this.high>>>16,m=65535&this.high,S=this.low>>>16,E=65535&this.low,I=T.high>>>16,O=65535&T.high,N=T.low>>>16,R=0,A=0,P=0,C=0;return P+=(C+=E+(65535&T.low))>>>16,A+=(P+=S+N)>>>16,R+=(A+=m+O)>>>16,R+=_+I,o((P&=65535)<<16|(C&=65535),(R&=65535)<<16|(A&=65535),this.unsigned)},we.subtract=function(T){return h(T)||(T=f(T)),this.add(T.neg())},we.sub=we.subtract,we.multiply=function(T){if(this.isZero())return this;if(h(T)||(T=f(T)),Se)return o(Se.mul(this.low,this.high,T.low,T.high),Se.get_high(),this.unsigned);if(T.isZero())return this.unsigned?be:ge;if(this.eq(De))return T.isOdd()?De:ge;if(T.eq(De))return this.isOdd()?De:ge;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(Ae)&&T.lt(Ae))return u(this.toNumber()*T.toNumber(),this.unsigned);var _=this.high>>>16,m=65535&this.high,S=this.low>>>16,E=65535&this.low,I=T.high>>>16,O=65535&T.high,N=T.low>>>16,R=65535&T.low,A=0,P=0,C=0,k=0;return C+=(k+=E*R)>>>16,P+=(C+=S*R)>>>16,C&=65535,P+=(C+=E*N)>>>16,A+=(P+=m*R)>>>16,P&=65535,A+=(P+=S*N)>>>16,P&=65535,A+=(P+=E*O)>>>16,A+=_*R+m*N+S*O+E*I,o((C&=65535)<<16|(k&=65535),(A&=65535)<<16|(P&=65535),this.unsigned)},we.mul=we.multiply,we.divide=function(T){if(h(T)||(T=f(T)),T.isZero())throw Error("division by zero");var _,m,S;if(Se)return this.unsigned||-2147483648!==this.high||-1!==T.low||-1!==T.high?o((this.unsigned?Se.div_u:Se.div_s)(this.low,this.high,T.low,T.high),Se.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?be:ge;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return be;if(T.gt(this.shru(1)))return ye;S=be}else{if(this.eq(De))return T.eq(Pe)||T.eq(Ce)?De:T.eq(De)?Pe:(_=this.shr(1).div(T).shl(1)).eq(ge)?T.isNegative()?Pe:Ce:(m=this.sub(T.mul(_)),S=_.add(m.div(T)));if(T.eq(De))return this.unsigned?be:ge;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();S=ge}for(m=this;m.gte(T);){_=Math.max(1,Math.floor(m.toNumber()/T.toNumber()));for(var E=Math.ceil(Math.log(_)/Math.LN2),I=E<=48?1:Oe(2,E-48),O=u(_),N=O.mul(T);N.isNegative()||N.gt(m);)N=(O=u(_-=I,this.unsigned)).mul(T);O.isZero()&&(O=Pe),S=S.add(O),m=m.sub(N)}return S},we.div=we.divide,we.modulo=function(T){return h(T)||(T=f(T)),Se?o((this.unsigned?Se.rem_u:Se.rem_s)(this.low,this.high,T.low,T.high),Se.get_high(),this.unsigned):this.sub(this.div(T).mul(T))},we.mod=we.modulo,we.rem=we.modulo,we.not=function(){return o(~this.low,~this.high,this.unsigned)},we.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},we.clz=we.countLeadingZeros,we.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},we.ctz=we.countTrailingZeros,we.and=function(T){return h(T)||(T=f(T)),o(this.low&T.low,this.high&T.high,this.unsigned)},we.or=function(T){return h(T)||(T=f(T)),o(this.low|T.low,this.high|T.high,this.unsigned)},we.xor=function(T){return h(T)||(T=f(T)),o(this.low^T.low,this.high^T.high,this.unsigned)},we.shiftLeft=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):o(0,this.low<<T-32,this.unsigned)},we.shl=we.shiftLeft,we.shiftRight=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):o(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},we.shr=we.shiftRight,we.shiftRightUnsigned=function(T){return h(T)&&(T=T.toInt()),0==(T&=63)?this:T<32?o(this.low>>>T|this.high<<32-T,this.high>>>T,this.unsigned):o(32===T?this.high:this.high>>>T-32,0,this.unsigned)},we.shru=we.shiftRightUnsigned,we.shr_u=we.shiftRightUnsigned,we.rotateLeft=function(T){var _;return h(T)&&(T=T.toInt()),0==(T&=63)?this:32===T?o(this.high,this.low,this.unsigned):T<32?(_=32-T,o(this.low<<T|this.high>>>_,this.high<<T|this.low>>>_,this.unsigned)):(_=32-(T-=32),o(this.high<<T|this.low>>>_,this.low<<T|this.high>>>_,this.unsigned))},we.rotl=we.rotateLeft,we.rotateRight=function(T){var _;return h(T)&&(T=T.toInt()),0==(T&=63)?this:32===T?o(this.high,this.low,this.unsigned):T<32?(_=32-T,o(this.high<<_|this.low>>>T,this.low<<_|this.high>>>T,this.unsigned)):(_=32-(T-=32),o(this.low<<_|this.high>>>T,this.high<<_|this.low>>>T,this.unsigned))},we.rotr=we.rotateRight,we.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},we.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},we.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},we.toBytesLE=function(){var T=this.high,_=this.low;return[255&_,_>>>8&255,_>>>16&255,_>>>24,255&T,T>>>8&255,T>>>16&255,T>>>24]},we.toBytesBE=function(){var T=this.high,_=this.low;return[T>>>24,T>>>16&255,T>>>8&255,255&T,_>>>24,_>>>16&255,_>>>8&255,255&_]},t.fromBytes=function(T,_,m){return m?t.fromBytesLE(T,_):t.fromBytesBE(T,_)},t.fromBytesLE=function(T,_){return new t(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,_)},t.fromBytesBE=function(T,_){return new t(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],_)};var Le=__nccwpck_require__(221);const Be="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}const ve={encode(T,_=Le.Z.Writer.create()){if(T.seconds!==0){_.uint32(8).int64(T.seconds)}if(T.nanos!==0){_.uint32(16).int32(T.nanos)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTimestamp();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.seconds=longToNumber(m.int64());break;case 2:E.nanos=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{seconds:isSet(T.seconds)?Number(T.seconds):0,nanos:isSet(T.nanos)?Number(T.nanos):0}},toJSON(T){const _={};T.seconds!==undefined&&(_.seconds=Math.round(T.seconds));T.nanos!==undefined&&(_.nanos=Math.round(T.nanos));return _}};function longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function isSet(T){return T!==null&&T!==undefined}const Ye="tinkoff.public.invest.api.contract.v1";var Fe;(function(T){T[T["SECURITY_TRADING_STATUS_UNSPECIFIED"]=0]="SECURITY_TRADING_STATUS_UNSPECIFIED";T[T["SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING"]=1]="SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING";T[T["SECURITY_TRADING_STATUS_OPENING_PERIOD"]=2]="SECURITY_TRADING_STATUS_OPENING_PERIOD";T[T["SECURITY_TRADING_STATUS_CLOSING_PERIOD"]=3]="SECURITY_TRADING_STATUS_CLOSING_PERIOD";T[T["SECURITY_TRADING_STATUS_BREAK_IN_TRADING"]=4]="SECURITY_TRADING_STATUS_BREAK_IN_TRADING";T[T["SECURITY_TRADING_STATUS_NORMAL_TRADING"]=5]="SECURITY_TRADING_STATUS_NORMAL_TRADING";T[T["SECURITY_TRADING_STATUS_CLOSING_AUCTION"]=6]="SECURITY_TRADING_STATUS_CLOSING_AUCTION";T[T["SECURITY_TRADING_STATUS_DARK_POOL_AUCTION"]=7]="SECURITY_TRADING_STATUS_DARK_POOL_AUCTION";T[T["SECURITY_TRADING_STATUS_DISCRETE_AUCTION"]=8]="SECURITY_TRADING_STATUS_DISCRETE_AUCTION";T[T["SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD"]=9]="SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD";T[T["SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE"]=10]="SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE";T[T["SECURITY_TRADING_STATUS_SESSION_ASSIGNED"]=11]="SECURITY_TRADING_STATUS_SESSION_ASSIGNED";T[T["SECURITY_TRADING_STATUS_SESSION_CLOSE"]=12]="SECURITY_TRADING_STATUS_SESSION_CLOSE";T[T["SECURITY_TRADING_STATUS_SESSION_OPEN"]=13]="SECURITY_TRADING_STATUS_SESSION_OPEN";T[T["SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING"]=14]="SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING";T[T["SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING"]=15]="SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING";T[T["SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING"]=16]="SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Fe||(Fe={}));function securityTradingStatusFromJSON(T){switch(T){case 0:case"SECURITY_TRADING_STATUS_UNSPECIFIED":return Fe.SECURITY_TRADING_STATUS_UNSPECIFIED;case 1:case"SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING":return Fe.SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING;case 2:case"SECURITY_TRADING_STATUS_OPENING_PERIOD":return Fe.SECURITY_TRADING_STATUS_OPENING_PERIOD;case 3:case"SECURITY_TRADING_STATUS_CLOSING_PERIOD":return Fe.SECURITY_TRADING_STATUS_CLOSING_PERIOD;case 4:case"SECURITY_TRADING_STATUS_BREAK_IN_TRADING":return Fe.SECURITY_TRADING_STATUS_BREAK_IN_TRADING;case 5:case"SECURITY_TRADING_STATUS_NORMAL_TRADING":return Fe.SECURITY_TRADING_STATUS_NORMAL_TRADING;case 6:case"SECURITY_TRADING_STATUS_CLOSING_AUCTION":return Fe.SECURITY_TRADING_STATUS_CLOSING_AUCTION;case 7:case"SECURITY_TRADING_STATUS_DARK_POOL_AUCTION":return Fe.SECURITY_TRADING_STATUS_DARK_POOL_AUCTION;case 8:case"SECURITY_TRADING_STATUS_DISCRETE_AUCTION":return Fe.SECURITY_TRADING_STATUS_DISCRETE_AUCTION;case 9:case"SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD":return Fe.SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD;case 10:case"SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE":return Fe.SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE;case 11:case"SECURITY_TRADING_STATUS_SESSION_ASSIGNED":return Fe.SECURITY_TRADING_STATUS_SESSION_ASSIGNED;case 12:case"SECURITY_TRADING_STATUS_SESSION_CLOSE":return Fe.SECURITY_TRADING_STATUS_SESSION_CLOSE;case 13:case"SECURITY_TRADING_STATUS_SESSION_OPEN":return Fe.SECURITY_TRADING_STATUS_SESSION_OPEN;case 14:case"SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING":return Fe.SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING;case 15:case"SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING":return Fe.SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING;case 16:case"SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING":return Fe.SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING;case-1:case"UNRECOGNIZED":default:return Fe.UNRECOGNIZED}}function securityTradingStatusToJSON(T){switch(T){case Fe.SECURITY_TRADING_STATUS_UNSPECIFIED:return"SECURITY_TRADING_STATUS_UNSPECIFIED";case Fe.SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING:return"SECURITY_TRADING_STATUS_NOT_AVAILABLE_FOR_TRADING";case Fe.SECURITY_TRADING_STATUS_OPENING_PERIOD:return"SECURITY_TRADING_STATUS_OPENING_PERIOD";case Fe.SECURITY_TRADING_STATUS_CLOSING_PERIOD:return"SECURITY_TRADING_STATUS_CLOSING_PERIOD";case Fe.SECURITY_TRADING_STATUS_BREAK_IN_TRADING:return"SECURITY_TRADING_STATUS_BREAK_IN_TRADING";case Fe.SECURITY_TRADING_STATUS_NORMAL_TRADING:return"SECURITY_TRADING_STATUS_NORMAL_TRADING";case Fe.SECURITY_TRADING_STATUS_CLOSING_AUCTION:return"SECURITY_TRADING_STATUS_CLOSING_AUCTION";case Fe.SECURITY_TRADING_STATUS_DARK_POOL_AUCTION:return"SECURITY_TRADING_STATUS_DARK_POOL_AUCTION";case Fe.SECURITY_TRADING_STATUS_DISCRETE_AUCTION:return"SECURITY_TRADING_STATUS_DISCRETE_AUCTION";case Fe.SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD:return"SECURITY_TRADING_STATUS_OPENING_AUCTION_PERIOD";case Fe.SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE:return"SECURITY_TRADING_STATUS_TRADING_AT_CLOSING_AUCTION_PRICE";case Fe.SECURITY_TRADING_STATUS_SESSION_ASSIGNED:return"SECURITY_TRADING_STATUS_SESSION_ASSIGNED";case Fe.SECURITY_TRADING_STATUS_SESSION_CLOSE:return"SECURITY_TRADING_STATUS_SESSION_CLOSE";case Fe.SECURITY_TRADING_STATUS_SESSION_OPEN:return"SECURITY_TRADING_STATUS_SESSION_OPEN";case Fe.SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING:return"SECURITY_TRADING_STATUS_DEALER_NORMAL_TRADING";case Fe.SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING:return"SECURITY_TRADING_STATUS_DEALER_BREAK_IN_TRADING";case Fe.SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING:return"SECURITY_TRADING_STATUS_DEALER_NOT_AVAILABLE_FOR_TRADING";case Fe.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseMoneyValue(){return{currency:"",units:0,nano:0}}const Me={encode(T,_=Le.Z.Writer.create()){if(T.currency!==""){_.uint32(10).string(T.currency)}if(T.units!==0){_.uint32(16).int64(T.units)}if(T.nano!==0){_.uint32(24).int32(T.nano)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseMoneyValue();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.currency=m.string();break;case 2:E.units=common_longToNumber(m.int64());break;case 3:E.nano=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{currency:common_isSet(T.currency)?String(T.currency):"",units:common_isSet(T.units)?Number(T.units):0,nano:common_isSet(T.nano)?Number(T.nano):0}},toJSON(T){const _={};T.currency!==undefined&&(_.currency=T.currency);T.units!==undefined&&(_.units=Math.round(T.units));T.nano!==undefined&&(_.nano=Math.round(T.nano));return _}};function createBaseQuotation(){return{units:0,nano:0}}const Je={encode(T,_=Le.Z.Writer.create()){if(T.units!==0){_.uint32(8).int64(T.units)}if(T.nano!==0){_.uint32(16).int32(T.nano)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseQuotation();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.units=common_longToNumber(m.int64());break;case 2:E.nano=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{units:common_isSet(T.units)?Number(T.units):0,nano:common_isSet(T.nano)?Number(T.nano):0}},toJSON(T){const _={};T.units!==undefined&&(_.units=Math.round(T.units));T.nano!==undefined&&(_.nano=Math.round(T.nano));return _}};function createBasePing(){return{time:undefined}}const Ge={encode(T,_=Le.Z.Writer.create()){if(T.time!==undefined){ve.encode(toTimestamp(T.time),_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePing();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.time=fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{time:common_isSet(T.time)?fromJsonTimestamp(T.time):undefined}},toJSON(T){const _={};T.time!==undefined&&(_.time=T.time.toISOString());return _}};function toTimestamp(T){const _=T.getTime()/1e3;const m=T.getTime()%1e3*1e6;return{seconds:_,nanos:m}}function fromTimestamp(T){let _=T.seconds*1e3;_+=T.nanos/1e6;return new Date(_)}function fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return fromTimestamp(ve.fromJSON(T))}}function common_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function common_isSet(T){return T!==null&&T!==undefined}const xe="tinkoff.public.invest.api.contract.v1";var qe;(function(T){T[T["SUBSCRIPTION_ACTION_UNSPECIFIED"]=0]="SUBSCRIPTION_ACTION_UNSPECIFIED";T[T["SUBSCRIPTION_ACTION_SUBSCRIBE"]=1]="SUBSCRIPTION_ACTION_SUBSCRIBE";T[T["SUBSCRIPTION_ACTION_UNSUBSCRIBE"]=2]="SUBSCRIPTION_ACTION_UNSUBSCRIBE";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(qe||(qe={}));function subscriptionActionFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_ACTION_UNSPECIFIED":return qe.SUBSCRIPTION_ACTION_UNSPECIFIED;case 1:case"SUBSCRIPTION_ACTION_SUBSCRIBE":return qe.SUBSCRIPTION_ACTION_SUBSCRIBE;case 2:case"SUBSCRIPTION_ACTION_UNSUBSCRIBE":return qe.SUBSCRIPTION_ACTION_UNSUBSCRIBE;case-1:case"UNRECOGNIZED":default:return qe.UNRECOGNIZED}}function subscriptionActionToJSON(T){switch(T){case qe.SUBSCRIPTION_ACTION_UNSPECIFIED:return"SUBSCRIPTION_ACTION_UNSPECIFIED";case qe.SUBSCRIPTION_ACTION_SUBSCRIBE:return"SUBSCRIPTION_ACTION_SUBSCRIBE";case qe.SUBSCRIPTION_ACTION_UNSUBSCRIBE:return"SUBSCRIPTION_ACTION_UNSUBSCRIBE";case qe.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Ve;(function(T){T[T["SUBSCRIPTION_INTERVAL_UNSPECIFIED"]=0]="SUBSCRIPTION_INTERVAL_UNSPECIFIED";T[T["SUBSCRIPTION_INTERVAL_ONE_MINUTE"]=1]="SUBSCRIPTION_INTERVAL_ONE_MINUTE";T[T["SUBSCRIPTION_INTERVAL_FIVE_MINUTES"]=2]="SUBSCRIPTION_INTERVAL_FIVE_MINUTES";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Ve||(Ve={}));function subscriptionIntervalFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_INTERVAL_UNSPECIFIED":return Ve.SUBSCRIPTION_INTERVAL_UNSPECIFIED;case 1:case"SUBSCRIPTION_INTERVAL_ONE_MINUTE":return Ve.SUBSCRIPTION_INTERVAL_ONE_MINUTE;case 2:case"SUBSCRIPTION_INTERVAL_FIVE_MINUTES":return Ve.SUBSCRIPTION_INTERVAL_FIVE_MINUTES;case-1:case"UNRECOGNIZED":default:return Ve.UNRECOGNIZED}}function subscriptionIntervalToJSON(T){switch(T){case Ve.SUBSCRIPTION_INTERVAL_UNSPECIFIED:return"SUBSCRIPTION_INTERVAL_UNSPECIFIED";case Ve.SUBSCRIPTION_INTERVAL_ONE_MINUTE:return"SUBSCRIPTION_INTERVAL_ONE_MINUTE";case Ve.SUBSCRIPTION_INTERVAL_FIVE_MINUTES:return"SUBSCRIPTION_INTERVAL_FIVE_MINUTES";case Ve.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Ze;(function(T){T[T["SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["SUBSCRIPTION_STATUS_SUCCESS"]=1]="SUBSCRIPTION_STATUS_SUCCESS";T[T["SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND"]=2]="SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND";T[T["SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID"]=3]="SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID";T[T["SUBSCRIPTION_STATUS_DEPTH_IS_INVALID"]=4]="SUBSCRIPTION_STATUS_DEPTH_IS_INVALID";T[T["SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID"]=5]="SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID";T[T["SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED"]=6]="SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED";T[T["SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=7]="SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS"]=8]="SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Ze||(Ze={}));function subscriptionStatusFromJSON(T){switch(T){case 0:case"SUBSCRIPTION_STATUS_UNSPECIFIED":return Ze.SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"SUBSCRIPTION_STATUS_SUCCESS":return Ze.SUBSCRIPTION_STATUS_SUCCESS;case 2:case"SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND":return Ze.SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND;case 3:case"SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID":return Ze.SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID;case 4:case"SUBSCRIPTION_STATUS_DEPTH_IS_INVALID":return Ze.SUBSCRIPTION_STATUS_DEPTH_IS_INVALID;case 5:case"SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID":return Ze.SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID;case 6:case"SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED":return Ze.SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED;case 7:case"SUBSCRIPTION_STATUS_INTERNAL_ERROR":return Ze.SUBSCRIPTION_STATUS_INTERNAL_ERROR;case 8:case"SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS":return Ze.SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS;case-1:case"UNRECOGNIZED":default:return Ze.UNRECOGNIZED}}function subscriptionStatusToJSON(T){switch(T){case Ze.SUBSCRIPTION_STATUS_UNSPECIFIED:return"SUBSCRIPTION_STATUS_UNSPECIFIED";case Ze.SUBSCRIPTION_STATUS_SUCCESS:return"SUBSCRIPTION_STATUS_SUCCESS";case Ze.SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND:return"SUBSCRIPTION_STATUS_INSTRUMENT_NOT_FOUND";case Ze.SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID:return"SUBSCRIPTION_STATUS_SUBSCRIPTION_ACTION_IS_INVALID";case Ze.SUBSCRIPTION_STATUS_DEPTH_IS_INVALID:return"SUBSCRIPTION_STATUS_DEPTH_IS_INVALID";case Ze.SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID:return"SUBSCRIPTION_STATUS_INTERVAL_IS_INVALID";case Ze.SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED:return"SUBSCRIPTION_STATUS_LIMIT_IS_EXCEEDED";case Ze.SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"SUBSCRIPTION_STATUS_INTERNAL_ERROR";case Ze.SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS:return"SUBSCRIPTION_STATUS_TOO_MANY_REQUESTS";case Ze.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Xe;(function(T){T[T["TRADE_DIRECTION_UNSPECIFIED"]=0]="TRADE_DIRECTION_UNSPECIFIED";T[T["TRADE_DIRECTION_BUY"]=1]="TRADE_DIRECTION_BUY";T[T["TRADE_DIRECTION_SELL"]=2]="TRADE_DIRECTION_SELL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Xe||(Xe={}));function tradeDirectionFromJSON(T){switch(T){case 0:case"TRADE_DIRECTION_UNSPECIFIED":return Xe.TRADE_DIRECTION_UNSPECIFIED;case 1:case"TRADE_DIRECTION_BUY":return Xe.TRADE_DIRECTION_BUY;case 2:case"TRADE_DIRECTION_SELL":return Xe.TRADE_DIRECTION_SELL;case-1:case"UNRECOGNIZED":default:return Xe.UNRECOGNIZED}}function tradeDirectionToJSON(T){switch(T){case Xe.TRADE_DIRECTION_UNSPECIFIED:return"TRADE_DIRECTION_UNSPECIFIED";case Xe.TRADE_DIRECTION_BUY:return"TRADE_DIRECTION_BUY";case Xe.TRADE_DIRECTION_SELL:return"TRADE_DIRECTION_SELL";case Xe.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var We;(function(T){T[T["CANDLE_INTERVAL_UNSPECIFIED"]=0]="CANDLE_INTERVAL_UNSPECIFIED";T[T["CANDLE_INTERVAL_1_MIN"]=1]="CANDLE_INTERVAL_1_MIN";T[T["CANDLE_INTERVAL_5_MIN"]=2]="CANDLE_INTERVAL_5_MIN";T[T["CANDLE_INTERVAL_15_MIN"]=3]="CANDLE_INTERVAL_15_MIN";T[T["CANDLE_INTERVAL_HOUR"]=4]="CANDLE_INTERVAL_HOUR";T[T["CANDLE_INTERVAL_DAY"]=5]="CANDLE_INTERVAL_DAY";T[T["CANDLE_INTERVAL_2_MIN"]=6]="CANDLE_INTERVAL_2_MIN";T[T["CANDLE_INTERVAL_3_MIN"]=7]="CANDLE_INTERVAL_3_MIN";T[T["CANDLE_INTERVAL_10_MIN"]=8]="CANDLE_INTERVAL_10_MIN";T[T["CANDLE_INTERVAL_30_MIN"]=9]="CANDLE_INTERVAL_30_MIN";T[T["CANDLE_INTERVAL_2_HOUR"]=10]="CANDLE_INTERVAL_2_HOUR";T[T["CANDLE_INTERVAL_4_HOUR"]=11]="CANDLE_INTERVAL_4_HOUR";T[T["CANDLE_INTERVAL_WEEK"]=12]="CANDLE_INTERVAL_WEEK";T[T["CANDLE_INTERVAL_MONTH"]=13]="CANDLE_INTERVAL_MONTH";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(We||(We={}));function candleIntervalFromJSON(T){switch(T){case 0:case"CANDLE_INTERVAL_UNSPECIFIED":return We.CANDLE_INTERVAL_UNSPECIFIED;case 1:case"CANDLE_INTERVAL_1_MIN":return We.CANDLE_INTERVAL_1_MIN;case 2:case"CANDLE_INTERVAL_5_MIN":return We.CANDLE_INTERVAL_5_MIN;case 3:case"CANDLE_INTERVAL_15_MIN":return We.CANDLE_INTERVAL_15_MIN;case 4:case"CANDLE_INTERVAL_HOUR":return We.CANDLE_INTERVAL_HOUR;case 5:case"CANDLE_INTERVAL_DAY":return We.CANDLE_INTERVAL_DAY;case-1:case"UNRECOGNIZED":default:return We.UNRECOGNIZED}}function candleIntervalToJSON(T){switch(T){case We.CANDLE_INTERVAL_UNSPECIFIED:return"CANDLE_INTERVAL_UNSPECIFIED";case We.CANDLE_INTERVAL_1_MIN:return"CANDLE_INTERVAL_1_MIN";case We.CANDLE_INTERVAL_5_MIN:return"CANDLE_INTERVAL_5_MIN";case We.CANDLE_INTERVAL_15_MIN:return"CANDLE_INTERVAL_15_MIN";case We.CANDLE_INTERVAL_HOUR:return"CANDLE_INTERVAL_HOUR";case We.CANDLE_INTERVAL_DAY:return"CANDLE_INTERVAL_DAY";case We.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseMarketDataRequest(){return{subscribeCandlesRequest:undefined,subscribeOrderBookRequest:undefined,subscribeTradesRequest:undefined,subscribeInfoRequest:undefined,subscribeLastPriceRequest:undefined,getMySubscriptions:undefined}}const He={encode(T,_=Le.Z.Writer.create()){if(T.subscribeCandlesRequest!==undefined){$e.encode(T.subscribeCandlesRequest,_.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookRequest!==undefined){tt.encode(T.subscribeOrderBookRequest,_.uint32(18).fork()).ldelim()}if(T.subscribeTradesRequest!==undefined){st.encode(T.subscribeTradesRequest,_.uint32(26).fork()).ldelim()}if(T.subscribeInfoRequest!==undefined){dt.encode(T.subscribeInfoRequest,_.uint32(34).fork()).ldelim()}if(T.subscribeLastPriceRequest!==undefined){Tt.encode(T.subscribeLastPriceRequest,_.uint32(42).fork()).ldelim()}if(T.getMySubscriptions!==undefined){Lt.encode(T.getMySubscriptions,_.uint32(50).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseMarketDataRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscribeCandlesRequest=$e.decode(m,m.uint32());break;case 2:E.subscribeOrderBookRequest=tt.decode(m,m.uint32());break;case 3:E.subscribeTradesRequest=st.decode(m,m.uint32());break;case 4:E.subscribeInfoRequest=dt.decode(m,m.uint32());break;case 5:E.subscribeLastPriceRequest=Tt.decode(m,m.uint32());break;case 6:E.getMySubscriptions=Lt.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesRequest:market_data_isSet(T.subscribeCandlesRequest)?$e.fromJSON(T.subscribeCandlesRequest):undefined,subscribeOrderBookRequest:market_data_isSet(T.subscribeOrderBookRequest)?tt.fromJSON(T.subscribeOrderBookRequest):undefined,subscribeTradesRequest:market_data_isSet(T.subscribeTradesRequest)?st.fromJSON(T.subscribeTradesRequest):undefined,subscribeInfoRequest:market_data_isSet(T.subscribeInfoRequest)?dt.fromJSON(T.subscribeInfoRequest):undefined,subscribeLastPriceRequest:market_data_isSet(T.subscribeLastPriceRequest)?Tt.fromJSON(T.subscribeLastPriceRequest):undefined,getMySubscriptions:market_data_isSet(T.getMySubscriptions)?Lt.fromJSON(T.getMySubscriptions):undefined}},toJSON(T){const _={};T.subscribeCandlesRequest!==undefined&&(_.subscribeCandlesRequest=T.subscribeCandlesRequest?$e.toJSON(T.subscribeCandlesRequest):undefined);T.subscribeOrderBookRequest!==undefined&&(_.subscribeOrderBookRequest=T.subscribeOrderBookRequest?tt.toJSON(T.subscribeOrderBookRequest):undefined);T.subscribeTradesRequest!==undefined&&(_.subscribeTradesRequest=T.subscribeTradesRequest?st.toJSON(T.subscribeTradesRequest):undefined);T.subscribeInfoRequest!==undefined&&(_.subscribeInfoRequest=T.subscribeInfoRequest?dt.toJSON(T.subscribeInfoRequest):undefined);T.subscribeLastPriceRequest!==undefined&&(_.subscribeLastPriceRequest=T.subscribeLastPriceRequest?Tt.toJSON(T.subscribeLastPriceRequest):undefined);T.getMySubscriptions!==undefined&&(_.getMySubscriptions=T.getMySubscriptions?Lt.toJSON(T.getMySubscriptions):undefined);return _}};function createBaseMarketDataServerSideStreamRequest(){return{subscribeCandlesRequest:undefined,subscribeOrderBookRequest:undefined,subscribeTradesRequest:undefined,subscribeInfoRequest:undefined,subscribeLastPriceRequest:undefined}}const Ke={encode(T,_=Le.Z.Writer.create()){if(T.subscribeCandlesRequest!==undefined){$e.encode(T.subscribeCandlesRequest,_.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookRequest!==undefined){tt.encode(T.subscribeOrderBookRequest,_.uint32(18).fork()).ldelim()}if(T.subscribeTradesRequest!==undefined){st.encode(T.subscribeTradesRequest,_.uint32(26).fork()).ldelim()}if(T.subscribeInfoRequest!==undefined){dt.encode(T.subscribeInfoRequest,_.uint32(34).fork()).ldelim()}if(T.subscribeLastPriceRequest!==undefined){Tt.encode(T.subscribeLastPriceRequest,_.uint32(42).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseMarketDataServerSideStreamRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscribeCandlesRequest=$e.decode(m,m.uint32());break;case 2:E.subscribeOrderBookRequest=tt.decode(m,m.uint32());break;case 3:E.subscribeTradesRequest=st.decode(m,m.uint32());break;case 4:E.subscribeInfoRequest=dt.decode(m,m.uint32());break;case 5:E.subscribeLastPriceRequest=Tt.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesRequest:market_data_isSet(T.subscribeCandlesRequest)?$e.fromJSON(T.subscribeCandlesRequest):undefined,subscribeOrderBookRequest:market_data_isSet(T.subscribeOrderBookRequest)?tt.fromJSON(T.subscribeOrderBookRequest):undefined,subscribeTradesRequest:market_data_isSet(T.subscribeTradesRequest)?st.fromJSON(T.subscribeTradesRequest):undefined,subscribeInfoRequest:market_data_isSet(T.subscribeInfoRequest)?dt.fromJSON(T.subscribeInfoRequest):undefined,subscribeLastPriceRequest:market_data_isSet(T.subscribeLastPriceRequest)?Tt.fromJSON(T.subscribeLastPriceRequest):undefined}},toJSON(T){const _={};T.subscribeCandlesRequest!==undefined&&(_.subscribeCandlesRequest=T.subscribeCandlesRequest?$e.toJSON(T.subscribeCandlesRequest):undefined);T.subscribeOrderBookRequest!==undefined&&(_.subscribeOrderBookRequest=T.subscribeOrderBookRequest?tt.toJSON(T.subscribeOrderBookRequest):undefined);T.subscribeTradesRequest!==undefined&&(_.subscribeTradesRequest=T.subscribeTradesRequest?st.toJSON(T.subscribeTradesRequest):undefined);T.subscribeInfoRequest!==undefined&&(_.subscribeInfoRequest=T.subscribeInfoRequest?dt.toJSON(T.subscribeInfoRequest):undefined);T.subscribeLastPriceRequest!==undefined&&(_.subscribeLastPriceRequest=T.subscribeLastPriceRequest?Tt.toJSON(T.subscribeLastPriceRequest):undefined);return _}};function createBaseMarketDataResponse(){return{subscribeCandlesResponse:undefined,subscribeOrderBookResponse:undefined,subscribeTradesResponse:undefined,subscribeInfoResponse:undefined,candle:undefined,trade:undefined,orderbook:undefined,tradingStatus:undefined,ping:undefined,subscribeLastPriceResponse:undefined,lastPrice:undefined}}const ze={encode(T,_=Le.Z.Writer.create()){if(T.subscribeCandlesResponse!==undefined){Qe.encode(T.subscribeCandlesResponse,_.uint32(10).fork()).ldelim()}if(T.subscribeOrderBookResponse!==undefined){rt.encode(T.subscribeOrderBookResponse,_.uint32(18).fork()).ldelim()}if(T.subscribeTradesResponse!==undefined){at.encode(T.subscribeTradesResponse,_.uint32(26).fork()).ldelim()}if(T.subscribeInfoResponse!==undefined){ft.encode(T.subscribeInfoResponse,_.uint32(34).fork()).ldelim()}if(T.candle!==undefined){St.encode(T.candle,_.uint32(42).fork()).ldelim()}if(T.trade!==undefined){Ot.encode(T.trade,_.uint32(50).fork()).ldelim()}if(T.orderbook!==undefined){Et.encode(T.orderbook,_.uint32(58).fork()).ldelim()}if(T.tradingStatus!==undefined){Nt.encode(T.tradingStatus,_.uint32(66).fork()).ldelim()}if(T.ping!==undefined){Ge.encode(T.ping,_.uint32(74).fork()).ldelim()}if(T.subscribeLastPriceResponse!==undefined){_t.encode(T.subscribeLastPriceResponse,_.uint32(82).fork()).ldelim()}if(T.lastPrice!==undefined){Pt.encode(T.lastPrice,_.uint32(90).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseMarketDataResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscribeCandlesResponse=Qe.decode(m,m.uint32());break;case 2:E.subscribeOrderBookResponse=rt.decode(m,m.uint32());break;case 3:E.subscribeTradesResponse=at.decode(m,m.uint32());break;case 4:E.subscribeInfoResponse=ft.decode(m,m.uint32());break;case 5:E.candle=St.decode(m,m.uint32());break;case 6:E.trade=Ot.decode(m,m.uint32());break;case 7:E.orderbook=Et.decode(m,m.uint32());break;case 8:E.tradingStatus=Nt.decode(m,m.uint32());break;case 9:E.ping=Ge.decode(m,m.uint32());break;case 10:E.subscribeLastPriceResponse=_t.decode(m,m.uint32());break;case 11:E.lastPrice=Pt.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscribeCandlesResponse:market_data_isSet(T.subscribeCandlesResponse)?Qe.fromJSON(T.subscribeCandlesResponse):undefined,subscribeOrderBookResponse:market_data_isSet(T.subscribeOrderBookResponse)?rt.fromJSON(T.subscribeOrderBookResponse):undefined,subscribeTradesResponse:market_data_isSet(T.subscribeTradesResponse)?at.fromJSON(T.subscribeTradesResponse):undefined,subscribeInfoResponse:market_data_isSet(T.subscribeInfoResponse)?ft.fromJSON(T.subscribeInfoResponse):undefined,candle:market_data_isSet(T.candle)?St.fromJSON(T.candle):undefined,trade:market_data_isSet(T.trade)?Ot.fromJSON(T.trade):undefined,orderbook:market_data_isSet(T.orderbook)?Et.fromJSON(T.orderbook):undefined,tradingStatus:market_data_isSet(T.tradingStatus)?Nt.fromJSON(T.tradingStatus):undefined,ping:market_data_isSet(T.ping)?Ge.fromJSON(T.ping):undefined,subscribeLastPriceResponse:market_data_isSet(T.subscribeLastPriceResponse)?_t.fromJSON(T.subscribeLastPriceResponse):undefined,lastPrice:market_data_isSet(T.lastPrice)?Pt.fromJSON(T.lastPrice):undefined}},toJSON(T){const _={};T.subscribeCandlesResponse!==undefined&&(_.subscribeCandlesResponse=T.subscribeCandlesResponse?Qe.toJSON(T.subscribeCandlesResponse):undefined);T.subscribeOrderBookResponse!==undefined&&(_.subscribeOrderBookResponse=T.subscribeOrderBookResponse?rt.toJSON(T.subscribeOrderBookResponse):undefined);T.subscribeTradesResponse!==undefined&&(_.subscribeTradesResponse=T.subscribeTradesResponse?at.toJSON(T.subscribeTradesResponse):undefined);T.subscribeInfoResponse!==undefined&&(_.subscribeInfoResponse=T.subscribeInfoResponse?ft.toJSON(T.subscribeInfoResponse):undefined);T.candle!==undefined&&(_.candle=T.candle?St.toJSON(T.candle):undefined);T.trade!==undefined&&(_.trade=T.trade?Ot.toJSON(T.trade):undefined);T.orderbook!==undefined&&(_.orderbook=T.orderbook?Et.toJSON(T.orderbook):undefined);T.tradingStatus!==undefined&&(_.tradingStatus=T.tradingStatus?Nt.toJSON(T.tradingStatus):undefined);T.ping!==undefined&&(_.ping=T.ping?Ge.toJSON(T.ping):undefined);T.subscribeLastPriceResponse!==undefined&&(_.subscribeLastPriceResponse=T.subscribeLastPriceResponse?_t.toJSON(T.subscribeLastPriceResponse):undefined);T.lastPrice!==undefined&&(_.lastPrice=T.lastPrice?Pt.toJSON(T.lastPrice):undefined);return _}};function createBaseSubscribeCandlesRequest(){return{subscriptionAction:0,instruments:[],waitingClose:false}}const $e={encode(T,_=Le.Z.Writer.create()){if(T.subscriptionAction!==0){_.uint32(8).int32(T.subscriptionAction)}for(const m of T.instruments){je.encode(m,_.uint32(18).fork()).ldelim()}if(T.waitingClose===true){_.uint32(24).bool(T.waitingClose)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeCandlesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptionAction=m.int32();break;case 2:E.instruments.push(je.decode(m,m.uint32()));break;case 3:E.waitingClose=m.bool();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>je.fromJSON(T))):[],waitingClose:market_data_isSet(T.waitingClose)?Boolean(T.waitingClose):false}},toJSON(T){const _={};T.subscriptionAction!==undefined&&(_.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){_.instruments=T.instruments.map((T=>T?je.toJSON(T):undefined))}else{_.instruments=[]}T.waitingClose!==undefined&&(_.waitingClose=T.waitingClose);return _}};function createBaseCandleInstrument(){return{interval:0,instrumentId:""}}const je={encode(T,_=Le.Z.Writer.create()){if(T.interval!==0){_.uint32(16).int32(T.interval)}if(T.instrumentId!==""){_.uint32(26).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseCandleInstrument();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.interval=m.int32();break;case 3:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.interval!==undefined&&(_.interval=subscriptionIntervalToJSON(T.interval));T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseSubscribeCandlesResponse(){return{trackingId:"",candlesSubscriptions:[]}}const Qe={encode(T,_=Le.Z.Writer.create()){if(T.trackingId!==""){_.uint32(10).string(T.trackingId)}for(const m of T.candlesSubscriptions){et.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeCandlesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trackingId=m.string();break;case 2:E.candlesSubscriptions.push(et.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",candlesSubscriptions:Array.isArray(T?.candlesSubscriptions)?T.candlesSubscriptions.map((T=>et.fromJSON(T))):[]}},toJSON(T){const _={};T.trackingId!==undefined&&(_.trackingId=T.trackingId);if(T.candlesSubscriptions){_.candlesSubscriptions=T.candlesSubscriptions.map((T=>T?et.toJSON(T):undefined))}else{_.candlesSubscriptions=[]}return _}};function createBaseCandleSubscription(){return{figi:"",interval:0,subscriptionStatus:0,instrumentUid:""}}const et={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.interval!==0){_.uint32(16).int32(T.interval)}if(T.subscriptionStatus!==0){_.uint32(24).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){_.uint32(34).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseCandleSubscription();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.interval=m.int32();break;case 3:E.subscriptionStatus=m.int32();break;case 4:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.interval!==undefined&&(_.interval=subscriptionIntervalToJSON(T.interval));T.subscriptionStatus!==undefined&&(_.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseSubscribeOrderBookRequest(){return{subscriptionAction:0,instruments:[]}}const tt={encode(T,_=Le.Z.Writer.create()){if(T.subscriptionAction!==0){_.uint32(8).int32(T.subscriptionAction)}for(const m of T.instruments){nt.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeOrderBookRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptionAction=m.int32();break;case 2:E.instruments.push(nt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>nt.fromJSON(T))):[]}},toJSON(T){const _={};T.subscriptionAction!==undefined&&(_.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){_.instruments=T.instruments.map((T=>T?nt.toJSON(T):undefined))}else{_.instruments=[]}return _}};function createBaseOrderBookInstrument(){return{depth:0,instrumentId:""}}const nt={encode(T,_=Le.Z.Writer.create()){if(T.depth!==0){_.uint32(16).int32(T.depth)}if(T.instrumentId!==""){_.uint32(26).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderBookInstrument();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.depth=m.int32();break;case 3:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{depth:market_data_isSet(T.depth)?Number(T.depth):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.depth!==undefined&&(_.depth=Math.round(T.depth));T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseSubscribeOrderBookResponse(){return{trackingId:"",orderBookSubscriptions:[]}}const rt={encode(T,_=Le.Z.Writer.create()){if(T.trackingId!==""){_.uint32(10).string(T.trackingId)}for(const m of T.orderBookSubscriptions){it.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeOrderBookResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trackingId=m.string();break;case 2:E.orderBookSubscriptions.push(it.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",orderBookSubscriptions:Array.isArray(T?.orderBookSubscriptions)?T.orderBookSubscriptions.map((T=>it.fromJSON(T))):[]}},toJSON(T){const _={};T.trackingId!==undefined&&(_.trackingId=T.trackingId);if(T.orderBookSubscriptions){_.orderBookSubscriptions=T.orderBookSubscriptions.map((T=>T?it.toJSON(T):undefined))}else{_.orderBookSubscriptions=[]}return _}};function createBaseOrderBookSubscription(){return{figi:"",depth:0,subscriptionStatus:0,instrumentUid:""}}const it={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.depth!==0){_.uint32(16).int32(T.depth)}if(T.subscriptionStatus!==0){_.uint32(24).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){_.uint32(34).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderBookSubscription();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.depth=m.int32();break;case 3:E.subscriptionStatus=m.int32();break;case 4:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.depth!==undefined&&(_.depth=Math.round(T.depth));T.subscriptionStatus!==undefined&&(_.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseSubscribeTradesRequest(){return{subscriptionAction:0,instruments:[]}}const st={encode(T,_=Le.Z.Writer.create()){if(T.subscriptionAction!==0){_.uint32(8).int32(T.subscriptionAction)}for(const m of T.instruments){ot.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeTradesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptionAction=m.int32();break;case 2:E.instruments.push(ot.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>ot.fromJSON(T))):[]}},toJSON(T){const _={};T.subscriptionAction!==undefined&&(_.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){_.instruments=T.instruments.map((T=>T?ot.toJSON(T):undefined))}else{_.instruments=[]}return _}};function createBaseTradeInstrument(){return{instrumentId:""}}const ot={encode(T,_=Le.Z.Writer.create()){if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTradeInstrument();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseSubscribeTradesResponse(){return{trackingId:"",tradeSubscriptions:[]}}const at={encode(T,_=Le.Z.Writer.create()){if(T.trackingId!==""){_.uint32(10).string(T.trackingId)}for(const m of T.tradeSubscriptions){ut.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeTradesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trackingId=m.string();break;case 2:E.tradeSubscriptions.push(ut.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",tradeSubscriptions:Array.isArray(T?.tradeSubscriptions)?T.tradeSubscriptions.map((T=>ut.fromJSON(T))):[]}},toJSON(T){const _={};T.trackingId!==undefined&&(_.trackingId=T.trackingId);if(T.tradeSubscriptions){_.tradeSubscriptions=T.tradeSubscriptions.map((T=>T?ut.toJSON(T):undefined))}else{_.tradeSubscriptions=[]}return _}};function createBaseTradeSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const ut={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){_.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){_.uint32(26).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTradeSubscription();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.subscriptionStatus=m.int32();break;case 3:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.subscriptionStatus!==undefined&&(_.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseSubscribeInfoRequest(){return{subscriptionAction:0,instruments:[]}}const dt={encode(T,_=Le.Z.Writer.create()){if(T.subscriptionAction!==0){_.uint32(8).int32(T.subscriptionAction)}for(const m of T.instruments){ct.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeInfoRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptionAction=m.int32();break;case 2:E.instruments.push(ct.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>ct.fromJSON(T))):[]}},toJSON(T){const _={};T.subscriptionAction!==undefined&&(_.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){_.instruments=T.instruments.map((T=>T?ct.toJSON(T):undefined))}else{_.instruments=[]}return _}};function createBaseInfoInstrument(){return{instrumentId:""}}const ct={encode(T,_=Le.Z.Writer.create()){if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseInfoInstrument();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseSubscribeInfoResponse(){return{trackingId:"",infoSubscriptions:[]}}const ft={encode(T,_=Le.Z.Writer.create()){if(T.trackingId!==""){_.uint32(10).string(T.trackingId)}for(const m of T.infoSubscriptions){lt.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeInfoResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trackingId=m.string();break;case 2:E.infoSubscriptions.push(lt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",infoSubscriptions:Array.isArray(T?.infoSubscriptions)?T.infoSubscriptions.map((T=>lt.fromJSON(T))):[]}},toJSON(T){const _={};T.trackingId!==undefined&&(_.trackingId=T.trackingId);if(T.infoSubscriptions){_.infoSubscriptions=T.infoSubscriptions.map((T=>T?lt.toJSON(T):undefined))}else{_.infoSubscriptions=[]}return _}};function createBaseInfoSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const lt={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){_.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){_.uint32(26).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseInfoSubscription();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.subscriptionStatus=m.int32();break;case 3:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.subscriptionStatus!==undefined&&(_.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseSubscribeLastPriceRequest(){return{subscriptionAction:0,instruments:[]}}const Tt={encode(T,_=Le.Z.Writer.create()){if(T.subscriptionAction!==0){_.uint32(8).int32(T.subscriptionAction)}for(const m of T.instruments){pt.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeLastPriceRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptionAction=m.int32();break;case 2:E.instruments.push(pt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptionAction:market_data_isSet(T.subscriptionAction)?subscriptionActionFromJSON(T.subscriptionAction):0,instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>pt.fromJSON(T))):[]}},toJSON(T){const _={};T.subscriptionAction!==undefined&&(_.subscriptionAction=subscriptionActionToJSON(T.subscriptionAction));if(T.instruments){_.instruments=T.instruments.map((T=>T?pt.toJSON(T):undefined))}else{_.instruments=[]}return _}};function createBaseLastPriceInstrument(){return{instrumentId:""}}const pt={encode(T,_=Le.Z.Writer.create()){if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseLastPriceInstrument();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseSubscribeLastPriceResponse(){return{trackingId:"",lastPriceSubscriptions:[]}}const _t={encode(T,_=Le.Z.Writer.create()){if(T.trackingId!==""){_.uint32(10).string(T.trackingId)}for(const m of T.lastPriceSubscriptions){mt.encode(m,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseSubscribeLastPriceResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trackingId=m.string();break;case 2:E.lastPriceSubscriptions.push(mt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trackingId:market_data_isSet(T.trackingId)?String(T.trackingId):"",lastPriceSubscriptions:Array.isArray(T?.lastPriceSubscriptions)?T.lastPriceSubscriptions.map((T=>mt.fromJSON(T))):[]}},toJSON(T){const _={};T.trackingId!==undefined&&(_.trackingId=T.trackingId);if(T.lastPriceSubscriptions){_.lastPriceSubscriptions=T.lastPriceSubscriptions.map((T=>T?mt.toJSON(T):undefined))}else{_.lastPriceSubscriptions=[]}return _}};function createBaseLastPriceSubscription(){return{figi:"",subscriptionStatus:0,instrumentUid:""}}const mt={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.subscriptionStatus!==0){_.uint32(16).int32(T.subscriptionStatus)}if(T.instrumentUid!==""){_.uint32(26).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseLastPriceSubscription();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.subscriptionStatus=m.int32();break;case 3:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",subscriptionStatus:market_data_isSet(T.subscriptionStatus)?subscriptionStatusFromJSON(T.subscriptionStatus):0,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.subscriptionStatus!==undefined&&(_.subscriptionStatus=subscriptionStatusToJSON(T.subscriptionStatus));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseCandle(){return{figi:"",interval:0,open:undefined,high:undefined,low:undefined,close:undefined,volume:0,time:undefined,lastTradeTs:undefined,instrumentUid:""}}const St={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.interval!==0){_.uint32(16).int32(T.interval)}if(T.open!==undefined){Je.encode(T.open,_.uint32(26).fork()).ldelim()}if(T.high!==undefined){Je.encode(T.high,_.uint32(34).fork()).ldelim()}if(T.low!==undefined){Je.encode(T.low,_.uint32(42).fork()).ldelim()}if(T.close!==undefined){Je.encode(T.close,_.uint32(50).fork()).ldelim()}if(T.volume!==0){_.uint32(56).int64(T.volume)}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(66).fork()).ldelim()}if(T.lastTradeTs!==undefined){ve.encode(market_data_toTimestamp(T.lastTradeTs),_.uint32(74).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(82).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseCandle();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.interval=m.int32();break;case 3:E.open=Je.decode(m,m.uint32());break;case 4:E.high=Je.decode(m,m.uint32());break;case 5:E.low=Je.decode(m,m.uint32());break;case 6:E.close=Je.decode(m,m.uint32());break;case 7:E.volume=market_data_longToNumber(m.int64());break;case 8:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 9:E.lastTradeTs=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 10:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",interval:market_data_isSet(T.interval)?subscriptionIntervalFromJSON(T.interval):0,open:market_data_isSet(T.open)?Je.fromJSON(T.open):undefined,high:market_data_isSet(T.high)?Je.fromJSON(T.high):undefined,low:market_data_isSet(T.low)?Je.fromJSON(T.low):undefined,close:market_data_isSet(T.close)?Je.fromJSON(T.close):undefined,volume:market_data_isSet(T.volume)?Number(T.volume):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,lastTradeTs:market_data_isSet(T.lastTradeTs)?market_data_fromJsonTimestamp(T.lastTradeTs):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.interval!==undefined&&(_.interval=subscriptionIntervalToJSON(T.interval));T.open!==undefined&&(_.open=T.open?Je.toJSON(T.open):undefined);T.high!==undefined&&(_.high=T.high?Je.toJSON(T.high):undefined);T.low!==undefined&&(_.low=T.low?Je.toJSON(T.low):undefined);T.close!==undefined&&(_.close=T.close?Je.toJSON(T.close):undefined);T.volume!==undefined&&(_.volume=Math.round(T.volume));T.time!==undefined&&(_.time=T.time.toISOString());T.lastTradeTs!==undefined&&(_.lastTradeTs=T.lastTradeTs.toISOString());T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseOrderBook(){return{figi:"",depth:0,isConsistent:false,bids:[],asks:[],time:undefined,limitUp:undefined,limitDown:undefined,instrumentUid:""}}const Et={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.depth!==0){_.uint32(16).int32(T.depth)}if(T.isConsistent===true){_.uint32(24).bool(T.isConsistent)}for(const m of T.bids){It.encode(m,_.uint32(34).fork()).ldelim()}for(const m of T.asks){It.encode(m,_.uint32(42).fork()).ldelim()}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(50).fork()).ldelim()}if(T.limitUp!==undefined){Je.encode(T.limitUp,_.uint32(58).fork()).ldelim()}if(T.limitDown!==undefined){Je.encode(T.limitDown,_.uint32(66).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(74).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderBook();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.depth=m.int32();break;case 3:E.isConsistent=m.bool();break;case 4:E.bids.push(It.decode(m,m.uint32()));break;case 5:E.asks.push(It.decode(m,m.uint32()));break;case 6:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 7:E.limitUp=Je.decode(m,m.uint32());break;case 8:E.limitDown=Je.decode(m,m.uint32());break;case 9:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,isConsistent:market_data_isSet(T.isConsistent)?Boolean(T.isConsistent):false,bids:Array.isArray(T?.bids)?T.bids.map((T=>It.fromJSON(T))):[],asks:Array.isArray(T?.asks)?T.asks.map((T=>It.fromJSON(T))):[],time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,limitUp:market_data_isSet(T.limitUp)?Je.fromJSON(T.limitUp):undefined,limitDown:market_data_isSet(T.limitDown)?Je.fromJSON(T.limitDown):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.depth!==undefined&&(_.depth=Math.round(T.depth));T.isConsistent!==undefined&&(_.isConsistent=T.isConsistent);if(T.bids){_.bids=T.bids.map((T=>T?It.toJSON(T):undefined))}else{_.bids=[]}if(T.asks){_.asks=T.asks.map((T=>T?It.toJSON(T):undefined))}else{_.asks=[]}T.time!==undefined&&(_.time=T.time.toISOString());T.limitUp!==undefined&&(_.limitUp=T.limitUp?Je.toJSON(T.limitUp):undefined);T.limitDown!==undefined&&(_.limitDown=T.limitDown?Je.toJSON(T.limitDown):undefined);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseOrder(){return{price:undefined,quantity:0}}const It={encode(T,_=Le.Z.Writer.create()){if(T.price!==undefined){Je.encode(T.price,_.uint32(10).fork()).ldelim()}if(T.quantity!==0){_.uint32(16).int64(T.quantity)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrder();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.price=Je.decode(m,m.uint32());break;case 2:E.quantity=market_data_longToNumber(m.int64());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{price:market_data_isSet(T.price)?Je.fromJSON(T.price):undefined,quantity:market_data_isSet(T.quantity)?Number(T.quantity):0}},toJSON(T){const _={};T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));return _}};function createBaseTrade(){return{figi:"",direction:0,price:undefined,quantity:0,time:undefined,instrumentUid:""}}const Ot={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.direction!==0){_.uint32(16).int32(T.direction)}if(T.price!==undefined){Je.encode(T.price,_.uint32(26).fork()).ldelim()}if(T.quantity!==0){_.uint32(32).int64(T.quantity)}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(42).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(50).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTrade();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.direction=m.int32();break;case 3:E.price=Je.decode(m,m.uint32());break;case 4:E.quantity=market_data_longToNumber(m.int64());break;case 5:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 6:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",direction:market_data_isSet(T.direction)?tradeDirectionFromJSON(T.direction):0,price:market_data_isSet(T.price)?Je.fromJSON(T.price):undefined,quantity:market_data_isSet(T.quantity)?Number(T.quantity):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.direction!==undefined&&(_.direction=tradeDirectionToJSON(T.direction));T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.time!==undefined&&(_.time=T.time.toISOString());T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseTradingStatus(){return{figi:"",tradingStatus:0,time:undefined,limitOrderAvailableFlag:false,marketOrderAvailableFlag:false,instrumentUid:""}}const Nt={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.tradingStatus!==0){_.uint32(16).int32(T.tradingStatus)}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(26).fork()).ldelim()}if(T.limitOrderAvailableFlag===true){_.uint32(32).bool(T.limitOrderAvailableFlag)}if(T.marketOrderAvailableFlag===true){_.uint32(40).bool(T.marketOrderAvailableFlag)}if(T.instrumentUid!==""){_.uint32(50).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTradingStatus();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.tradingStatus=m.int32();break;case 3:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 4:E.limitOrderAvailableFlag=m.bool();break;case 5:E.marketOrderAvailableFlag=m.bool();break;case 6:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",tradingStatus:market_data_isSet(T.tradingStatus)?securityTradingStatusFromJSON(T.tradingStatus):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,limitOrderAvailableFlag:market_data_isSet(T.limitOrderAvailableFlag)?Boolean(T.limitOrderAvailableFlag):false,marketOrderAvailableFlag:market_data_isSet(T.marketOrderAvailableFlag)?Boolean(T.marketOrderAvailableFlag):false,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.tradingStatus!==undefined&&(_.tradingStatus=securityTradingStatusToJSON(T.tradingStatus));T.time!==undefined&&(_.time=T.time.toISOString());T.limitOrderAvailableFlag!==undefined&&(_.limitOrderAvailableFlag=T.limitOrderAvailableFlag);T.marketOrderAvailableFlag!==undefined&&(_.marketOrderAvailableFlag=T.marketOrderAvailableFlag);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseGetCandlesRequest(){return{from:undefined,to:undefined,interval:0,instrumentId:""}}const Rt={encode(T,_=Le.Z.Writer.create()){if(T.from!==undefined){ve.encode(market_data_toTimestamp(T.from),_.uint32(18).fork()).ldelim()}if(T.to!==undefined){ve.encode(market_data_toTimestamp(T.to),_.uint32(26).fork()).ldelim()}if(T.interval!==0){_.uint32(32).int32(T.interval)}if(T.instrumentId!==""){_.uint32(42).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetCandlesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.from=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.to=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 4:E.interval=m.int32();break;case 5:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{from:market_data_isSet(T.from)?market_data_fromJsonTimestamp(T.from):undefined,to:market_data_isSet(T.to)?market_data_fromJsonTimestamp(T.to):undefined,interval:market_data_isSet(T.interval)?candleIntervalFromJSON(T.interval):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());T.interval!==undefined&&(_.interval=candleIntervalToJSON(T.interval));T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseGetCandlesResponse(){return{candles:[]}}const ht={encode(T,_=Le.Z.Writer.create()){for(const m of T.candles){At.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetCandlesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.candles.push(At.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{candles:Array.isArray(T?.candles)?T.candles.map((T=>At.fromJSON(T))):[]}},toJSON(T){const _={};if(T.candles){_.candles=T.candles.map((T=>T?At.toJSON(T):undefined))}else{_.candles=[]}return _}};function createBaseHistoricCandle(){return{open:undefined,high:undefined,low:undefined,close:undefined,volume:0,time:undefined,isComplete:false}}const At={encode(T,_=Le.Z.Writer.create()){if(T.open!==undefined){Je.encode(T.open,_.uint32(10).fork()).ldelim()}if(T.high!==undefined){Je.encode(T.high,_.uint32(18).fork()).ldelim()}if(T.low!==undefined){Je.encode(T.low,_.uint32(26).fork()).ldelim()}if(T.close!==undefined){Je.encode(T.close,_.uint32(34).fork()).ldelim()}if(T.volume!==0){_.uint32(40).int64(T.volume)}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(50).fork()).ldelim()}if(T.isComplete===true){_.uint32(56).bool(T.isComplete)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseHistoricCandle();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.open=Je.decode(m,m.uint32());break;case 2:E.high=Je.decode(m,m.uint32());break;case 3:E.low=Je.decode(m,m.uint32());break;case 4:E.close=Je.decode(m,m.uint32());break;case 5:E.volume=market_data_longToNumber(m.int64());break;case 6:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 7:E.isComplete=m.bool();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{open:market_data_isSet(T.open)?Je.fromJSON(T.open):undefined,high:market_data_isSet(T.high)?Je.fromJSON(T.high):undefined,low:market_data_isSet(T.low)?Je.fromJSON(T.low):undefined,close:market_data_isSet(T.close)?Je.fromJSON(T.close):undefined,volume:market_data_isSet(T.volume)?Number(T.volume):0,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,isComplete:market_data_isSet(T.isComplete)?Boolean(T.isComplete):false}},toJSON(T){const _={};T.open!==undefined&&(_.open=T.open?Je.toJSON(T.open):undefined);T.high!==undefined&&(_.high=T.high?Je.toJSON(T.high):undefined);T.low!==undefined&&(_.low=T.low?Je.toJSON(T.low):undefined);T.close!==undefined&&(_.close=T.close?Je.toJSON(T.close):undefined);T.volume!==undefined&&(_.volume=Math.round(T.volume));T.time!==undefined&&(_.time=T.time.toISOString());T.isComplete!==undefined&&(_.isComplete=T.isComplete);return _}};function createBaseGetLastPricesRequest(){return{instrumentId:[]}}const gt={encode(T,_=Le.Z.Writer.create()){for(const m of T.instrumentId){_.uint32(18).string(m)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetLastPricesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.instrumentId.push(m.string());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:Array.isArray(T?.instrumentId)?T.instrumentId.map((T=>String(T))):[]}},toJSON(T){const _={};if(T.instrumentId){_.instrumentId=T.instrumentId.map((T=>T))}else{_.instrumentId=[]}return _}};function createBaseGetLastPricesResponse(){return{lastPrices:[]}}const bt={encode(T,_=Le.Z.Writer.create()){for(const m of T.lastPrices){Pt.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetLastPricesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.lastPrices.push(Pt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{lastPrices:Array.isArray(T?.lastPrices)?T.lastPrices.map((T=>Pt.fromJSON(T))):[]}},toJSON(T){const _={};if(T.lastPrices){_.lastPrices=T.lastPrices.map((T=>T?Pt.toJSON(T):undefined))}else{_.lastPrices=[]}return _}};function createBaseLastPrice(){return{figi:"",price:undefined,time:undefined,instrumentUid:""}}const Pt={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.price!==undefined){Je.encode(T.price,_.uint32(18).fork()).ldelim()}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(26).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(90).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseLastPrice();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.price=Je.decode(m,m.uint32());break;case 3:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 11:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",price:market_data_isSet(T.price)?Je.fromJSON(T.price):undefined,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.time!==undefined&&(_.time=T.time.toISOString());T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseGetOrderBookRequest(){return{depth:0,instrumentId:""}}const yt={encode(T,_=Le.Z.Writer.create()){if(T.depth!==0){_.uint32(16).int32(T.depth)}if(T.instrumentId!==""){_.uint32(26).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOrderBookRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.depth=m.int32();break;case 3:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{depth:market_data_isSet(T.depth)?Number(T.depth):0,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.depth!==undefined&&(_.depth=Math.round(T.depth));T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseGetOrderBookResponse(){return{figi:"",depth:0,bids:[],asks:[],lastPrice:undefined,closePrice:undefined,limitUp:undefined,limitDown:undefined,lastPriceTs:undefined,closePriceTs:undefined,orderbookTs:undefined,instrumentUid:""}}const Ct={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.depth!==0){_.uint32(16).int32(T.depth)}for(const m of T.bids){It.encode(m,_.uint32(26).fork()).ldelim()}for(const m of T.asks){It.encode(m,_.uint32(34).fork()).ldelim()}if(T.lastPrice!==undefined){Je.encode(T.lastPrice,_.uint32(42).fork()).ldelim()}if(T.closePrice!==undefined){Je.encode(T.closePrice,_.uint32(50).fork()).ldelim()}if(T.limitUp!==undefined){Je.encode(T.limitUp,_.uint32(58).fork()).ldelim()}if(T.limitDown!==undefined){Je.encode(T.limitDown,_.uint32(66).fork()).ldelim()}if(T.lastPriceTs!==undefined){ve.encode(market_data_toTimestamp(T.lastPriceTs),_.uint32(170).fork()).ldelim()}if(T.closePriceTs!==undefined){ve.encode(market_data_toTimestamp(T.closePriceTs),_.uint32(178).fork()).ldelim()}if(T.orderbookTs!==undefined){ve.encode(market_data_toTimestamp(T.orderbookTs),_.uint32(186).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(74).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOrderBookResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.depth=m.int32();break;case 3:E.bids.push(It.decode(m,m.uint32()));break;case 4:E.asks.push(It.decode(m,m.uint32()));break;case 5:E.lastPrice=Je.decode(m,m.uint32());break;case 6:E.closePrice=Je.decode(m,m.uint32());break;case 7:E.limitUp=Je.decode(m,m.uint32());break;case 8:E.limitDown=Je.decode(m,m.uint32());break;case 21:E.lastPriceTs=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 22:E.closePriceTs=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 23:E.orderbookTs=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 9:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",depth:market_data_isSet(T.depth)?Number(T.depth):0,bids:Array.isArray(T?.bids)?T.bids.map((T=>It.fromJSON(T))):[],asks:Array.isArray(T?.asks)?T.asks.map((T=>It.fromJSON(T))):[],lastPrice:market_data_isSet(T.lastPrice)?Je.fromJSON(T.lastPrice):undefined,closePrice:market_data_isSet(T.closePrice)?Je.fromJSON(T.closePrice):undefined,limitUp:market_data_isSet(T.limitUp)?Je.fromJSON(T.limitUp):undefined,limitDown:market_data_isSet(T.limitDown)?Je.fromJSON(T.limitDown):undefined,lastPriceTs:market_data_isSet(T.lastPriceTs)?market_data_fromJsonTimestamp(T.lastPriceTs):undefined,closePriceTs:market_data_isSet(T.closePriceTs)?market_data_fromJsonTimestamp(T.closePriceTs):undefined,orderbookTs:market_data_isSet(T.orderbookTs)?market_data_fromJsonTimestamp(T.orderbookTs):undefined,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.depth!==undefined&&(_.depth=Math.round(T.depth));if(T.bids){_.bids=T.bids.map((T=>T?It.toJSON(T):undefined))}else{_.bids=[]}if(T.asks){_.asks=T.asks.map((T=>T?It.toJSON(T):undefined))}else{_.asks=[]}T.lastPrice!==undefined&&(_.lastPrice=T.lastPrice?Je.toJSON(T.lastPrice):undefined);T.closePrice!==undefined&&(_.closePrice=T.closePrice?Je.toJSON(T.closePrice):undefined);T.limitUp!==undefined&&(_.limitUp=T.limitUp?Je.toJSON(T.limitUp):undefined);T.limitDown!==undefined&&(_.limitDown=T.limitDown?Je.toJSON(T.limitDown):undefined);T.lastPriceTs!==undefined&&(_.lastPriceTs=T.lastPriceTs.toISOString());T.closePriceTs!==undefined&&(_.closePriceTs=T.closePriceTs.toISOString());T.orderbookTs!==undefined&&(_.orderbookTs=T.orderbookTs.toISOString());T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseGetTradingStatusRequest(){return{instrumentId:""}}const kt={encode(T,_=Le.Z.Writer.create()){if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetTradingStatusRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseGetTradingStatusResponse(){return{figi:"",tradingStatus:0,limitOrderAvailableFlag:false,marketOrderAvailableFlag:false,apiTradeAvailableFlag:false,instrumentUid:""}}const Ut={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.tradingStatus!==0){_.uint32(16).int32(T.tradingStatus)}if(T.limitOrderAvailableFlag===true){_.uint32(24).bool(T.limitOrderAvailableFlag)}if(T.marketOrderAvailableFlag===true){_.uint32(32).bool(T.marketOrderAvailableFlag)}if(T.apiTradeAvailableFlag===true){_.uint32(40).bool(T.apiTradeAvailableFlag)}if(T.instrumentUid!==""){_.uint32(50).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetTradingStatusResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.tradingStatus=m.int32();break;case 3:E.limitOrderAvailableFlag=m.bool();break;case 4:E.marketOrderAvailableFlag=m.bool();break;case 5:E.apiTradeAvailableFlag=m.bool();break;case 6:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",tradingStatus:market_data_isSet(T.tradingStatus)?securityTradingStatusFromJSON(T.tradingStatus):0,limitOrderAvailableFlag:market_data_isSet(T.limitOrderAvailableFlag)?Boolean(T.limitOrderAvailableFlag):false,marketOrderAvailableFlag:market_data_isSet(T.marketOrderAvailableFlag)?Boolean(T.marketOrderAvailableFlag):false,apiTradeAvailableFlag:market_data_isSet(T.apiTradeAvailableFlag)?Boolean(T.apiTradeAvailableFlag):false,instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.tradingStatus!==undefined&&(_.tradingStatus=securityTradingStatusToJSON(T.tradingStatus));T.limitOrderAvailableFlag!==undefined&&(_.limitOrderAvailableFlag=T.limitOrderAvailableFlag);T.marketOrderAvailableFlag!==undefined&&(_.marketOrderAvailableFlag=T.marketOrderAvailableFlag);T.apiTradeAvailableFlag!==undefined&&(_.apiTradeAvailableFlag=T.apiTradeAvailableFlag);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseGetLastTradesRequest(){return{from:undefined,to:undefined,instrumentId:""}}const Dt={encode(T,_=Le.Z.Writer.create()){if(T.from!==undefined){ve.encode(market_data_toTimestamp(T.from),_.uint32(18).fork()).ldelim()}if(T.to!==undefined){ve.encode(market_data_toTimestamp(T.to),_.uint32(26).fork()).ldelim()}if(T.instrumentId!==""){_.uint32(34).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetLastTradesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.from=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.to=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;case 4:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{from:market_data_isSet(T.from)?market_data_fromJsonTimestamp(T.from):undefined,to:market_data_isSet(T.to)?market_data_fromJsonTimestamp(T.to):undefined,instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseGetLastTradesResponse(){return{trades:[]}}const wt={encode(T,_=Le.Z.Writer.create()){for(const m of T.trades){Ot.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetLastTradesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.trades.push(Ot.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trades:Array.isArray(T?.trades)?T.trades.map((T=>Ot.fromJSON(T))):[]}},toJSON(T){const _={};if(T.trades){_.trades=T.trades.map((T=>T?Ot.toJSON(T):undefined))}else{_.trades=[]}return _}};function createBaseGetMySubscriptions(){return{}}const Lt={encode(T,_=Le.Z.Writer.create()){return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetMySubscriptions();while(m.pos<S){const T=m.uint32();switch(T>>>3){default:m.skipType(T&7);break}}return E},fromJSON(T){return{}},toJSON(T){const _={};return _}};function createBaseGetClosePricesRequest(){return{instruments:[]}}const Bt={encode(T,_=Le.Z.Writer.create()){for(const m of T.instruments){vt.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetClosePricesRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.instruments.push(vt.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instruments:Array.isArray(T?.instruments)?T.instruments.map((T=>vt.fromJSON(T))):[]}},toJSON(T){const _={};if(T.instruments){_.instruments=T.instruments.map((T=>T?vt.toJSON(T):undefined))}else{_.instruments=[]}return _}};function createBaseInstrumentClosePriceRequest(){return{instrumentId:""}}const vt={encode(T,_=Le.Z.Writer.create()){if(T.instrumentId!==""){_.uint32(10).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseInstrumentClosePriceRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{instrumentId:market_data_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBaseGetClosePricesResponse(){return{closePrices:[]}}const Yt={encode(T,_=Le.Z.Writer.create()){for(const m of T.closePrices){Ft.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetClosePricesResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.closePrices.push(Ft.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{closePrices:Array.isArray(T?.closePrices)?T.closePrices.map((T=>Ft.fromJSON(T))):[]}},toJSON(T){const _={};if(T.closePrices){_.closePrices=T.closePrices.map((T=>T?Ft.toJSON(T):undefined))}else{_.closePrices=[]}return _}};function createBaseInstrumentClosePriceResponse(){return{figi:"",instrumentUid:"",price:undefined,time:undefined}}const Ft={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.instrumentUid!==""){_.uint32(18).string(T.instrumentUid)}if(T.price!==undefined){Je.encode(T.price,_.uint32(90).fork()).ldelim()}if(T.time!==undefined){ve.encode(market_data_toTimestamp(T.time),_.uint32(170).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseInstrumentClosePriceResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.instrumentUid=m.string();break;case 11:E.price=Je.decode(m,m.uint32());break;case 21:E.time=market_data_fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:market_data_isSet(T.figi)?String(T.figi):"",instrumentUid:market_data_isSet(T.instrumentUid)?String(T.instrumentUid):"",price:market_data_isSet(T.price)?Je.fromJSON(T.price):undefined,time:market_data_isSet(T.time)?market_data_fromJsonTimestamp(T.time):undefined}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.time!==undefined&&(_.time=T.time.toISOString());return _}};const Mt={name:"MarketDataService",fullName:"tinkoff.public.invest.api.contract.v1.MarketDataService",methods:{getCandles:{name:"GetCandles",requestType:Rt,requestStream:false,responseType:ht,responseStream:false,options:{}},getLastPrices:{name:"GetLastPrices",requestType:gt,requestStream:false,responseType:bt,responseStream:false,options:{}},getOrderBook:{name:"GetOrderBook",requestType:yt,requestStream:false,responseType:Ct,responseStream:false,options:{}},getTradingStatus:{name:"GetTradingStatus",requestType:kt,requestStream:false,responseType:Ut,responseStream:false,options:{}},getLastTrades:{name:"GetLastTrades",requestType:Dt,requestStream:false,responseType:wt,responseStream:false,options:{}},getClosePrices:{name:"GetClosePrices",requestType:Bt,requestStream:false,responseType:Yt,responseStream:false,options:{}}}};const Jt={name:"MarketDataStreamService",fullName:"tinkoff.public.invest.api.contract.v1.MarketDataStreamService",methods:{marketDataStream:{name:"MarketDataStream",requestType:He,requestStream:true,responseType:ze,responseStream:true,options:{}},marketDataServerSideStream:{name:"MarketDataServerSideStream",requestType:Ke,requestStream:false,responseType:ze,responseStream:true,options:{}}}};function market_data_toTimestamp(T){const _=T.getTime()/1e3;const m=T.getTime()%1e3*1e6;return{seconds:_,nanos:m}}function market_data_fromTimestamp(T){let _=T.seconds*1e3;_+=T.nanos/1e6;return new Date(_)}function market_data_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return market_data_fromTimestamp(ve.fromJSON(T))}}function market_data_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function market_data_isSet(T){return T!==null&&T!==undefined}const Gt="tinkoff.public.invest.api.contract.v1";var xt;(function(T){T[T["ORDER_DIRECTION_UNSPECIFIED"]=0]="ORDER_DIRECTION_UNSPECIFIED";T[T["ORDER_DIRECTION_BUY"]=1]="ORDER_DIRECTION_BUY";T[T["ORDER_DIRECTION_SELL"]=2]="ORDER_DIRECTION_SELL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(xt||(xt={}));function orderDirectionFromJSON(T){switch(T){case 0:case"ORDER_DIRECTION_UNSPECIFIED":return xt.ORDER_DIRECTION_UNSPECIFIED;case 1:case"ORDER_DIRECTION_BUY":return xt.ORDER_DIRECTION_BUY;case 2:case"ORDER_DIRECTION_SELL":return xt.ORDER_DIRECTION_SELL;case-1:case"UNRECOGNIZED":default:return xt.UNRECOGNIZED}}function orderDirectionToJSON(T){switch(T){case xt.ORDER_DIRECTION_UNSPECIFIED:return"ORDER_DIRECTION_UNSPECIFIED";case xt.ORDER_DIRECTION_BUY:return"ORDER_DIRECTION_BUY";case xt.ORDER_DIRECTION_SELL:return"ORDER_DIRECTION_SELL";case xt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var qt;(function(T){T[T["ORDER_TYPE_UNSPECIFIED"]=0]="ORDER_TYPE_UNSPECIFIED";T[T["ORDER_TYPE_LIMIT"]=1]="ORDER_TYPE_LIMIT";T[T["ORDER_TYPE_MARKET"]=2]="ORDER_TYPE_MARKET";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(qt||(qt={}));function orderTypeFromJSON(T){switch(T){case 0:case"ORDER_TYPE_UNSPECIFIED":return qt.ORDER_TYPE_UNSPECIFIED;case 1:case"ORDER_TYPE_LIMIT":return qt.ORDER_TYPE_LIMIT;case 2:case"ORDER_TYPE_MARKET":return qt.ORDER_TYPE_MARKET;case-1:case"UNRECOGNIZED":default:return qt.UNRECOGNIZED}}function orderTypeToJSON(T){switch(T){case qt.ORDER_TYPE_UNSPECIFIED:return"ORDER_TYPE_UNSPECIFIED";case qt.ORDER_TYPE_LIMIT:return"ORDER_TYPE_LIMIT";case qt.ORDER_TYPE_MARKET:return"ORDER_TYPE_MARKET";case qt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Vt;(function(T){T[T["EXECUTION_REPORT_STATUS_UNSPECIFIED"]=0]="EXECUTION_REPORT_STATUS_UNSPECIFIED";T[T["EXECUTION_REPORT_STATUS_FILL"]=1]="EXECUTION_REPORT_STATUS_FILL";T[T["EXECUTION_REPORT_STATUS_REJECTED"]=2]="EXECUTION_REPORT_STATUS_REJECTED";T[T["EXECUTION_REPORT_STATUS_CANCELLED"]=3]="EXECUTION_REPORT_STATUS_CANCELLED";T[T["EXECUTION_REPORT_STATUS_NEW"]=4]="EXECUTION_REPORT_STATUS_NEW";T[T["EXECUTION_REPORT_STATUS_PARTIALLYFILL"]=5]="EXECUTION_REPORT_STATUS_PARTIALLYFILL";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Vt||(Vt={}));function orderExecutionReportStatusFromJSON(T){switch(T){case 0:case"EXECUTION_REPORT_STATUS_UNSPECIFIED":return Vt.EXECUTION_REPORT_STATUS_UNSPECIFIED;case 1:case"EXECUTION_REPORT_STATUS_FILL":return Vt.EXECUTION_REPORT_STATUS_FILL;case 2:case"EXECUTION_REPORT_STATUS_REJECTED":return Vt.EXECUTION_REPORT_STATUS_REJECTED;case 3:case"EXECUTION_REPORT_STATUS_CANCELLED":return Vt.EXECUTION_REPORT_STATUS_CANCELLED;case 4:case"EXECUTION_REPORT_STATUS_NEW":return Vt.EXECUTION_REPORT_STATUS_NEW;case 5:case"EXECUTION_REPORT_STATUS_PARTIALLYFILL":return Vt.EXECUTION_REPORT_STATUS_PARTIALLYFILL;case-1:case"UNRECOGNIZED":default:return Vt.UNRECOGNIZED}}function orderExecutionReportStatusToJSON(T){switch(T){case Vt.EXECUTION_REPORT_STATUS_UNSPECIFIED:return"EXECUTION_REPORT_STATUS_UNSPECIFIED";case Vt.EXECUTION_REPORT_STATUS_FILL:return"EXECUTION_REPORT_STATUS_FILL";case Vt.EXECUTION_REPORT_STATUS_REJECTED:return"EXECUTION_REPORT_STATUS_REJECTED";case Vt.EXECUTION_REPORT_STATUS_CANCELLED:return"EXECUTION_REPORT_STATUS_CANCELLED";case Vt.EXECUTION_REPORT_STATUS_NEW:return"EXECUTION_REPORT_STATUS_NEW";case Vt.EXECUTION_REPORT_STATUS_PARTIALLYFILL:return"EXECUTION_REPORT_STATUS_PARTIALLYFILL";case Vt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Zt;(function(T){T[T["PRICE_TYPE_UNSPECIFIED"]=0]="PRICE_TYPE_UNSPECIFIED";T[T["PRICE_TYPE_POINT"]=1]="PRICE_TYPE_POINT";T[T["PRICE_TYPE_CURRENCY"]=2]="PRICE_TYPE_CURRENCY";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Zt||(Zt={}));function priceTypeFromJSON(T){switch(T){case 0:case"PRICE_TYPE_UNSPECIFIED":return Zt.PRICE_TYPE_UNSPECIFIED;case 1:case"PRICE_TYPE_POINT":return Zt.PRICE_TYPE_POINT;case 2:case"PRICE_TYPE_CURRENCY":return Zt.PRICE_TYPE_CURRENCY;case-1:case"UNRECOGNIZED":default:return Zt.UNRECOGNIZED}}function priceTypeToJSON(T){switch(T){case Zt.PRICE_TYPE_UNSPECIFIED:return"PRICE_TYPE_UNSPECIFIED";case Zt.PRICE_TYPE_POINT:return"PRICE_TYPE_POINT";case Zt.PRICE_TYPE_CURRENCY:return"PRICE_TYPE_CURRENCY";case Zt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseTradesStreamRequest(){return{accounts:[]}}const Xt={encode(T,_=Le.Z.Writer.create()){for(const m of T.accounts){_.uint32(10).string(m)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTradesStreamRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accounts.push(m.string());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const _={};if(T.accounts){_.accounts=T.accounts.map((T=>T))}else{_.accounts=[]}return _}};function createBaseTradesStreamResponse(){return{orderTrades:undefined,ping:undefined}}const Wt={encode(T,_=Le.Z.Writer.create()){if(T.orderTrades!==undefined){Ht.encode(T.orderTrades,_.uint32(10).fork()).ldelim()}if(T.ping!==undefined){Ping.encode(T.ping,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseTradesStreamResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.orderTrades=Ht.decode(m,m.uint32());break;case 2:E.ping=Ping.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{orderTrades:orders_isSet(T.orderTrades)?Ht.fromJSON(T.orderTrades):undefined,ping:orders_isSet(T.ping)?Ping.fromJSON(T.ping):undefined}},toJSON(T){const _={};T.orderTrades!==undefined&&(_.orderTrades=T.orderTrades?Ht.toJSON(T.orderTrades):undefined);T.ping!==undefined&&(_.ping=T.ping?Ping.toJSON(T.ping):undefined);return _}};function createBaseOrderTrades(){return{orderId:"",createdAt:undefined,direction:0,figi:"",trades:[],accountId:"",instrumentUid:""}}const Ht={encode(T,_=Le.Z.Writer.create()){if(T.orderId!==""){_.uint32(10).string(T.orderId)}if(T.createdAt!==undefined){ve.encode(orders_toTimestamp(T.createdAt),_.uint32(18).fork()).ldelim()}if(T.direction!==0){_.uint32(24).int32(T.direction)}if(T.figi!==""){_.uint32(34).string(T.figi)}for(const m of T.trades){Kt.encode(m,_.uint32(42).fork()).ldelim()}if(T.accountId!==""){_.uint32(50).string(T.accountId)}if(T.instrumentUid!==""){_.uint32(58).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderTrades();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.orderId=m.string();break;case 2:E.createdAt=orders_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.direction=m.int32();break;case 4:E.figi=m.string();break;case 5:E.trades.push(Kt.decode(m,m.uint32()));break;case 6:E.accountId=m.string();break;case 7:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",createdAt:orders_isSet(T.createdAt)?orders_fromJsonTimestamp(T.createdAt):undefined,direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,figi:orders_isSet(T.figi)?String(T.figi):"",trades:Array.isArray(T?.trades)?T.trades.map((T=>Kt.fromJSON(T))):[],accountId:orders_isSet(T.accountId)?String(T.accountId):"",instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.orderId!==undefined&&(_.orderId=T.orderId);T.createdAt!==undefined&&(_.createdAt=T.createdAt.toISOString());T.direction!==undefined&&(_.direction=orderDirectionToJSON(T.direction));T.figi!==undefined&&(_.figi=T.figi);if(T.trades){_.trades=T.trades.map((T=>T?Kt.toJSON(T):undefined))}else{_.trades=[]}T.accountId!==undefined&&(_.accountId=T.accountId);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseOrderTrade(){return{dateTime:undefined,price:undefined,quantity:0,tradeId:""}}const Kt={encode(T,_=Le.Z.Writer.create()){if(T.dateTime!==undefined){ve.encode(orders_toTimestamp(T.dateTime),_.uint32(10).fork()).ldelim()}if(T.price!==undefined){Je.encode(T.price,_.uint32(18).fork()).ldelim()}if(T.quantity!==0){_.uint32(24).int64(T.quantity)}if(T.tradeId!==""){_.uint32(34).string(T.tradeId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderTrade();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.dateTime=orders_fromTimestamp(ve.decode(m,m.uint32()));break;case 2:E.price=Je.decode(m,m.uint32());break;case 3:E.quantity=orders_longToNumber(m.int64());break;case 4:E.tradeId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{dateTime:orders_isSet(T.dateTime)?orders_fromJsonTimestamp(T.dateTime):undefined,price:orders_isSet(T.price)?Je.fromJSON(T.price):undefined,quantity:orders_isSet(T.quantity)?Number(T.quantity):0,tradeId:orders_isSet(T.tradeId)?String(T.tradeId):""}},toJSON(T){const _={};T.dateTime!==undefined&&(_.dateTime=T.dateTime.toISOString());T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.tradeId!==undefined&&(_.tradeId=T.tradeId);return _}};function createBasePostOrderRequest(){return{quantity:0,price:undefined,direction:0,accountId:"",orderType:0,orderId:"",instrumentId:""}}const zt={encode(T,_=Le.Z.Writer.create()){if(T.quantity!==0){_.uint32(16).int64(T.quantity)}if(T.price!==undefined){Je.encode(T.price,_.uint32(26).fork()).ldelim()}if(T.direction!==0){_.uint32(32).int32(T.direction)}if(T.accountId!==""){_.uint32(42).string(T.accountId)}if(T.orderType!==0){_.uint32(48).int32(T.orderType)}if(T.orderId!==""){_.uint32(58).string(T.orderId)}if(T.instrumentId!==""){_.uint32(66).string(T.instrumentId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePostOrderRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 2:E.quantity=orders_longToNumber(m.int64());break;case 3:E.price=Je.decode(m,m.uint32());break;case 4:E.direction=m.int32();break;case 5:E.accountId=m.string();break;case 6:E.orderType=m.int32();break;case 7:E.orderId=m.string();break;case 8:E.instrumentId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{quantity:orders_isSet(T.quantity)?Number(T.quantity):0,price:orders_isSet(T.price)?Je.fromJSON(T.price):undefined,direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,orderId:orders_isSet(T.orderId)?String(T.orderId):"",instrumentId:orders_isSet(T.instrumentId)?String(T.instrumentId):""}},toJSON(T){const _={};T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.direction!==undefined&&(_.direction=orderDirectionToJSON(T.direction));T.accountId!==undefined&&(_.accountId=T.accountId);T.orderType!==undefined&&(_.orderType=orderTypeToJSON(T.orderType));T.orderId!==undefined&&(_.orderId=T.orderId);T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);return _}};function createBasePostOrderResponse(){return{orderId:"",executionReportStatus:0,lotsRequested:0,lotsExecuted:0,initialOrderPrice:undefined,executedOrderPrice:undefined,totalOrderAmount:undefined,initialCommission:undefined,executedCommission:undefined,aciValue:undefined,figi:"",direction:0,initialSecurityPrice:undefined,orderType:0,message:"",initialOrderPricePt:undefined,instrumentUid:""}}const $t={encode(T,_=Le.Z.Writer.create()){if(T.orderId!==""){_.uint32(10).string(T.orderId)}if(T.executionReportStatus!==0){_.uint32(16).int32(T.executionReportStatus)}if(T.lotsRequested!==0){_.uint32(24).int64(T.lotsRequested)}if(T.lotsExecuted!==0){_.uint32(32).int64(T.lotsExecuted)}if(T.initialOrderPrice!==undefined){Me.encode(T.initialOrderPrice,_.uint32(42).fork()).ldelim()}if(T.executedOrderPrice!==undefined){Me.encode(T.executedOrderPrice,_.uint32(50).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Me.encode(T.totalOrderAmount,_.uint32(58).fork()).ldelim()}if(T.initialCommission!==undefined){Me.encode(T.initialCommission,_.uint32(66).fork()).ldelim()}if(T.executedCommission!==undefined){Me.encode(T.executedCommission,_.uint32(74).fork()).ldelim()}if(T.aciValue!==undefined){Me.encode(T.aciValue,_.uint32(82).fork()).ldelim()}if(T.figi!==""){_.uint32(90).string(T.figi)}if(T.direction!==0){_.uint32(96).int32(T.direction)}if(T.initialSecurityPrice!==undefined){Me.encode(T.initialSecurityPrice,_.uint32(106).fork()).ldelim()}if(T.orderType!==0){_.uint32(112).int32(T.orderType)}if(T.message!==""){_.uint32(122).string(T.message)}if(T.initialOrderPricePt!==undefined){Je.encode(T.initialOrderPricePt,_.uint32(130).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(138).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePostOrderResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.orderId=m.string();break;case 2:E.executionReportStatus=m.int32();break;case 3:E.lotsRequested=orders_longToNumber(m.int64());break;case 4:E.lotsExecuted=orders_longToNumber(m.int64());break;case 5:E.initialOrderPrice=Me.decode(m,m.uint32());break;case 6:E.executedOrderPrice=Me.decode(m,m.uint32());break;case 7:E.totalOrderAmount=Me.decode(m,m.uint32());break;case 8:E.initialCommission=Me.decode(m,m.uint32());break;case 9:E.executedCommission=Me.decode(m,m.uint32());break;case 10:E.aciValue=Me.decode(m,m.uint32());break;case 11:E.figi=m.string();break;case 12:E.direction=m.int32();break;case 13:E.initialSecurityPrice=Me.decode(m,m.uint32());break;case 14:E.orderType=m.int32();break;case 15:E.message=m.string();break;case 16:E.initialOrderPricePt=Je.decode(m,m.uint32());break;case 17:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",executionReportStatus:orders_isSet(T.executionReportStatus)?orderExecutionReportStatusFromJSON(T.executionReportStatus):0,lotsRequested:orders_isSet(T.lotsRequested)?Number(T.lotsRequested):0,lotsExecuted:orders_isSet(T.lotsExecuted)?Number(T.lotsExecuted):0,initialOrderPrice:orders_isSet(T.initialOrderPrice)?Me.fromJSON(T.initialOrderPrice):undefined,executedOrderPrice:orders_isSet(T.executedOrderPrice)?Me.fromJSON(T.executedOrderPrice):undefined,totalOrderAmount:orders_isSet(T.totalOrderAmount)?Me.fromJSON(T.totalOrderAmount):undefined,initialCommission:orders_isSet(T.initialCommission)?Me.fromJSON(T.initialCommission):undefined,executedCommission:orders_isSet(T.executedCommission)?Me.fromJSON(T.executedCommission):undefined,aciValue:orders_isSet(T.aciValue)?Me.fromJSON(T.aciValue):undefined,figi:orders_isSet(T.figi)?String(T.figi):"",direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,initialSecurityPrice:orders_isSet(T.initialSecurityPrice)?Me.fromJSON(T.initialSecurityPrice):undefined,orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,message:orders_isSet(T.message)?String(T.message):"",initialOrderPricePt:orders_isSet(T.initialOrderPricePt)?Je.fromJSON(T.initialOrderPricePt):undefined,instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.orderId!==undefined&&(_.orderId=T.orderId);T.executionReportStatus!==undefined&&(_.executionReportStatus=orderExecutionReportStatusToJSON(T.executionReportStatus));T.lotsRequested!==undefined&&(_.lotsRequested=Math.round(T.lotsRequested));T.lotsExecuted!==undefined&&(_.lotsExecuted=Math.round(T.lotsExecuted));T.initialOrderPrice!==undefined&&(_.initialOrderPrice=T.initialOrderPrice?Me.toJSON(T.initialOrderPrice):undefined);T.executedOrderPrice!==undefined&&(_.executedOrderPrice=T.executedOrderPrice?Me.toJSON(T.executedOrderPrice):undefined);T.totalOrderAmount!==undefined&&(_.totalOrderAmount=T.totalOrderAmount?Me.toJSON(T.totalOrderAmount):undefined);T.initialCommission!==undefined&&(_.initialCommission=T.initialCommission?Me.toJSON(T.initialCommission):undefined);T.executedCommission!==undefined&&(_.executedCommission=T.executedCommission?Me.toJSON(T.executedCommission):undefined);T.aciValue!==undefined&&(_.aciValue=T.aciValue?Me.toJSON(T.aciValue):undefined);T.figi!==undefined&&(_.figi=T.figi);T.direction!==undefined&&(_.direction=orderDirectionToJSON(T.direction));T.initialSecurityPrice!==undefined&&(_.initialSecurityPrice=T.initialSecurityPrice?Me.toJSON(T.initialSecurityPrice):undefined);T.orderType!==undefined&&(_.orderType=orderTypeToJSON(T.orderType));T.message!==undefined&&(_.message=T.message);T.initialOrderPricePt!==undefined&&(_.initialOrderPricePt=T.initialOrderPricePt?Je.toJSON(T.initialOrderPricePt):undefined);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseCancelOrderRequest(){return{accountId:"",orderId:""}}const jt={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.orderId!==""){_.uint32(18).string(T.orderId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseCancelOrderRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.orderId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.orderId!==undefined&&(_.orderId=T.orderId);return _}};function createBaseCancelOrderResponse(){return{time:undefined}}const Qt={encode(T,_=Le.Z.Writer.create()){if(T.time!==undefined){ve.encode(orders_toTimestamp(T.time),_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseCancelOrderResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.time=orders_fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{time:orders_isSet(T.time)?orders_fromJsonTimestamp(T.time):undefined}},toJSON(T){const _={};T.time!==undefined&&(_.time=T.time.toISOString());return _}};function createBaseGetOrderStateRequest(){return{accountId:"",orderId:""}}const en={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.orderId!==""){_.uint32(18).string(T.orderId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOrderStateRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.orderId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.orderId!==undefined&&(_.orderId=T.orderId);return _}};function createBaseGetOrdersRequest(){return{accountId:""}}const tn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOrdersRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);return _}};function createBaseGetOrdersResponse(){return{orders:[]}}const nn={encode(T,_=Le.Z.Writer.create()){for(const m of T.orders){rn.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOrdersResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.orders.push(rn.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{orders:Array.isArray(T?.orders)?T.orders.map((T=>rn.fromJSON(T))):[]}},toJSON(T){const _={};if(T.orders){_.orders=T.orders.map((T=>T?rn.toJSON(T):undefined))}else{_.orders=[]}return _}};function createBaseOrderState(){return{orderId:"",executionReportStatus:0,lotsRequested:0,lotsExecuted:0,initialOrderPrice:undefined,executedOrderPrice:undefined,totalOrderAmount:undefined,averagePositionPrice:undefined,initialCommission:undefined,executedCommission:undefined,figi:"",direction:0,initialSecurityPrice:undefined,stages:[],serviceCommission:undefined,currency:"",orderType:0,orderDate:undefined,instrumentUid:""}}const rn={encode(T,_=Le.Z.Writer.create()){if(T.orderId!==""){_.uint32(10).string(T.orderId)}if(T.executionReportStatus!==0){_.uint32(16).int32(T.executionReportStatus)}if(T.lotsRequested!==0){_.uint32(24).int64(T.lotsRequested)}if(T.lotsExecuted!==0){_.uint32(32).int64(T.lotsExecuted)}if(T.initialOrderPrice!==undefined){Me.encode(T.initialOrderPrice,_.uint32(42).fork()).ldelim()}if(T.executedOrderPrice!==undefined){Me.encode(T.executedOrderPrice,_.uint32(50).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Me.encode(T.totalOrderAmount,_.uint32(58).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Me.encode(T.averagePositionPrice,_.uint32(66).fork()).ldelim()}if(T.initialCommission!==undefined){Me.encode(T.initialCommission,_.uint32(74).fork()).ldelim()}if(T.executedCommission!==undefined){Me.encode(T.executedCommission,_.uint32(82).fork()).ldelim()}if(T.figi!==""){_.uint32(90).string(T.figi)}if(T.direction!==0){_.uint32(96).int32(T.direction)}if(T.initialSecurityPrice!==undefined){Me.encode(T.initialSecurityPrice,_.uint32(106).fork()).ldelim()}for(const m of T.stages){sn.encode(m,_.uint32(114).fork()).ldelim()}if(T.serviceCommission!==undefined){Me.encode(T.serviceCommission,_.uint32(122).fork()).ldelim()}if(T.currency!==""){_.uint32(130).string(T.currency)}if(T.orderType!==0){_.uint32(136).int32(T.orderType)}if(T.orderDate!==undefined){ve.encode(orders_toTimestamp(T.orderDate),_.uint32(146).fork()).ldelim()}if(T.instrumentUid!==""){_.uint32(154).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderState();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.orderId=m.string();break;case 2:E.executionReportStatus=m.int32();break;case 3:E.lotsRequested=orders_longToNumber(m.int64());break;case 4:E.lotsExecuted=orders_longToNumber(m.int64());break;case 5:E.initialOrderPrice=Me.decode(m,m.uint32());break;case 6:E.executedOrderPrice=Me.decode(m,m.uint32());break;case 7:E.totalOrderAmount=Me.decode(m,m.uint32());break;case 8:E.averagePositionPrice=Me.decode(m,m.uint32());break;case 9:E.initialCommission=Me.decode(m,m.uint32());break;case 10:E.executedCommission=Me.decode(m,m.uint32());break;case 11:E.figi=m.string();break;case 12:E.direction=m.int32();break;case 13:E.initialSecurityPrice=Me.decode(m,m.uint32());break;case 14:E.stages.push(sn.decode(m,m.uint32()));break;case 15:E.serviceCommission=Me.decode(m,m.uint32());break;case 16:E.currency=m.string();break;case 17:E.orderType=m.int32();break;case 18:E.orderDate=orders_fromTimestamp(ve.decode(m,m.uint32()));break;case 19:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{orderId:orders_isSet(T.orderId)?String(T.orderId):"",executionReportStatus:orders_isSet(T.executionReportStatus)?orderExecutionReportStatusFromJSON(T.executionReportStatus):0,lotsRequested:orders_isSet(T.lotsRequested)?Number(T.lotsRequested):0,lotsExecuted:orders_isSet(T.lotsExecuted)?Number(T.lotsExecuted):0,initialOrderPrice:orders_isSet(T.initialOrderPrice)?Me.fromJSON(T.initialOrderPrice):undefined,executedOrderPrice:orders_isSet(T.executedOrderPrice)?Me.fromJSON(T.executedOrderPrice):undefined,totalOrderAmount:orders_isSet(T.totalOrderAmount)?Me.fromJSON(T.totalOrderAmount):undefined,averagePositionPrice:orders_isSet(T.averagePositionPrice)?Me.fromJSON(T.averagePositionPrice):undefined,initialCommission:orders_isSet(T.initialCommission)?Me.fromJSON(T.initialCommission):undefined,executedCommission:orders_isSet(T.executedCommission)?Me.fromJSON(T.executedCommission):undefined,figi:orders_isSet(T.figi)?String(T.figi):"",direction:orders_isSet(T.direction)?orderDirectionFromJSON(T.direction):0,initialSecurityPrice:orders_isSet(T.initialSecurityPrice)?Me.fromJSON(T.initialSecurityPrice):undefined,stages:Array.isArray(T?.stages)?T.stages.map((T=>sn.fromJSON(T))):[],serviceCommission:orders_isSet(T.serviceCommission)?Me.fromJSON(T.serviceCommission):undefined,currency:orders_isSet(T.currency)?String(T.currency):"",orderType:orders_isSet(T.orderType)?orderTypeFromJSON(T.orderType):0,orderDate:orders_isSet(T.orderDate)?orders_fromJsonTimestamp(T.orderDate):undefined,instrumentUid:orders_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.orderId!==undefined&&(_.orderId=T.orderId);T.executionReportStatus!==undefined&&(_.executionReportStatus=orderExecutionReportStatusToJSON(T.executionReportStatus));T.lotsRequested!==undefined&&(_.lotsRequested=Math.round(T.lotsRequested));T.lotsExecuted!==undefined&&(_.lotsExecuted=Math.round(T.lotsExecuted));T.initialOrderPrice!==undefined&&(_.initialOrderPrice=T.initialOrderPrice?Me.toJSON(T.initialOrderPrice):undefined);T.executedOrderPrice!==undefined&&(_.executedOrderPrice=T.executedOrderPrice?Me.toJSON(T.executedOrderPrice):undefined);T.totalOrderAmount!==undefined&&(_.totalOrderAmount=T.totalOrderAmount?Me.toJSON(T.totalOrderAmount):undefined);T.averagePositionPrice!==undefined&&(_.averagePositionPrice=T.averagePositionPrice?Me.toJSON(T.averagePositionPrice):undefined);T.initialCommission!==undefined&&(_.initialCommission=T.initialCommission?Me.toJSON(T.initialCommission):undefined);T.executedCommission!==undefined&&(_.executedCommission=T.executedCommission?Me.toJSON(T.executedCommission):undefined);T.figi!==undefined&&(_.figi=T.figi);T.direction!==undefined&&(_.direction=orderDirectionToJSON(T.direction));T.initialSecurityPrice!==undefined&&(_.initialSecurityPrice=T.initialSecurityPrice?Me.toJSON(T.initialSecurityPrice):undefined);if(T.stages){_.stages=T.stages.map((T=>T?sn.toJSON(T):undefined))}else{_.stages=[]}T.serviceCommission!==undefined&&(_.serviceCommission=T.serviceCommission?Me.toJSON(T.serviceCommission):undefined);T.currency!==undefined&&(_.currency=T.currency);T.orderType!==undefined&&(_.orderType=orderTypeToJSON(T.orderType));T.orderDate!==undefined&&(_.orderDate=T.orderDate.toISOString());T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBaseOrderStage(){return{price:undefined,quantity:0,tradeId:""}}const sn={encode(T,_=Le.Z.Writer.create()){if(T.price!==undefined){Me.encode(T.price,_.uint32(10).fork()).ldelim()}if(T.quantity!==0){_.uint32(16).int64(T.quantity)}if(T.tradeId!==""){_.uint32(26).string(T.tradeId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOrderStage();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.price=Me.decode(m,m.uint32());break;case 2:E.quantity=orders_longToNumber(m.int64());break;case 3:E.tradeId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{price:orders_isSet(T.price)?Me.fromJSON(T.price):undefined,quantity:orders_isSet(T.quantity)?Number(T.quantity):0,tradeId:orders_isSet(T.tradeId)?String(T.tradeId):""}},toJSON(T){const _={};T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.tradeId!==undefined&&(_.tradeId=T.tradeId);return _}};function createBaseReplaceOrderRequest(){return{accountId:"",orderId:"",idempotencyKey:"",quantity:0,price:undefined,priceType:0}}const on={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.orderId!==""){_.uint32(50).string(T.orderId)}if(T.idempotencyKey!==""){_.uint32(58).string(T.idempotencyKey)}if(T.quantity!==0){_.uint32(88).int64(T.quantity)}if(T.price!==undefined){Je.encode(T.price,_.uint32(98).fork()).ldelim()}if(T.priceType!==0){_.uint32(104).int32(T.priceType)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseReplaceOrderRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 6:E.orderId=m.string();break;case 7:E.idempotencyKey=m.string();break;case 11:E.quantity=orders_longToNumber(m.int64());break;case 12:E.price=Je.decode(m,m.uint32());break;case 13:E.priceType=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?String(T.accountId):"",orderId:orders_isSet(T.orderId)?String(T.orderId):"",idempotencyKey:orders_isSet(T.idempotencyKey)?String(T.idempotencyKey):"",quantity:orders_isSet(T.quantity)?Number(T.quantity):0,price:orders_isSet(T.price)?Je.fromJSON(T.price):undefined,priceType:orders_isSet(T.priceType)?priceTypeFromJSON(T.priceType):0}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.orderId!==undefined&&(_.orderId=T.orderId);T.idempotencyKey!==undefined&&(_.idempotencyKey=T.idempotencyKey);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.price!==undefined&&(_.price=T.price?Je.toJSON(T.price):undefined);T.priceType!==undefined&&(_.priceType=priceTypeToJSON(T.priceType));return _}};function createBaseGetMaxLotsRequest(){return{accountId:"",instrumentId:"",price:undefined}}const an={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}if(T.price!==undefined){Je.encode(T.price,_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetMaxLotsRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:if(T!==10){break}E.accountId=m.string();continue;case 2:if(T!==18){break}E.instrumentId=m.string();continue;case 3:if(T!==26){break}E.price=Je.decode(m,m.uint32());continue}if((T&7)===4||T===0){break}m.skipType(T&7)}return E},fromJSON(T){return{accountId:orders_isSet(T.accountId)?globalThis.String(T.accountId):"",instrumentId:orders_isSet(T.instrumentId)?globalThis.String(T.instrumentId):"",price:orders_isSet(T.price)?Je.fromJSON(T.price):undefined}},toJSON(T){const _={};if(T.accountId!==""){_.accountId=T.accountId}if(T.instrumentId!==""){_.instrumentId=T.instrumentId}if(T.price!==undefined){_.price=Je.toJSON(T.price)}return _}};function createBaseGetMaxLotsResponse(){return{currency:"",buyLimits:undefined,buyMarginLimits:undefined,sellLimits:undefined,sellMarginLimits:undefined}}const un={encode(T,_=Le.Z.Writer.create()){if(T.currency!==""){_.uint32(10).string(T.currency)}if(T.buyLimits!==undefined){dn.encode(T.buyLimits,_.uint32(18).fork()).ldelim()}if(T.buyMarginLimits!==undefined){dn.encode(T.buyMarginLimits,_.uint32(26).fork()).ldelim()}if(T.sellLimits!==undefined){cn.encode(T.sellLimits,_.uint32(34).fork()).ldelim()}if(T.sellMarginLimits!==undefined){cn.encode(T.sellMarginLimits,_.uint32(42).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetMaxLotsResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:if(T!==10){break}E.currency=m.string();continue;case 2:if(T!==18){break}E.buyLimits=dn.decode(m,m.uint32());continue;case 3:if(T!==26){break}E.buyMarginLimits=dn.decode(m,m.uint32());continue;case 4:if(T!==34){break}E.sellLimits=cn.decode(m,m.uint32());continue;case 5:if(T!==42){break}E.sellMarginLimits=cn.decode(m,m.uint32());continue}if((T&7)===4||T===0){break}m.skipType(T&7)}return E},fromJSON(T){return{currency:orders_isSet(T.currency)?globalThis.String(T.currency):"",buyLimits:orders_isSet(T.buyLimits)?dn.fromJSON(T.buyLimits):undefined,buyMarginLimits:orders_isSet(T.buyMarginLimits)?dn.fromJSON(T.buyMarginLimits):undefined,sellLimits:orders_isSet(T.sellLimits)?cn.fromJSON(T.sellLimits):undefined,sellMarginLimits:orders_isSet(T.sellMarginLimits)?cn.fromJSON(T.sellMarginLimits):undefined}},toJSON(T){const _={};if(T.currency!==""){_.currency=T.currency}if(T.buyLimits!==undefined){_.buyLimits=dn.toJSON(T.buyLimits)}if(T.buyMarginLimits!==undefined){_.buyMarginLimits=dn.toJSON(T.buyMarginLimits)}if(T.sellLimits!==undefined){_.sellLimits=cn.toJSON(T.sellLimits)}if(T.sellMarginLimits!==undefined){_.sellMarginLimits=cn.toJSON(T.sellMarginLimits)}return _}};function createBaseGetMaxLotsResponse_BuyLimitsView(){return{buyMoneyAmount:undefined,buyMaxLots:0,buyMaxMarketLots:0}}const dn={encode(T,_=Le.Z.Writer.create()){if(T.buyMoneyAmount!==undefined){Je.encode(T.buyMoneyAmount,_.uint32(10).fork()).ldelim()}if(T.buyMaxLots!==0){_.uint32(16).int64(T.buyMaxLots)}if(T.buyMaxMarketLots!==0){_.uint32(24).int64(T.buyMaxMarketLots)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetMaxLotsResponse_BuyLimitsView();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:if(T!==10){break}E.buyMoneyAmount=Je.decode(m,m.uint32());continue;case 2:if(T!==16){break}E.buyMaxLots=orders_longToNumber(m.int64());continue;case 3:if(T!==24){break}E.buyMaxMarketLots=orders_longToNumber(m.int64());continue}if((T&7)===4||T===0){break}m.skipType(T&7)}return E},fromJSON(T){return{buyMoneyAmount:orders_isSet(T.buyMoneyAmount)?Je.fromJSON(T.buyMoneyAmount):undefined,buyMaxLots:orders_isSet(T.buyMaxLots)?globalThis.Number(T.buyMaxLots):0,buyMaxMarketLots:orders_isSet(T.buyMaxMarketLots)?globalThis.Number(T.buyMaxMarketLots):0}},toJSON(T){const _={};if(T.buyMoneyAmount!==undefined){_.buyMoneyAmount=Je.toJSON(T.buyMoneyAmount)}if(T.buyMaxLots!==0){_.buyMaxLots=Math.round(T.buyMaxLots)}if(T.buyMaxMarketLots!==0){_.buyMaxMarketLots=Math.round(T.buyMaxMarketLots)}return _}};function createBaseGetMaxLotsResponse_SellLimitsView(){return{sellMaxLots:0}}const cn={encode(T,_=Le.Z.Writer.create()){if(T.sellMaxLots!==0){_.uint32(8).int64(T.sellMaxLots)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:Le.Z.Reader.create(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetMaxLotsResponse_SellLimitsView();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:if(T!==8){break}E.sellMaxLots=orders_longToNumber(m.int64());continue}if((T&7)===4||T===0){break}m.skipType(T&7)}return E},fromJSON(T){return{sellMaxLots:orders_isSet(T.sellMaxLots)?globalThis.Number(T.sellMaxLots):0}},toJSON(T){const _={};if(T.sellMaxLots!==0){_.sellMaxLots=Math.round(T.sellMaxLots)}return _}};const fn={name:"OrdersStreamService",fullName:"tinkoff.public.invest.api.contract.v1.OrdersStreamService",methods:{tradesStream:{name:"TradesStream",requestType:Xt,requestStream:false,responseType:Wt,responseStream:true,options:{}}}};const ln={name:"OrdersService",fullName:"tinkoff.public.invest.api.contract.v1.OrdersService",methods:{postOrder:{name:"PostOrder",requestType:zt,requestStream:false,responseType:$t,responseStream:false,options:{}},cancelOrder:{name:"CancelOrder",requestType:jt,requestStream:false,responseType:Qt,responseStream:false,options:{}},getOrderState:{name:"GetOrderState",requestType:en,requestStream:false,responseType:rn,responseStream:false,options:{}},getOrders:{name:"GetOrders",requestType:tn,requestStream:false,responseType:nn,responseStream:false,options:{}},replaceOrder:{name:"ReplaceOrder",requestType:on,requestStream:false,responseType:$t,responseStream:false,options:{}},getMaxLots:{name:"GetMaxLots",requestType:an,requestStream:false,responseType:un,responseStream:false,options:{}}}};function orders_toTimestamp(T){const _=T.getTime()/1e3;const m=T.getTime()%1e3*1e6;return{seconds:_,nanos:m}}function orders_fromTimestamp(T){let _=T.seconds*1e3;_+=T.nanos/1e6;return new Date(_)}function orders_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return orders_fromTimestamp(ve.fromJSON(T))}}function orders_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function orders_isSet(T){return T!==null&&T!==undefined}function parseJwt(T){const[,_]=T.split(".");return JSON.parse(typeof Buffer!=="undefined"?Buffer.from(_,"base64"):atob(_))}function isJWTTokenExpired(T){if(T){try{const{exp:_}=parseJwt(T);if(typeof _==="number"){return Date.now()+1e3>=_*1e3}}catch{return true}}return true}function stringToBuffer(T){const _=typeof Buffer!=="undefined"?Buffer.from(T,"base64").toString("binary"):globalThis.atob(T);const m=new ArrayBuffer(_.length);const S=new Uint8Array(m);for(let T=0;T<_.length;T++){S[T]=_.charCodeAt(T)}return m}function bufferToString(T){const _=String.fromCharCode.apply(null,new Uint8Array(T));return typeof Buffer!=="undefined"?Buffer.from(T).toString("base64"):globalThis.btoa(_)}function generateIV(){return globalThis.crypto.getRandomValues(new Uint8Array(12))}function uuidv4(){return globalThis.crypto.randomUUID()}async function sha256(T){const _=(new TextEncoder).encode(T);const m=await globalThis.crypto.subtle.digest("SHA-256",_);const S=Array.from(new Uint8Array(m));return S.map((T=>T.toString(16).padStart(2,"0"))).join("")}async function HMAC(T,_,m={}){let S=T;const E=new TextEncoder;const I=E.encode(_);if(typeof T==="string"){S=E.encode(T)}const O=await globalThis.crypto.subtle.importKey("raw",S,{name:"HMAC",hash:m.algorithm??"SHA-256"},false,["sign"]);const N=await globalThis.crypto.subtle.sign("HMAC",O,I);if(m?.format==="hex"){const T=Array.from(new Uint8Array(N));const _=T.map((T=>T.toString(16).padStart(2,"0"))).join("");return _}else{return N}}async function generateAWSSigningKey({ycStaticKeySecret:T,date:_,region:m}){const S=await HMAC(`AWS4${T}`,_);const E=await HMAC(S,m);const I=await HMAC(E,"s3");return HMAC(I,"aws4_request")}const Tn="tinkoff.public.invest.api.contract.v1";var pn;(function(T){T[T["OPERATION_STATE_UNSPECIFIED"]=0]="OPERATION_STATE_UNSPECIFIED";T[T["OPERATION_STATE_EXECUTED"]=1]="OPERATION_STATE_EXECUTED";T[T["OPERATION_STATE_CANCELED"]=2]="OPERATION_STATE_CANCELED";T[T["OPERATION_STATE_PROGRESS"]=3]="OPERATION_STATE_PROGRESS";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(pn||(pn={}));function operationStateFromJSON(T){switch(T){case 0:case"OPERATION_STATE_UNSPECIFIED":return pn.OPERATION_STATE_UNSPECIFIED;case 1:case"OPERATION_STATE_EXECUTED":return pn.OPERATION_STATE_EXECUTED;case 2:case"OPERATION_STATE_CANCELED":return pn.OPERATION_STATE_CANCELED;case 3:case"OPERATION_STATE_PROGRESS":return pn.OPERATION_STATE_PROGRESS;case-1:case"UNRECOGNIZED":default:return pn.UNRECOGNIZED}}function operationStateToJSON(T){switch(T){case pn.OPERATION_STATE_UNSPECIFIED:return"OPERATION_STATE_UNSPECIFIED";case pn.OPERATION_STATE_EXECUTED:return"OPERATION_STATE_EXECUTED";case pn.OPERATION_STATE_CANCELED:return"OPERATION_STATE_CANCELED";case pn.OPERATION_STATE_PROGRESS:return"OPERATION_STATE_PROGRESS";case pn.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var _n;(function(T){T[T["OPERATION_TYPE_UNSPECIFIED"]=0]="OPERATION_TYPE_UNSPECIFIED";T[T["OPERATION_TYPE_INPUT"]=1]="OPERATION_TYPE_INPUT";T[T["OPERATION_TYPE_BOND_TAX"]=2]="OPERATION_TYPE_BOND_TAX";T[T["OPERATION_TYPE_OUTPUT_SECURITIES"]=3]="OPERATION_TYPE_OUTPUT_SECURITIES";T[T["OPERATION_TYPE_OVERNIGHT"]=4]="OPERATION_TYPE_OVERNIGHT";T[T["OPERATION_TYPE_TAX"]=5]="OPERATION_TYPE_TAX";T[T["OPERATION_TYPE_BOND_REPAYMENT_FULL"]=6]="OPERATION_TYPE_BOND_REPAYMENT_FULL";T[T["OPERATION_TYPE_SELL_CARD"]=7]="OPERATION_TYPE_SELL_CARD";T[T["OPERATION_TYPE_DIVIDEND_TAX"]=8]="OPERATION_TYPE_DIVIDEND_TAX";T[T["OPERATION_TYPE_OUTPUT"]=9]="OPERATION_TYPE_OUTPUT";T[T["OPERATION_TYPE_BOND_REPAYMENT"]=10]="OPERATION_TYPE_BOND_REPAYMENT";T[T["OPERATION_TYPE_TAX_CORRECTION"]=11]="OPERATION_TYPE_TAX_CORRECTION";T[T["OPERATION_TYPE_SERVICE_FEE"]=12]="OPERATION_TYPE_SERVICE_FEE";T[T["OPERATION_TYPE_BENEFIT_TAX"]=13]="OPERATION_TYPE_BENEFIT_TAX";T[T["OPERATION_TYPE_MARGIN_FEE"]=14]="OPERATION_TYPE_MARGIN_FEE";T[T["OPERATION_TYPE_BUY"]=15]="OPERATION_TYPE_BUY";T[T["OPERATION_TYPE_BUY_CARD"]=16]="OPERATION_TYPE_BUY_CARD";T[T["OPERATION_TYPE_INPUT_SECURITIES"]=17]="OPERATION_TYPE_INPUT_SECURITIES";T[T["OPERATION_TYPE_SELL_MARGIN"]=18]="OPERATION_TYPE_SELL_MARGIN";T[T["OPERATION_TYPE_BROKER_FEE"]=19]="OPERATION_TYPE_BROKER_FEE";T[T["OPERATION_TYPE_BUY_MARGIN"]=20]="OPERATION_TYPE_BUY_MARGIN";T[T["OPERATION_TYPE_DIVIDEND"]=21]="OPERATION_TYPE_DIVIDEND";T[T["OPERATION_TYPE_SELL"]=22]="OPERATION_TYPE_SELL";T[T["OPERATION_TYPE_COUPON"]=23]="OPERATION_TYPE_COUPON";T[T["OPERATION_TYPE_SUCCESS_FEE"]=24]="OPERATION_TYPE_SUCCESS_FEE";T[T["OPERATION_TYPE_DIVIDEND_TRANSFER"]=25]="OPERATION_TYPE_DIVIDEND_TRANSFER";T[T["OPERATION_TYPE_ACCRUING_VARMARGIN"]=26]="OPERATION_TYPE_ACCRUING_VARMARGIN";T[T["OPERATION_TYPE_WRITING_OFF_VARMARGIN"]=27]="OPERATION_TYPE_WRITING_OFF_VARMARGIN";T[T["OPERATION_TYPE_DELIVERY_BUY"]=28]="OPERATION_TYPE_DELIVERY_BUY";T[T["OPERATION_TYPE_DELIVERY_SELL"]=29]="OPERATION_TYPE_DELIVERY_SELL";T[T["OPERATION_TYPE_TRACK_MFEE"]=30]="OPERATION_TYPE_TRACK_MFEE";T[T["OPERATION_TYPE_TRACK_PFEE"]=31]="OPERATION_TYPE_TRACK_PFEE";T[T["OPERATION_TYPE_TAX_PROGRESSIVE"]=32]="OPERATION_TYPE_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BOND_TAX_PROGRESSIVE"]=33]="OPERATION_TYPE_BOND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE"]=34]="OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE"]=35]="OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE"]=36]="OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_PROGRESSIVE"]=37]="OPERATION_TYPE_TAX_REPO_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO"]=38]="OPERATION_TYPE_TAX_REPO";T[T["OPERATION_TYPE_TAX_REPO_HOLD"]=39]="OPERATION_TYPE_TAX_REPO_HOLD";T[T["OPERATION_TYPE_TAX_REPO_REFUND"]=40]="OPERATION_TYPE_TAX_REPO_REFUND";T[T["OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE"]=41]="OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";T[T["OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE"]=42]="OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";T[T["OPERATION_TYPE_DIV_EXT"]=43]="OPERATION_TYPE_DIV_EXT";T[T["OPERATION_TYPE_TAX_CORRECTION_COUPON"]=44]="OPERATION_TYPE_TAX_CORRECTION_COUPON";T[T["OPERATION_TYPE_CASH_FEE"]=45]="OPERATION_TYPE_CASH_FEE";T[T["OPERATION_TYPE_OUT_FEE"]=46]="OPERATION_TYPE_OUT_FEE";T[T["OPERATION_TYPE_OUT_STAMP_DUTY"]=47]="OPERATION_TYPE_OUT_STAMP_DUTY";T[T["OPERATION_TYPE_OUTPUT_SWIFT"]=50]="OPERATION_TYPE_OUTPUT_SWIFT";T[T["OPERATION_TYPE_INPUT_SWIFT"]=51]="OPERATION_TYPE_INPUT_SWIFT";T[T["OPERATION_TYPE_OUTPUT_ACQUIRING"]=53]="OPERATION_TYPE_OUTPUT_ACQUIRING";T[T["OPERATION_TYPE_INPUT_ACQUIRING"]=54]="OPERATION_TYPE_INPUT_ACQUIRING";T[T["OPERATION_TYPE_OUTPUT_PENALTY"]=55]="OPERATION_TYPE_OUTPUT_PENALTY";T[T["OPERATION_TYPE_ADVICE_FEE"]=56]="OPERATION_TYPE_ADVICE_FEE";T[T["OPERATION_TYPE_TRANS_IIS_BS"]=57]="OPERATION_TYPE_TRANS_IIS_BS";T[T["OPERATION_TYPE_TRANS_BS_BS"]=58]="OPERATION_TYPE_TRANS_BS_BS";T[T["OPERATION_TYPE_OUT_MULTI"]=59]="OPERATION_TYPE_OUT_MULTI";T[T["OPERATION_TYPE_INP_MULTI"]=60]="OPERATION_TYPE_INP_MULTI";T[T["OPERATION_TYPE_OVER_PLACEMENT"]=61]="OPERATION_TYPE_OVER_PLACEMENT";T[T["OPERATION_TYPE_OVER_COM"]=62]="OPERATION_TYPE_OVER_COM";T[T["OPERATION_TYPE_OVER_INCOME"]=63]="OPERATION_TYPE_OVER_INCOME";T[T["OPERATION_TYPE_OPTION_EXPIRATION"]=64]="OPERATION_TYPE_OPTION_EXPIRATION";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(_n||(_n={}));function operationTypeFromJSON(T){switch(T){case 0:case"OPERATION_TYPE_UNSPECIFIED":return _n.OPERATION_TYPE_UNSPECIFIED;case 1:case"OPERATION_TYPE_INPUT":return _n.OPERATION_TYPE_INPUT;case 2:case"OPERATION_TYPE_BOND_TAX":return _n.OPERATION_TYPE_BOND_TAX;case 3:case"OPERATION_TYPE_OUTPUT_SECURITIES":return _n.OPERATION_TYPE_OUTPUT_SECURITIES;case 4:case"OPERATION_TYPE_OVERNIGHT":return _n.OPERATION_TYPE_OVERNIGHT;case 5:case"OPERATION_TYPE_TAX":return _n.OPERATION_TYPE_TAX;case 6:case"OPERATION_TYPE_BOND_REPAYMENT_FULL":return _n.OPERATION_TYPE_BOND_REPAYMENT_FULL;case 7:case"OPERATION_TYPE_SELL_CARD":return _n.OPERATION_TYPE_SELL_CARD;case 8:case"OPERATION_TYPE_DIVIDEND_TAX":return _n.OPERATION_TYPE_DIVIDEND_TAX;case 9:case"OPERATION_TYPE_OUTPUT":return _n.OPERATION_TYPE_OUTPUT;case 10:case"OPERATION_TYPE_BOND_REPAYMENT":return _n.OPERATION_TYPE_BOND_REPAYMENT;case 11:case"OPERATION_TYPE_TAX_CORRECTION":return _n.OPERATION_TYPE_TAX_CORRECTION;case 12:case"OPERATION_TYPE_SERVICE_FEE":return _n.OPERATION_TYPE_SERVICE_FEE;case 13:case"OPERATION_TYPE_BENEFIT_TAX":return _n.OPERATION_TYPE_BENEFIT_TAX;case 14:case"OPERATION_TYPE_MARGIN_FEE":return _n.OPERATION_TYPE_MARGIN_FEE;case 15:case"OPERATION_TYPE_BUY":return _n.OPERATION_TYPE_BUY;case 16:case"OPERATION_TYPE_BUY_CARD":return _n.OPERATION_TYPE_BUY_CARD;case 17:case"OPERATION_TYPE_INPUT_SECURITIES":return _n.OPERATION_TYPE_INPUT_SECURITIES;case 18:case"OPERATION_TYPE_SELL_MARGIN":return _n.OPERATION_TYPE_SELL_MARGIN;case 19:case"OPERATION_TYPE_BROKER_FEE":return _n.OPERATION_TYPE_BROKER_FEE;case 20:case"OPERATION_TYPE_BUY_MARGIN":return _n.OPERATION_TYPE_BUY_MARGIN;case 21:case"OPERATION_TYPE_DIVIDEND":return _n.OPERATION_TYPE_DIVIDEND;case 22:case"OPERATION_TYPE_SELL":return _n.OPERATION_TYPE_SELL;case 23:case"OPERATION_TYPE_COUPON":return _n.OPERATION_TYPE_COUPON;case 24:case"OPERATION_TYPE_SUCCESS_FEE":return _n.OPERATION_TYPE_SUCCESS_FEE;case 25:case"OPERATION_TYPE_DIVIDEND_TRANSFER":return _n.OPERATION_TYPE_DIVIDEND_TRANSFER;case 26:case"OPERATION_TYPE_ACCRUING_VARMARGIN":return _n.OPERATION_TYPE_ACCRUING_VARMARGIN;case 27:case"OPERATION_TYPE_WRITING_OFF_VARMARGIN":return _n.OPERATION_TYPE_WRITING_OFF_VARMARGIN;case 28:case"OPERATION_TYPE_DELIVERY_BUY":return _n.OPERATION_TYPE_DELIVERY_BUY;case 29:case"OPERATION_TYPE_DELIVERY_SELL":return _n.OPERATION_TYPE_DELIVERY_SELL;case 30:case"OPERATION_TYPE_TRACK_MFEE":return _n.OPERATION_TYPE_TRACK_MFEE;case 31:case"OPERATION_TYPE_TRACK_PFEE":return _n.OPERATION_TYPE_TRACK_PFEE;case 32:case"OPERATION_TYPE_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_PROGRESSIVE;case 33:case"OPERATION_TYPE_BOND_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_BOND_TAX_PROGRESSIVE;case 34:case"OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE;case 35:case"OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE":return _n.OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE;case 36:case"OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE;case 37:case"OPERATION_TYPE_TAX_REPO_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_PROGRESSIVE;case 38:case"OPERATION_TYPE_TAX_REPO":return _n.OPERATION_TYPE_TAX_REPO;case 39:case"OPERATION_TYPE_TAX_REPO_HOLD":return _n.OPERATION_TYPE_TAX_REPO_HOLD;case 40:case"OPERATION_TYPE_TAX_REPO_REFUND":return _n.OPERATION_TYPE_TAX_REPO_REFUND;case 41:case"OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE;case 42:case"OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE":return _n.OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE;case 43:case"OPERATION_TYPE_DIV_EXT":return _n.OPERATION_TYPE_DIV_EXT;case 44:case"OPERATION_TYPE_TAX_CORRECTION_COUPON":return _n.OPERATION_TYPE_TAX_CORRECTION_COUPON;case 45:case"OPERATION_TYPE_CASH_FEE":return _n.OPERATION_TYPE_CASH_FEE;case 46:case"OPERATION_TYPE_OUT_FEE":return _n.OPERATION_TYPE_OUT_FEE;case 47:case"OPERATION_TYPE_OUT_STAMP_DUTY":return _n.OPERATION_TYPE_OUT_STAMP_DUTY;case 50:case"OPERATION_TYPE_OUTPUT_SWIFT":return _n.OPERATION_TYPE_OUTPUT_SWIFT;case 51:case"OPERATION_TYPE_INPUT_SWIFT":return _n.OPERATION_TYPE_INPUT_SWIFT;case 53:case"OPERATION_TYPE_OUTPUT_ACQUIRING":return _n.OPERATION_TYPE_OUTPUT_ACQUIRING;case 54:case"OPERATION_TYPE_INPUT_ACQUIRING":return _n.OPERATION_TYPE_INPUT_ACQUIRING;case 55:case"OPERATION_TYPE_OUTPUT_PENALTY":return _n.OPERATION_TYPE_OUTPUT_PENALTY;case 56:case"OPERATION_TYPE_ADVICE_FEE":return _n.OPERATION_TYPE_ADVICE_FEE;case 57:case"OPERATION_TYPE_TRANS_IIS_BS":return _n.OPERATION_TYPE_TRANS_IIS_BS;case 58:case"OPERATION_TYPE_TRANS_BS_BS":return _n.OPERATION_TYPE_TRANS_BS_BS;case 59:case"OPERATION_TYPE_OUT_MULTI":return _n.OPERATION_TYPE_OUT_MULTI;case 60:case"OPERATION_TYPE_INP_MULTI":return _n.OPERATION_TYPE_INP_MULTI;case 61:case"OPERATION_TYPE_OVER_PLACEMENT":return _n.OPERATION_TYPE_OVER_PLACEMENT;case 62:case"OPERATION_TYPE_OVER_COM":return _n.OPERATION_TYPE_OVER_COM;case 63:case"OPERATION_TYPE_OVER_INCOME":return _n.OPERATION_TYPE_OVER_INCOME;case 64:case"OPERATION_TYPE_OPTION_EXPIRATION":return _n.OPERATION_TYPE_OPTION_EXPIRATION;case-1:case"UNRECOGNIZED":default:return _n.UNRECOGNIZED}}function operationTypeToJSON(T){switch(T){case _n.OPERATION_TYPE_UNSPECIFIED:return"OPERATION_TYPE_UNSPECIFIED";case _n.OPERATION_TYPE_INPUT:return"OPERATION_TYPE_INPUT";case _n.OPERATION_TYPE_BOND_TAX:return"OPERATION_TYPE_BOND_TAX";case _n.OPERATION_TYPE_OUTPUT_SECURITIES:return"OPERATION_TYPE_OUTPUT_SECURITIES";case _n.OPERATION_TYPE_OVERNIGHT:return"OPERATION_TYPE_OVERNIGHT";case _n.OPERATION_TYPE_TAX:return"OPERATION_TYPE_TAX";case _n.OPERATION_TYPE_BOND_REPAYMENT_FULL:return"OPERATION_TYPE_BOND_REPAYMENT_FULL";case _n.OPERATION_TYPE_SELL_CARD:return"OPERATION_TYPE_SELL_CARD";case _n.OPERATION_TYPE_DIVIDEND_TAX:return"OPERATION_TYPE_DIVIDEND_TAX";case _n.OPERATION_TYPE_OUTPUT:return"OPERATION_TYPE_OUTPUT";case _n.OPERATION_TYPE_BOND_REPAYMENT:return"OPERATION_TYPE_BOND_REPAYMENT";case _n.OPERATION_TYPE_TAX_CORRECTION:return"OPERATION_TYPE_TAX_CORRECTION";case _n.OPERATION_TYPE_SERVICE_FEE:return"OPERATION_TYPE_SERVICE_FEE";case _n.OPERATION_TYPE_BENEFIT_TAX:return"OPERATION_TYPE_BENEFIT_TAX";case _n.OPERATION_TYPE_MARGIN_FEE:return"OPERATION_TYPE_MARGIN_FEE";case _n.OPERATION_TYPE_BUY:return"OPERATION_TYPE_BUY";case _n.OPERATION_TYPE_BUY_CARD:return"OPERATION_TYPE_BUY_CARD";case _n.OPERATION_TYPE_INPUT_SECURITIES:return"OPERATION_TYPE_INPUT_SECURITIES";case _n.OPERATION_TYPE_SELL_MARGIN:return"OPERATION_TYPE_SELL_MARGIN";case _n.OPERATION_TYPE_BROKER_FEE:return"OPERATION_TYPE_BROKER_FEE";case _n.OPERATION_TYPE_BUY_MARGIN:return"OPERATION_TYPE_BUY_MARGIN";case _n.OPERATION_TYPE_DIVIDEND:return"OPERATION_TYPE_DIVIDEND";case _n.OPERATION_TYPE_SELL:return"OPERATION_TYPE_SELL";case _n.OPERATION_TYPE_COUPON:return"OPERATION_TYPE_COUPON";case _n.OPERATION_TYPE_SUCCESS_FEE:return"OPERATION_TYPE_SUCCESS_FEE";case _n.OPERATION_TYPE_DIVIDEND_TRANSFER:return"OPERATION_TYPE_DIVIDEND_TRANSFER";case _n.OPERATION_TYPE_ACCRUING_VARMARGIN:return"OPERATION_TYPE_ACCRUING_VARMARGIN";case _n.OPERATION_TYPE_WRITING_OFF_VARMARGIN:return"OPERATION_TYPE_WRITING_OFF_VARMARGIN";case _n.OPERATION_TYPE_DELIVERY_BUY:return"OPERATION_TYPE_DELIVERY_BUY";case _n.OPERATION_TYPE_DELIVERY_SELL:return"OPERATION_TYPE_DELIVERY_SELL";case _n.OPERATION_TYPE_TRACK_MFEE:return"OPERATION_TYPE_TRACK_MFEE";case _n.OPERATION_TYPE_TRACK_PFEE:return"OPERATION_TYPE_TRACK_PFEE";case _n.OPERATION_TYPE_TAX_PROGRESSIVE:return"OPERATION_TYPE_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_BOND_TAX_PROGRESSIVE:return"OPERATION_TYPE_BOND_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE:return"OPERATION_TYPE_DIVIDEND_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE:return"OPERATION_TYPE_BENEFIT_TAX_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE:return"OPERATION_TYPE_TAX_CORRECTION_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO:return"OPERATION_TYPE_TAX_REPO";case _n.OPERATION_TYPE_TAX_REPO_HOLD:return"OPERATION_TYPE_TAX_REPO_HOLD";case _n.OPERATION_TYPE_TAX_REPO_REFUND:return"OPERATION_TYPE_TAX_REPO_REFUND";case _n.OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_HOLD_PROGRESSIVE";case _n.OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE:return"OPERATION_TYPE_TAX_REPO_REFUND_PROGRESSIVE";case _n.OPERATION_TYPE_DIV_EXT:return"OPERATION_TYPE_DIV_EXT";case _n.OPERATION_TYPE_TAX_CORRECTION_COUPON:return"OPERATION_TYPE_TAX_CORRECTION_COUPON";case _n.OPERATION_TYPE_CASH_FEE:return"OPERATION_TYPE_CASH_FEE";case _n.OPERATION_TYPE_OUT_FEE:return"OPERATION_TYPE_OUT_FEE";case _n.OPERATION_TYPE_OUT_STAMP_DUTY:return"OPERATION_TYPE_OUT_STAMP_DUTY";case _n.OPERATION_TYPE_OUTPUT_SWIFT:return"OPERATION_TYPE_OUTPUT_SWIFT";case _n.OPERATION_TYPE_INPUT_SWIFT:return"OPERATION_TYPE_INPUT_SWIFT";case _n.OPERATION_TYPE_OUTPUT_ACQUIRING:return"OPERATION_TYPE_OUTPUT_ACQUIRING";case _n.OPERATION_TYPE_INPUT_ACQUIRING:return"OPERATION_TYPE_INPUT_ACQUIRING";case _n.OPERATION_TYPE_OUTPUT_PENALTY:return"OPERATION_TYPE_OUTPUT_PENALTY";case _n.OPERATION_TYPE_ADVICE_FEE:return"OPERATION_TYPE_ADVICE_FEE";case _n.OPERATION_TYPE_TRANS_IIS_BS:return"OPERATION_TYPE_TRANS_IIS_BS";case _n.OPERATION_TYPE_TRANS_BS_BS:return"OPERATION_TYPE_TRANS_BS_BS";case _n.OPERATION_TYPE_OUT_MULTI:return"OPERATION_TYPE_OUT_MULTI";case _n.OPERATION_TYPE_INP_MULTI:return"OPERATION_TYPE_INP_MULTI";case _n.OPERATION_TYPE_OVER_PLACEMENT:return"OPERATION_TYPE_OVER_PLACEMENT";case _n.OPERATION_TYPE_OVER_COM:return"OPERATION_TYPE_OVER_COM";case _n.OPERATION_TYPE_OVER_INCOME:return"OPERATION_TYPE_OVER_INCOME";case _n.OPERATION_TYPE_OPTION_EXPIRATION:return"OPERATION_TYPE_OPTION_EXPIRATION";case _n.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var mn;(function(T){T[T["PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS"]=1]="PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND"]=2]="PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";T[T["PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=3]="PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(mn||(mn={}));function portfolioSubscriptionStatusFromJSON(T){switch(T){case 0:case"PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED":return mn.PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS":return mn.PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS;case 2:case"PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND":return mn.PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND;case 3:case"PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR":return mn.PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR;case-1:case"UNRECOGNIZED":default:return mn.UNRECOGNIZED}}function portfolioSubscriptionStatusToJSON(T){switch(T){case mn.PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED:return"PORTFOLIO_SUBSCRIPTION_STATUS_UNSPECIFIED";case mn.PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS:return"PORTFOLIO_SUBSCRIPTION_STATUS_SUCCESS";case mn.PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND:return"PORTFOLIO_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";case mn.PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"PORTFOLIO_SUBSCRIPTION_STATUS_INTERNAL_ERROR";case mn.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Sn;(function(T){T[T["INSTRUMENT_TYPE_UNSPECIFIED"]=0]="INSTRUMENT_TYPE_UNSPECIFIED";T[T["INSTRUMENT_TYPE_BOND"]=1]="INSTRUMENT_TYPE_BOND";T[T["INSTRUMENT_TYPE_SHARE"]=2]="INSTRUMENT_TYPE_SHARE";T[T["INSTRUMENT_TYPE_CURRENCY"]=3]="INSTRUMENT_TYPE_CURRENCY";T[T["INSTRUMENT_TYPE_ETF"]=4]="INSTRUMENT_TYPE_ETF";T[T["INSTRUMENT_TYPE_FUTURES"]=5]="INSTRUMENT_TYPE_FUTURES";T[T["INSTRUMENT_TYPE_SP"]=6]="INSTRUMENT_TYPE_SP";T[T["INSTRUMENT_TYPE_OPTION"]=7]="INSTRUMENT_TYPE_OPTION";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(Sn||(Sn={}));function instrumentTypeFromJSON(T){switch(T){case 0:case"INSTRUMENT_TYPE_UNSPECIFIED":return Sn.INSTRUMENT_TYPE_UNSPECIFIED;case 1:case"INSTRUMENT_TYPE_BOND":return Sn.INSTRUMENT_TYPE_BOND;case 2:case"INSTRUMENT_TYPE_SHARE":return Sn.INSTRUMENT_TYPE_SHARE;case 3:case"INSTRUMENT_TYPE_CURRENCY":return Sn.INSTRUMENT_TYPE_CURRENCY;case 4:case"INSTRUMENT_TYPE_ETF":return Sn.INSTRUMENT_TYPE_ETF;case 5:case"INSTRUMENT_TYPE_FUTURES":return Sn.INSTRUMENT_TYPE_FUTURES;case 6:case"INSTRUMENT_TYPE_SP":return Sn.INSTRUMENT_TYPE_SP;case 7:case"INSTRUMENT_TYPE_OPTION":return Sn.INSTRUMENT_TYPE_OPTION;case-1:case"UNRECOGNIZED":default:return Sn.UNRECOGNIZED}}function instrumentTypeToJSON(T){switch(T){case Sn.INSTRUMENT_TYPE_UNSPECIFIED:return"INSTRUMENT_TYPE_UNSPECIFIED";case Sn.INSTRUMENT_TYPE_BOND:return"INSTRUMENT_TYPE_BOND";case Sn.INSTRUMENT_TYPE_SHARE:return"INSTRUMENT_TYPE_SHARE";case Sn.INSTRUMENT_TYPE_CURRENCY:return"INSTRUMENT_TYPE_CURRENCY";case Sn.INSTRUMENT_TYPE_ETF:return"INSTRUMENT_TYPE_ETF";case Sn.INSTRUMENT_TYPE_FUTURES:return"INSTRUMENT_TYPE_FUTURES";case Sn.INSTRUMENT_TYPE_SP:return"INSTRUMENT_TYPE_SP";case Sn.INSTRUMENT_TYPE_OPTION:return"INSTRUMENT_TYPE_OPTION";case Sn.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var En;(function(T){T[T["POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED"]=0]="POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED";T[T["POSITIONS_SUBSCRIPTION_STATUS_SUCCESS"]=1]="POSITIONS_SUBSCRIPTION_STATUS_SUCCESS";T[T["POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND"]=2]="POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";T[T["POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR"]=3]="POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(En||(En={}));function positionsAccountSubscriptionStatusFromJSON(T){switch(T){case 0:case"POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED":return En.POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED;case 1:case"POSITIONS_SUBSCRIPTION_STATUS_SUCCESS":return En.POSITIONS_SUBSCRIPTION_STATUS_SUCCESS;case 2:case"POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND":return En.POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND;case 3:case"POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR":return En.POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR;case-1:case"UNRECOGNIZED":default:return En.UNRECOGNIZED}}function positionsAccountSubscriptionStatusToJSON(T){switch(T){case En.POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED:return"POSITIONS_SUBSCRIPTION_STATUS_UNSPECIFIED";case En.POSITIONS_SUBSCRIPTION_STATUS_SUCCESS:return"POSITIONS_SUBSCRIPTION_STATUS_SUCCESS";case En.POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND:return"POSITIONS_SUBSCRIPTION_STATUS_ACCOUNT_NOT_FOUND";case En.POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR:return"POSITIONS_SUBSCRIPTION_STATUS_INTERNAL_ERROR";case En.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var In;(function(T){T[T["RUB"]=0]="RUB";T[T["USD"]=1]="USD";T[T["EUR"]=2]="EUR";T[T["UNRECOGNIZED"]=-1]="UNRECOGNIZED"})(In||(In={}));function portfolioRequest_CurrencyRequestFromJSON(T){switch(T){case 0:case"RUB":return In.RUB;case 1:case"USD":return In.USD;case 2:case"EUR":return In.EUR;case-1:case"UNRECOGNIZED":default:return In.UNRECOGNIZED}}function portfolioRequest_CurrencyRequestToJSON(T){switch(T){case In.RUB:return"RUB";case In.USD:return"USD";case In.EUR:return"EUR";case In.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseOperationsRequest(){return{accountId:"",from:undefined,to:undefined,state:0,figi:""}}const On={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.from!==undefined){ve.encode(operations_toTimestamp(T.from),_.uint32(18).fork()).ldelim()}if(T.to!==undefined){ve.encode(operations_toTimestamp(T.to),_.uint32(26).fork()).ldelim()}if(T.state!==0){_.uint32(32).int32(T.state)}if(T.figi!==""){_.uint32(42).string(T.figi)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationsRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.from=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.to=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 4:E.state=m.int32();break;case 5:E.figi=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined,state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,figi:operations_isSet(T.figi)?String(T.figi):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());T.state!==undefined&&(_.state=operationStateToJSON(T.state));T.figi!==undefined&&(_.figi=T.figi);return _}};function createBaseOperationsResponse(){return{operations:[]}}const Nn={encode(T,_=Le.Z.Writer.create()){for(const m of T.operations){Rn.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationsResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.operations.push(Rn.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{operations:Array.isArray(T?.operations)?T.operations.map((T=>Rn.fromJSON(T))):[]}},toJSON(T){const _={};if(T.operations){_.operations=T.operations.map((T=>T?Rn.toJSON(T):undefined))}else{_.operations=[]}return _}};function createBaseOperation(){return{id:"",parentOperationId:"",currency:"",payment:undefined,price:undefined,state:0,quantity:0,quantityRest:0,figi:"",instrumentType:"",date:undefined,type:"",operationType:0,trades:[],assetUid:""}}const Rn={encode(T,_=Le.Z.Writer.create()){if(T.id!==""){_.uint32(10).string(T.id)}if(T.parentOperationId!==""){_.uint32(18).string(T.parentOperationId)}if(T.currency!==""){_.uint32(26).string(T.currency)}if(T.payment!==undefined){Me.encode(T.payment,_.uint32(34).fork()).ldelim()}if(T.price!==undefined){Me.encode(T.price,_.uint32(42).fork()).ldelim()}if(T.state!==0){_.uint32(48).int32(T.state)}if(T.quantity!==0){_.uint32(56).int64(T.quantity)}if(T.quantityRest!==0){_.uint32(64).int64(T.quantityRest)}if(T.figi!==""){_.uint32(74).string(T.figi)}if(T.instrumentType!==""){_.uint32(82).string(T.instrumentType)}if(T.date!==undefined){ve.encode(operations_toTimestamp(T.date),_.uint32(90).fork()).ldelim()}if(T.type!==""){_.uint32(98).string(T.type)}if(T.operationType!==0){_.uint32(104).int32(T.operationType)}for(const m of T.trades){hn.encode(m,_.uint32(114).fork()).ldelim()}if(T.assetUid!==""){_.uint32(130).string(T.assetUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperation();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.id=m.string();break;case 2:E.parentOperationId=m.string();break;case 3:E.currency=m.string();break;case 4:E.payment=Me.decode(m,m.uint32());break;case 5:E.price=Me.decode(m,m.uint32());break;case 6:E.state=m.int32();break;case 7:E.quantity=operations_longToNumber(m.int64());break;case 8:E.quantityRest=operations_longToNumber(m.int64());break;case 9:E.figi=m.string();break;case 10:E.instrumentType=m.string();break;case 11:E.date=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 12:E.type=m.string();break;case 13:E.operationType=m.int32();break;case 14:E.trades.push(hn.decode(m,m.uint32()));break;case 16:E.assetUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{id:operations_isSet(T.id)?String(T.id):"",parentOperationId:operations_isSet(T.parentOperationId)?String(T.parentOperationId):"",currency:operations_isSet(T.currency)?String(T.currency):"",payment:operations_isSet(T.payment)?Me.fromJSON(T.payment):undefined,price:operations_isSet(T.price)?Me.fromJSON(T.price):undefined,state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,quantityRest:operations_isSet(T.quantityRest)?Number(T.quantityRest):0,figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,type:operations_isSet(T.type)?String(T.type):"",operationType:operations_isSet(T.operationType)?operationTypeFromJSON(T.operationType):0,trades:Array.isArray(T?.trades)?T.trades.map((T=>hn.fromJSON(T))):[],assetUid:operations_isSet(T.assetUid)?String(T.assetUid):""}},toJSON(T){const _={};T.id!==undefined&&(_.id=T.id);T.parentOperationId!==undefined&&(_.parentOperationId=T.parentOperationId);T.currency!==undefined&&(_.currency=T.currency);T.payment!==undefined&&(_.payment=T.payment?Me.toJSON(T.payment):undefined);T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);T.state!==undefined&&(_.state=operationStateToJSON(T.state));T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.quantityRest!==undefined&&(_.quantityRest=Math.round(T.quantityRest));T.figi!==undefined&&(_.figi=T.figi);T.instrumentType!==undefined&&(_.instrumentType=T.instrumentType);T.date!==undefined&&(_.date=T.date.toISOString());T.type!==undefined&&(_.type=T.type);T.operationType!==undefined&&(_.operationType=operationTypeToJSON(T.operationType));if(T.trades){_.trades=T.trades.map((T=>T?hn.toJSON(T):undefined))}else{_.trades=[]}T.assetUid!==undefined&&(_.assetUid=T.assetUid);return _}};function createBaseOperationTrade(){return{tradeId:"",dateTime:undefined,quantity:0,price:undefined}}const hn={encode(T,_=Le.Z.Writer.create()){if(T.tradeId!==""){_.uint32(10).string(T.tradeId)}if(T.dateTime!==undefined){ve.encode(operations_toTimestamp(T.dateTime),_.uint32(18).fork()).ldelim()}if(T.quantity!==0){_.uint32(24).int64(T.quantity)}if(T.price!==undefined){Me.encode(T.price,_.uint32(34).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationTrade();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.tradeId=m.string();break;case 2:E.dateTime=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.quantity=operations_longToNumber(m.int64());break;case 4:E.price=Me.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{tradeId:operations_isSet(T.tradeId)?String(T.tradeId):"",dateTime:operations_isSet(T.dateTime)?operations_fromJsonTimestamp(T.dateTime):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,price:operations_isSet(T.price)?Me.fromJSON(T.price):undefined}},toJSON(T){const _={};T.tradeId!==undefined&&(_.tradeId=T.tradeId);T.dateTime!==undefined&&(_.dateTime=T.dateTime.toISOString());T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);return _}};function createBasePortfolioRequest(){return{accountId:"",currency:0}}const An={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.currency!==0){_.uint32(16).int32(T.currency)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.currency=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",currency:operations_isSet(T.currency)?portfolioRequest_CurrencyRequestFromJSON(T.currency):0}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.currency!==undefined&&(_.currency=portfolioRequest_CurrencyRequestToJSON(T.currency));return _}};function createBasePortfolioResponse(){return{totalAmountShares:undefined,totalAmountBonds:undefined,totalAmountEtf:undefined,totalAmountCurrencies:undefined,totalAmountFutures:undefined,expectedYield:undefined,positions:[],accountId:"",totalAmountOptions:undefined,totalAmountSp:undefined,totalAmountPortfolio:undefined,virtualPositions:[]}}const gn={encode(T,_=Le.Z.Writer.create()){if(T.totalAmountShares!==undefined){Me.encode(T.totalAmountShares,_.uint32(10).fork()).ldelim()}if(T.totalAmountBonds!==undefined){Me.encode(T.totalAmountBonds,_.uint32(18).fork()).ldelim()}if(T.totalAmountEtf!==undefined){Me.encode(T.totalAmountEtf,_.uint32(26).fork()).ldelim()}if(T.totalAmountCurrencies!==undefined){Me.encode(T.totalAmountCurrencies,_.uint32(34).fork()).ldelim()}if(T.totalAmountFutures!==undefined){Me.encode(T.totalAmountFutures,_.uint32(42).fork()).ldelim()}if(T.expectedYield!==undefined){Je.encode(T.expectedYield,_.uint32(50).fork()).ldelim()}for(const m of T.positions){kn.encode(m,_.uint32(58).fork()).ldelim()}if(T.accountId!==""){_.uint32(66).string(T.accountId)}if(T.totalAmountOptions!==undefined){Me.encode(T.totalAmountOptions,_.uint32(74).fork()).ldelim()}if(T.totalAmountSp!==undefined){Me.encode(T.totalAmountSp,_.uint32(82).fork()).ldelim()}if(T.totalAmountPortfolio!==undefined){Me.encode(T.totalAmountPortfolio,_.uint32(90).fork()).ldelim()}for(const m of T.virtualPositions){Un.encode(m,_.uint32(98).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.totalAmountShares=Me.decode(m,m.uint32());break;case 2:E.totalAmountBonds=Me.decode(m,m.uint32());break;case 3:E.totalAmountEtf=Me.decode(m,m.uint32());break;case 4:E.totalAmountCurrencies=Me.decode(m,m.uint32());break;case 5:E.totalAmountFutures=Me.decode(m,m.uint32());break;case 6:E.expectedYield=Je.decode(m,m.uint32());break;case 7:E.positions.push(kn.decode(m,m.uint32()));break;case 8:E.accountId=m.string();break;case 9:E.totalAmountOptions=Me.decode(m,m.uint32());break;case 10:E.totalAmountSp=Me.decode(m,m.uint32());break;case 11:E.totalAmountPortfolio=Me.decode(m,m.uint32());break;case 12:E.virtualPositions.push(Un.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{totalAmountShares:operations_isSet(T.totalAmountShares)?Me.fromJSON(T.totalAmountShares):undefined,totalAmountBonds:operations_isSet(T.totalAmountBonds)?Me.fromJSON(T.totalAmountBonds):undefined,totalAmountEtf:operations_isSet(T.totalAmountEtf)?Me.fromJSON(T.totalAmountEtf):undefined,totalAmountCurrencies:operations_isSet(T.totalAmountCurrencies)?Me.fromJSON(T.totalAmountCurrencies):undefined,totalAmountFutures:operations_isSet(T.totalAmountFutures)?Me.fromJSON(T.totalAmountFutures):undefined,expectedYield:operations_isSet(T.expectedYield)?Je.fromJSON(T.expectedYield):undefined,positions:Array.isArray(T?.positions)?T.positions.map((T=>kn.fromJSON(T))):[],accountId:operations_isSet(T.accountId)?String(T.accountId):"",totalAmountOptions:operations_isSet(T.totalAmountOptions)?Me.fromJSON(T.totalAmountOptions):undefined,totalAmountSp:operations_isSet(T.totalAmountSp)?Me.fromJSON(T.totalAmountSp):undefined,totalAmountPortfolio:operations_isSet(T.totalAmountPortfolio)?Me.fromJSON(T.totalAmountPortfolio):undefined,virtualPositions:Array.isArray(T?.virtualPositions)?T.virtualPositions.map((T=>Un.fromJSON(T))):[]}},toJSON(T){const _={};T.totalAmountShares!==undefined&&(_.totalAmountShares=T.totalAmountShares?Me.toJSON(T.totalAmountShares):undefined);T.totalAmountBonds!==undefined&&(_.totalAmountBonds=T.totalAmountBonds?Me.toJSON(T.totalAmountBonds):undefined);T.totalAmountEtf!==undefined&&(_.totalAmountEtf=T.totalAmountEtf?Me.toJSON(T.totalAmountEtf):undefined);T.totalAmountCurrencies!==undefined&&(_.totalAmountCurrencies=T.totalAmountCurrencies?Me.toJSON(T.totalAmountCurrencies):undefined);T.totalAmountFutures!==undefined&&(_.totalAmountFutures=T.totalAmountFutures?Me.toJSON(T.totalAmountFutures):undefined);T.expectedYield!==undefined&&(_.expectedYield=T.expectedYield?Je.toJSON(T.expectedYield):undefined);if(T.positions){_.positions=T.positions.map((T=>T?kn.toJSON(T):undefined))}else{_.positions=[]}T.accountId!==undefined&&(_.accountId=T.accountId);T.totalAmountOptions!==undefined&&(_.totalAmountOptions=T.totalAmountOptions?Me.toJSON(T.totalAmountOptions):undefined);T.totalAmountSp!==undefined&&(_.totalAmountSp=T.totalAmountSp?Me.toJSON(T.totalAmountSp):undefined);T.totalAmountPortfolio!==undefined&&(_.totalAmountPortfolio=T.totalAmountPortfolio?Me.toJSON(T.totalAmountPortfolio):undefined);if(T.virtualPositions){_.virtualPositions=T.virtualPositions.map((T=>T?Un.toJSON(T):undefined))}else{_.virtualPositions=[]}return _}};function createBasePositionsRequest(){return{accountId:""}}const bn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);return _}};function createBasePositionsResponse(){return{money:[],blocked:[],securities:[],limitsLoadingInProgress:false,futures:[],options:[]}}const Pn={encode(T,_=Le.Z.Writer.create()){for(const m of T.money){Me.encode(m,_.uint32(10).fork()).ldelim()}for(const m of T.blocked){Me.encode(m,_.uint32(18).fork()).ldelim()}for(const m of T.securities){Dn.encode(m,_.uint32(26).fork()).ldelim()}if(T.limitsLoadingInProgress===true){_.uint32(32).bool(T.limitsLoadingInProgress)}for(const m of T.futures){wn.encode(m,_.uint32(42).fork()).ldelim()}for(const m of T.options){Ln.encode(m,_.uint32(50).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.money.push(Me.decode(m,m.uint32()));break;case 2:E.blocked.push(Me.decode(m,m.uint32()));break;case 3:E.securities.push(Dn.decode(m,m.uint32()));break;case 4:E.limitsLoadingInProgress=m.bool();break;case 5:E.futures.push(wn.decode(m,m.uint32()));break;case 6:E.options.push(Ln.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{money:Array.isArray(T?.money)?T.money.map((T=>Me.fromJSON(T))):[],blocked:Array.isArray(T?.blocked)?T.blocked.map((T=>Me.fromJSON(T))):[],securities:Array.isArray(T?.securities)?T.securities.map((T=>Dn.fromJSON(T))):[],limitsLoadingInProgress:operations_isSet(T.limitsLoadingInProgress)?Boolean(T.limitsLoadingInProgress):false,futures:Array.isArray(T?.futures)?T.futures.map((T=>wn.fromJSON(T))):[],options:Array.isArray(T?.options)?T.options.map((T=>Ln.fromJSON(T))):[]}},toJSON(T){const _={};if(T.money){_.money=T.money.map((T=>T?Me.toJSON(T):undefined))}else{_.money=[]}if(T.blocked){_.blocked=T.blocked.map((T=>T?Me.toJSON(T):undefined))}else{_.blocked=[]}if(T.securities){_.securities=T.securities.map((T=>T?Dn.toJSON(T):undefined))}else{_.securities=[]}T.limitsLoadingInProgress!==undefined&&(_.limitsLoadingInProgress=T.limitsLoadingInProgress);if(T.futures){_.futures=T.futures.map((T=>T?wn.toJSON(T):undefined))}else{_.futures=[]}if(T.options){_.options=T.options.map((T=>T?Ln.toJSON(T):undefined))}else{_.options=[]}return _}};function createBaseWithdrawLimitsRequest(){return{accountId:""}}const yn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseWithdrawLimitsRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):""}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);return _}};function createBaseWithdrawLimitsResponse(){return{money:[],blocked:[],blockedGuarantee:[]}}const Cn={encode(T,_=Le.Z.Writer.create()){for(const m of T.money){Me.encode(m,_.uint32(10).fork()).ldelim()}for(const m of T.blocked){Me.encode(m,_.uint32(18).fork()).ldelim()}for(const m of T.blockedGuarantee){Me.encode(m,_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseWithdrawLimitsResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.money.push(Me.decode(m,m.uint32()));break;case 2:E.blocked.push(Me.decode(m,m.uint32()));break;case 3:E.blockedGuarantee.push(Me.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{money:Array.isArray(T?.money)?T.money.map((T=>Me.fromJSON(T))):[],blocked:Array.isArray(T?.blocked)?T.blocked.map((T=>Me.fromJSON(T))):[],blockedGuarantee:Array.isArray(T?.blockedGuarantee)?T.blockedGuarantee.map((T=>Me.fromJSON(T))):[]}},toJSON(T){const _={};if(T.money){_.money=T.money.map((T=>T?Me.toJSON(T):undefined))}else{_.money=[]}if(T.blocked){_.blocked=T.blocked.map((T=>T?Me.toJSON(T):undefined))}else{_.blocked=[]}if(T.blockedGuarantee){_.blockedGuarantee=T.blockedGuarantee.map((T=>T?Me.toJSON(T):undefined))}else{_.blockedGuarantee=[]}return _}};function createBasePortfolioPosition(){return{figi:"",instrumentType:"",quantity:undefined,averagePositionPrice:undefined,expectedYield:undefined,currentNkd:undefined,averagePositionPricePt:undefined,currentPrice:undefined,averagePositionPriceFifo:undefined,quantityLots:undefined,blocked:false,positionUid:"",instrumentUid:"",varMargin:undefined,expectedYieldFifo:undefined}}const kn={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.instrumentType!==""){_.uint32(18).string(T.instrumentType)}if(T.quantity!==undefined){Je.encode(T.quantity,_.uint32(26).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Me.encode(T.averagePositionPrice,_.uint32(34).fork()).ldelim()}if(T.expectedYield!==undefined){Je.encode(T.expectedYield,_.uint32(42).fork()).ldelim()}if(T.currentNkd!==undefined){Me.encode(T.currentNkd,_.uint32(50).fork()).ldelim()}if(T.averagePositionPricePt!==undefined){Je.encode(T.averagePositionPricePt,_.uint32(58).fork()).ldelim()}if(T.currentPrice!==undefined){Me.encode(T.currentPrice,_.uint32(66).fork()).ldelim()}if(T.averagePositionPriceFifo!==undefined){Me.encode(T.averagePositionPriceFifo,_.uint32(74).fork()).ldelim()}if(T.quantityLots!==undefined){Je.encode(T.quantityLots,_.uint32(82).fork()).ldelim()}if(T.blocked===true){_.uint32(168).bool(T.blocked)}if(T.positionUid!==""){_.uint32(194).string(T.positionUid)}if(T.instrumentUid!==""){_.uint32(202).string(T.instrumentUid)}if(T.varMargin!==undefined){Me.encode(T.varMargin,_.uint32(210).fork()).ldelim()}if(T.expectedYieldFifo!==undefined){Je.encode(T.expectedYieldFifo,_.uint32(218).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioPosition();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.instrumentType=m.string();break;case 3:E.quantity=Je.decode(m,m.uint32());break;case 4:E.averagePositionPrice=Me.decode(m,m.uint32());break;case 5:E.expectedYield=Je.decode(m,m.uint32());break;case 6:E.currentNkd=Me.decode(m,m.uint32());break;case 7:E.averagePositionPricePt=Je.decode(m,m.uint32());break;case 8:E.currentPrice=Me.decode(m,m.uint32());break;case 9:E.averagePositionPriceFifo=Me.decode(m,m.uint32());break;case 10:E.quantityLots=Je.decode(m,m.uint32());break;case 21:E.blocked=m.bool();break;case 24:E.positionUid=m.string();break;case 25:E.instrumentUid=m.string();break;case 26:E.varMargin=Me.decode(m,m.uint32());break;case 27:E.expectedYieldFifo=Je.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",quantity:operations_isSet(T.quantity)?Je.fromJSON(T.quantity):undefined,averagePositionPrice:operations_isSet(T.averagePositionPrice)?Me.fromJSON(T.averagePositionPrice):undefined,expectedYield:operations_isSet(T.expectedYield)?Je.fromJSON(T.expectedYield):undefined,currentNkd:operations_isSet(T.currentNkd)?Me.fromJSON(T.currentNkd):undefined,averagePositionPricePt:operations_isSet(T.averagePositionPricePt)?Je.fromJSON(T.averagePositionPricePt):undefined,currentPrice:operations_isSet(T.currentPrice)?Me.fromJSON(T.currentPrice):undefined,averagePositionPriceFifo:operations_isSet(T.averagePositionPriceFifo)?Me.fromJSON(T.averagePositionPriceFifo):undefined,quantityLots:operations_isSet(T.quantityLots)?Je.fromJSON(T.quantityLots):undefined,blocked:operations_isSet(T.blocked)?Boolean(T.blocked):false,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",varMargin:operations_isSet(T.varMargin)?Me.fromJSON(T.varMargin):undefined,expectedYieldFifo:operations_isSet(T.expectedYieldFifo)?Je.fromJSON(T.expectedYieldFifo):undefined}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.instrumentType!==undefined&&(_.instrumentType=T.instrumentType);T.quantity!==undefined&&(_.quantity=T.quantity?Je.toJSON(T.quantity):undefined);T.averagePositionPrice!==undefined&&(_.averagePositionPrice=T.averagePositionPrice?Me.toJSON(T.averagePositionPrice):undefined);T.expectedYield!==undefined&&(_.expectedYield=T.expectedYield?Je.toJSON(T.expectedYield):undefined);T.currentNkd!==undefined&&(_.currentNkd=T.currentNkd?Me.toJSON(T.currentNkd):undefined);T.averagePositionPricePt!==undefined&&(_.averagePositionPricePt=T.averagePositionPricePt?Je.toJSON(T.averagePositionPricePt):undefined);T.currentPrice!==undefined&&(_.currentPrice=T.currentPrice?Me.toJSON(T.currentPrice):undefined);T.averagePositionPriceFifo!==undefined&&(_.averagePositionPriceFifo=T.averagePositionPriceFifo?Me.toJSON(T.averagePositionPriceFifo):undefined);T.quantityLots!==undefined&&(_.quantityLots=T.quantityLots?Je.toJSON(T.quantityLots):undefined);T.blocked!==undefined&&(_.blocked=T.blocked);T.positionUid!==undefined&&(_.positionUid=T.positionUid);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.varMargin!==undefined&&(_.varMargin=T.varMargin?Me.toJSON(T.varMargin):undefined);T.expectedYieldFifo!==undefined&&(_.expectedYieldFifo=T.expectedYieldFifo?Je.toJSON(T.expectedYieldFifo):undefined);return _}};function createBaseVirtualPortfolioPosition(){return{positionUid:"",instrumentUid:"",figi:"",instrumentType:"",quantity:undefined,averagePositionPrice:undefined,expectedYield:undefined,expectedYieldFifo:undefined,expireDate:undefined,currentPrice:undefined,averagePositionPriceFifo:undefined}}const Un={encode(T,_=Le.Z.Writer.create()){if(T.positionUid!==""){_.uint32(10).string(T.positionUid)}if(T.instrumentUid!==""){_.uint32(18).string(T.instrumentUid)}if(T.figi!==""){_.uint32(26).string(T.figi)}if(T.instrumentType!==""){_.uint32(34).string(T.instrumentType)}if(T.quantity!==undefined){Je.encode(T.quantity,_.uint32(42).fork()).ldelim()}if(T.averagePositionPrice!==undefined){Me.encode(T.averagePositionPrice,_.uint32(50).fork()).ldelim()}if(T.expectedYield!==undefined){Je.encode(T.expectedYield,_.uint32(58).fork()).ldelim()}if(T.expectedYieldFifo!==undefined){Je.encode(T.expectedYieldFifo,_.uint32(66).fork()).ldelim()}if(T.expireDate!==undefined){ve.encode(operations_toTimestamp(T.expireDate),_.uint32(74).fork()).ldelim()}if(T.currentPrice!==undefined){Me.encode(T.currentPrice,_.uint32(82).fork()).ldelim()}if(T.averagePositionPriceFifo!==undefined){Me.encode(T.averagePositionPriceFifo,_.uint32(90).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseVirtualPortfolioPosition();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.positionUid=m.string();break;case 2:E.instrumentUid=m.string();break;case 3:E.figi=m.string();break;case 4:E.instrumentType=m.string();break;case 5:E.quantity=Je.decode(m,m.uint32());break;case 6:E.averagePositionPrice=Me.decode(m,m.uint32());break;case 7:E.expectedYield=Je.decode(m,m.uint32());break;case 8:E.expectedYieldFifo=Je.decode(m,m.uint32());break;case 9:E.expireDate=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 10:E.currentPrice=Me.decode(m,m.uint32());break;case 11:E.averagePositionPriceFifo=Me.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",quantity:operations_isSet(T.quantity)?Je.fromJSON(T.quantity):undefined,averagePositionPrice:operations_isSet(T.averagePositionPrice)?Me.fromJSON(T.averagePositionPrice):undefined,expectedYield:operations_isSet(T.expectedYield)?Je.fromJSON(T.expectedYield):undefined,expectedYieldFifo:operations_isSet(T.expectedYieldFifo)?Je.fromJSON(T.expectedYieldFifo):undefined,expireDate:operations_isSet(T.expireDate)?operations_fromJsonTimestamp(T.expireDate):undefined,currentPrice:operations_isSet(T.currentPrice)?Me.fromJSON(T.currentPrice):undefined,averagePositionPriceFifo:operations_isSet(T.averagePositionPriceFifo)?Me.fromJSON(T.averagePositionPriceFifo):undefined}},toJSON(T){const _={};T.positionUid!==undefined&&(_.positionUid=T.positionUid);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.figi!==undefined&&(_.figi=T.figi);T.instrumentType!==undefined&&(_.instrumentType=T.instrumentType);T.quantity!==undefined&&(_.quantity=T.quantity?Je.toJSON(T.quantity):undefined);T.averagePositionPrice!==undefined&&(_.averagePositionPrice=T.averagePositionPrice?Me.toJSON(T.averagePositionPrice):undefined);T.expectedYield!==undefined&&(_.expectedYield=T.expectedYield?Je.toJSON(T.expectedYield):undefined);T.expectedYieldFifo!==undefined&&(_.expectedYieldFifo=T.expectedYieldFifo?Je.toJSON(T.expectedYieldFifo):undefined);T.expireDate!==undefined&&(_.expireDate=T.expireDate.toISOString());T.currentPrice!==undefined&&(_.currentPrice=T.currentPrice?Me.toJSON(T.currentPrice):undefined);T.averagePositionPriceFifo!==undefined&&(_.averagePositionPriceFifo=T.averagePositionPriceFifo?Me.toJSON(T.averagePositionPriceFifo):undefined);return _}};function createBasePositionsSecurities(){return{figi:"",blocked:0,balance:0,positionUid:"",instrumentUid:"",exchangeBlocked:false,instrumentType:""}}const Dn={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.blocked!==0){_.uint32(16).int64(T.blocked)}if(T.balance!==0){_.uint32(24).int64(T.balance)}if(T.positionUid!==""){_.uint32(34).string(T.positionUid)}if(T.instrumentUid!==""){_.uint32(42).string(T.instrumentUid)}if(T.exchangeBlocked===true){_.uint32(88).bool(T.exchangeBlocked)}if(T.instrumentType!==""){_.uint32(130).string(T.instrumentType)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsSecurities();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.blocked=operations_longToNumber(m.int64());break;case 3:E.balance=operations_longToNumber(m.int64());break;case 4:E.positionUid=m.string();break;case 5:E.instrumentUid=m.string();break;case 11:E.exchangeBlocked=m.bool();break;case 16:E.instrumentType=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",exchangeBlocked:operations_isSet(T.exchangeBlocked)?Boolean(T.exchangeBlocked):false,instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.blocked!==undefined&&(_.blocked=Math.round(T.blocked));T.balance!==undefined&&(_.balance=Math.round(T.balance));T.positionUid!==undefined&&(_.positionUid=T.positionUid);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.exchangeBlocked!==undefined&&(_.exchangeBlocked=T.exchangeBlocked);T.instrumentType!==undefined&&(_.instrumentType=T.instrumentType);return _}};function createBasePositionsFutures(){return{figi:"",blocked:0,balance:0,positionUid:"",instrumentUid:""}}const wn={encode(T,_=Le.Z.Writer.create()){if(T.figi!==""){_.uint32(10).string(T.figi)}if(T.blocked!==0){_.uint32(16).int64(T.blocked)}if(T.balance!==0){_.uint32(24).int64(T.balance)}if(T.positionUid!==""){_.uint32(34).string(T.positionUid)}if(T.instrumentUid!==""){_.uint32(42).string(T.instrumentUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsFutures();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.figi=m.string();break;case 2:E.blocked=operations_longToNumber(m.int64());break;case 3:E.balance=operations_longToNumber(m.int64());break;case 4:E.positionUid=m.string();break;case 5:E.instrumentUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{figi:operations_isSet(T.figi)?String(T.figi):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0,positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):""}},toJSON(T){const _={};T.figi!==undefined&&(_.figi=T.figi);T.blocked!==undefined&&(_.blocked=Math.round(T.blocked));T.balance!==undefined&&(_.balance=Math.round(T.balance));T.positionUid!==undefined&&(_.positionUid=T.positionUid);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);return _}};function createBasePositionsOptions(){return{positionUid:"",instrumentUid:"",blocked:0,balance:0}}const Ln={encode(T,_=Le.Z.Writer.create()){if(T.positionUid!==""){_.uint32(10).string(T.positionUid)}if(T.instrumentUid!==""){_.uint32(18).string(T.instrumentUid)}if(T.blocked!==0){_.uint32(88).int64(T.blocked)}if(T.balance!==0){_.uint32(168).int64(T.balance)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsOptions();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.positionUid=m.string();break;case 2:E.instrumentUid=m.string();break;case 11:E.blocked=operations_longToNumber(m.int64());break;case 21:E.balance=operations_longToNumber(m.int64());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{positionUid:operations_isSet(T.positionUid)?String(T.positionUid):"",instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",blocked:operations_isSet(T.blocked)?Number(T.blocked):0,balance:operations_isSet(T.balance)?Number(T.balance):0}},toJSON(T){const _={};T.positionUid!==undefined&&(_.positionUid=T.positionUid);T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.blocked!==undefined&&(_.blocked=Math.round(T.blocked));T.balance!==undefined&&(_.balance=Math.round(T.balance));return _}};function createBaseBrokerReportRequest(){return{generateBrokerReportRequest:undefined,getBrokerReportRequest:undefined}}const Bn={encode(T,_=Le.Z.Writer.create()){if(T.generateBrokerReportRequest!==undefined){Yn.encode(T.generateBrokerReportRequest,_.uint32(10).fork()).ldelim()}if(T.getBrokerReportRequest!==undefined){Mn.encode(T.getBrokerReportRequest,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseBrokerReportRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.generateBrokerReportRequest=Yn.decode(m,m.uint32());break;case 2:E.getBrokerReportRequest=Mn.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{generateBrokerReportRequest:operations_isSet(T.generateBrokerReportRequest)?Yn.fromJSON(T.generateBrokerReportRequest):undefined,getBrokerReportRequest:operations_isSet(T.getBrokerReportRequest)?Mn.fromJSON(T.getBrokerReportRequest):undefined}},toJSON(T){const _={};T.generateBrokerReportRequest!==undefined&&(_.generateBrokerReportRequest=T.generateBrokerReportRequest?Yn.toJSON(T.generateBrokerReportRequest):undefined);T.getBrokerReportRequest!==undefined&&(_.getBrokerReportRequest=T.getBrokerReportRequest?Mn.toJSON(T.getBrokerReportRequest):undefined);return _}};function createBaseBrokerReportResponse(){return{generateBrokerReportResponse:undefined,getBrokerReportResponse:undefined}}const vn={encode(T,_=Le.Z.Writer.create()){if(T.generateBrokerReportResponse!==undefined){Fn.encode(T.generateBrokerReportResponse,_.uint32(10).fork()).ldelim()}if(T.getBrokerReportResponse!==undefined){Jn.encode(T.getBrokerReportResponse,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseBrokerReportResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.generateBrokerReportResponse=Fn.decode(m,m.uint32());break;case 2:E.getBrokerReportResponse=Jn.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{generateBrokerReportResponse:operations_isSet(T.generateBrokerReportResponse)?Fn.fromJSON(T.generateBrokerReportResponse):undefined,getBrokerReportResponse:operations_isSet(T.getBrokerReportResponse)?Jn.fromJSON(T.getBrokerReportResponse):undefined}},toJSON(T){const _={};T.generateBrokerReportResponse!==undefined&&(_.generateBrokerReportResponse=T.generateBrokerReportResponse?Fn.toJSON(T.generateBrokerReportResponse):undefined);T.getBrokerReportResponse!==undefined&&(_.getBrokerReportResponse=T.getBrokerReportResponse?Jn.toJSON(T.getBrokerReportResponse):undefined);return _}};function createBaseGenerateBrokerReportRequest(){return{accountId:"",from:undefined,to:undefined}}const Yn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.from!==undefined){ve.encode(operations_toTimestamp(T.from),_.uint32(18).fork()).ldelim()}if(T.to!==undefined){ve.encode(operations_toTimestamp(T.to),_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGenerateBrokerReportRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.from=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.to=operations_fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());return _}};function createBaseGenerateBrokerReportResponse(){return{taskId:""}}const Fn={encode(T,_=Le.Z.Writer.create()){if(T.taskId!==""){_.uint32(10).string(T.taskId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGenerateBrokerReportResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.taskId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):""}},toJSON(T){const _={};T.taskId!==undefined&&(_.taskId=T.taskId);return _}};function createBaseGetBrokerReportRequest(){return{taskId:"",page:0}}const Mn={encode(T,_=Le.Z.Writer.create()){if(T.taskId!==""){_.uint32(10).string(T.taskId)}if(T.page!==0){_.uint32(16).int32(T.page)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetBrokerReportRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.taskId=m.string();break;case 2:E.page=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):"",page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const _={};T.taskId!==undefined&&(_.taskId=T.taskId);T.page!==undefined&&(_.page=Math.round(T.page));return _}};function createBaseGetBrokerReportResponse(){return{brokerReport:[],itemsCount:0,pagesCount:0,page:0}}const Jn={encode(T,_=Le.Z.Writer.create()){for(const m of T.brokerReport){Gn.encode(m,_.uint32(10).fork()).ldelim()}if(T.itemsCount!==0){_.uint32(16).int32(T.itemsCount)}if(T.pagesCount!==0){_.uint32(24).int32(T.pagesCount)}if(T.page!==0){_.uint32(32).int32(T.page)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetBrokerReportResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.brokerReport.push(Gn.decode(m,m.uint32()));break;case 2:E.itemsCount=m.int32();break;case 3:E.pagesCount=m.int32();break;case 4:E.page=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{brokerReport:Array.isArray(T?.brokerReport)?T.brokerReport.map((T=>Gn.fromJSON(T))):[],itemsCount:operations_isSet(T.itemsCount)?Number(T.itemsCount):0,pagesCount:operations_isSet(T.pagesCount)?Number(T.pagesCount):0,page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const _={};if(T.brokerReport){_.brokerReport=T.brokerReport.map((T=>T?Gn.toJSON(T):undefined))}else{_.brokerReport=[]}T.itemsCount!==undefined&&(_.itemsCount=Math.round(T.itemsCount));T.pagesCount!==undefined&&(_.pagesCount=Math.round(T.pagesCount));T.page!==undefined&&(_.page=Math.round(T.page));return _}};function createBaseBrokerReport(){return{tradeId:"",orderId:"",figi:"",executeSign:"",tradeDatetime:undefined,exchange:"",classCode:"",direction:"",name:"",ticker:"",price:undefined,quantity:0,orderAmount:undefined,aciValue:undefined,totalOrderAmount:undefined,brokerCommission:undefined,exchangeCommission:undefined,exchangeClearingCommission:undefined,repoRate:undefined,party:"",clearValueDate:undefined,secValueDate:undefined,brokerStatus:"",separateAgreementType:"",separateAgreementNumber:"",separateAgreementDate:"",deliveryType:""}}const Gn={encode(T,_=Le.Z.Writer.create()){if(T.tradeId!==""){_.uint32(10).string(T.tradeId)}if(T.orderId!==""){_.uint32(18).string(T.orderId)}if(T.figi!==""){_.uint32(26).string(T.figi)}if(T.executeSign!==""){_.uint32(34).string(T.executeSign)}if(T.tradeDatetime!==undefined){ve.encode(operations_toTimestamp(T.tradeDatetime),_.uint32(42).fork()).ldelim()}if(T.exchange!==""){_.uint32(50).string(T.exchange)}if(T.classCode!==""){_.uint32(58).string(T.classCode)}if(T.direction!==""){_.uint32(66).string(T.direction)}if(T.name!==""){_.uint32(74).string(T.name)}if(T.ticker!==""){_.uint32(82).string(T.ticker)}if(T.price!==undefined){Me.encode(T.price,_.uint32(90).fork()).ldelim()}if(T.quantity!==0){_.uint32(96).int64(T.quantity)}if(T.orderAmount!==undefined){Me.encode(T.orderAmount,_.uint32(106).fork()).ldelim()}if(T.aciValue!==undefined){Je.encode(T.aciValue,_.uint32(114).fork()).ldelim()}if(T.totalOrderAmount!==undefined){Me.encode(T.totalOrderAmount,_.uint32(122).fork()).ldelim()}if(T.brokerCommission!==undefined){Me.encode(T.brokerCommission,_.uint32(130).fork()).ldelim()}if(T.exchangeCommission!==undefined){Me.encode(T.exchangeCommission,_.uint32(138).fork()).ldelim()}if(T.exchangeClearingCommission!==undefined){Me.encode(T.exchangeClearingCommission,_.uint32(146).fork()).ldelim()}if(T.repoRate!==undefined){Je.encode(T.repoRate,_.uint32(154).fork()).ldelim()}if(T.party!==""){_.uint32(162).string(T.party)}if(T.clearValueDate!==undefined){ve.encode(operations_toTimestamp(T.clearValueDate),_.uint32(170).fork()).ldelim()}if(T.secValueDate!==undefined){ve.encode(operations_toTimestamp(T.secValueDate),_.uint32(178).fork()).ldelim()}if(T.brokerStatus!==""){_.uint32(186).string(T.brokerStatus)}if(T.separateAgreementType!==""){_.uint32(194).string(T.separateAgreementType)}if(T.separateAgreementNumber!==""){_.uint32(202).string(T.separateAgreementNumber)}if(T.separateAgreementDate!==""){_.uint32(210).string(T.separateAgreementDate)}if(T.deliveryType!==""){_.uint32(218).string(T.deliveryType)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseBrokerReport();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.tradeId=m.string();break;case 2:E.orderId=m.string();break;case 3:E.figi=m.string();break;case 4:E.executeSign=m.string();break;case 5:E.tradeDatetime=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 6:E.exchange=m.string();break;case 7:E.classCode=m.string();break;case 8:E.direction=m.string();break;case 9:E.name=m.string();break;case 10:E.ticker=m.string();break;case 11:E.price=Me.decode(m,m.uint32());break;case 12:E.quantity=operations_longToNumber(m.int64());break;case 13:E.orderAmount=Me.decode(m,m.uint32());break;case 14:E.aciValue=Je.decode(m,m.uint32());break;case 15:E.totalOrderAmount=Me.decode(m,m.uint32());break;case 16:E.brokerCommission=Me.decode(m,m.uint32());break;case 17:E.exchangeCommission=Me.decode(m,m.uint32());break;case 18:E.exchangeClearingCommission=Me.decode(m,m.uint32());break;case 19:E.repoRate=Je.decode(m,m.uint32());break;case 20:E.party=m.string();break;case 21:E.clearValueDate=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 22:E.secValueDate=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 23:E.brokerStatus=m.string();break;case 24:E.separateAgreementType=m.string();break;case 25:E.separateAgreementNumber=m.string();break;case 26:E.separateAgreementDate=m.string();break;case 27:E.deliveryType=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{tradeId:operations_isSet(T.tradeId)?String(T.tradeId):"",orderId:operations_isSet(T.orderId)?String(T.orderId):"",figi:operations_isSet(T.figi)?String(T.figi):"",executeSign:operations_isSet(T.executeSign)?String(T.executeSign):"",tradeDatetime:operations_isSet(T.tradeDatetime)?operations_fromJsonTimestamp(T.tradeDatetime):undefined,exchange:operations_isSet(T.exchange)?String(T.exchange):"",classCode:operations_isSet(T.classCode)?String(T.classCode):"",direction:operations_isSet(T.direction)?String(T.direction):"",name:operations_isSet(T.name)?String(T.name):"",ticker:operations_isSet(T.ticker)?String(T.ticker):"",price:operations_isSet(T.price)?Me.fromJSON(T.price):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,orderAmount:operations_isSet(T.orderAmount)?Me.fromJSON(T.orderAmount):undefined,aciValue:operations_isSet(T.aciValue)?Je.fromJSON(T.aciValue):undefined,totalOrderAmount:operations_isSet(T.totalOrderAmount)?Me.fromJSON(T.totalOrderAmount):undefined,brokerCommission:operations_isSet(T.brokerCommission)?Me.fromJSON(T.brokerCommission):undefined,exchangeCommission:operations_isSet(T.exchangeCommission)?Me.fromJSON(T.exchangeCommission):undefined,exchangeClearingCommission:operations_isSet(T.exchangeClearingCommission)?Me.fromJSON(T.exchangeClearingCommission):undefined,repoRate:operations_isSet(T.repoRate)?Je.fromJSON(T.repoRate):undefined,party:operations_isSet(T.party)?String(T.party):"",clearValueDate:operations_isSet(T.clearValueDate)?operations_fromJsonTimestamp(T.clearValueDate):undefined,secValueDate:operations_isSet(T.secValueDate)?operations_fromJsonTimestamp(T.secValueDate):undefined,brokerStatus:operations_isSet(T.brokerStatus)?String(T.brokerStatus):"",separateAgreementType:operations_isSet(T.separateAgreementType)?String(T.separateAgreementType):"",separateAgreementNumber:operations_isSet(T.separateAgreementNumber)?String(T.separateAgreementNumber):"",separateAgreementDate:operations_isSet(T.separateAgreementDate)?String(T.separateAgreementDate):"",deliveryType:operations_isSet(T.deliveryType)?String(T.deliveryType):""}},toJSON(T){const _={};T.tradeId!==undefined&&(_.tradeId=T.tradeId);T.orderId!==undefined&&(_.orderId=T.orderId);T.figi!==undefined&&(_.figi=T.figi);T.executeSign!==undefined&&(_.executeSign=T.executeSign);T.tradeDatetime!==undefined&&(_.tradeDatetime=T.tradeDatetime.toISOString());T.exchange!==undefined&&(_.exchange=T.exchange);T.classCode!==undefined&&(_.classCode=T.classCode);T.direction!==undefined&&(_.direction=T.direction);T.name!==undefined&&(_.name=T.name);T.ticker!==undefined&&(_.ticker=T.ticker);T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.orderAmount!==undefined&&(_.orderAmount=T.orderAmount?Me.toJSON(T.orderAmount):undefined);T.aciValue!==undefined&&(_.aciValue=T.aciValue?Je.toJSON(T.aciValue):undefined);T.totalOrderAmount!==undefined&&(_.totalOrderAmount=T.totalOrderAmount?Me.toJSON(T.totalOrderAmount):undefined);T.brokerCommission!==undefined&&(_.brokerCommission=T.brokerCommission?Me.toJSON(T.brokerCommission):undefined);T.exchangeCommission!==undefined&&(_.exchangeCommission=T.exchangeCommission?Me.toJSON(T.exchangeCommission):undefined);T.exchangeClearingCommission!==undefined&&(_.exchangeClearingCommission=T.exchangeClearingCommission?Me.toJSON(T.exchangeClearingCommission):undefined);T.repoRate!==undefined&&(_.repoRate=T.repoRate?Je.toJSON(T.repoRate):undefined);T.party!==undefined&&(_.party=T.party);T.clearValueDate!==undefined&&(_.clearValueDate=T.clearValueDate.toISOString());T.secValueDate!==undefined&&(_.secValueDate=T.secValueDate.toISOString());T.brokerStatus!==undefined&&(_.brokerStatus=T.brokerStatus);T.separateAgreementType!==undefined&&(_.separateAgreementType=T.separateAgreementType);T.separateAgreementNumber!==undefined&&(_.separateAgreementNumber=T.separateAgreementNumber);T.separateAgreementDate!==undefined&&(_.separateAgreementDate=T.separateAgreementDate);T.deliveryType!==undefined&&(_.deliveryType=T.deliveryType);return _}};function createBaseGetDividendsForeignIssuerRequest(){return{generateDivForeignIssuerReport:undefined,getDivForeignIssuerReport:undefined}}const xn={encode(T,_=Le.Z.Writer.create()){if(T.generateDivForeignIssuerReport!==undefined){Vn.encode(T.generateDivForeignIssuerReport,_.uint32(10).fork()).ldelim()}if(T.getDivForeignIssuerReport!==undefined){Zn.encode(T.getDivForeignIssuerReport,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetDividendsForeignIssuerRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.generateDivForeignIssuerReport=Vn.decode(m,m.uint32());break;case 2:E.getDivForeignIssuerReport=Zn.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{generateDivForeignIssuerReport:operations_isSet(T.generateDivForeignIssuerReport)?Vn.fromJSON(T.generateDivForeignIssuerReport):undefined,getDivForeignIssuerReport:operations_isSet(T.getDivForeignIssuerReport)?Zn.fromJSON(T.getDivForeignIssuerReport):undefined}},toJSON(T){const _={};T.generateDivForeignIssuerReport!==undefined&&(_.generateDivForeignIssuerReport=T.generateDivForeignIssuerReport?Vn.toJSON(T.generateDivForeignIssuerReport):undefined);T.getDivForeignIssuerReport!==undefined&&(_.getDivForeignIssuerReport=T.getDivForeignIssuerReport?Zn.toJSON(T.getDivForeignIssuerReport):undefined);return _}};function createBaseGetDividendsForeignIssuerResponse(){return{generateDivForeignIssuerReportResponse:undefined,divForeignIssuerReport:undefined}}const qn={encode(T,_=Le.Z.Writer.create()){if(T.generateDivForeignIssuerReportResponse!==undefined){Xn.encode(T.generateDivForeignIssuerReportResponse,_.uint32(10).fork()).ldelim()}if(T.divForeignIssuerReport!==undefined){Wn.encode(T.divForeignIssuerReport,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetDividendsForeignIssuerResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.generateDivForeignIssuerReportResponse=Xn.decode(m,m.uint32());break;case 2:E.divForeignIssuerReport=Wn.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{generateDivForeignIssuerReportResponse:operations_isSet(T.generateDivForeignIssuerReportResponse)?Xn.fromJSON(T.generateDivForeignIssuerReportResponse):undefined,divForeignIssuerReport:operations_isSet(T.divForeignIssuerReport)?Wn.fromJSON(T.divForeignIssuerReport):undefined}},toJSON(T){const _={};T.generateDivForeignIssuerReportResponse!==undefined&&(_.generateDivForeignIssuerReportResponse=T.generateDivForeignIssuerReportResponse?Xn.toJSON(T.generateDivForeignIssuerReportResponse):undefined);T.divForeignIssuerReport!==undefined&&(_.divForeignIssuerReport=T.divForeignIssuerReport?Wn.toJSON(T.divForeignIssuerReport):undefined);return _}};function createBaseGenerateDividendsForeignIssuerReportRequest(){return{accountId:"",from:undefined,to:undefined}}const Vn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.from!==undefined){ve.encode(operations_toTimestamp(T.from),_.uint32(18).fork()).ldelim()}if(T.to!==undefined){ve.encode(operations_toTimestamp(T.to),_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGenerateDividendsForeignIssuerReportRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.from=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.to=operations_fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());return _}};function createBaseGetDividendsForeignIssuerReportRequest(){return{taskId:"",page:0}}const Zn={encode(T,_=Le.Z.Writer.create()){if(T.taskId!==""){_.uint32(10).string(T.taskId)}if(T.page!==0){_.uint32(16).int32(T.page)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetDividendsForeignIssuerReportRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.taskId=m.string();break;case 2:E.page=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):"",page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const _={};T.taskId!==undefined&&(_.taskId=T.taskId);T.page!==undefined&&(_.page=Math.round(T.page));return _}};function createBaseGenerateDividendsForeignIssuerReportResponse(){return{taskId:""}}const Xn={encode(T,_=Le.Z.Writer.create()){if(T.taskId!==""){_.uint32(10).string(T.taskId)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGenerateDividendsForeignIssuerReportResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.taskId=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{taskId:operations_isSet(T.taskId)?String(T.taskId):""}},toJSON(T){const _={};T.taskId!==undefined&&(_.taskId=T.taskId);return _}};function createBaseGetDividendsForeignIssuerReportResponse(){return{dividendsForeignIssuerReport:[],itemsCount:0,pagesCount:0,page:0}}const Wn={encode(T,_=Le.Z.Writer.create()){for(const m of T.dividendsForeignIssuerReport){Hn.encode(m,_.uint32(10).fork()).ldelim()}if(T.itemsCount!==0){_.uint32(16).int32(T.itemsCount)}if(T.pagesCount!==0){_.uint32(24).int32(T.pagesCount)}if(T.page!==0){_.uint32(32).int32(T.page)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetDividendsForeignIssuerReportResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.dividendsForeignIssuerReport.push(Hn.decode(m,m.uint32()));break;case 2:E.itemsCount=m.int32();break;case 3:E.pagesCount=m.int32();break;case 4:E.page=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{dividendsForeignIssuerReport:Array.isArray(T?.dividendsForeignIssuerReport)?T.dividendsForeignIssuerReport.map((T=>Hn.fromJSON(T))):[],itemsCount:operations_isSet(T.itemsCount)?Number(T.itemsCount):0,pagesCount:operations_isSet(T.pagesCount)?Number(T.pagesCount):0,page:operations_isSet(T.page)?Number(T.page):0}},toJSON(T){const _={};if(T.dividendsForeignIssuerReport){_.dividendsForeignIssuerReport=T.dividendsForeignIssuerReport.map((T=>T?Hn.toJSON(T):undefined))}else{_.dividendsForeignIssuerReport=[]}T.itemsCount!==undefined&&(_.itemsCount=Math.round(T.itemsCount));T.pagesCount!==undefined&&(_.pagesCount=Math.round(T.pagesCount));T.page!==undefined&&(_.page=Math.round(T.page));return _}};function createBaseDividendsForeignIssuerReport(){return{recordDate:undefined,paymentDate:undefined,securityName:"",isin:"",issuerCountry:"",quantity:0,dividend:undefined,externalCommission:undefined,dividendGross:undefined,tax:undefined,dividendAmount:undefined,currency:""}}const Hn={encode(T,_=Le.Z.Writer.create()){if(T.recordDate!==undefined){ve.encode(operations_toTimestamp(T.recordDate),_.uint32(10).fork()).ldelim()}if(T.paymentDate!==undefined){ve.encode(operations_toTimestamp(T.paymentDate),_.uint32(18).fork()).ldelim()}if(T.securityName!==""){_.uint32(26).string(T.securityName)}if(T.isin!==""){_.uint32(34).string(T.isin)}if(T.issuerCountry!==""){_.uint32(42).string(T.issuerCountry)}if(T.quantity!==0){_.uint32(48).int64(T.quantity)}if(T.dividend!==undefined){Je.encode(T.dividend,_.uint32(58).fork()).ldelim()}if(T.externalCommission!==undefined){Je.encode(T.externalCommission,_.uint32(66).fork()).ldelim()}if(T.dividendGross!==undefined){Je.encode(T.dividendGross,_.uint32(74).fork()).ldelim()}if(T.tax!==undefined){Je.encode(T.tax,_.uint32(82).fork()).ldelim()}if(T.dividendAmount!==undefined){Je.encode(T.dividendAmount,_.uint32(90).fork()).ldelim()}if(T.currency!==""){_.uint32(98).string(T.currency)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseDividendsForeignIssuerReport();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.recordDate=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 2:E.paymentDate=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 3:E.securityName=m.string();break;case 4:E.isin=m.string();break;case 5:E.issuerCountry=m.string();break;case 6:E.quantity=operations_longToNumber(m.int64());break;case 7:E.dividend=Je.decode(m,m.uint32());break;case 8:E.externalCommission=Je.decode(m,m.uint32());break;case 9:E.dividendGross=Je.decode(m,m.uint32());break;case 10:E.tax=Je.decode(m,m.uint32());break;case 11:E.dividendAmount=Je.decode(m,m.uint32());break;case 12:E.currency=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{recordDate:operations_isSet(T.recordDate)?operations_fromJsonTimestamp(T.recordDate):undefined,paymentDate:operations_isSet(T.paymentDate)?operations_fromJsonTimestamp(T.paymentDate):undefined,securityName:operations_isSet(T.securityName)?String(T.securityName):"",isin:operations_isSet(T.isin)?String(T.isin):"",issuerCountry:operations_isSet(T.issuerCountry)?String(T.issuerCountry):"",quantity:operations_isSet(T.quantity)?Number(T.quantity):0,dividend:operations_isSet(T.dividend)?Je.fromJSON(T.dividend):undefined,externalCommission:operations_isSet(T.externalCommission)?Je.fromJSON(T.externalCommission):undefined,dividendGross:operations_isSet(T.dividendGross)?Je.fromJSON(T.dividendGross):undefined,tax:operations_isSet(T.tax)?Je.fromJSON(T.tax):undefined,dividendAmount:operations_isSet(T.dividendAmount)?Je.fromJSON(T.dividendAmount):undefined,currency:operations_isSet(T.currency)?String(T.currency):""}},toJSON(T){const _={};T.recordDate!==undefined&&(_.recordDate=T.recordDate.toISOString());T.paymentDate!==undefined&&(_.paymentDate=T.paymentDate.toISOString());T.securityName!==undefined&&(_.securityName=T.securityName);T.isin!==undefined&&(_.isin=T.isin);T.issuerCountry!==undefined&&(_.issuerCountry=T.issuerCountry);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.dividend!==undefined&&(_.dividend=T.dividend?Je.toJSON(T.dividend):undefined);T.externalCommission!==undefined&&(_.externalCommission=T.externalCommission?Je.toJSON(T.externalCommission):undefined);T.dividendGross!==undefined&&(_.dividendGross=T.dividendGross?Je.toJSON(T.dividendGross):undefined);T.tax!==undefined&&(_.tax=T.tax?Je.toJSON(T.tax):undefined);T.dividendAmount!==undefined&&(_.dividendAmount=T.dividendAmount?Je.toJSON(T.dividendAmount):undefined);T.currency!==undefined&&(_.currency=T.currency);return _}};function createBasePortfolioStreamRequest(){return{accounts:[]}}const Kn={encode(T,_=Le.Z.Writer.create()){for(const m of T.accounts){_.uint32(10).string(m)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioStreamRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accounts.push(m.string());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const _={};if(T.accounts){_.accounts=T.accounts.map((T=>T))}else{_.accounts=[]}return _}};function createBasePortfolioStreamResponse(){return{subscriptions:undefined,portfolio:undefined,ping:undefined}}const zn={encode(T,_=Le.Z.Writer.create()){if(T.subscriptions!==undefined){$n.encode(T.subscriptions,_.uint32(10).fork()).ldelim()}if(T.portfolio!==undefined){gn.encode(T.portfolio,_.uint32(18).fork()).ldelim()}if(T.ping!==undefined){Ge.encode(T.ping,_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioStreamResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptions=$n.decode(m,m.uint32());break;case 2:E.portfolio=gn.decode(m,m.uint32());break;case 3:E.ping=Ge.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptions:operations_isSet(T.subscriptions)?$n.fromJSON(T.subscriptions):undefined,portfolio:operations_isSet(T.portfolio)?gn.fromJSON(T.portfolio):undefined,ping:operations_isSet(T.ping)?Ge.fromJSON(T.ping):undefined}},toJSON(T){const _={};T.subscriptions!==undefined&&(_.subscriptions=T.subscriptions?$n.toJSON(T.subscriptions):undefined);T.portfolio!==undefined&&(_.portfolio=T.portfolio?gn.toJSON(T.portfolio):undefined);T.ping!==undefined&&(_.ping=T.ping?Ge.toJSON(T.ping):undefined);return _}};function createBasePortfolioSubscriptionResult(){return{accounts:[]}}const $n={encode(T,_=Le.Z.Writer.create()){for(const m of T.accounts){jn.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePortfolioSubscriptionResult();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accounts.push(jn.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>jn.fromJSON(T))):[]}},toJSON(T){const _={};if(T.accounts){_.accounts=T.accounts.map((T=>T?jn.toJSON(T):undefined))}else{_.accounts=[]}return _}};function createBaseAccountSubscriptionStatus(){return{accountId:"",subscriptionStatus:0}}const jn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.subscriptionStatus!==0){_.uint32(48).int32(T.subscriptionStatus)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseAccountSubscriptionStatus();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 6:E.subscriptionStatus=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",subscriptionStatus:operations_isSet(T.subscriptionStatus)?portfolioSubscriptionStatusFromJSON(T.subscriptionStatus):0}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.subscriptionStatus!==undefined&&(_.subscriptionStatus=portfolioSubscriptionStatusToJSON(T.subscriptionStatus));return _}};function createBaseGetOperationsByCursorRequest(){return{accountId:"",instrumentId:"",from:undefined,to:undefined,cursor:"",limit:0,operationTypes:[],state:0,withoutCommissions:false,withoutTrades:false,withoutOvernights:false}}const Qn={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.instrumentId!==""){_.uint32(18).string(T.instrumentId)}if(T.from!==undefined){ve.encode(operations_toTimestamp(T.from),_.uint32(50).fork()).ldelim()}if(T.to!==undefined){ve.encode(operations_toTimestamp(T.to),_.uint32(58).fork()).ldelim()}if(T.cursor!==""){_.uint32(90).string(T.cursor)}if(T.limit!==0){_.uint32(96).int32(T.limit)}_.uint32(106).fork();for(const m of T.operationTypes){_.int32(m)}_.ldelim();if(T.state!==0){_.uint32(112).int32(T.state)}if(T.withoutCommissions===true){_.uint32(120).bool(T.withoutCommissions)}if(T.withoutTrades===true){_.uint32(128).bool(T.withoutTrades)}if(T.withoutOvernights===true){_.uint32(136).bool(T.withoutOvernights)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOperationsByCursorRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.instrumentId=m.string();break;case 6:E.from=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 7:E.to=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 11:E.cursor=m.string();break;case 12:E.limit=m.int32();break;case 13:if((T&7)===2){const T=m.uint32()+m.pos;while(m.pos<T){E.operationTypes.push(m.int32())}}else{E.operationTypes.push(m.int32())}break;case 14:E.state=m.int32();break;case 15:E.withoutCommissions=m.bool();break;case 16:E.withoutTrades=m.bool();break;case 17:E.withoutOvernights=m.bool();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",instrumentId:operations_isSet(T.instrumentId)?String(T.instrumentId):"",from:operations_isSet(T.from)?operations_fromJsonTimestamp(T.from):undefined,to:operations_isSet(T.to)?operations_fromJsonTimestamp(T.to):undefined,cursor:operations_isSet(T.cursor)?String(T.cursor):"",limit:operations_isSet(T.limit)?Number(T.limit):0,operationTypes:Array.isArray(T?.operationTypes)?T.operationTypes.map((T=>operationTypeFromJSON(T))):[],state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,withoutCommissions:operations_isSet(T.withoutCommissions)?Boolean(T.withoutCommissions):false,withoutTrades:operations_isSet(T.withoutTrades)?Boolean(T.withoutTrades):false,withoutOvernights:operations_isSet(T.withoutOvernights)?Boolean(T.withoutOvernights):false}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.instrumentId!==undefined&&(_.instrumentId=T.instrumentId);T.from!==undefined&&(_.from=T.from.toISOString());T.to!==undefined&&(_.to=T.to.toISOString());T.cursor!==undefined&&(_.cursor=T.cursor);T.limit!==undefined&&(_.limit=Math.round(T.limit));if(T.operationTypes){_.operationTypes=T.operationTypes.map((T=>operationTypeToJSON(T)))}else{_.operationTypes=[]}T.state!==undefined&&(_.state=operationStateToJSON(T.state));T.withoutCommissions!==undefined&&(_.withoutCommissions=T.withoutCommissions);T.withoutTrades!==undefined&&(_.withoutTrades=T.withoutTrades);T.withoutOvernights!==undefined&&(_.withoutOvernights=T.withoutOvernights);return _}};function createBaseGetOperationsByCursorResponse(){return{hasNext:false,nextCursor:"",items:[]}}const er={encode(T,_=Le.Z.Writer.create()){if(T.hasNext===true){_.uint32(8).bool(T.hasNext)}if(T.nextCursor!==""){_.uint32(18).string(T.nextCursor)}for(const m of T.items){tr.encode(m,_.uint32(50).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseGetOperationsByCursorResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.hasNext=m.bool();break;case 2:E.nextCursor=m.string();break;case 6:E.items.push(tr.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{hasNext:operations_isSet(T.hasNext)?Boolean(T.hasNext):false,nextCursor:operations_isSet(T.nextCursor)?String(T.nextCursor):"",items:Array.isArray(T?.items)?T.items.map((T=>tr.fromJSON(T))):[]}},toJSON(T){const _={};T.hasNext!==undefined&&(_.hasNext=T.hasNext);T.nextCursor!==undefined&&(_.nextCursor=T.nextCursor);if(T.items){_.items=T.items.map((T=>T?tr.toJSON(T):undefined))}else{_.items=[]}return _}};function createBaseOperationItem(){return{cursor:"",brokerAccountId:"",id:"",parentOperationId:"",name:"",date:undefined,type:0,description:"",state:0,instrumentUid:"",figi:"",instrumentType:"",instrumentKind:0,payment:undefined,price:undefined,commission:undefined,yield:undefined,yieldRelative:undefined,accruedInt:undefined,quantity:0,quantityRest:0,quantityDone:0,cancelDateTime:undefined,cancelReason:"",tradesInfo:undefined,assetUid:""}}const tr={encode(T,_=Le.Z.Writer.create()){if(T.cursor!==""){_.uint32(10).string(T.cursor)}if(T.brokerAccountId!==""){_.uint32(50).string(T.brokerAccountId)}if(T.id!==""){_.uint32(130).string(T.id)}if(T.parentOperationId!==""){_.uint32(138).string(T.parentOperationId)}if(T.name!==""){_.uint32(146).string(T.name)}if(T.date!==undefined){ve.encode(operations_toTimestamp(T.date),_.uint32(170).fork()).ldelim()}if(T.type!==0){_.uint32(176).int32(T.type)}if(T.description!==""){_.uint32(186).string(T.description)}if(T.state!==0){_.uint32(192).int32(T.state)}if(T.instrumentUid!==""){_.uint32(250).string(T.instrumentUid)}if(T.figi!==""){_.uint32(258).string(T.figi)}if(T.instrumentType!==""){_.uint32(266).string(T.instrumentType)}if(T.instrumentKind!==0){_.uint32(272).int32(T.instrumentKind)}if(T.payment!==undefined){Me.encode(T.payment,_.uint32(330).fork()).ldelim()}if(T.price!==undefined){Me.encode(T.price,_.uint32(338).fork()).ldelim()}if(T.commission!==undefined){Me.encode(T.commission,_.uint32(346).fork()).ldelim()}if(T.yield!==undefined){Me.encode(T.yield,_.uint32(354).fork()).ldelim()}if(T.yieldRelative!==undefined){Je.encode(T.yieldRelative,_.uint32(362).fork()).ldelim()}if(T.accruedInt!==undefined){Me.encode(T.accruedInt,_.uint32(370).fork()).ldelim()}if(T.quantity!==0){_.uint32(408).int64(T.quantity)}if(T.quantityRest!==0){_.uint32(416).int64(T.quantityRest)}if(T.quantityDone!==0){_.uint32(424).int64(T.quantityDone)}if(T.cancelDateTime!==undefined){ve.encode(operations_toTimestamp(T.cancelDateTime),_.uint32(450).fork()).ldelim()}if(T.cancelReason!==""){_.uint32(458).string(T.cancelReason)}if(T.tradesInfo!==undefined){nr.encode(T.tradesInfo,_.uint32(490).fork()).ldelim()}if(T.assetUid!==""){_.uint32(514).string(T.assetUid)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationItem();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.cursor=m.string();break;case 6:E.brokerAccountId=m.string();break;case 16:E.id=m.string();break;case 17:E.parentOperationId=m.string();break;case 18:E.name=m.string();break;case 21:E.date=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 22:E.type=m.int32();break;case 23:E.description=m.string();break;case 24:E.state=m.int32();break;case 31:E.instrumentUid=m.string();break;case 32:E.figi=m.string();break;case 33:E.instrumentType=m.string();break;case 34:E.instrumentKind=m.int32();break;case 41:E.payment=Me.decode(m,m.uint32());break;case 42:E.price=Me.decode(m,m.uint32());break;case 43:E.commission=Me.decode(m,m.uint32());break;case 44:E.yield=Me.decode(m,m.uint32());break;case 45:E.yieldRelative=Je.decode(m,m.uint32());break;case 46:E.accruedInt=Me.decode(m,m.uint32());break;case 51:E.quantity=operations_longToNumber(m.int64());break;case 52:E.quantityRest=operations_longToNumber(m.int64());break;case 53:E.quantityDone=operations_longToNumber(m.int64());break;case 56:E.cancelDateTime=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 57:E.cancelReason=m.string();break;case 61:E.tradesInfo=nr.decode(m,m.uint32());break;case 64:E.assetUid=m.string();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{cursor:operations_isSet(T.cursor)?String(T.cursor):"",brokerAccountId:operations_isSet(T.brokerAccountId)?String(T.brokerAccountId):"",id:operations_isSet(T.id)?String(T.id):"",parentOperationId:operations_isSet(T.parentOperationId)?String(T.parentOperationId):"",name:operations_isSet(T.name)?String(T.name):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,type:operations_isSet(T.type)?operationTypeFromJSON(T.type):0,description:operations_isSet(T.description)?String(T.description):"",state:operations_isSet(T.state)?operationStateFromJSON(T.state):0,instrumentUid:operations_isSet(T.instrumentUid)?String(T.instrumentUid):"",figi:operations_isSet(T.figi)?String(T.figi):"",instrumentType:operations_isSet(T.instrumentType)?String(T.instrumentType):"",instrumentKind:operations_isSet(T.instrumentKind)?instrumentTypeFromJSON(T.instrumentKind):0,payment:operations_isSet(T.payment)?Me.fromJSON(T.payment):undefined,price:operations_isSet(T.price)?Me.fromJSON(T.price):undefined,commission:operations_isSet(T.commission)?Me.fromJSON(T.commission):undefined,yield:operations_isSet(T.yield)?Me.fromJSON(T.yield):undefined,yieldRelative:operations_isSet(T.yieldRelative)?Je.fromJSON(T.yieldRelative):undefined,accruedInt:operations_isSet(T.accruedInt)?Me.fromJSON(T.accruedInt):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,quantityRest:operations_isSet(T.quantityRest)?Number(T.quantityRest):0,quantityDone:operations_isSet(T.quantityDone)?Number(T.quantityDone):0,cancelDateTime:operations_isSet(T.cancelDateTime)?operations_fromJsonTimestamp(T.cancelDateTime):undefined,cancelReason:operations_isSet(T.cancelReason)?String(T.cancelReason):"",tradesInfo:operations_isSet(T.tradesInfo)?nr.fromJSON(T.tradesInfo):undefined,assetUid:operations_isSet(T.assetUid)?String(T.assetUid):""}},toJSON(T){const _={};T.cursor!==undefined&&(_.cursor=T.cursor);T.brokerAccountId!==undefined&&(_.brokerAccountId=T.brokerAccountId);T.id!==undefined&&(_.id=T.id);T.parentOperationId!==undefined&&(_.parentOperationId=T.parentOperationId);T.name!==undefined&&(_.name=T.name);T.date!==undefined&&(_.date=T.date.toISOString());T.type!==undefined&&(_.type=operationTypeToJSON(T.type));T.description!==undefined&&(_.description=T.description);T.state!==undefined&&(_.state=operationStateToJSON(T.state));T.instrumentUid!==undefined&&(_.instrumentUid=T.instrumentUid);T.figi!==undefined&&(_.figi=T.figi);T.instrumentType!==undefined&&(_.instrumentType=T.instrumentType);T.instrumentKind!==undefined&&(_.instrumentKind=instrumentTypeToJSON(T.instrumentKind));T.payment!==undefined&&(_.payment=T.payment?Me.toJSON(T.payment):undefined);T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);T.commission!==undefined&&(_.commission=T.commission?Me.toJSON(T.commission):undefined);T.yield!==undefined&&(_.yield=T.yield?Me.toJSON(T.yield):undefined);T.yieldRelative!==undefined&&(_.yieldRelative=T.yieldRelative?Je.toJSON(T.yieldRelative):undefined);T.accruedInt!==undefined&&(_.accruedInt=T.accruedInt?Me.toJSON(T.accruedInt):undefined);T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.quantityRest!==undefined&&(_.quantityRest=Math.round(T.quantityRest));T.quantityDone!==undefined&&(_.quantityDone=Math.round(T.quantityDone));T.cancelDateTime!==undefined&&(_.cancelDateTime=T.cancelDateTime.toISOString());T.cancelReason!==undefined&&(_.cancelReason=T.cancelReason);T.tradesInfo!==undefined&&(_.tradesInfo=T.tradesInfo?nr.toJSON(T.tradesInfo):undefined);T.assetUid!==undefined&&(_.assetUid=T.assetUid);return _}};function createBaseOperationItemTrades(){return{trades:[]}}const nr={encode(T,_=Le.Z.Writer.create()){for(const m of T.trades){rr.encode(m,_.uint32(50).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationItemTrades();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 6:E.trades.push(rr.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{trades:Array.isArray(T?.trades)?T.trades.map((T=>rr.fromJSON(T))):[]}},toJSON(T){const _={};if(T.trades){_.trades=T.trades.map((T=>T?rr.toJSON(T):undefined))}else{_.trades=[]}return _}};function createBaseOperationItemTrade(){return{num:"",date:undefined,quantity:0,price:undefined,yield:undefined,yieldRelative:undefined}}const rr={encode(T,_=Le.Z.Writer.create()){if(T.num!==""){_.uint32(10).string(T.num)}if(T.date!==undefined){ve.encode(operations_toTimestamp(T.date),_.uint32(50).fork()).ldelim()}if(T.quantity!==0){_.uint32(88).int64(T.quantity)}if(T.price!==undefined){Me.encode(T.price,_.uint32(130).fork()).ldelim()}if(T.yield!==undefined){Me.encode(T.yield,_.uint32(170).fork()).ldelim()}if(T.yieldRelative!==undefined){Je.encode(T.yieldRelative,_.uint32(178).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBaseOperationItemTrade();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.num=m.string();break;case 6:E.date=operations_fromTimestamp(ve.decode(m,m.uint32()));break;case 11:E.quantity=operations_longToNumber(m.int64());break;case 16:E.price=Me.decode(m,m.uint32());break;case 21:E.yield=Me.decode(m,m.uint32());break;case 22:E.yieldRelative=Je.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{num:operations_isSet(T.num)?String(T.num):"",date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined,quantity:operations_isSet(T.quantity)?Number(T.quantity):0,price:operations_isSet(T.price)?Me.fromJSON(T.price):undefined,yield:operations_isSet(T.yield)?Me.fromJSON(T.yield):undefined,yieldRelative:operations_isSet(T.yieldRelative)?Je.fromJSON(T.yieldRelative):undefined}},toJSON(T){const _={};T.num!==undefined&&(_.num=T.num);T.date!==undefined&&(_.date=T.date.toISOString());T.quantity!==undefined&&(_.quantity=Math.round(T.quantity));T.price!==undefined&&(_.price=T.price?Me.toJSON(T.price):undefined);T.yield!==undefined&&(_.yield=T.yield?Me.toJSON(T.yield):undefined);T.yieldRelative!==undefined&&(_.yieldRelative=T.yieldRelative?Je.toJSON(T.yieldRelative):undefined);return _}};function createBasePositionsStreamRequest(){return{accounts:[]}}const ir={encode(T,_=Le.Z.Writer.create()){for(const m of T.accounts){_.uint32(10).string(m)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsStreamRequest();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accounts.push(m.string());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>String(T))):[]}},toJSON(T){const _={};if(T.accounts){_.accounts=T.accounts.map((T=>T))}else{_.accounts=[]}return _}};function createBasePositionsStreamResponse(){return{subscriptions:undefined,position:undefined,ping:undefined}}const sr={encode(T,_=Le.Z.Writer.create()){if(T.subscriptions!==undefined){or.encode(T.subscriptions,_.uint32(10).fork()).ldelim()}if(T.position!==undefined){ur.encode(T.position,_.uint32(18).fork()).ldelim()}if(T.ping!==undefined){Ge.encode(T.ping,_.uint32(26).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsStreamResponse();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.subscriptions=or.decode(m,m.uint32());break;case 2:E.position=ur.decode(m,m.uint32());break;case 3:E.ping=Ge.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{subscriptions:operations_isSet(T.subscriptions)?or.fromJSON(T.subscriptions):undefined,position:operations_isSet(T.position)?ur.fromJSON(T.position):undefined,ping:operations_isSet(T.ping)?Ge.fromJSON(T.ping):undefined}},toJSON(T){const _={};T.subscriptions!==undefined&&(_.subscriptions=T.subscriptions?or.toJSON(T.subscriptions):undefined);T.position!==undefined&&(_.position=T.position?ur.toJSON(T.position):undefined);T.ping!==undefined&&(_.ping=T.ping?Ge.toJSON(T.ping):undefined);return _}};function createBasePositionsSubscriptionResult(){return{accounts:[]}}const or={encode(T,_=Le.Z.Writer.create()){for(const m of T.accounts){ar.encode(m,_.uint32(10).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsSubscriptionResult();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accounts.push(ar.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accounts:Array.isArray(T?.accounts)?T.accounts.map((T=>ar.fromJSON(T))):[]}},toJSON(T){const _={};if(T.accounts){_.accounts=T.accounts.map((T=>T?ar.toJSON(T):undefined))}else{_.accounts=[]}return _}};function createBasePositionsSubscriptionStatus(){return{accountId:"",subscriptionStatus:0}}const ar={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}if(T.subscriptionStatus!==0){_.uint32(48).int32(T.subscriptionStatus)}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsSubscriptionStatus();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 6:E.subscriptionStatus=m.int32();break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",subscriptionStatus:operations_isSet(T.subscriptionStatus)?positionsAccountSubscriptionStatusFromJSON(T.subscriptionStatus):0}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);T.subscriptionStatus!==undefined&&(_.subscriptionStatus=positionsAccountSubscriptionStatusToJSON(T.subscriptionStatus));return _}};function createBasePositionData(){return{accountId:"",money:[],securities:[],futures:[],options:[],date:undefined}}const ur={encode(T,_=Le.Z.Writer.create()){if(T.accountId!==""){_.uint32(10).string(T.accountId)}for(const m of T.money){dr.encode(m,_.uint32(18).fork()).ldelim()}for(const m of T.securities){Dn.encode(m,_.uint32(26).fork()).ldelim()}for(const m of T.futures){wn.encode(m,_.uint32(34).fork()).ldelim()}for(const m of T.options){Ln.encode(m,_.uint32(42).fork()).ldelim()}if(T.date!==undefined){ve.encode(operations_toTimestamp(T.date),_.uint32(50).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionData();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.accountId=m.string();break;case 2:E.money.push(dr.decode(m,m.uint32()));break;case 3:E.securities.push(Dn.decode(m,m.uint32()));break;case 4:E.futures.push(wn.decode(m,m.uint32()));break;case 5:E.options.push(Ln.decode(m,m.uint32()));break;case 6:E.date=operations_fromTimestamp(ve.decode(m,m.uint32()));break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{accountId:operations_isSet(T.accountId)?String(T.accountId):"",money:Array.isArray(T?.money)?T.money.map((T=>dr.fromJSON(T))):[],securities:Array.isArray(T?.securities)?T.securities.map((T=>Dn.fromJSON(T))):[],futures:Array.isArray(T?.futures)?T.futures.map((T=>wn.fromJSON(T))):[],options:Array.isArray(T?.options)?T.options.map((T=>Ln.fromJSON(T))):[],date:operations_isSet(T.date)?operations_fromJsonTimestamp(T.date):undefined}},toJSON(T){const _={};T.accountId!==undefined&&(_.accountId=T.accountId);if(T.money){_.money=T.money.map((T=>T?dr.toJSON(T):undefined))}else{_.money=[]}if(T.securities){_.securities=T.securities.map((T=>T?Dn.toJSON(T):undefined))}else{_.securities=[]}if(T.futures){_.futures=T.futures.map((T=>T?wn.toJSON(T):undefined))}else{_.futures=[]}if(T.options){_.options=T.options.map((T=>T?Ln.toJSON(T):undefined))}else{_.options=[]}T.date!==undefined&&(_.date=T.date.toISOString());return _}};function createBasePositionsMoney(){return{availableValue:undefined,blockedValue:undefined}}const dr={encode(T,_=Le.Z.Writer.create()){if(T.availableValue!==undefined){Me.encode(T.availableValue,_.uint32(10).fork()).ldelim()}if(T.blockedValue!==undefined){Me.encode(T.blockedValue,_.uint32(18).fork()).ldelim()}return _},decode(T,_){const m=T instanceof Le.Z.Reader?T:new Le.Z.Reader(T);let S=_===undefined?m.len:m.pos+_;const E=createBasePositionsMoney();while(m.pos<S){const T=m.uint32();switch(T>>>3){case 1:E.availableValue=Me.decode(m,m.uint32());break;case 2:E.blockedValue=Me.decode(m,m.uint32());break;default:m.skipType(T&7);break}}return E},fromJSON(T){return{availableValue:operations_isSet(T.availableValue)?Me.fromJSON(T.availableValue):undefined,blockedValue:operations_isSet(T.blockedValue)?Me.fromJSON(T.blockedValue):undefined}},toJSON(T){const _={};T.availableValue!==undefined&&(_.availableValue=T.availableValue?Me.toJSON(T.availableValue):undefined);T.blockedValue!==undefined&&(_.blockedValue=T.blockedValue?Me.toJSON(T.blockedValue):undefined);return _}};const cr={name:"OperationsService",fullName:"tinkoff.public.invest.api.contract.v1.OperationsService",methods:{getOperations:{name:"GetOperations",requestType:On,requestStream:false,responseType:Nn,responseStream:false,options:{}},getPortfolio:{name:"GetPortfolio",requestType:An,requestStream:false,responseType:gn,responseStream:false,options:{}},getPositions:{name:"GetPositions",requestType:bn,requestStream:false,responseType:Pn,responseStream:false,options:{}},getWithdrawLimits:{name:"GetWithdrawLimits",requestType:yn,requestStream:false,responseType:Cn,responseStream:false,options:{}},getBrokerReport:{name:"GetBrokerReport",requestType:Bn,requestStream:false,responseType:vn,responseStream:false,options:{}},getDividendsForeignIssuer:{name:"GetDividendsForeignIssuer",requestType:xn,requestStream:false,responseType:qn,responseStream:false,options:{}},getOperationsByCursor:{name:"GetOperationsByCursor",requestType:Qn,requestStream:false,responseType:er,responseStream:false,options:{}}}};const fr={name:"OperationsStreamService",fullName:"tinkoff.public.invest.api.contract.v1.OperationsStreamService",methods:{portfolioStream:{name:"PortfolioStream",requestType:Kn,requestStream:false,responseType:zn,responseStream:true,options:{}},positionsStream:{name:"PositionsStream",requestType:ir,requestStream:false,responseType:sr,responseStream:true,options:{}}}};function operations_toTimestamp(T){const _=T.getTime()/1e3;const m=T.getTime()%1e3*1e6;return{seconds:_,nanos:m}}function operations_fromTimestamp(T){let _=T.seconds*1e3;_+=T.nanos/1e6;return new Date(_)}function operations_fromJsonTimestamp(T){if(T instanceof Date){return T}else if(typeof T==="string"){return new Date(T)}else{return operations_fromTimestamp(ve.fromJSON(T))}}function operations_longToNumber(T){if(T.gt(Number.MAX_SAFE_INTEGER)){throw new Error("Value is larger than Number.MAX_SAFE_INTEGER")}return T.toNumber()}if(Le.Z.util.Long!==t){Le.Z.util.Long=t;Le.Z.configure()}function operations_isSet(T){return T!==null&&T!==undefined}const __decorate=function(T,_,m,S){let E=arguments.length,I=E<3?_:S===null?S=Object.getOwnPropertyDescriptor(_,m):S,O;for(let S=T.length-1;S>=0;S--)if(O=T[S])I=(E<3?O(I):E>3?O(_,m,I):O(_,m))||I;return E>3&&I&&Object.defineProperty(_,m,I),I};function toQuotation(T){const _=T<0?-1:1;const m=Math.abs(T);const S=Math.floor(m);const E=Math.round((m-S)*1e9);return{units:_*S,nano:_*E}}function toNumber(T){return T?+T.units+ +T.nano/1e9:T}const lr={BBG0013J7V24:"AMD",BBG0013HG026:"KZT",BBG0013J7Y00:"KGS",BBG0013HQ310:"UZS",BBG0013HGFT4:"USD",BBG0013HRTL0:"CNY",BBG0013J11P1:"TJS",BBG00D87WQY7:"BYN",BBG0013HSW87:"HKD",BBG000VJ5YR4:"XAU",BBG0013J12N1:"TRY",BBG000VHQTD1:"XAG",RUB000UTSTOM:"RUB"};class TinkoffTraderDatum extends TraderDatum{filter(T,_,m,S){if(_.exchange===N.SPBX){return[N.SPBX,N.US,N.UTEX_MARGIN_STOCKS].includes(m?.instrument?.exchange)}return m?.instrument?.exchange===_.exchange}}class OrderbookDatum extends TinkoffTraderDatum{async firstReferenceAdded(T){const _=this.trader.adoptInstrument(T.instrument);if(!_.notSupported&&_.tinkoffFigi){this.dataArrived(await this.trader.getOrCreateClient(Mt).getOrderBook({instrumentId:_.tinkoffFigi,depth:50}),_)}return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[D.ORDERBOOK](T,_){let m=+toNumber(T.limitDown).toFixed(getInstrumentPrecision(_));let S=+toNumber(T.limitUp).toFixed(getInstrumentPrecision(_));if(_.type==="bond"){m=this.trader.relativeBondPriceToPrice(m,_);S=this.trader.relativeBondPriceToPrice(S,_)}return{bids:(T?.bids?.map?.((T=>{if(T.pool){return T}const m=+toNumber(T.price).toFixed(getInstrumentPrecision(_));return{price:_.type==="bond"?this.trader.relativeBondPriceToPrice(m,_):m,volume:T.quantity,pool:_.exchange}}))??[]).concat([{price:m,pool:"LD",volume:0}]).sort(((T,_)=>_.price-T.price)),asks:(T?.asks?.map?.((T=>{if(T.pool){return T}const m=+toNumber(T.price).toFixed(getInstrumentPrecision(_));return{price:_.type==="bond"?this.trader.relativeBondPriceToPrice(m,_):m,volume:T.quantity,pool:_.exchange}}))??[]).concat({price:S,pool:"LU",volume:0}).sort(((T,_)=>T.price-_.price))}}}class TimeAndSalesDatum extends TinkoffTraderDatum{async firstReferenceAdded(){return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[D.MARKET_PRINT](T,_){const m=T.time.valueOf();const S=_.type==="bond"?this.trader.relativeBondPriceToPrice(toNumber(T.price),_):+toNumber(T.price).toFixed(getInstrumentPrecision(_));return{tradeId:`${_.symbol}|${T.direction}|${S}|${T.quantity}|${m}`,side:T.direction===Xe.TRADE_DIRECTION_BUY?"buy":T.direction===Xe.TRADE_DIRECTION_SELL?"sell":"",timestamp:m,symbol:_.symbol,price:S,volume:T.quantity,pool:_.exchange}}}class CandleDatum extends TinkoffTraderDatum{async firstReferenceAdded(){return this.trader.resubscribeToMarketDataStream()}async lastReferenceRemoved(){return this.trader.resubscribeToMarketDataStream()}[D.CANDLE](T,_){if(_.type==="bond"){return{open:this.trader.relativeBondPriceToPrice(toNumber(T.open),_),high:this.trader.relativeBondPriceToPrice(toNumber(T.high),_),low:this.trader.relativeBondPriceToPrice(toNumber(T.low),_),close:this.trader.relativeBondPriceToPrice(toNumber(T.close),_),time:T.time.toISOString(),volume:T.volume}}else{return{open:+toNumber(T.open).toFixed(getInstrumentPrecision(_)),high:+toNumber(T.high).toFixed(getInstrumentPrecision(_)),low:+toNumber(T.low).toFixed(getInstrumentPrecision(_)),close:+toNumber(T.close).toFixed(getInstrumentPrecision(_)),time:T.time.toISOString(),volume:T.volume}}}}class PositionsDatum extends GlobalTraderDatum{portfolio;positions={money:new Map,blockedMoney:new Map,securities:new Map,futures:new Map,options:new Map};onPortfolio(T){if(T){this.portfolio=T;this.portfolio.positionsMap=new Map;this.portfolio.positions.forEach((T=>this.portfolio.positionsMap.set(T.figi,T)));this.broadcastPortfolio()}}onPositions(T){if(T){const{money:_,blocked:m,securities:S,futures:E,options:I}=T;for(const T of _){this.positions.money.set(T.currency.toUpperCase(),toNumber(T))}for(const T of m){this.positions.blockedMoney.set(T.currency.toUpperCase(),toNumber(T))}for(const T of S){if(T.instrumentType==="share"||T.instrumentType==="bond"||T.instrumentType==="etf"){this.positions.securities.set(T.figi,T)}}for(const T of E){this.positions.futures.set(T.figi,T)}}this.broadcastPortfolio()}broadcastPortfolio(){if(typeof this.portfolio==="undefined"){return}for(const[T,_]of this.positions.money){this.dataArrived({symbol:T,isCurrency:true,isBalance:true,lot:1,size:_,accountId:this.trader.document.account})}for(const[T,_]of this.positions.securities){const m=this.trader.figis.get(T);const S=this.portfolio.positionsMap.get(T);if(m){if(_.instrumentType==="share"||_.instrumentType==="bond"||_.instrumentType==="etf"){this.dataArrived({figi:T,instrument:m,lot:m.lot,symbol:m.symbol,exchange:m.exchange,isCurrency:false,isBalance:false,averagePrice:S?+toNumber(S.averagePositionPrice).toFixed(getInstrumentPrecision(m)):void 0,size:(_.balance+_.blocked)/m.lot,accountId:this.trader.document.account})}}}for(const[T,_]of this.positions.futures){const m=this.trader.figis.get(T);const S=this.portfolio.positionsMap.get(T);if(m){this.dataArrived({figi:T,instrument:m,lot:m.lot,symbol:m.symbol,exchange:m.exchange,isCurrency:false,isBalance:false,averagePrice:S?+toNumber(S.averagePositionPrice).toFixed(getInstrumentPrecision(m)):void 0,size:(_.balance+_.blocked)/m.lot,accountId:this.trader.document.account})}}}valueKeyForData(T){return T?.figi??T?.symbol}filter(T,_,m,S){if(S!==D.POSITION){if(T.isBalance){return T.symbol===_.getAttribute("balance")}return T.figi===_.instrument?.tinkoffFigi}else{return true}}async firstReferenceAdded(){this.portfolio=await this.trader.getOrCreateClient(cr).getPortfolio({accountId:this.trader.document.account});this.onPositions(await this.trader.getOrCreateClient(cr).getPositions({accountId:this.trader.document.account}));this.onPortfolio(this.portfolio);await this.trader.resubscribeToPortfolioStream();return this.trader.resubscribeToPositionsStream()}async lastReferenceRemoved(){await this.trader.resubscribeToPortfolioStream();return this.trader.resubscribeToPositionsStream()}[D.POSITION](T){return T}#m(T){switch(T.instrument.type){case"stock":case"etf":case"bond":return this.positions.securities.get(T.figi);case"future":return this.positions.futures.get(T.figi)}}[D.POSITION_SIZE](T){if(T.isBalance){return T.size}else if(T.instrument){const _=this.#m(T);if(!_||+(_?.balance+_?.blocked)===0){return 0}else{return(_.balance+_.blocked)/T.instrument.lot}}}[D.POSITION_AVERAGE](T){if(!T.isBalance){if(T.instrument){const _=this.#m(T);if(!_||+(_?.balance+_?.blocked)===0){return 0}else{const _=this.portfolio.positionsMap?.get(T.figi);if(_){return+toNumber(_.averagePositionPrice).toFixed(getInstrumentPrecision(T.instrument))}else{return 0}}}}}}class TimelineDatum extends GlobalTraderDatum{manualAssignment=true;#S=[];#E;#I=false;async#O(){if(this.#I){try{if(!this.#S.length){this.#S=(await this.trader.historicalTimeline({cursor:""})).items;for(const T of this.#S){this.dataArrived(T)}}else{const T=await this.trader.historicalTimeline({cursor:"",limit:10});const _=[];for(const m of T.items){if(m.id&&m.id!==this.#S[0]?.id){_.push(m)}else{break}}this.#S.unshift(..._);for(const T of _){this.dataArrived(T)}}this.#E=setTimeout((()=>{this.#O()}),750)}catch(T){this.trader.$$debug("#fetchTimelineLoop failed: %s",T.message);this.#E=setTimeout((()=>{this.#O()}),750)}}}firstReferenceAdded(){this.#S=[];clearTimeout(this.#E);this.#I=true;return this.#O()}lastReferenceRemoved(){this.#S=[];clearTimeout(this.#E);this.#I=false}valueKeyForData(T){return T.id}[D.TIMELINE_ITEM](T,_,{field:m}){const S=this.trader.figis.get(T.figi);if(S&&Array.isArray(T.tradesInfo?.trades)){for(const E of T.tradesInfo.trades){this.trader.assignSourceField(_,m,{instrument:S,operationId:E.num,accruedInterest:toNumber(T.accruedInt),commission:toNumber(T.commission),parentId:T.id,symbol:S.symbol,cursor:T.cursor,type:T.type,exchange:S.exchange,quantity:E.quantity/S.lot,price:+toNumber(E.price).toFixed(getInstrumentPrecision(S)),createdAt:E.date.toISOString(),parentCreatedAt:T.date.toISOString()})}}}}class RealOrderDatum extends GlobalTraderDatum{#E;#I=false;orders=new Map;async#N(){if(this.#I){try{const T=this.trader.getOrCreateClient(ln);const{orders:_}=await this.trader.getOrders(T);const m=new Set;for(const T of _){m.add(`${T.orderId}|${toNumber(T.initialSecurityPrice)}|${T.lotsExecuted}|${T.lotsRequested}`);if(!this.orders.has(T.orderId)){this.orders.set(T.orderId,T);this.dataArrived(T)}}for(const[T,_]of this.orders){if(!m.has(`${T}|${toNumber(_.initialSecurityPrice)}|${_.lotsExecuted}|${_.lotsRequested}`)){_.executionReportStatus=Vt.EXECUTION_REPORT_STATUS_UNSPECIFIED;this.dataArrived(_);this.orders.delete(T)}}this.#E=setTimeout((()=>{this.#N()}),750)}catch(T){this.trader.$$debug("#fetchOrdersLoop failed: %s",T.message);this.#E=setTimeout((()=>{this.#N()}),750)}}}firstReferenceAdded(){this.orders.clear();clearTimeout(this.#E);this.#I=true;return this.#N()}lastReferenceRemoved(){this.orders.clear();clearTimeout(this.#E);this.#I=false}valueKeyForData(T){return T.orderId}[D.REAL_ORDER](T,_,{origin:m}){const S=this.trader.figis.get(T.figi);if(S){return{instrument:S,orderId:T.orderId,symbol:T.figi,exchange:S.exchange,orderType:T.orderType===qt.ORDER_TYPE_LIMIT?"limit":"market",side:T.direction===xt.ORDER_DIRECTION_BUY?"buy":"sell",status:this.trader.getOrderStatus(T),placedAt:T.orderDate.toISOString(),endsAt:null,quantity:T.lotsRequested,filled:T.lotsExecuted,price:S.type==="bond"?this.trader.relativeBondPriceToPrice(toNumber(T.initialSecurityPrice),S):+toNumber(T.initialSecurityPrice).toFixed(getInstrumentPrecision(S)),origin:m}}}}class TinkoffGrpcWebTrader extends Trader{#R=new Map;#h;#A;#g;#b;#P=new Map;get figis(){return this.#P}#y=new Map;constructor(T){super(T,[{type:OrderbookDatum,datums:[D.ORDERBOOK]},{type:TimeAndSalesDatum,datums:[D.MARKET_PRINT]},{type:CandleDatum,datums:[D.CANDLE]},{type:PositionsDatum,datums:[D.POSITION,D.POSITION_SIZE,D.POSITION_AVERAGE]},{type:RealOrderDatum,datums:[D.REAL_ORDER]},{type:TimelineDatum,datums:[D.TIMELINE_ITEM]},{type:TraderEventDatum,datums:[D.TRADER]},{type:ConditionalOrderDatum,datums:[D.CONDITIONAL_ORDER]}]);this.#h=new J({Authorization:`Bearer ${this.document.broker.apiToken}`,"x-app-name":"johnpantini.ppp"})}getTimeframeList(){return[{name:"Sec",values:[]},{name:"Min",values:[1,2,3,5,10,15,30]},{name:"Hour",values:[1,2,4]},{name:"Day",values:[1]},{name:"Week",values:[1]},{name:"Month",values:[1]}]}async oneTimeInitializationCallback(){const{payload:T}=await(await fetch("https://api.tinkoff.ru/trading/futures/list")).json();for(const _ of T.values){this.#y.set(_.instrumentInfo.ticker.toUpperCase(),_.orderInfo?.minPriceIncrementAmount?.value??1)}}async instrumentsArrived(T){for(const[,_]of T){if(_.tinkoffFigi){this.#P.set(_.tinkoffFigi,_)}}return super.instrumentsArrived(T)}getOrCreateClient(T){if(!this.#R.has(T)){this.#R.set(T,createClient(T,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}}))}return this.#R.get(T)}resubscribeToMarketDataStream(){return this.#C()}resubscribeToPortfolioStream(){return this.#k()}resubscribeToPositionsStream(){return this.#U()}async#C(){if(!this.datums[D.ORDERBOOK].refs.size&&!this.datums[D.MARKET_PRINT].refs.size&&!this.datums[D.CANDLE].refs.size){return}const T={};const _=[];const m=[];const S=[];for(const[T,m]of this.datums[D.ORDERBOOK].refs){if(m>0){_.push(T)}}for(const[T,_]of this.datums[D.MARKET_PRINT].refs){if(_>0){m.push(T)}}for(const[T,_]of this.datums[D.CANDLE].refs){if(_>0){S.push(T)}}if(_.length){T.subscribeOrderBookRequest={subscriptionAction:qe.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[]};_.forEach((_=>{const m=this.instruments.get(_);if(m){T.subscribeOrderBookRequest.instruments.push({instrumentId:m.tinkoffFigi,depth:50})}}))}if(m.length){T.subscribeTradesRequest={subscriptionAction:qe.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[]};m.forEach((_=>{const m=this.instruments.get(_);if(m){T.subscribeTradesRequest.instruments.push({instrumentId:m.tinkoffFigi})}}))}if(S.length){T.subscribeCandlesRequest={subscriptionAction:qe.SUBSCRIPTION_ACTION_SUBSCRIBE,instruments:[],waitingClose:false};S.forEach((_=>{const m=this.instruments.get(_);if(m){T.subscribeCandlesRequest.instruments.push({instrumentId:m.tinkoffFigi,interval:Ve.SUBSCRIPTION_INTERVAL_ONE_MINUTE})}}))}const E=createClient(Jt,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});this.#A?.abort?.();this.#A=new AbortController;const I=E.marketDataServerSideStream(T,{signal:this.#A?.signal});try{for await(const T of I){if(T.orderbook){this.datums[D.ORDERBOOK].dataArrived(T.orderbook,this.#P.get(T.orderbook.figi))}else if(T.trade){this.datums[D.MARKET_PRINT].dataArrived(T.trade,this.#P.get(T.trade.figi))}else if(T.candle){this.datums[D.CANDLE].dataArrived(T.candle,this.#P.get(T.candle.figi))}}await this.resubscribe([D.ORDERBOOK]);this.resubscribeToMarketDataStream();this.traderEvent({event:"reconnect"})}catch(T){if(!isAbortError(T)){this.$$debug("#resubscribeToMarketDataStream failed: %s",T.message);setTimeout((async()=>{await this.resubscribe([D.ORDERBOOK]);this.resubscribeToMarketDataStream();this.traderEvent({event:"reconnect"})}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async#k(){if(this.datums[D.POSITION].refCount<1){return}const T=createClient(fr,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});this.#g?.abort?.();this.#g=new AbortController;const _=T.portfolioStream({accounts:[this.document.account]},{signal:this.#g?.signal});try{for await(const T of _){if(T.portfolio){this.datums[D.POSITION].onPortfolio(T.portfolio)}}this.resubscribeToPortfolioStream()}catch(T){if(!isAbortError(T)){this.$$debug("#resubscribeToPortfolioStream failed: %s",T.message);setTimeout((()=>{this.resubscribeToPortfolioStream()}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async#U(){if(this.datums[D.POSITION].refCount<1){return}const T=createClient(fr,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});this.#b?.abort?.();this.#b=new AbortController;const _=T.positionsStream({accounts:[this.document.account]},{signal:this.#b?.signal});try{for await(const T of _){if(T.position){const _=[];const m=[];(T.position.money??[]).forEach((T=>{_.push(T.availableValue);m.push(T.blockedValue)}));this.datums[D.POSITION].onPositions({money:_,blocked:m,securities:T.position.securities,futures:T.position.futures,options:T.position.options})}}this.resubscribeToPositionsStream()}catch(T){if(!isAbortError(T)){this.$$debug("#resubscribeToPositionsStream failed: %s",T.message);setTimeout((()=>{this.resubscribeToPositionsStream()}),Math.max(this.document.reconnectTimeout??1e3,1e3))}}}async historicalTimeline({cursor:T,from:_,to:m,limit:S=100}){return this.getOrCreateClient(cr).getOperationsByCursor({accountId:this.document.account,instrumentId:"",from:_,to:m,cursor:T,limit:S,operationTypes:[_n.OPERATION_TYPE_BUY,_n.OPERATION_TYPE_SELL,_n.OPERATION_TYPE_BUY_CARD,_n.OPERATION_TYPE_BUY_MARGIN,_n.OPERATION_TYPE_SELL_MARGIN],state:pn.OPERATION_STATE_EXECUTED,withoutCommissions:true})}async historicalTimeAndSales({instrument:T,depth:_}){if(T){const m=new Date;const S=new Date;m.setUTCHours(m.getUTCHours()+1);S.setUTCHours(S.getUTCHours()-1);const{trades:E}=await this.getOrCreateClient(Mt).getLastTrades({instrumentId:T.tinkoffFigi,from:S,to:m});return E.slice(-_).reverse().map((_=>{const m=_.time.valueOf();const S=T.type==="bond"?this.relativeBondPriceToPrice(toNumber(_.price),T):+toNumber(_.price).toFixed(getInstrumentPrecision(T));return{tradeId:`${T.symbol}|${_.direction}|${S}|${_.quantity}|${m}`,side:_.direction===Xe.TRADE_DIRECTION_BUY?"buy":_.direction===Xe.TRADE_DIRECTION_SELL?"sell":"",timestamp:m,symbol:T.symbol,price:S,volume:_.quantity,pool:T.exchange}}))}return[]}async historicalCandles({instrument:T,unit:_,value:m,cursor:S}){const E=S??new Date;let I=new Date(E);let O;switch(_){case"Sec":return{candles:[]};case"Min":if(![1,2,3,5,10,15,30].includes(m)){return{candles:[]}}O={1:We.CANDLE_INTERVAL_1_MIN,2:We.CANDLE_INTERVAL_2_MIN,3:We.CANDLE_INTERVAL_3_MIN,5:We.CANDLE_INTERVAL_5_MIN,10:We.CANDLE_INTERVAL_10_MIN,15:We.CANDLE_INTERVAL_15_MIN,30:We.CANDLE_INTERVAL_30_MIN}[m];switch(O){case We.CANDLE_INTERVAL_1_MIN:case We.CANDLE_INTERVAL_2_MIN:case We.CANDLE_INTERVAL_3_MIN:case We.CANDLE_INTERVAL_5_MIN:case We.CANDLE_INTERVAL_10_MIN:case We.CANDLE_INTERVAL_15_MIN:I.setTime(E.getTime()-24*3600*1e3);break;case We.CANDLE_INTERVAL_30_MIN:I.setTime(E.getTime()-2*24*3600*1e3);break}break;case"Hour":if(![1,2,4].includes(m)){return{candles:[]}}O={1:We.CANDLE_INTERVAL_HOUR,2:We.CANDLE_INTERVAL_2_HOUR,4:We.CANDLE_INTERVAL_4_HOUR}[m];switch(O){case We.CANDLE_INTERVAL_HOUR:I.setTime(E.getTime()-7*24*3600*1e3);break;case We.CANDLE_INTERVAL_2_HOUR:case We.CANDLE_INTERVAL_4_HOUR:I.setTime(E.getTime()-28*24*3600*1e3);break}break;case"Day":if(m!==1){return{candles:[]}}O=We.CANDLE_INTERVAL_DAY;I.setTime(E.getTime()-12*28*24*3600*1e3);break;case"Week":if(m!==1){return{candles:[]}}O=We.CANDLE_INTERVAL_WEEK;I.setTime(E.getTime()-24*28*24*3600*1e3);break;case"Month":if(m!==1){return{candles:[]}}O=We.CANDLE_INTERVAL_MONTH;I.setTime(E.getTime()-10*12*28*24*3600*1e3)}if(T?.tinkoffFigi){const{candles:_}=await this.getOrCreateClient(Mt).getCandles({instrumentId:T.tinkoffFigi,interval:O,from:I,to:E});if(S&&_.length>0){_.pop()}return{cursor:_[0]?.time,candles:_.map((_=>{if(T.type==="bond"){return{open:this.relativeBondPriceToPrice(toNumber(_.open),T),high:this.relativeBondPriceToPrice(toNumber(_.high),T),low:this.relativeBondPriceToPrice(toNumber(_.low),T),close:this.relativeBondPriceToPrice(toNumber(_.close),T),time:_.time.toISOString(),volume:_.volume}}return{open:+toNumber(_.open).toFixed(getInstrumentPrecision(T)),high:+toNumber(_.high).toFixed(getInstrumentPrecision(T)),low:+toNumber(_.low).toFixed(getInstrumentPrecision(T)),close:+toNumber(_.close).toFixed(getInstrumentPrecision(T)),time:_.time.toISOString(),volume:_.volume}}))}}return{candles:[]}}async getOrders(T){const _=[];for(const m of(await T.getOrders({accountId:this.document.account})).orders){const T=this.#P.get(m.figi);if(T?.type==="future"){const S=this.#y.get(T.symbol);const{initialSecurityPrice:E}=m;const I=toNumber(E);let O=I*T.minPriceIncrement/S;const N=getInstrumentPrecision(T,O);O=parseFloat(O.toFixed(N));const R=toQuotation(O);m.initialSecurityPrice.units=R.units;m.initialSecurityPrice.nano=R.nano;_.push(m)}else{_.push(m)}}return{orders:_}}#D(){return uuidv4()}async placeLimitOrder({instrument:T,price:_,quantity:m,direction:S}){try{const E=this.#D();const I=await this.getOrCreateClient(ln).postOrder({instrumentId:T.tinkoffFigi,quantity:m,price:toQuotation(this.fixPrice(T,_)),direction:S.toLowerCase()==="buy"?xt.ORDER_DIRECTION_BUY:xt.ORDER_DIRECTION_SELL,accountId:this.document.account,orderType:qt.ORDER_TYPE_LIMIT,orderId:E});return{orderId:I.orderId}}catch(T){this.$$debug("placeLimitOrder failed: %s",T.message);throw new TradingError({message:T.message,details:T.details})}}async placeMarketOrder({instrument:T,quantity:_,direction:m}){try{const S=await this.getOrCreateClient(ln).postOrder({instrumentId:T.tinkoffFigi,quantity:_,direction:m.toLowerCase()==="buy"?xt.ORDER_DIRECTION_BUY:xt.ORDER_DIRECTION_SELL,accountId:this.document.account,orderType:qt.ORDER_TYPE_MARKET,orderId:this.#D()});return{orderId:S.orderId}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async cancelRealOrder(T){try{if(T.orderType==="limit"){const _=createClient(ln,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});await _.cancelOrder({accountId:this.document.account,orderId:T.orderId});return{orderId:T.orderId}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async cancelAllRealOrders({instrument:T,filter:_}={}){try{const m=createClient(ln,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});const{orders:S}=await this.getOrders(m);for(const E of S){const S=this.getOrderStatus(E);if(S==="working"){if(T&&E.figi!==T.tinkoffFigi)continue;if(_==="buy"&&E.direction!==xt.ORDER_DIRECTION_BUY){continue}if(_==="sell"&&E.direction!==xt.ORDER_DIRECTION_SELL){continue}await m.cancelOrder({accountId:this.document.account,orderId:E.orderId})}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async modifyRealOrders({instrument:T,side:_,value:m}){try{const S=createClient(ln,createChannel("https://invest-public-api.tinkoff.ru:443"),{"*":{metadata:this.#h}});const{orders:E}=await this.getOrders(S);for(const I of E){const E=this.getOrderStatus(I);const O=I.direction===xt.ORDER_DIRECTION_BUY?"buy":"sell";if(E==="working"&&(O===_||_==="all")){if(T&&I.figi!==T.tinkoffFigi)continue;const _=this.#P.get(I.figi);if(_?.minPriceIncrement>0){let T;if(_.type==="bond"){T=this.fixPrice(_,this.relativeBondPriceToPrice(toNumber(I.initialSecurityPrice)+_.minPriceIncrement*m,_))}else{T=this.fixPrice(_,+toNumber(I.initialSecurityPrice).toFixed(getInstrumentPrecision(_))+_.minPriceIncrement*m)}if(I.executionReportStatus===Vt.EXECUTION_REPORT_STATUS_NEW){await S.replaceOrder({accountId:this.document.account,orderId:I.orderId,idempotencyKey:this.#D(),quantity:I.lotsRequested-I.lotsExecuted,price:toQuotation(T),priceType:Zt.PRICE_TYPE_CURRENCY})}else if(I.executionReportStatus===Vt.EXECUTION_REPORT_STATUS_PARTIALLYFILL){const m=I.lotsRequested-I.lotsExecuted;await this.cancelRealOrder({orderId:I.orderId,orderType:"limit"});await this.placeLimitOrder({instrument:_,price:T,quantity:m,direction:O})}}}}}catch(T){throw new TradingError({message:T.message,details:T.details})}}async estimate(T,_){if(this.unsupportedInstrument)return{};const m=await this.getOrCreateClient(ln).getMaxLots({accountId:this.document.account,instrumentId:T.tinkoffFigi,price:toQuotation(_)});return{marginSellingPowerQuantity:m.sellMarginLimits.sellMaxLots,marginBuyingPowerQuantity:m.buyMarginLimits.buyMaxLots,sellingPowerQuantity:m.sellLimits.sellMaxLots,buyingPowerQuantity:m.buyLimits.buyMaxLots}}getOrderStatus(T={}){switch(T.executionReportStatus){case Vt.EXECUTION_REPORT_STATUS_CANCELLED:return"canceled";case Vt.EXECUTION_REPORT_STATUS_REJECTED:return"rejected";case Vt.EXECUTION_REPORT_STATUS_FILL:return"filled";case Vt.EXECUTION_REPORT_STATUS_PARTIALLYFILL:case Vt.EXECUTION_REPORT_STATUS_NEW:return"working";case Vt.EXECUTION_REPORT_STATUS_UNSPECIFIED:return"unspecified"}}getBroker(){return A.TINKOFF}getDictionary(){return C.TINKOFF}getExchange(){return N.RUS}getObservedAttributes(){return["balance"]}getSymbol(T={}){if(T.symbol==="ASTR~MOEX"||T.symbol==="GOLD~MOEX"){return T.symbol}return super.getSymbol(T)}adoptInstrument(T={}){if(T.symbol==="SPB"&&(T.currency==="USD"||T.currency==="USDT")){return this.instruments.get("SPB@US")}if(T?.exchange===N.MOEX&&this.getSymbol(T)==="ASTR"){return this.instruments.get(`ASTR~MOEX`)}if(T?.exchange===N.MOEX&&this.getSymbol(T)==="GOLD"){return this.instruments.get(`GOLD~MOEX`)}let _=true;["TCS","FIVE","CARM"].forEach((m=>{if(this.getSymbol(T)===m&&(T.exchange===N.US||T.exchange===N.UTEX_MARGIN_STOCKS)){_=false}}));if(!_){return unsupportedInstrument(T.symbol)}if(T.symbol?.endsWith("~US")){return super.adoptInstrument({...T,...{symbol:T.symbol.replace("~US","")}})}return super.adoptInstrument(T)}getErrorI18nKey({error:T}){const _=+T.details;switch(_){case 30042:return"E_INSUFFICIENT_FUNDS";case 30052:return"E_NO_API_AVAILABLE_FOR_INSTRUMENT";case 30068:return"E_LIMIT_ORDERS_ONLY";case 30079:return"E_INSTRUMENT_NOT_TRADEABLE";case 30081:return"E_ACCOUNT_CLOSED";case 30082:return"E_ACCOUNT_BLOCKED";case 30083:return"E_WRONG_ORDER_TYPE";case 30097:return"E_INACTIVE_TRADING_SESSION";case 30099:return"E_PRICE_OUT_OF_LIMITS";case 30100:return"E_PRICE_MUST_BE_POSITIVE";case 40002:return"E_INSUFFICIENT_PRIVILEGES";case 40003:return"E_NO_ACCESS_TOKEN";case 80002:return"E_RATE_LIMIT_EXCEEDED";case 90001:return"E_CONFIRMATION_NEEDED";case 90002:return"E_NO_QUALIFICATION"}}}pppTraderInstanceForWorkerIs(TinkoffGrpcWebTrader);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToPositionsStream",null);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToPortfolioStream",null);__decorate([debounce(100)],TinkoffGrpcWebTrader.prototype,"resubscribeToMarketDataStream",null);__decorate([debounce(100)],PositionsDatum.prototype,"broadcastPortfolio",null);const Tr=TinkoffGrpcWebTrader})();module.exports=__webpack_exports__})();