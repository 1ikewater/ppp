(()=>{var e={8866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNext=void 0;const n=r(7054);const i=r(4963);const o=r(9597);const s=r(1930);const a=r(9296);const u=r(9963);const c=r(1156);const l=r(6698);const d=r(5835);const h=r(7132);const f=r(8857);const p=-1;const _="IBApiNext";const v="TWS";class IBApiNext{constructor(e){var t,r,i;this._nextReqId=1;this.errorSubject=new n.Subject;this.onCurrentTime=(e,t)=>{e.forEach((e=>{e.next({all:t});e.complete()}))};this.onManagedAccts=(e,t)=>{const r=t.split(",");e.forEach((e=>{e.next({all:r});e.complete()}))};this.onAccountSummary=(e,t,r,n,i,o)=>{var a;const u=e.get(t);if(!u){return}const c=(a=u.lastAllValue)!==null&&a!==void 0?a:new s.MutableAccountSummaries;const l=c.getOrAdd(r,(()=>new s.MutableAccountSummaryTagValues)).getOrAdd(n,(()=>new s.MutableAccountSummaryValues));const d=l.has(o);const h={value:i,ingressTm:Date.now()};l.set(o,h);const f=new s.MutableAccountSummaries([[r,new s.MutableAccountSummaryTagValues([[n,new s.MutableAccountSummaryValues([[o,h]])]])]]);if(d){u.next({all:c,changed:f})}else{u.next({all:c,added:f})}};this.onUpdateAccountValue=(e,t,r,n,i)=>{this.logger.debug(_,`onUpdateAccountValue(${t}, ${r}, ${n}, ${i})`);e.forEach((e=>{var o,a;const u=(o=e.lastAllValue)!==null&&o!==void 0?o:{};const c=(a=u===null||u===void 0?void 0:u.value)!==null&&a!==void 0?a:new s.MutableAccountSummaries;const l=c.getOrAdd(i,(()=>new s.MutableAccountSummaryTagValues)).getOrAdd(t,(()=>new s.MutableAccountSummaryValues));const d=l.has(n);const h={value:r,ingressTm:Date.now()};l.set(n,h);const f=new s.MutableAccountSummaries([[i,new s.MutableAccountSummaryTagValues([[t,new s.MutableAccountSummaryValues([[n,h]])]])]]);u.value=c;if(d){e.next({all:u,changed:{value:f}})}else{e.next({all:u,changed:{value:f}})}}))};this.onUpdatePortfolio=(e,t,r,n,i,o,s,a,c)=>{this.logger.debug(_,`onUpdatePortfolio(${t.symbol}, ${r}, ${n}, ${i}, ${o}, ${s}, ${a}, ${c})`);const l={account:c,contract:t,pos:r,avgCost:o,marketPrice:n,marketValue:i,unrealizedPNL:s,realizedPNL:a};e.forEach((e=>{var n,i;let o=false;let s=false;const a=(n=e.lastAllValue)!==null&&n!==void 0?n:{};const d=(i=a===null||a===void 0?void 0:a.portfolio)!==null&&i!==void 0?i:new u.MutableAccountPositions;const h=d.getOrAdd(c,(()=>[]));const f=h.findIndex((e=>e.contract.conId==t.conId));if(f===-1){h.push(l);o=true}else{if(!r){h.splice(f);s=true}else{h[f]=l}}a.portfolio=d;if(o){e.next({all:a,added:{portfolio:new u.MutableAccountPositions([[c,[l]]])}})}else if(s){e.next({all:a,removed:{portfolio:new u.MutableAccountPositions([[c,[l]]])}})}else{e.next({all:a,changed:{portfolio:new u.MutableAccountPositions([[c,[l]]])}})}}))};this.onUpdateAccountTime=(e,t)=>{this.logger.debug(_,`onUpdateAccountTime(${t})`);e.forEach((e=>{var r;const n={timestamp:t};const i=(r=e.lastAllValue)!==null&&r!==void 0?r:{};i.timestamp=n.timestamp;e.next({all:i,changed:n})}))};this.onAccountDownloadEnd=(e,t)=>{this.logger.debug(_,`onAccountDownloadEnd(${t})`)};this.onPosition=(e,t,r,n,i)=>{const o={account:t,contract:r,pos:n,avgCost:i};e.forEach((e=>{var i;let s=false;let a=false;const c=(i=e.lastAllValue)!==null&&i!==void 0?i:new u.MutableAccountPositions;const l=c.getOrAdd(t,(()=>[]));const d=l.findIndex((e=>e.contract.conId==r.conId));if(d===-1){l.push(o);s=true}else{if(!n){l.splice(d);a=true}else{l[d]=o}}if(s){e.next({all:c,added:new u.MutableAccountPositions([[t,[o]]])})}else if(a){e.next({all:c,removed:new u.MutableAccountPositions([[t,[o]]])})}else{e.next({all:c,changed:new u.MutableAccountPositions([[t,[o]]])})}}))};this.onContractDetails=(e,t,r)=>{var n;const i=e.get(t);if(!i){return}const o=(n=i.lastAllValue)!==null&&n!==void 0?n:[];o.push(r);i.next({all:o})};this.onContractDetailsEnd=(e,t)=>{var r;(r=e.get(t))===null||r===void 0?void 0:r.complete()};this.onSecurityDefinitionOptionParameter=(e,t,r,n,i,o,s,a)=>{var u;const c=e.get(t);if(!c){return}const l=(u=c.lastAllValue)!==null&&u!==void 0?u:[];l.push({exchange:r,underlyingConId:n,tradingClass:i,multiplier:parseInt(o),expirations:s,strikes:a});c.next({all:l})};this.onSecurityDefinitionOptionParameterEnd=(e,t)=>{var r;(r=e.get(t))===null||r===void 0?void 0:r.complete()};this.onPnL=(e,t,r,n,i)=>{const o=e.get(t);if(!o){return}o.next({all:{dailyPnL:r,unrealizedPnL:n,realizedPnL:i}})};this.onPnLSingle=(e,t,r,n,i,o,s)=>{const a=e.get(t);if(!a){return}a.next({all:{position:r,dailyPnL:n,unrealizedPnL:i,realizedPnL:o,marketValue:s}})};this.onTick=(e,t,r,n)=>{var i;if(n===-1&&(r===f.IBApiTickType.BID||r===f.IBApiTickType.DELAYED_BID||r===f.IBApiTickType.ASK||r===f.IBApiTickType.DELAYED_ASK)){n=undefined}const o=e.get(t);if(!o){return}const s=(i=o.lastAllValue)!==null&&i!==void 0?i:new a.MutableMarketData;const u=s.has(r);const c={value:n,ingressTm:Date.now()};s.set(r,c);if(u){o.next({all:s,changed:new a.MutableMarketData([[r,c]])})}else{o.next({all:s,added:new a.MutableMarketData([[r,c]])})}};this.onTickOptionComputation=(e,t,r,n,i,o,s,u,c,l,d)=>{var h;const p=e.get(t);if(!p){return}const _=Date.now();const v=[[f.IBApiNextTickType.OPTION_UNDERLYING,{value:d,ingressTm:_}],[f.IBApiNextTickType.OPTION_PV_DIVIDEND,{value:s,ingressTm:_}]];switch(r){case f.IBApiTickType.BID_OPTION:v.push([f.IBApiNextTickType.BID_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.BID_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.BID_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.BID_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.BID_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.BID_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.DELAYED_BID_OPTION:v.push([f.IBApiNextTickType.DELAYED_BID_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.DELAYED_BID_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.DELAYED_BID_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.DELAYED_BID_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.DELAYED_BID_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.DELAYED_BID_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.ASK_OPTION:v.push([f.IBApiNextTickType.ASK_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.ASK_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.ASK_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.ASK_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.ASK_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.ASK_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.DELAYED_ASK_OPTION:v.push([f.IBApiNextTickType.DELAYED_ASK_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.DELAYED_ASK_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.DELAYED_ASK_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.DELAYED_ASK_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.DELAYED_ASK_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.DELAYED_ASK_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.LAST_OPTION:v.push([f.IBApiNextTickType.LAST_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.LAST_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.LAST_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.LAST_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.LAST_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.LAST_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.DELAYED_LAST_OPTION:v.push([f.IBApiNextTickType.DELAYED_LAST_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.DELAYED_LAST_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.DELAYED_LAST_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.DELAYED_LAST_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.DELAYED_LAST_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.DELAYED_LAST_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.MODEL_OPTION:v.push([f.IBApiNextTickType.MODEL_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.MODEL_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.MODEL_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.MODEL_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.MODEL_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.MODEL_OPTION_THETA,{value:l,ingressTm:_}]);break;case f.IBApiTickType.DELAYED_MODEL_OPTION:v.push([f.IBApiNextTickType.DELAYED_MODEL_OPTION_IV,{value:n,ingressTm:_}],[f.IBApiNextTickType.DELAYED_MODEL_OPTION_DELTA,{value:i,ingressTm:_}],[f.IBApiNextTickType.DELAYED_MODEL_OPTION_PRICE,{value:o,ingressTm:_}],[f.IBApiNextTickType.DELAYED_MODEL_OPTION_GAMMA,{value:u,ingressTm:_}],[f.IBApiNextTickType.DELAYED_MODEL_OPTION_VEGA,{value:c,ingressTm:_}],[f.IBApiNextTickType.DELAYED_MODEL_OPTION_THETA,{value:l,ingressTm:_}]);break}const E=(h=p.lastAllValue)!==null&&h!==void 0?h:new a.MutableMarketData;const T=new a.MutableMarketData;const b=new a.MutableMarketData;v.forEach((e=>{if(E.has(e[0])){b.set(e[0],e[1])}else{T.set(e[0],e[1])}E.set(e[0],e[1])}));if(E.size){p.next({all:E,added:T.size?T:undefined,changed:b.size?b:undefined})}};this.onTickSnapshotEnd=(e,t)=>{var r;(r=e.get(t))===null||r===void 0?void 0:r.complete()};this.getMarketDataSingle=this.getMarketDataSnapshot;this.onHeadTimestamp=(e,t,r)=>{const n=e.get(t);if(!n){return}n.next({all:r});n.complete()};this.onHistoricalData=(e,t,r,n,i,o,s,a,u,c)=>{var l;const d=e.get(t);if(!d){return}if(r.startsWith("finished")){d.complete()}else{const e=(l=d.lastAllValue)!==null&&l!==void 0?l:[];const t={time:r};if(n!==-1){t.open=n}if(i!==-1){t.high=i}if(o!==-1){t.low=o}if(s!==-1){t.close=s}if(a!==-1){t.volume=a}if(u!==-1){t.count=u}if(c!==-1){t.WAP=c}e.push(t);d.next({all:e})}};this.onHistoricalDataUpdate=(e,t,r,n,i,o,s,a,u,c)=>{var l;const d=e.get(t);if(!d){return}const h=(l=d.lastAllValue)!==null&&l!==void 0?l:{};h.time=r;h.open=n!==-1?n:undefined;h.high=i!==-1?i:undefined;h.low=o!==-1?o:undefined;h.close=s!==-1?s:undefined;h.volume=a!==-1?a:undefined;h.count=u!==-1?u:undefined;h.WAP=c!==-1?c:undefined;d.next({all:h})};this.onHistoricalTicks=(e,t,r,n)=>{const i=e.get(t);if(!i){return}let o=i.lastAllValue;o=o?o.concat(r):r;i.next({all:o});if(n){i.complete()}};this.onHistoricalTicksBidAsk=(e,t,r,n)=>{const i=e.get(t);if(!i){return}let o=i.lastAllValue;o=o?o.concat(r):r;i.next({all:o});if(n){i.complete()}};this.onHistoricalTicksLast=(e,t,r,n)=>{const i=e.get(t);if(!i){return}let o=i.lastAllValue;o=o?o.concat(r):r;i.next({all:o});if(n){i.complete()}};this.onMktDepthExchanges=(e,t)=>{e.forEach((e=>{e.next({all:t});e.complete()}))};this.onUpdateMktDepth=(e,t,r,n,i,o,s)=>{this.onUpdateMktDepthL2(e,t,r,undefined,n,i,o,s,false)};this.insertAtIndex=(e,t,r,n)=>{const i=Array.from(n);i.splice(e,0,[t,r]);n.clear();i.forEach((([e,t])=>n.set(e,t)));return n};this.onUpdateMktDepthL2=(e,t,r,n,i,o,s,a,u)=>{var c;const l=e.get(t);if(!l){return}const d=(c=l.lastAllValue)!==null&&c!==void 0?c:{bids:new Map,asks:new Map};const h={bids:new Map,asks:new Map};let f=undefined;let p=undefined;if(o==0){f=d.asks;p=h.asks}else if(o==1){f=d.bids;p=h.bids}if(f===undefined||p===undefined){this.logger.error(_,`onUpdateMktDepthL2: unknown side value ${o} received from TWS`);return}switch(i){case 0:this.insertAtIndex(r,r,{marketMaker:n,price:s,size:a,isSmartDepth:u},f);this.insertAtIndex(r,r,{marketMaker:n,price:s,size:a,isSmartDepth:u},p);l.next({all:d,added:h});break;case 1:f.set(r,{marketMaker:n,price:s,size:a,isSmartDepth:u});p.set(r,{marketMaker:n,price:s,size:a,isSmartDepth:u});l.next({all:d,changed:h});break;case 2:const e=f.get(r);f.delete(r);p.set(r,e);l.next({all:d,removed:h});break;default:this.logger.error(_,`onUpdateMktDepthL2: unknown operation value ${i} received from TWS`);break}};this.onHistogramData=(e,t,r)=>{const n=e.get(t);if(!n){return}n.next({all:r});n.complete()};this.onOpenOrder=(e,t,r,n,i)=>{e.forEach((e=>{var o;const s=(o=e.lastAllValue)!==null&&o!==void 0?o:[];const a=s.findIndex((e=>e.order.permId==n.permId));if(a===-1){const o={orderId:t,contract:r,order:n,orderState:i,orderStatus:undefined};s.push(o);e.next({all:s,added:[o]})}else{const t=s[a];t.order=n;t.orderState=i;if(t.orderStatus!==undefined){t.orderStatus.clientId=n.clientId;t.orderStatus.permId=n.permId;t.orderStatus.parentId=n.parentId;t.orderStatus.status=i.status}e.next({all:s,changed:[t]})}}))};this.onOpenOrderEnd=e=>{e.forEach((e=>{e.complete()}))};this.onOrderBound=(e,t,r,n)=>{this.logger.warn(_,`Unexpected onOrderBound(${t}, ${r}, ${n}) called.`)};this.onOrderStatus=(e,t,r,n,i,o,s,a,u,c,l,d)=>{const h={status:r,filled:n,remaining:i,avgFillPrice:undefined,permId:s,parentId:a,lastFillPrice:undefined,clientId:c,whyHeld:l,mktCapPrice:d};if(n){h.avgFillPrice=o;h.lastFillPrice=u}e.forEach((e=>{var n;const i=(n=e.lastAllValue)!==null&&n!==void 0?n:[];const o=i.findIndex((e=>e.order.permId==s));if(o!==-1){const t=i[o];t.orderStatus=h;t.orderState.status=r;if(a!==undefined)t.order.parentId=a;if(s!==undefined)t.order.permId=s;if(c!==undefined)t.order.clientId=c;e.next({all:i,changed:[t]})}else{this.logger.warn(_,`onOrderStatus: non existent order ignored. orderId: ${t}, permId: ${s}.`)}}))};this.onNextValidId=(e,t)=>{const r=e.entries().next();if(r&&!r.done&&r.value[1]){r.value[1].next({all:t});r.value[1].complete()}};this.onExecDetails=(e,t,r,n)=>{e.forEach((e=>{var i;const o=(i=e.lastAllValue)!==null&&i!==void 0?i:[];o.push({reqId:t,contract:r,execution:n});e.next({all:o})}))};this.onExecDetailsEnd=(e,t)=>{const r=e.get(t);if(!r){return}if(!r.lastAllValue){r.next({all:[]})}r.complete()};this.onComissionReport=(e,t)=>{e.forEach((e=>{var r;const n=(r=e.lastAllValue)!==null&&r!==void 0?r:[];n.push(t);e.next({all:n})}))};this.onSymbolSamples=(e,t,r)=>{const n=e.get(t);e.delete(t);n===null||n===void 0?void 0:n.next({all:r});n===null||n===void 0?void 0:n.complete()};this.logger=new d.IBApiNextLogger((t=e===null||e===void 0?void 0:e.logger)!==null&&t!==void 0?t:new l.ConsoleLogger);this.api=new c.IBApiAutoConnection((r=e===null||e===void 0?void 0:e.reconnectInterval)!==null&&r!==void 0?r:0,((i=e===null||e===void 0?void 0:e.connectionWatchdogInterval)!==null&&i!==void 0?i:0)*1e3,this.logger,e);this.subscriptions=new h.IBApiNextSubscriptionRegistry(this.api,this);this.api.on(o.EventName.error,((e,t,r)=>{const n={error:e,code:t,reqId:r};if(t>=2100&&t<3e3){this.logger.warn(v,`${e.message} - Code: ${t} - ReqId: ${r}`);return}if(r!==p){this.subscriptions.dispatchError(r,n)}this.errorSubject.next(n)}));this.api.on(o.EventName.server,((e,t)=>{this.logger.info(v,`Server Version: ${e}. Connection time ${t}`)}));this.api.on(o.EventName.info,((e,t)=>{this.logger.info(v,`${e} - Code: ${t}`)}))}get nextReqId(){return this._nextReqId++}get logLevel(){return this.logger.logLevel}set logLevel(e){this.logger.logLevel=e;this.api.setServerLogLevel(e)}get error(){return this.errorSubject}get connectionState(){return this.api.connectionState}get isConnected(){return this.api.isConnected}connect(e){this.logger.debug(_,`connect(${e})`);this.api.connect(e);return this}disconnect(){this.logger.debug(_,"disconnect()");this.api.disconnect();return this}getCurrentTime(){return n.lastValueFrom(this.subscriptions.register((()=>{this.api.reqCurrentTime()}),undefined,[[o.EventName.currentTime,this.onCurrentTime]],"reqCurrentTime").pipe(i.map((e=>e.all))),{defaultValue:0})}getManagedAccounts(){return n.lastValueFrom(this.subscriptions.register((()=>{this.api.reqManagedAccts()}),undefined,[[o.EventName.managedAccounts,this.onManagedAccts]],"getManagedAccounts").pipe(i.map((e=>e.all))),{defaultValue:[]})}getAccountSummary(e,t){return this.subscriptions.register((r=>{this.api.reqAccountSummary(r,e,t)}),(e=>{this.api.cancelAccountSummary(e)}),[[o.EventName.accountSummary,this.onAccountSummary]],`${e}:${t}`)}getAccountUpdates(e){this.logger.debug(_,`getAccountUpdates(${e})`);return this.subscriptions.register((()=>{this.api.reqAccountUpdates(true,e)}),(()=>{this.api.reqAccountUpdates(false,e)}),[[o.EventName.updateAccountValue,this.onUpdateAccountValue],[o.EventName.updatePortfolio,this.onUpdatePortfolio],[o.EventName.updateAccountTime,this.onUpdateAccountTime],[o.EventName.accountDownloadEnd,this.onAccountDownloadEnd]],e?`getAccountUpdates+${e}`:"getAccountUpdates")}getPositions(){return this.subscriptions.register((()=>{this.api.reqPositions()}),(()=>{this.api.cancelPositions()}),[[o.EventName.position,this.onPosition]],"getPositions")}getContractDetails(e){return n.lastValueFrom(this.subscriptions.register((t=>{this.api.reqContractDetails(t,e)}),undefined,[[o.EventName.contractDetails,this.onContractDetails],[o.EventName.contractDetailsEnd,this.onContractDetailsEnd]]).pipe(i.map((e=>e.all))),{defaultValue:[]})}getSecDefOptParams(e,t,r,s){return n.lastValueFrom(this.subscriptions.register((n=>{this.api.reqSecDefOptParams(n,e,t,r,s)}),undefined,[[o.EventName.securityDefinitionOptionParameter,this.onSecurityDefinitionOptionParameter],[o.EventName.securityDefinitionOptionParameterEnd,this.onSecurityDefinitionOptionParameterEnd]]).pipe(i.map((e=>e.all))),{defaultValue:[]})}getPnL(e,t){return this.subscriptions.register((r=>{this.api.reqPnL(r,e,t)}),(e=>{this.api.cancelPnL(e)}),[[o.EventName.pnl,this.onPnL]],`${e}:${t}`).pipe(i.map((e=>e.all)))}getPnLSingle(e,t,r){return this.subscriptions.register((n=>{this.api.reqPnLSingle(n,e,t,r)}),(e=>{this.api.cancelPnLSingle(e)}),[[o.EventName.pnlSingle,this.onPnLSingle]],`${e}:${t}:${r}`).pipe(i.map((e=>e.all)))}setMarketDataType(e){this.api.reqMarketDataType(e)}getMarketData(e,t,r,n){return this.subscriptions.register((i=>{this.api.reqMktData(i,e,t,r,n)}),(e=>{if(!r&&!n){this.api.cancelMktData(e)}}),[[o.EventName.tickPrice,this.onTick],[o.EventName.tickSize,this.onTick],[o.EventName.tickGeneric,this.onTick],[o.EventName.tickOptionComputation,this.onTickOptionComputation],[o.EventName.tickSnapshotEnd,this.onTickSnapshotEnd]],r||n?undefined:`${JSON.stringify(e)}:${t}`)}getMarketDataSnapshot(e,t,r){return n.lastValueFrom(this.getMarketData(e,t,true,r).pipe(i.map((e=>e.all))),{defaultValue:new a.MutableMarketData})}getHeadTimestamp(e,t,r,s){return n.lastValueFrom(this.subscriptions.register((n=>{this.api.reqHeadTimestamp(n,e,t,r,s)}),(e=>{this.api.cancelHeadTimestamp(e)}),[[o.EventName.headTimestamp,this.onHeadTimestamp]],`${JSON.stringify(e)}:${t}:${r}:${s}`).pipe(i.map((e=>e.all))),{defaultValue:""})}getHistoricalData(e,t,r,s,a,u,c){return n.lastValueFrom(this.subscriptions.register((n=>{this.api.reqHistoricalData(n,e,t,r,s,a,u,c,false)}),undefined,[[o.EventName.historicalData,this.onHistoricalData]],undefined).pipe(i.map((e=>e.all))),{defaultValue:[]})}getHistoricalDataUpdates(e,t,r,n){return this.subscriptions.register((i=>{this.api.reqHistoricalData(i,e,"","1 D",t,r,0,n,true)}),(e=>{this.api.cancelHistoricalData(e)}),[[o.EventName.historicalDataUpdate,this.onHistoricalDataUpdate]],`${JSON.stringify(e)}:${t}:${r}:${n}`).pipe(i.map((e=>e.all)))}getHistoricalTicksMid(e,t,r,n,s){return this.subscriptions.register((i=>{this.api.reqHistoricalTicks(i,e,t,r,n,"MIDPOINT",s,false)}),undefined,[[o.EventName.historicalTicks,this.onHistoricalTicks]],undefined).pipe(i.map((e=>e.all)))}getHistoricalTicksBidAsk(e,t,r,n,s,a){return this.subscriptions.register((i=>{this.api.reqHistoricalTicks(i,e,t,r,n,"BID_ASK",s,a)}),undefined,[[o.EventName.historicalTicksBidAsk,this.onHistoricalTicksBidAsk]],undefined).pipe(i.map((e=>e.all)))}getHistoricalTicksLast(e,t,r,n,s){return this.subscriptions.register((i=>{this.api.reqHistoricalTicks(i,e,t,r,n,"TRADES",s,false)}),undefined,[[o.EventName.historicalTicksLast,this.onHistoricalTicksLast]],undefined).pipe(i.map((e=>e.all)))}getMarketDepthExchanges(){return n.lastValueFrom(this.subscriptions.register((()=>{this.api.reqMktDepthExchanges()}),undefined,[[o.EventName.mktDepthExchanges,this.onMktDepthExchanges]],"reqMktDepthExchanges").pipe(i.map((e=>e.all))),{defaultValue:[]})}getMarketDepth(e,t,r,n){return this.subscriptions.register((i=>{this.api.reqMktDepth(i,e,t,r,n)}),(e=>{this.api.cancelMktDepth(e,r)}),[[o.EventName.updateMktDepth,this.onUpdateMktDepth],[o.EventName.updateMktDepthL2,this.onUpdateMktDepthL2]],`${JSON.stringify(e)}:${t}:${r}:${n}`)}getHistogramData(e,t,r,s){return n.lastValueFrom(this.subscriptions.register((n=>{this.api.reqHistogramData(n,e,t,r,s)}),(e=>{this.api.cancelHistogramData(e)}),[[o.EventName.histogramData,this.onHistogramData]],`${JSON.stringify(e)}:${t}:${r}:${s}`).pipe(i.map((e=>e.all))),{defaultValue:[]})}getAllOpenOrders(){return n.lastValueFrom(this.subscriptions.register((()=>{this.api.reqAllOpenOrders()}),undefined,[[o.EventName.openOrder,this.onOpenOrder],[o.EventName.orderStatus,this.onOrderStatus],[o.EventName.orderBound,this.onOrderBound],[o.EventName.openOrderEnd,this.onOpenOrderEnd]],"getAllOpenOrders").pipe(i.map((e=>e.all))),{defaultValue:[]})}getOpenOrders(){return this.subscriptions.register((()=>{this.api.reqOpenOrders()}),undefined,[[o.EventName.openOrder,this.onOpenOrder],[o.EventName.orderStatus,this.onOrderStatus],[o.EventName.orderBound,this.onOrderBound]],"getOpenOrders")}getAutoOpenOrders(e){return this.subscriptions.register((()=>{this.api.reqAutoOpenOrders(e)}),undefined,[[o.EventName.openOrder,this.onOpenOrder],[o.EventName.orderStatus,this.onOrderStatus],[o.EventName.orderBound,this.onOrderBound]],"getAutoOpenOrders")}getNextValidOrderId(){return n.lastValueFrom(this.subscriptions.register((()=>{this.api.reqIds()}),undefined,[[o.EventName.nextValidId,this.onNextValidId]]).pipe(i.map((e=>e.all))),{defaultValue:-1})}placeOrder(e,t,r){this.api.placeOrder(e,t,r)}async placeNewOrder(e,t){const r=await this.getNextValidOrderId();this.placeOrder(r,e,t);return r}modifyOrder(e,t,r){this.api.placeOrder(e,t,r)}cancelOrder(e){this.api.cancelOrder(e)}cancelAllOrders(){this.api.reqGlobalCancel()}getExecutionDetails(e){return n.lastValueFrom(this.subscriptions.register((t=>{this.api.reqExecutions(t,e)}),undefined,[[o.EventName.execDetails,this.onExecDetails],[o.EventName.execDetailsEnd,this.onExecDetailsEnd]]).pipe(i.map((e=>e.all))),{defaultValue:[]})}getCommissionReport(e){return n.lastValueFrom(this.subscriptions.register((t=>{this.api.reqExecutions(t,e)}),undefined,[[o.EventName.execDetailsEnd,this.onExecDetailsEnd],[o.EventName.commissionReport,this.onComissionReport]]).pipe(i.map((e=>e.all))),{defaultValue:[]})}searchContracts(e){return n.lastValueFrom(this.subscriptions.register((t=>{this.api.reqMatchingSymbols(t,e)}),undefined,[[o.EventName.symbolSamples,this.onSymbolSamples]]).pipe(i.map((e=>e.all))))}}t.IBApiNext=IBApiNext},3953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConnectionState=void 0;var r;(function(e){e[e["Disconnected"]=0]="Disconnected";e[e["Connecting"]=1]="Connecting";e[e["Connected"]=2]="Connected"})(r=t.ConnectionState||(t.ConnectionState={}))},8857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNext=t.IBApiNextTickType=t.IBApiTickType=t.MarketDataType=t.ConnectionState=void 0;var n=r(3953);Object.defineProperty(t,"ConnectionState",{enumerable:true,get:function(){return n.ConnectionState}});var i=r(4637);Object.defineProperty(t,"MarketDataType",{enumerable:true,get:function(){return i.MarketDataType}});const o=r(8869);Object.defineProperty(t,"IBApiTickType",{enumerable:true,get:function(){return o.TickType}});const s=r(8940);Object.defineProperty(t,"IBApiNextTickType",{enumerable:true,get:function(){return s.TickType}});var a=r(8866);Object.defineProperty(t,"IBApiNext",{enumerable:true,get:function(){return a.IBApiNext}})},4637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarketDataType=void 0;var r;(function(e){e[e["REALTIME"]=1]="REALTIME";e[e["FROZEN"]=2]="FROZEN";e[e["DELAYED"]=3]="DELAYED";e[e["DELAYED_FROZEN"]=4]="DELAYED_FROZEN"})(r=t.MarketDataType||(t.MarketDataType={}))},8940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TickType=void 0;var r;(function(e){e[e["API_NEXT_FIRST_TICK_ID"]=1e4]="API_NEXT_FIRST_TICK_ID";e[e["OPTION_PV_DIVIDEND"]=10001]="OPTION_PV_DIVIDEND";e[e["OPTION_UNDERLYING"]=10002]="OPTION_UNDERLYING";e[e["BID_OPTION_IV"]=10003]="BID_OPTION_IV";e[e["BID_OPTION_PRICE"]=10004]="BID_OPTION_PRICE";e[e["BID_OPTION_DELTA"]=10005]="BID_OPTION_DELTA";e[e["BID_OPTION_GAMMA"]=10006]="BID_OPTION_GAMMA";e[e["BID_OPTION_VEGA"]=10007]="BID_OPTION_VEGA";e[e["BID_OPTION_THETA"]=10008]="BID_OPTION_THETA";e[e["DELAYED_BID_OPTION_IV"]=10009]="DELAYED_BID_OPTION_IV";e[e["DELAYED_BID_OPTION_PRICE"]=10010]="DELAYED_BID_OPTION_PRICE";e[e["DELAYED_BID_OPTION_DELTA"]=10011]="DELAYED_BID_OPTION_DELTA";e[e["DELAYED_BID_OPTION_GAMMA"]=10012]="DELAYED_BID_OPTION_GAMMA";e[e["DELAYED_BID_OPTION_VEGA"]=10013]="DELAYED_BID_OPTION_VEGA";e[e["DELAYED_BID_OPTION_THETA"]=10014]="DELAYED_BID_OPTION_THETA";e[e["ASK_OPTION_IV"]=10015]="ASK_OPTION_IV";e[e["ASK_OPTION_PRICE"]=10016]="ASK_OPTION_PRICE";e[e["ASK_OPTION_DELTA"]=10017]="ASK_OPTION_DELTA";e[e["ASK_OPTION_GAMMA"]=10018]="ASK_OPTION_GAMMA";e[e["ASK_OPTION_VEGA"]=10019]="ASK_OPTION_VEGA";e[e["ASK_OPTION_THETA"]=10020]="ASK_OPTION_THETA";e[e["DELAYED_ASK_OPTION_IV"]=10021]="DELAYED_ASK_OPTION_IV";e[e["DELAYED_ASK_OPTION_PRICE"]=10022]="DELAYED_ASK_OPTION_PRICE";e[e["DELAYED_ASK_OPTION_DELTA"]=10023]="DELAYED_ASK_OPTION_DELTA";e[e["DELAYED_ASK_OPTION_GAMMA"]=10024]="DELAYED_ASK_OPTION_GAMMA";e[e["DELAYED_ASK_OPTION_VEGA"]=10025]="DELAYED_ASK_OPTION_VEGA";e[e["DELAYED_ASK_OPTION_THETA"]=10026]="DELAYED_ASK_OPTION_THETA";e[e["LAST_OPTION_IV"]=10027]="LAST_OPTION_IV";e[e["LAST_OPTION_PRICE"]=10028]="LAST_OPTION_PRICE";e[e["LAST_OPTION_DELTA"]=10029]="LAST_OPTION_DELTA";e[e["LAST_OPTION_GAMMA"]=10030]="LAST_OPTION_GAMMA";e[e["LAST_OPTION_VEGA"]=10031]="LAST_OPTION_VEGA";e[e["LAST_OPTION_THETA"]=10032]="LAST_OPTION_THETA";e[e["DELAYED_LAST_OPTION_IV"]=10033]="DELAYED_LAST_OPTION_IV";e[e["DELAYED_LAST_OPTION_PRICE"]=10034]="DELAYED_LAST_OPTION_PRICE";e[e["DELAYED_LAST_OPTION_DELTA"]=10035]="DELAYED_LAST_OPTION_DELTA";e[e["DELAYED_LAST_OPTION_GAMMA"]=10036]="DELAYED_LAST_OPTION_GAMMA";e[e["DELAYED_LAST_OPTION_VEGA"]=10037]="DELAYED_LAST_OPTION_VEGA";e[e["DELAYED_LAST_OPTION_THETA"]=10038]="DELAYED_LAST_OPTION_THETA";e[e["MODEL_OPTION_IV"]=10039]="MODEL_OPTION_IV";e[e["MODEL_OPTION_PRICE"]=10040]="MODEL_OPTION_PRICE";e[e["MODEL_OPTION_DELTA"]=10041]="MODEL_OPTION_DELTA";e[e["MODEL_OPTION_GAMMA"]=10042]="MODEL_OPTION_GAMMA";e[e["MODEL_OPTION_VEGA"]=10043]="MODEL_OPTION_VEGA";e[e["MODEL_OPTION_THETA"]=10044]="MODEL_OPTION_THETA";e[e["DELAYED_MODEL_OPTION_IV"]=10045]="DELAYED_MODEL_OPTION_IV";e[e["DELAYED_MODEL_OPTION_PRICE"]=10046]="DELAYED_MODEL_OPTION_PRICE";e[e["DELAYED_MODEL_OPTION_DELTA"]=10047]="DELAYED_MODEL_OPTION_DELTA";e[e["DELAYED_MODEL_OPTION_GAMMA"]=10048]="DELAYED_MODEL_OPTION_GAMMA";e[e["DELAYED_MODEL_OPTION_VEGA"]=10049]="DELAYED_MODEL_OPTION_VEGA";e[e["DELAYED_MODEL_OPTION_THETA"]=10050]="DELAYED_MODEL_OPTION_THETA"})(r=t.TickType||(t.TickType={}))},2619:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.IBApi=t.MIN_SERVER_VER_SUPPORTED=t.MAX_SUPPORTED_SERVER_VERSION=void 0;const i=r(4328);const o=r(8916);const s=n(r(2526));t.MAX_SUPPORTED_SERVER_VERSION=s.default.ADVANCED_ORDER_REJECT;t.MIN_SERVER_VER_SUPPORTED=38;class IBApi extends i.EventEmitter{constructor(e){super();this.controller=new o.Controller(this,e)}get serverVersion(){return this.controller.serverVersion}get isConnected(){return this.controller.connected}disableUseV100Plus(){return this.controller.disableUseV100Plus()}connect(e){this.controller.connect(e);return this}disconnect(){this.controller.disconnect();return this}calculateImpliedVolatility(e,t,r,n){this.controller.schedule((()=>this.controller.encoder.calculateImpliedVolatility(e,t,r,n)));return this}calculateOptionPrice(e,t,r,n){this.controller.schedule((()=>this.controller.encoder.calculateOptionPrice(e,t,r,n)));return this}cancelAccountSummary(e){this.controller.schedule((()=>this.controller.encoder.cancelAccountSummary(e)));return this}cancelAccountUpdatesMulti(e){this.controller.schedule((()=>this.controller.encoder.cancelAccountUpdatesMulti(e)));return this}cancelCalculateImpliedVolatility(e){this.controller.schedule((()=>this.controller.encoder.cancelCalculateImpliedVolatility(e)));return this}cancelCalculateOptionPrice(e){this.controller.schedule((()=>this.controller.encoder.cancelCalculateOptionPrice(e)));return this}cancelFundamentalData(e){this.controller.schedule((()=>this.controller.encoder.cancelFundamentalData(e)));return this}cancelHeadTimestamp(e){this.controller.schedule((()=>this.controller.encoder.cancelHeadTimestamp(e)));return this}cancelHistogramData(e){this.controller.schedule((()=>this.controller.encoder.cancelHistogramData(e)));return this}cancelHistoricalData(e){this.controller.schedule((()=>this.controller.encoder.cancelHistoricalData(e)));return this}cancelMktData(e){this.controller.schedule((()=>this.controller.encoder.cancelMktData(e)));return this}cancelMktDepth(e,t){this.controller.schedule((()=>this.controller.encoder.cancelMktDepth(e,t)));return this}cancelNewsBulletins(){this.controller.schedule((()=>this.controller.encoder.cancelNewsBulletins()));return this}cancelOrder(e){this.controller.schedule((()=>this.controller.encoder.cancelOrder(e)));return this}cancelPnL(e){this.controller.schedule((()=>this.controller.encoder.cancelPnL(e)));return this}cancelPnLSingle(e){this.controller.schedule((()=>this.controller.encoder.cancelPnLSingle(e)));return this}cancelPositions(){this.controller.schedule((()=>this.controller.encoder.cancelPositions()));return this}cancelPositionsMulti(e){this.controller.schedule((()=>this.controller.encoder.cancelPositionsMulti(e)));return this}cancelRealTimeBars(e){this.controller.schedule((()=>this.controller.encoder.cancelRealTimeBars(e)));return this}cancelScannerSubscription(e){this.controller.schedule((()=>this.controller.encoder.cancelScannerSubscription(e)));return this}cancelTickByTickData(e){this.controller.schedule((()=>this.controller.encoder.cancelTickByTickData(e)));return this}exerciseOptions(e,t,r,n,i,o){this.controller.schedule((()=>this.controller.encoder.exerciseOptions(e,t,r,n,i,o)));return this}placeOrder(e,t,r){this.controller.schedule((()=>this.controller.encoder.placeOrder(e,t,r)));return this}queryDisplayGroups(e){this.controller.schedule((()=>this.controller.encoder.queryDisplayGroups(e)));return this}replaceFA(e,t,r){this.controller.schedule((()=>this.controller.encoder.replaceFA(e,t,r)));return this}reqAccountSummary(e,t,r){this.controller.schedule((()=>this.controller.encoder.reqAccountSummary(e,t,r)));return this}reqAccountUpdates(e,t){this.controller.schedule((()=>this.controller.encoder.reqAccountUpdates(e,t)));return this}reqAccountUpdatesMulti(e,t,r,n){this.controller.schedule((()=>this.controller.encoder.reqAccountUpdatesMulti(e,t,r,n)));return this}reqAllOpenOrders(){this.controller.schedule((()=>this.controller.encoder.reqAllOpenOrders()));return this}reqAutoOpenOrders(e){this.controller.schedule((()=>this.controller.encoder.reqAutoOpenOrders(e)));return this}reqCompletedOrders(e){this.controller.schedule((()=>this.controller.encoder.reqCompletedOrders(e)));return this}reqWshMetaData(e){this.controller.schedule((()=>this.controller.encoder.reqWshMetaData(e)));return this}reqCancelWshMetaData(e){this.controller.schedule((()=>this.controller.encoder.reqCancelWshMetaData(e)));return this}reqWshEventData(e,t){this.controller.schedule((()=>this.controller.encoder.reqWshEventData(e,t)));return this}reqCancelWshEventData(e){this.controller.schedule((()=>this.controller.encoder.reqCancelWshEventData(e)));return this}reqContractDetails(e,t){this.controller.schedule((()=>this.controller.encoder.reqContractDetails(e,t)));return this}reqCurrentTime(){this.controller.schedule((()=>this.controller.encoder.reqCurrentTime()));return this}reqExecutions(e,t){this.controller.schedule((()=>this.controller.encoder.reqExecutions(e,t)));return this}reqFamilyCodes(){this.controller.schedule((()=>this.controller.encoder.reqFamilyCodes()));return this}reqFundamentalData(e,t,r,n=[]){this.controller.schedule((()=>this.controller.encoder.reqFundamentalData(e,t,r,n)));return this}reqGlobalCancel(){this.controller.schedule((()=>this.controller.encoder.reqGlobalCancel()));return this}reqHeadTimestamp(e,t,r,n,i){this.controller.schedule((()=>this.controller.encoder.reqHeadTimestamp(e,t,r,n,i)));return this}reqHistogramData(e,t,r,n,i){const o=n+" "+i.toString().toLowerCase()+"s";this.controller.schedule((()=>this.controller.encoder.reqHistogramData(e,t,r,o)));return this}reqHistoricalData(e,t,r,n,i,o,s,a,u){this.controller.schedule((()=>this.controller.encoder.reqHistoricalData(e,t,r,n,i,o,s,a,u)));return this}reqHistoricalNews(e,t,r,n,i,o,s=[]){this.controller.schedule((()=>this.controller.encoder.reqHistoricalNews(e,t,r,n,i,o,s)));return this}reqHistoricalTicks(e,t,r,n,i,o,s,a){this.controller.schedule((()=>this.controller.encoder.reqHistoricalTicks(e,t,r,n,i,o,s,a)));return this}reqIds(e=0){this.controller.schedule((()=>this.controller.encoder.reqIds(e)));return this}reqManagedAccts(){this.controller.schedule((()=>this.controller.encoder.reqManagedAccts()));return this}reqMarketDataType(e){this.controller.schedule((()=>this.controller.encoder.reqMarketDataType(e)));return this}reqMktDepth(e,t,r,n,i){this.controller.schedule((()=>this.controller.encoder.reqMktDepth(e,t,r,n,i)));return this}reqMarketRule(e){this.controller.schedule((()=>this.controller.encoder.reqMarketRule(e)));return this}reqMatchingSymbols(e,t){this.controller.schedule((()=>this.controller.encoder.reqMatchingSymbols(e,t)));return this}reqMktData(e,t,r,n,i){this.controller.schedule((()=>this.controller.encoder.reqMktData(e,t,r,n,i)));return this}reqMktDepthExchanges(){this.controller.schedule((()=>this.controller.encoder.reqMktDepthExchanges()));return this}reqNewsArticle(e,t,r,n=[]){this.controller.schedule((()=>this.controller.encoder.reqNewsArticle(e,t,r,n)));return this}reqNewsBulletins(e){this.controller.schedule((()=>this.controller.encoder.reqNewsBulletins(e)));return this}reqNewsProviders(){this.controller.schedule((()=>this.controller.encoder.reqNewsProviders()));return this}reqOpenOrders(){this.controller.schedule((()=>this.controller.encoder.reqOpenOrders()));return this}reqPnL(e,t,r){this.controller.schedule((()=>this.controller.encoder.reqPnL(e,t,r!==null&&r!==void 0?r:null)));return this}reqPnLSingle(e,t,r,n){this.controller.schedule((()=>this.controller.encoder.reqPnLSingle(e,t,r,n)));return this}reqPositions(){this.controller.schedule((()=>this.controller.encoder.reqPositions()));return this}reqPositionsMulti(e,t,r){this.controller.schedule((()=>this.controller.encoder.reqPositionsMulti(e,t,r)));return this}reqRealTimeBars(e,t,r,n,i,o=[]){this.controller.schedule((()=>this.controller.encoder.reqRealTimeBars(e,t,r,n,i,o)));return this}reqScannerParameters(){this.controller.schedule((()=>this.controller.encoder.reqScannerParameters()));return this}reqScannerSubscription(e,t,r=[],n=[]){this.controller.schedule((()=>this.controller.encoder.reqScannerSubscription(e,t,r,n)));return this}reqSecDefOptParams(e,t,r,n,i){this.controller.schedule((()=>this.controller.encoder.reqSecDefOptParams(e,t,r,n,i)));return this}reqSmartComponents(e,t){this.controller.schedule((()=>this.controller.encoder.reqSmartComponents(e,t)));return this}reqSoftDollarTiers(e){this.controller.schedule((()=>this.controller.encoder.reqSoftDollarTiers(e)));return this}reqTickByTickData(e,t,r,n,i){this.controller.schedule((()=>this.controller.encoder.reqTickByTickData(e,t,r,n,i)));return this}requestFA(e){this.controller.schedule((()=>this.controller.encoder.requestFA(e)));return this}subscribeToGroupEvents(e,t){this.controller.schedule((()=>this.controller.encoder.subscribeToGroupEvents(e,t)));return this}updateDisplayGroup(e,t){this.controller.schedule((()=>this.controller.encoder.updateDisplayGroup(e,t)));return this}unsubscribeFromGroupEvents(e){this.controller.schedule((()=>this.controller.encoder.unsubscribeToGroupEvents(e)));return this}setServerLogLevel(e){this.controller.schedule((()=>this.controller.encoder.setServerLogLevel(e)));return this}}t.IBApi=IBApi},6391:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.CFD=void 0;const i=n(r(594));class CFD{constructor(e,t,r){var n,o;this.symbol=e;this.currency=t;this.exchange=r;this.secType=i.default.STK;this.currency=(n=this.currency)!==null&&n!==void 0?n:"USD";this.exchange=(o=this.exchange)!==null&&o!==void 0?o:"SMART"}}t.CFD=CFD;t["default"]=CFD},3196:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Combo=void 0;const i=n(r(594));class Combo{constructor(e,t,r){var n,o;this.symbol=e;this.currency=t;this.exchange=r;this.secType=i.default.BAG;this.currency=(n=this.currency)!==null&&n!==void 0?n:"USD";this.exchange=(o=this.exchange)!==null&&o!==void 0?o:"SMART"}}t.Combo=Combo;t["default"]=Combo},8919:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.FOP=void 0;const i=n(r(594));class FOP{constructor(e,t,r,n,o,s,a){var u,c,l;this.symbol=e;this.expiry=t;this.strike=r;this.right=n;this.multiplier=o;this.exchange=s;this.currency=a;this.secType=i.default.FOP;this.currency=(u=this.currency)!==null&&u!==void 0?u:"USD";this.exchange=(c=this.exchange)!==null&&c!==void 0?c:"GLOBEX";this.multiplier=(l=this.multiplier)!==null&&l!==void 0?l:50}}t.FOP=FOP;t["default"]=FOP},4849:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Forex=void 0;const i=n(r(594));class Forex{constructor(e,t){this.symbol=e;this.currency=t;this.exchange="IDEALPRO";this.secType=i.default.CASH;let r;if(Forex.CURRENCY_SYMBOL_PRIO.indexOf(e)>Forex.CURRENCY_SYMBOL_PRIO.indexOf(t)){r=this.symbol;this.symbol=this.currency;this.currency=r}}}t.Forex=Forex;Forex.CURRENCY_SYMBOL_PRIO=["KRW","EUR","GBP","AUD","USD","TRY","ZAR","CAD","CHF","MXN","HKD","JPY","INR","NOK","SEK","RUB"];t["default"]=Forex},1891:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Future=void 0;const i=n(r(594));class Future{constructor(e,t,r,n,o,s){this.symbol=e;this.localSymbol=t;this.lastTradeDateOrContractMonth=r;this.exchange=n;this.multiplier=o;this.currency=s;this.secType=i.default.FUT}}t.Future=Future;t["default"]=Future},1110:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Index=void 0;const i=n(r(594));class Index{constructor(e,t,r,n,o){var s,a;this.symbol=e;this.expiry=t;this.currency=r;this.exchange=n;this.multiplier=o;this.secType=i.default.IND;this.currency=(s=this.currency)!==null&&s!==void 0?s:"USD";this.exchange=(a=this.exchange)!==null&&a!==void 0?a:"CBOE"}}t.Index=Index;t["default"]=Index},5133:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Option=void 0;const i=n(r(594));class Option{constructor(e,t,r,n,o,s){var a,u;this.symbol=e;this.expiry=t;this.strike=r;this.right=n;this.exchange=o;this.currency=s;this.secType=i.default.OPT;this.multiplier=100;this.currency=(a=this.currency)!==null&&a!==void 0?a:"USD";this.exchange=(u=this.exchange)!==null&&u!==void 0?u:"SMART"}}t.Option=Option;t["default"]=Option},2793:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Stock=void 0;const i=n(r(594));class Stock{constructor(e,t,r){var n,o;this.symbol=e;this.exchange=t;this.currency=r;this.secType=i.default.STK;this.currency=(n=this.currency)!==null&&n!==void 0?n:"USD";this.exchange=(o=this.exchange)!==null&&o!==void 0?o:"SMART"}}t.Stock=Stock;t["default"]=Stock},4519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DurationUnit=void 0;var r;(function(e){e["SECOND"]="SECOND";e["DAY"]="DAY";e["WEEK"]="WEEK";e["MONTH"]="MONTH";e["YEAR"]="YEAR"})(r=t.DurationUnit||(t.DurationUnit={}));t["default"]=r},8349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EventName=void 0;var r;(function(e){e["all"]="all";e["connected"]="connected";e["disconnected"]="disconnected";e["server"]="server";e["error"]="error";e["info"]="info";e["received"]="received";e["sent"]="sent";e["result"]="result";e["accountDownloadEnd"]="accountDownloadEnd";e["accountSummary"]="accountSummary";e["accountSummaryEnd"]="accountSummaryEnd";e["accountUpdateMulti"]="accountUpdateMulti";e["accountUpdateMultiEnd"]="accountUpdateMultiEnd";e["bondContractDetails"]="bondContractDetails";e["commissionReport"]="commissionReport";e["completedOrder"]="completedOrder";e["completedOrdersEnd"]="completedOrdersEnd";e["connectionClosed"]="connectionClosed";e["contractDetails"]="contractDetails";e["contractDetailsEnd"]="contractDetailsEnd";e["currentTime"]="currentTime";e["deltaNeutralValidation"]="deltaNeutralValidation";e["tickSnapshotEnd"]="tickSnapshotEnd";e["marketDataType"]="marketDataType";e["displayGroupList"]="displayGroupList";e["displayGroupUpdated"]="displayGroupUpdated";e["execDetails"]="execDetails";e["execDetailsEnd"]="execDetailsEnd";e["familyCodes"]="familyCodes";e["contractDescriptions"]="contractDescriptions";e["fundamentalData"]="fundamentalData";e["headTimestamp"]="headTimestamp";e["histogramData"]="histogramData";e["historicalDataUpdate"]="historicalDataUpdate";e["historicalNews"]="historicalNews";e["historicalNewsEnd"]="historicalNewsEnd";e["historicalTicks"]="historicalTicks";e["historicalTicksBidAsk"]="historicalTicksBidAsk";e["historicalTicksLast"]="historicalTicksLast";e["managedAccounts"]="managedAccounts";e["marketRule"]="marketRule";e["mktDepthExchanges"]="mktDepthExchanges";e["newsArticle"]="newsArticle";e["newsProviders"]="newsProviders";e["nextValidId"]="nextValidId";e["openOrder"]="openOrder";e["openOrderEnd"]="openOrderEnd";e["orderBound"]="orderBound";e["orderStatus"]="orderStatus";e["pnl"]="pnl";e["pnlSingle"]="pnlSingle";e["position"]="position";e["positionEnd"]="positionEnd";e["positionMulti"]="positionMulti";e["positionMultiEnd"]="positionMultiEnd";e["realtimeBar"]="realtimeBar";e["receiveFA"]="receiveFA";e["replaceFAEnd"]="replaceFAEnd";e["rerouteMktDataReq"]="rerouteMktDataReq";e["rerouteMktDepthReq"]="rerouteMktDepthReq";e["scannerData"]="scannerData";e["scannerDataEnd"]="scannerDataEnd";e["scannerParameters"]="scannerParameters";e["securityDefinitionOptionParameter"]="securityDefinitionOptionParameter";e["securityDefinitionOptionParameterEnd"]="securityDefinitionOptionParameterEnd";e["smartComponents"]="smartComponents";e["softDollarTiers"]="softDollarTiers";e["symbolSamples"]="symbolSamples";e["tickByTickAllLast"]="tickByTickAllLast";e["tickByTickBidAsk"]="tickByTickBidAsk";e["tickByTickMidPoint"]="tickByTickMidPoint";e["tickEFP"]="tickEFP";e["tickGeneric"]="tickGeneric";e["tickNews"]="tickNews";e["tickOptionComputation"]="tickOptionComputation";e["tickPrice"]="tickPrice";e["tickReqParams"]="tickReqParams";e["tickSize"]="tickSize";e["tickString"]="tickString";e["updateAccountTime"]="updateAccountTime";e["updateAccountValue"]="updateAccountValue";e["updatePortfolio"]="updatePortfolio";e["updateMktDepth"]="updateMktDepth";e["updateMktDepthL2"]="updateMktDepthL2";e["updateNewsBulletin"]="updateNewsBulletin";e["historicalData"]="historicalData";e["wshMetaData"]="wshMetaData";e["wshEventData"]="wshEventData";e["historicalSchedule"]="historicalSchedule"})(r=t.EventName||(t.EventName={}))},1301:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FADataType=void 0;var r;(function(e){e[e["GROUPS"]=1]="GROUPS";e[e["PROFILES"]=2]="PROFILES";e[e["ALIASES"]=3]="ALIASES"})(r=t.FADataType||(t.FADataType={}));t["default"]=r},4962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LogLevel=void 0;var r;(function(e){e[e["SYSTEM"]=1]="SYSTEM";e[e["ERROR"]=2]="ERROR";e[e["WARN"]=3]="WARN";e[e["INFO"]=4]="INFO";e[e["DETAIL"]=5]="DETAIL"})(r=t.LogLevel||(t.LogLevel={}));t["default"]=r},2526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MIN_SERVER_VER=void 0;var r;(function(e){e[e["REAL_TIME_BARS"]=34]="REAL_TIME_BARS";e[e["SCALE_ORDERS"]=35]="SCALE_ORDERS";e[e["SNAPSHOT_MKT_DATA"]=35]="SNAPSHOT_MKT_DATA";e[e["SSHORT_COMBO_LEGS"]=35]="SSHORT_COMBO_LEGS";e[e["WHAT_IF_ORDERS"]=36]="WHAT_IF_ORDERS";e[e["CONTRACT_CONID"]=37]="CONTRACT_CONID";e[e["PTA_ORDERS"]=39]="PTA_ORDERS";e[e["FUNDAMENTAL_DATA"]=40]="FUNDAMENTAL_DATA";e[e["DELTA_NEUTRAL"]=40]="DELTA_NEUTRAL";e[e["CONTRACT_DATA_CHAIN"]=40]="CONTRACT_DATA_CHAIN";e[e["SCALE_ORDERS2"]=40]="SCALE_ORDERS2";e[e["ALGO_ORDERS"]=41]="ALGO_ORDERS";e[e["EXECUTION_DATA_CHAIN"]=42]="EXECUTION_DATA_CHAIN";e[e["NOT_HELD"]=44]="NOT_HELD";e[e["SEC_ID_TYPE"]=45]="SEC_ID_TYPE";e[e["PLACE_ORDER_CONID"]=46]="PLACE_ORDER_CONID";e[e["REQ_MKT_DATA_CONID"]=47]="REQ_MKT_DATA_CONID";e[e["REQ_CALC_IMPLIED_VOLAT"]=49]="REQ_CALC_IMPLIED_VOLAT";e[e["CANCEL_CALC_IMPLIED_VOLAT"]=50]="CANCEL_CALC_IMPLIED_VOLAT";e[e["CANCEL_CALC_OPTION_PRICE"]=50]="CANCEL_CALC_OPTION_PRICE";e[e["REQ_CALC_OPTION_PRICE"]=50]="REQ_CALC_OPTION_PRICE";e[e["SSHORTX_OLD"]=51]="SSHORTX_OLD";e[e["SSHORTX"]=52]="SSHORTX";e[e["REQ_GLOBAL_CANCEL"]=53]="REQ_GLOBAL_CANCEL";e[e["HEDGE_ORDERS"]=54]="HEDGE_ORDERS";e[e["REQ_MARKET_DATA_TYPE"]=55]="REQ_MARKET_DATA_TYPE";e[e["OPT_OUT_SMART_ROUTING"]=56]="OPT_OUT_SMART_ROUTING";e[e["SMART_COMBO_ROUTING_PARAMS"]=57]="SMART_COMBO_ROUTING_PARAMS";e[e["DELTA_NEUTRAL_CONID"]=58]="DELTA_NEUTRAL_CONID";e[e["SCALE_ORDERS3"]=60]="SCALE_ORDERS3";e[e["ORDER_COMBO_LEGS_PRICE"]=61]="ORDER_COMBO_LEGS_PRICE";e[e["TRAILING_PERCENT"]=62]="TRAILING_PERCENT";e[e["DELTA_NEUTRAL_OPEN_CLOSE"]=66]="DELTA_NEUTRAL_OPEN_CLOSE";e[e["POSITIONS"]=67]="POSITIONS";e[e["ACCT_SUMMARY"]=67]="ACCT_SUMMARY";e[e["TRADING_CLASS"]=68]="TRADING_CLASS";e[e["SCALE_TABLE"]=69]="SCALE_TABLE";e[e["LINKING"]=70]="LINKING";e[e["ALGO_ID"]=71]="ALGO_ID";e[e["OPTIONAL_CAPABILITIES"]=72]="OPTIONAL_CAPABILITIES";e[e["ORDER_SOLICITED"]=73]="ORDER_SOLICITED";e[e["LINKING_AUTH"]=74]="LINKING_AUTH";e[e["PRIMARYEXCH"]=75]="PRIMARYEXCH";e[e["RANDOMIZE_SIZE_AND_PRICE"]=76]="RANDOMIZE_SIZE_AND_PRICE";e[e["FRACTIONAL_POSITIONS"]=101]="FRACTIONAL_POSITIONS";e[e["PEGGED_TO_BENCHMARK"]=102]="PEGGED_TO_BENCHMARK";e[e["MODELS_SUPPORT"]=103]="MODELS_SUPPORT";e[e["SEC_DEF_OPT_PARAMS_REQ"]=104]="SEC_DEF_OPT_PARAMS_REQ";e[e["EXT_OPERATOR"]=105]="EXT_OPERATOR";e[e["SOFT_DOLLAR_TIER"]=106]="SOFT_DOLLAR_TIER";e[e["REQ_FAMILY_CODES"]=107]="REQ_FAMILY_CODES";e[e["REQ_MATCHING_SYMBOLS"]=108]="REQ_MATCHING_SYMBOLS";e[e["PAST_LIMIT"]=109]="PAST_LIMIT";e[e["MD_SIZE_MULTIPLIER"]=110]="MD_SIZE_MULTIPLIER";e[e["CASH_QTY"]=111]="CASH_QTY";e[e["REQ_MKT_DEPTH_EXCHANGES"]=112]="REQ_MKT_DEPTH_EXCHANGES";e[e["TICK_NEWS"]=113]="TICK_NEWS";e[e["REQ_SMART_COMPONENTS"]=114]="REQ_SMART_COMPONENTS";e[e["REQ_NEWS_PROVIDERS"]=115]="REQ_NEWS_PROVIDERS";e[e["REQ_NEWS_ARTICLE"]=116]="REQ_NEWS_ARTICLE";e[e["REQ_HISTORICAL_NEWS"]=117]="REQ_HISTORICAL_NEWS";e[e["REQ_HEAD_TIMESTAMP"]=118]="REQ_HEAD_TIMESTAMP";e[e["REQ_HISTOGRAM"]=119]="REQ_HISTOGRAM";e[e["SERVICE_DATA_TYPE"]=120]="SERVICE_DATA_TYPE";e[e["AGG_GROUP"]=121]="AGG_GROUP";e[e["UNDERLYING_INFO"]=122]="UNDERLYING_INFO";e[e["CANCEL_HEADTIMESTAMP"]=123]="CANCEL_HEADTIMESTAMP";e[e["SYNT_REALTIME_BARS"]=124]="SYNT_REALTIME_BARS";e[e["CFD_REROUTE"]=125]="CFD_REROUTE";e[e["MARKET_RULES"]=126]="MARKET_RULES";e[e["PNL"]=127]="PNL";e[e["NEWS_QUERY_ORIGINS"]=128]="NEWS_QUERY_ORIGINS";e[e["UNREALIZED_PNL"]=129]="UNREALIZED_PNL";e[e["HISTORICAL_TICKS"]=130]="HISTORICAL_TICKS";e[e["MARKET_CAP_PRICE"]=131]="MARKET_CAP_PRICE";e[e["PRE_OPEN_BID_ASK"]=132]="PRE_OPEN_BID_ASK";e[e["REAL_EXPIRATION_DATE"]=134]="REAL_EXPIRATION_DATE";e[e["REALIZED_PNL"]=135]="REALIZED_PNL";e[e["LAST_LIQUIDITY"]=136]="LAST_LIQUIDITY";e[e["TICK_BY_TICK"]=137]="TICK_BY_TICK";e[e["DECISION_MAKER"]=138]="DECISION_MAKER";e[e["MIFID_EXECUTION"]=139]="MIFID_EXECUTION";e[e["TICK_BY_TICK_IGNORE_SIZE"]=140]="TICK_BY_TICK_IGNORE_SIZE";e[e["AUTO_PRICE_FOR_HEDGE"]=141]="AUTO_PRICE_FOR_HEDGE";e[e["WHAT_IF_EXT_FIELDS"]=142]="WHAT_IF_EXT_FIELDS";e[e["SCANNER_GENERIC_OPTS"]=143]="SCANNER_GENERIC_OPTS";e[e["API_BIND_ORDER"]=144]="API_BIND_ORDER";e[e["ORDER_CONTAINER"]=145]="ORDER_CONTAINER";e[e["SMART_DEPTH"]=146]="SMART_DEPTH";e[e["REMOVE_NULL_ALL_CASTING"]=147]="REMOVE_NULL_ALL_CASTING";e[e["D_PEG_ORDERS"]=148]="D_PEG_ORDERS";e[e["MKT_DEPTH_PRIM_EXCHANGE"]=149]="MKT_DEPTH_PRIM_EXCHANGE";e[e["REQ_COMPLETED_ORDERS"]=150]="REQ_COMPLETED_ORDERS";e[e["PRICE_MGMT_ALGO"]=151]="PRICE_MGMT_ALGO";e[e["STOCK_TYPE"]=152]="STOCK_TYPE";e[e["ENCODE_MSG_ASCII7"]=153]="ENCODE_MSG_ASCII7";e[e["SEND_ALL_FAMILY_CODES"]=154]="SEND_ALL_FAMILY_CODES";e[e["NO_DEFAULT_OPEN_CLOSE"]=155]="NO_DEFAULT_OPEN_CLOSE";e[e["PRICE_BASED_VOLATILITY"]=156]="PRICE_BASED_VOLATILITY";e[e["REPLACE_FA_END"]=157]="REPLACE_FA_END";e[e["DURATION"]=158]="DURATION";e[e["MARKET_DATA_IN_SHARES"]=159]="MARKET_DATA_IN_SHARES";e[e["POST_TO_ATS"]=160]="POST_TO_ATS";e[e["WSHE_CALENDAR"]=161]="WSHE_CALENDAR";e[e["AUTO_CANCEL_PARENT"]=162]="AUTO_CANCEL_PARENT";e[e["FRACTIONAL_SIZE_SUPPORT"]=163]="FRACTIONAL_SIZE_SUPPORT";e[e["SIZE_RULES"]=164]="SIZE_RULES";e[e["HISTORICAL_SCHEDULE"]=165]="HISTORICAL_SCHEDULE";e[e["ADVANCED_ORDER_REJECT"]=166]="ADVANCED_ORDER_REJECT";e[e["USER_INFO"]=167]="USER_INFO";e[e["CRYPTO_AGGREGATED_TRADES"]=168]="CRYPTO_AGGREGATED_TRADES";e[e["MANUAL_ORDER_TIME"]=169]="MANUAL_ORDER_TIME";e[e["PEGBEST_PEGMID_OFFSETS"]=170]="PEGBEST_PEGMID_OFFSETS";e[e["WSH_EVENT_DATA_FILTERS"]=171]="WSH_EVENT_DATA_FILTERS";e[e["IPO_PRICES"]=172]="IPO_PRICES";e[e["WSH_EVENT_DATA_FILTERS_DATE"]=173]="WSH_EVENT_DATA_FILTERS_DATE";e[e["INSTRUMENT_TIMEZONE"]=174]="INSTRUMENT_TIMEZONE";e[e["HMDS_MARKET_DATA_IN_SHARES"]=175]="HMDS_MARKET_DATA_IN_SHARES";e[e["BOND_ISSUERID"]=176]="BOND_ISSUERID"})(r=t.MIN_SERVER_VER||(t.MIN_SERVER_VER={}));t["default"]=r},4185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OptionExerciseAction=void 0;var r;(function(e){e[e["EXERCISE"]=1]="EXERCISE";e[e["LAPSE"]=2]="LAPSE"})(r=t.OptionExerciseAction||(t.OptionExerciseAction={}));t["default"]=r},3357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OptionType=void 0;var r;(function(e){e["Put"]="P";e["Call"]="C"})(r=t.OptionType||(t.OptionType={}));t["default"]=r},594:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SecType=void 0;var r;(function(e){e["STK"]="STK";e["OPT"]="OPT";e["FUT"]="FUT";e["IND"]="IND";e["FOP"]="FOP";e["CFD"]="CFD";e["CASH"]="CASH";e["BAG"]="BAG";e["WAR"]="WAR";e["BOND"]="BOND";e["CMDTY"]="CMDTY";e["NEWS"]="NEWS";e["FUND"]="FUND";e["CRYPTO"]="CRYPTO "})(r=t.SecType||(t.SecType={}));t["default"]=r},1480:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BarSizeSetting=void 0;var r;(function(e){e["SECONDS_ONE"]="1 secs";e["SECONDS_FIVE"]="5 secs";e["SECONDS_TEN"]="10 secs";e["SECONDS_FIFTEEN"]="15 secs";e["SECONDS_THIRTY"]="30 secs";e["MINUTES_ONE"]="1 min";e["MINUTES_TWO"]="2 mins";e["MINUTES_THREE"]="3 mins";e["MINUTES_FIVE"]="5 mins";e["MINUTES_TEN"]="10 mins";e["MINUTES_FIFTEEN"]="15 mins";e["MINUTES_TWENTY"]="20 mins";e["MINUTES_THIRTY"]="30 mins";e["HOURS_ONE"]="1 hour";e["HOURS_TWO"]="2 hours";e["HOURS_THREE"]="3 hours";e["HOURS_FOUR"]="4 hours";e["HOURS_EIGHT"]="8 hours";e["DAYS_ONE"]="1 day";e["WEEKS_ONE"]="1W";e["MONTHS_ONE"]="1M"})(r=t.BarSizeSetting||(t.BarSizeSetting={}));t["default"]=r},4716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TickByTickDataType=void 0;var r;(function(e){e["Last"]="Last";e["AllLast"]="AllLast";e["BidAsk"]="BidAsk";e["MidPoint"]="MidPoint"})(r=t.TickByTickDataType||(t.TickByTickDataType={}));t["default"]=r},8869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TickType=void 0;var r;(function(e){e[e["BID_SIZE"]=0]="BID_SIZE";e[e["BID"]=1]="BID";e[e["ASK"]=2]="ASK";e[e["ASK_SIZE"]=3]="ASK_SIZE";e[e["LAST"]=4]="LAST";e[e["LAST_SIZE"]=5]="LAST_SIZE";e[e["HIGH"]=6]="HIGH";e[e["LOW"]=7]="LOW";e[e["VOLUME"]=8]="VOLUME";e[e["CLOSE"]=9]="CLOSE";e[e["BID_OPTION"]=10]="BID_OPTION";e[e["ASK_OPTION"]=11]="ASK_OPTION";e[e["LAST_OPTION"]=12]="LAST_OPTION";e[e["MODEL_OPTION"]=13]="MODEL_OPTION";e[e["OPEN"]=14]="OPEN";e[e["LOW_13_WEEK"]=15]="LOW_13_WEEK";e[e["HIGH_13_WEEK"]=16]="HIGH_13_WEEK";e[e["LOW_26_WEEK"]=17]="LOW_26_WEEK";e[e["HIGH_26_WEEK"]=18]="HIGH_26_WEEK";e[e["LOW_52_WEEK"]=19]="LOW_52_WEEK";e[e["HIGH_52_WEEK"]=20]="HIGH_52_WEEK";e[e["AVG_VOLUME"]=21]="AVG_VOLUME";e[e["OPEN_INTEREST"]=22]="OPEN_INTEREST";e[e["OPTION_HISTORICAL_VOL"]=23]="OPTION_HISTORICAL_VOL";e[e["OPTION_IMPLIED_VOL"]=24]="OPTION_IMPLIED_VOL";e[e["OPTION_BID_EXCH"]=25]="OPTION_BID_EXCH";e[e["OPTION_ASK_EXCH"]=26]="OPTION_ASK_EXCH";e[e["OPTION_CALL_OPEN_INTEREST"]=27]="OPTION_CALL_OPEN_INTEREST";e[e["OPTION_PUT_OPEN_INTEREST"]=28]="OPTION_PUT_OPEN_INTEREST";e[e["OPTION_CALL_VOLUME"]=29]="OPTION_CALL_VOLUME";e[e["OPTION_PUT_VOLUME"]=30]="OPTION_PUT_VOLUME";e[e["INDEX_FUTURE_PREMIUM"]=31]="INDEX_FUTURE_PREMIUM";e[e["BID_EXCH"]=32]="BID_EXCH";e[e["ASK_EXCH"]=33]="ASK_EXCH";e[e["AUCTION_VOLUME"]=34]="AUCTION_VOLUME";e[e["AUCTION_PRICE"]=35]="AUCTION_PRICE";e[e["AUCTION_IMBALANCE"]=36]="AUCTION_IMBALANCE";e[e["MARK_PRICE"]=37]="MARK_PRICE";e[e["BID_EFP_COMPUTATION"]=38]="BID_EFP_COMPUTATION";e[e["ASK_EFP_COMPUTATION"]=39]="ASK_EFP_COMPUTATION";e[e["LAST_EFP_COMPUTATION"]=40]="LAST_EFP_COMPUTATION";e[e["OPEN_EFP_COMPUTATION"]=41]="OPEN_EFP_COMPUTATION";e[e["HIGH_EFP_COMPUTATION"]=42]="HIGH_EFP_COMPUTATION";e[e["LOW_EFP_COMPUTATION"]=43]="LOW_EFP_COMPUTATION";e[e["CLOSE_EFP_COMPUTATION"]=44]="CLOSE_EFP_COMPUTATION";e[e["LAST_TIMESTAMP"]=45]="LAST_TIMESTAMP";e[e["SHORTABLE"]=46]="SHORTABLE";e[e["FUNDAMENTAL_RATIOS"]=47]="FUNDAMENTAL_RATIOS";e[e["RT_VOLUME"]=48]="RT_VOLUME";e[e["HALTED"]=49]="HALTED";e[e["BID_YIELD"]=50]="BID_YIELD";e[e["ASK_YIELD"]=51]="ASK_YIELD";e[e["LAST_YIELD"]=52]="LAST_YIELD";e[e["CUST_OPTION_COMPUTATION"]=53]="CUST_OPTION_COMPUTATION";e[e["TRADE_COUNT"]=54]="TRADE_COUNT";e[e["TRADE_RATE"]=55]="TRADE_RATE";e[e["VOLUME_RATE"]=56]="VOLUME_RATE";e[e["LAST_RTH_TRADE"]=57]="LAST_RTH_TRADE";e[e["RT_HISTORICAL_VOL"]=58]="RT_HISTORICAL_VOL";e[e["IB_DIVIDENDS"]=59]="IB_DIVIDENDS";e[e["BOND_FACTOR_MULTIPLIER"]=60]="BOND_FACTOR_MULTIPLIER";e[e["REGULATORY_IMBALANCE"]=61]="REGULATORY_IMBALANCE";e[e["NEWS_TICK"]=62]="NEWS_TICK";e[e["SHORT_TERM_VOLUME_3_MIN"]=63]="SHORT_TERM_VOLUME_3_MIN";e[e["SHORT_TERM_VOLUME_5_MIN"]=64]="SHORT_TERM_VOLUME_5_MIN";e[e["SHORT_TERM_VOLUME_10_MIN"]=65]="SHORT_TERM_VOLUME_10_MIN";e[e["DELAYED_BID"]=66]="DELAYED_BID";e[e["DELAYED_ASK"]=67]="DELAYED_ASK";e[e["DELAYED_LAST"]=68]="DELAYED_LAST";e[e["DELAYED_BID_SIZE"]=69]="DELAYED_BID_SIZE";e[e["DELAYED_ASK_SIZE"]=70]="DELAYED_ASK_SIZE";e[e["DELAYED_LAST_SIZE"]=71]="DELAYED_LAST_SIZE";e[e["DELAYED_HIGH"]=72]="DELAYED_HIGH";e[e["DELAYED_LOW"]=73]="DELAYED_LOW";e[e["DELAYED_VOLUME"]=74]="DELAYED_VOLUME";e[e["DELAYED_CLOSE"]=75]="DELAYED_CLOSE";e[e["DELAYED_OPEN"]=76]="DELAYED_OPEN";e[e["RT_TRD_VOLUME"]=77]="RT_TRD_VOLUME";e[e["CREDITMAN_MARK_PRICE"]=78]="CREDITMAN_MARK_PRICE";e[e["CREDITMAN_SLOW_MARK_PRICE"]=79]="CREDITMAN_SLOW_MARK_PRICE";e[e["DELAYED_BID_OPTION"]=80]="DELAYED_BID_OPTION";e[e["DELAYED_ASK_OPTION"]=81]="DELAYED_ASK_OPTION";e[e["DELAYED_LAST_OPTION"]=82]="DELAYED_LAST_OPTION";e[e["DELAYED_MODEL_OPTION"]=83]="DELAYED_MODEL_OPTION";e[e["LAST_EXCH"]=84]="LAST_EXCH";e[e["LAST_REG_TIME"]=85]="LAST_REG_TIME";e[e["FUTURES_OPEN_INTEREST"]=86]="FUTURES_OPEN_INTEREST";e[e["AVG_OPT_VOLUME"]=87]="AVG_OPT_VOLUME";e[e["DELAYED_LAST_TIMESTAMP"]=88]="DELAYED_LAST_TIMESTAMP";e[e["SHORTABLE_SHARES"]=89]="SHORTABLE_SHARES";e[e["ETF_NAV_CLOSE"]=92]="ETF_NAV_CLOSE";e[e["ETF_NAV_PRIOR_CLOSE"]=93]="ETF_NAV_PRIOR_CLOSE";e[e["ETF_NAV_BID"]=94]="ETF_NAV_BID";e[e["ETF_NAV_ASK"]=95]="ETF_NAV_ASK";e[e["ETF_NAV_LAST"]=96]="ETF_NAV_LAST";e[e["ETF_NAV_FROZEN_LAST"]=97]="ETF_NAV_FROZEN_LAST";e[e["ETF_NAV_HIGH"]=98]="ETF_NAV_HIGH";e[e["ETF_NAV_LOW"]=99]="ETF_NAV_LOW";e[e["UNKNOWN"]=2147483647]="UNKNOWN"})(r=t.TickType||(t.TickType={}));t["default"]=r},4624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExecutionCondition=void 0;const n=r(5628);class ExecutionCondition{constructor(e,t,r,i){this.exchange=e;this.secType=t;this.symbol=r;this.conjunctionConnection=i;this.type=n.OrderConditionType.Execution}}t.ExecutionCondition=ExecutionCondition;t["default"]=ExecutionCondition},8093:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarginCondition=void 0;const n=r(5628);class MarginCondition{constructor(e,t,r){this.percent=e;this.isMore=t;this.conjunctionConnection=r;this.type=n.OrderConditionType.Margin}get strValue(){return""+this.percent}}t.MarginCondition=MarginCondition;t["default"]=MarginCondition},1610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PercentChangeCondition=void 0;const n=r(5628);class PercentChangeCondition{constructor(e,t,r,i,o){this.percent=e;this.conId=t;this.exchange=r;this.isMore=i;this.conjunctionConnection=o;this.type=n.OrderConditionType.PercentChange}get strValue(){return""+this.percent}}t.PercentChangeCondition=PercentChangeCondition;t["default"]=PercentChangeCondition},6408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PriceCondition=void 0;const n=r(5628);class PriceCondition{constructor(e,t,r,i,o,s){this.price=e;this.triggerMethod=t;this.conId=r;this.exchange=i;this.isMore=o;this.conjunctionConnection=s;this.type=n.OrderConditionType.Price}get strValue(){return""+this.price}}t.PriceCondition=PriceCondition;t["default"]=PriceCondition},2900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeCondition=void 0;const n=r(5628);class TimeCondition{constructor(e,t,r){this.time=e;this.isMore=t;this.conjunctionConnection=r;this.type=n.OrderConditionType.Time}get strValue(){return this.time}}t.TimeCondition=TimeCondition;t["default"]=TimeCondition},2453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VolumeCondition=void 0;const n=r(5628);class VolumeCondition{constructor(e,t,r,i,o){this.volume=e;this.conId=t;this.exchange=r;this.isMore=i;this.conjunctionConnection=o;this.type=n.OrderConditionType.Volume}get strValue(){return""+this.volume}}t.VolumeCondition=VolumeCondition;t["default"]=VolumeCondition},2614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConjunctionConnection=void 0;var r;(function(e){e["AND"]="a";e["OR"]="o"})(r=t.ConjunctionConnection||(t.ConjunctionConnection={}));t["default"]=r},3956:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrderAction=void 0;var r;(function(e){e["BUY"]="BUY";e["SELL"]="SELL";e["SSHORT"]="SSHORT";e["SLONG"]="SLONG"})(r=t.OrderAction||(t.OrderAction={}));t["default"]=r},5628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrderConditionType=void 0;var r;(function(e){e[e["Price"]=1]="Price";e[e["Time"]=3]="Time";e[e["Margin"]=4]="Margin";e[e["Execution"]=5]="Execution";e[e["Volume"]=6]="Volume";e[e["PercentChange"]=7]="PercentChange"})(r=t.OrderConditionType||(t.OrderConditionType={}));t["default"]=r},8416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrderStatus=void 0;var r;(function(e){e["ApiPending"]="ApiPending";e["ApiCancelled"]="ApiCancelled";e["PreSubmitted"]="PreSubmitted";e["PendingCancel"]="PendingCancel";e["Cancelled"]="Cancelled";e["Submitted"]="Submitted";e["Filled"]="Filled";e["Inactive"]="Inactive";e["PendingSubmit"]="PendingSubmit";e["Unknown"]="Unknown"})(r=t.OrderStatus||(t.OrderStatus={}));t["default"]=r},8056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OrderType=void 0;var r;(function(e){e["None"]="";e["MKT"]="MKT";e["LMT"]="LMT";e["STP"]="STP";e["STP_LMT"]="STP LMT";e["REL"]="REL";e["TRAIL"]="TRAIL";e["BOX_TOP"]="BOX TOP";e["FIX_PEGGED"]="FIX PEGGED";e["LIT"]="LIT";e["LMT_PLUS_MKT"]="LMT + MKT";e["LOC"]="LOC";e["MIT"]="MIT";e["MKT_PRT"]="MKT PRT";e["MOC"]="MOC";e["MTL"]="MTL";e["PASSV_REL"]="PASSV REL";e["PEG_BENCH"]="PEG BENCH";e["PEG_MID"]="PEG MID";e["PEG_MKT"]="PEG MKT";e["PEG_PRIM"]="PEG PRIM";e["PEG_STK"]="PEG STK";e["REL_PLUS_LMT"]="REL + LMT";e["REL_PLUS_MKT"]="REL + MKT";e["SNAP_MID"]="SNAP MID";e["SNAP_MKT"]="SNAP MKT";e["SNAP_PRIM"]="SNAP PRIM";e["STP_PRT"]="STP PRT";e["TRAIL_LIMIT"]="TRAIL LIMIT";e["TRAIL_LIT"]="TRAIL LIT";e["TRAIL_LMT_PLUS_MKT"]="TRAIL LMT + MKT";e["TRAIL_MIT"]="TRAIL MIT";e["TRAIL_REL_PLUS_MKT"]="TRAIL REL + MKT";e["VOL"]="VOL";e["VWAP"]="VWAP";e["QUOTE"]="QUOTE";e["PEG_PRIM_VOL"]="PPV";e["PEG_MID_VOL"]="PDV";e["PEG_MKT_VOL"]="PMV";e["PEG_SRF_VOL"]="PSV"})(r=t.OrderType||(t.OrderType={}));t["default"]=r},460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TriggerMethod=void 0;var r;(function(e){e[e["Default"]=0]="Default";e[e["DoubleBidAsk"]=1]="DoubleBidAsk";e[e["Last"]=2]="Last";e[e["DoubleLast"]=3]="DoubleLast";e[e["BidAsk"]=4]="BidAsk";e[e["LastOfBidAsk"]=7]="LastOfBidAsk";e[e["MidPoint"]=8]="MidPoint"})(r=t.TriggerMethod||(t.TriggerMethod={}));t["default"]=r},3543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LimitOrder=void 0;const n=r(8056);class LimitOrder{constructor(e,t,r,i=true){this.action=e;this.lmtPrice=t;this.totalQuantity=r;this.transmit=i;this.orderType=n.OrderType.LMT}}t.LimitOrder=LimitOrder;t["default"]=LimitOrder},1166:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarketOrder=void 0;const n=r(8056);class MarketOrder{constructor(e,t,r,i,o){var s,a,u;this.action=e;this.totalQuantity=t;this.transmit=r;this.goodAfterTime=i;this.goodTillDate=o;this.orderType=n.OrderType.MKT;this.transmit=(s=this.transmit)!==null&&s!==void 0?s:true;this.goodAfterTime=(a=this.goodAfterTime)!==null&&a!==void 0?a:"";this.goodTillDate=(u=this.goodTillDate)!==null&&u!==void 0?u:""}}t.MarketOrder=MarketOrder;t["default"]=MarketOrder},1833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarketCloseOrder=void 0;const n=r(8056);class MarketCloseOrder{constructor(e,t,r=true){this.action=e;this.totalQuantity=t;this.transmit=r;this.orderType=n.OrderType.MOC}}t.MarketCloseOrder=MarketCloseOrder;t["default"]=MarketCloseOrder},9330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StopOrder=void 0;const n=r(8056);class StopOrder{constructor(e,t,r,i,o,s){var a,u,c;this.action=e;this.auxPrice=t;this.totalQuantity=r;this.transmit=i;this.parentId=o;this.tif=s;this.orderType=n.OrderType.STP;this.transmit=(a=this.transmit)!==null&&a!==void 0?a:true;this.parentId=(u=this.parentId)!==null&&u!==void 0?u:0;this.tif=(c=this.tif)!==null&&c!==void 0?c:"DAY"}}t.StopOrder=StopOrder;t["default"]=StopOrder},8081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StopLimitOrder=void 0;const n=r(8056);class StopLimitOrder{constructor(e,t,r,i,o,s,a){var u,c,l;this.action=e;this.lmtPrice=t;this.auxPrice=r;this.totalQuantity=i;this.transmit=o;this.parentId=s;this.tif=a;this.orderType=n.OrderType.STP_LMT;this.transmit=(u=this.transmit)!==null&&u!==void 0?u:true;this.parentId=(c=this.parentId)!==null&&c!==void 0?c:0;this.tif=(l=this.tif)!==null&&l!==void 0?l:"DAY"}}t.StopLimitOrder=StopLimitOrder;t["default"]=StopLimitOrder},9721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TrailingStopOrder=void 0;const n=r(8056);class TrailingStopOrder{constructor(e,t,r,i,o,s,a){var u,c,l;this.action=e;this.totalQuantity=t;this.auxPrice=r;this.trailingPercent=i;this.transmit=o;this.parentId=s;this.tif=a;this.orderType=n.OrderType.TRAIL;this.transmit=(u=this.transmit)!==null&&u!==void 0?u:true;this.parentId=(c=this.parentId)!==null&&c!==void 0?c:0;this.tif=(l=this.tif)!==null&&l!==void 0?l:"DAY"}}t.TrailingStopOrder=TrailingStopOrder;t["default"]=TrailingStopOrder},6223:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.get=void 0;const s=r(7147);const a=o(r(1017));r(11).config();let u=null;const c=["ci","env_config_test","ib_host","ib_port","ib_test_account","client_version","max_req_per_second"];function readJson(e){try{const t=s.readFileSync(e,"utf8");return JSON.parse(t)}catch(e){if(e.code!=="ENOENT"||e.errno!==undefined&&e.errno!==-4058&&e.errno!==-2){throw e}}return{}}function read(e){const t=a.resolve(__dirname,"..","..","config",`${e}.json`);return readJson(t)}function assignEnvironment(e){const t=e;c.forEach((r=>{const n=r.toLowerCase();const i=r.toUpperCase();t[n]=process.env[i]||e[n]}));return t}function loadEnvironmentSpecific(e,t){let r=e;if(t){const e=read(t);if(e){r=Object.assign(Object.assign({},r),e)}}return r}const ensureInteger=(e,t)=>e.forEach((e=>{const r=t[e];if(typeof r==="string"){t[e]=parseInt(r,10)}}));function load(){const e=process.env.NODE_ENV;let t=read("default");t=loadEnvironmentSpecific(t,"local");t=loadEnvironmentSpecific(t,e);t=assignEnvironment(t);t.environment=e||"local";t.isProduction=e==="production";t.isStaging=e==="staging";t.isDevelopment=e==="development";t.isTest=e==="test";t.isLocal=!e;t.ci=t.ci||process.env.CIRCLECI;const r=["ib_port","default_client_id","client_version","max_req_per_second"];ensureInteger(r,t);return t}function get(){if(!u){u=load()}return u}t.get=get;u=load();t["default"]=u},1830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ErrorCode=void 0;var r;(function(e){e[e["ALREADY_CONNECTED"]=501]="ALREADY_CONNECTED";e[e["CONNECT_FAIL"]=502]="CONNECT_FAIL";e[e["UPDATE_TWS"]=503]="UPDATE_TWS";e[e["NOT_CONNECTED"]=504]="NOT_CONNECTED";e[e["UNKNOWN_ID"]=505]="UNKNOWN_ID";e[e["UNSUPPORTED_VERSION"]=506]="UNSUPPORTED_VERSION";e[e["BAD_LENGTH"]=507]="BAD_LENGTH";e[e["BAD_MESSAGE"]=508]="BAD_MESSAGE";e[e["FAIL_SEND"]=509]="FAIL_SEND";e[e["FAIL_SEND_REQMKT"]=510]="FAIL_SEND_REQMKT";e[e["FAIL_SEND_CANMKT"]=511]="FAIL_SEND_CANMKT";e[e["FAIL_SEND_ORDER"]=512]="FAIL_SEND_ORDER";e[e["FAIL_SEND_ACCT"]=513]="FAIL_SEND_ACCT";e[e["FAIL_SEND_EXEC"]=514]="FAIL_SEND_EXEC";e[e["FAIL_SEND_CORDER"]=515]="FAIL_SEND_CORDER";e[e["FAIL_SEND_OORDER"]=516]="FAIL_SEND_OORDER";e[e["UNKNOWN_CONTRACT"]=517]="UNKNOWN_CONTRACT";e[e["FAIL_SEND_REQCONTRACT"]=518]="FAIL_SEND_REQCONTRACT";e[e["FAIL_SEND_REQMKTDEPTH"]=519]="FAIL_SEND_REQMKTDEPTH";e[e["FAIL_SEND_CANMKTDEPTH"]=520]="FAIL_SEND_CANMKTDEPTH";e[e["FAIL_SEND_SERVER_LOG_LEVEL"]=521]="FAIL_SEND_SERVER_LOG_LEVEL";e[e["FAIL_SEND_FA_REQUEST"]=522]="FAIL_SEND_FA_REQUEST";e[e["FAIL_SEND_FA_REPLACE"]=523]="FAIL_SEND_FA_REPLACE";e[e["FAIL_SEND_REQSCANNER"]=524]="FAIL_SEND_REQSCANNER";e[e["FAIL_SEND_CANSCANNER"]=525]="FAIL_SEND_CANSCANNER";e[e["FAIL_SEND_REQSCANNERPARAMETERS"]=526]="FAIL_SEND_REQSCANNERPARAMETERS";e[e["FAIL_SEND_REQHISTDATA"]=527]="FAIL_SEND_REQHISTDATA";e[e["FAIL_SEND_CANHISTDATA"]=528]="FAIL_SEND_CANHISTDATA";e[e["FAIL_SEND_REQRTBARS"]=529]="FAIL_SEND_REQRTBARS";e[e["FAIL_SEND_CANRTBARS"]=530]="FAIL_SEND_CANRTBARS";e[e["FAIL_SEND_REQCURRTIME"]=531]="FAIL_SEND_REQCURRTIME";e[e["FAIL_SEND_REQFUNDDATA"]=532]="FAIL_SEND_REQFUNDDATA";e[e["FAIL_SEND_CANFUNDDATA"]=533]="FAIL_SEND_CANFUNDDATA";e[e["FAIL_SEND_REQCALCIMPLIEDVOLAT"]=534]="FAIL_SEND_REQCALCIMPLIEDVOLAT";e[e["FAIL_SEND_REQCALCOPTIONPRICE"]=535]="FAIL_SEND_REQCALCOPTIONPRICE";e[e["FAIL_SEND_CANCALCIMPLIEDVOLAT"]=536]="FAIL_SEND_CANCALCIMPLIEDVOLAT";e[e["FAIL_SEND_CANCALCOPTIONPRICE"]=537]="FAIL_SEND_CANCALCOPTIONPRICE";e[e["FAIL_SEND_REQGLOBALCANCEL"]=538]="FAIL_SEND_REQGLOBALCANCEL";e[e["FAIL_SEND_REQMARKETDATATYPE"]=539]="FAIL_SEND_REQMARKETDATATYPE";e[e["FAIL_SEND_REQPOSITIONS"]=540]="FAIL_SEND_REQPOSITIONS";e[e["FAIL_SEND_CANPOSITIONS"]=541]="FAIL_SEND_CANPOSITIONS";e[e["FAIL_SEND_REQACCOUNTDATA"]=542]="FAIL_SEND_REQACCOUNTDATA";e[e["FAIL_SEND_CANACCOUNTDATA"]=543]="FAIL_SEND_CANACCOUNTDATA";e[e["FAIL_SEND_VERIFYREQUEST"]=544]="FAIL_SEND_VERIFYREQUEST";e[e["FAIL_SEND_VERIFYMESSAGE"]=545]="FAIL_SEND_VERIFYMESSAGE";e[e["FAIL_SEND_QUERYDISPLAYGROUPS"]=546]="FAIL_SEND_QUERYDISPLAYGROUPS";e[e["FAIL_SEND_SUBSCRIBETOGROUPEVENTS"]=547]="FAIL_SEND_SUBSCRIBETOGROUPEVENTS";e[e["FAIL_SEND_UPDATEDISPLAYGROUP"]=548]="FAIL_SEND_UPDATEDISPLAYGROUP";e[e["FAIL_SEND_UNSUBSCRIBEFROMGROUPEVENTS"]=549]="FAIL_SEND_UNSUBSCRIBEFROMGROUPEVENTS";e[e["FAIL_SEND_STARTAPI"]=550]="FAIL_SEND_STARTAPI";e[e["FAIL_SEND_VERIFYANDAUTHREQUEST"]=551]="FAIL_SEND_VERIFYANDAUTHREQUEST";e[e["FAIL_SEND_VERIFYANDAUTHMESSAGE"]=552]="FAIL_SEND_VERIFYANDAUTHMESSAGE";e[e["FAIL_SEND_REQPOSITIONSMULTI"]=553]="FAIL_SEND_REQPOSITIONSMULTI";e[e["FAIL_SEND_CANPOSITIONSMULTI"]=554]="FAIL_SEND_CANPOSITIONSMULTI";e[e["FAIL_SEND_REQACCOUNTUPDATESMULTI"]=555]="FAIL_SEND_REQACCOUNTUPDATESMULTI";e[e["FAIL_SEND_CANACCOUNTUPDATESMULTI"]=556]="FAIL_SEND_CANACCOUNTUPDATESMULTI";e[e["FAIL_SEND_REQSECDEFOPTPARAMS"]=557]="FAIL_SEND_REQSECDEFOPTPARAMS";e[e["FAIL_SEND_REQSOFTDOLLARTIERS"]=558]="FAIL_SEND_REQSOFTDOLLARTIERS";e[e["FAIL_SEND_REQFAMILYCODES"]=559]="FAIL_SEND_REQFAMILYCODES";e[e["FAIL_SEND_REQMATCHINGSYMBOLS"]=560]="FAIL_SEND_REQMATCHINGSYMBOLS";e[e["FAIL_SEND_REQMKTDEPTHEXCHANGES"]=561]="FAIL_SEND_REQMKTDEPTHEXCHANGES";e[e["FAIL_SEND_REQSMARTCOMPONENTS"]=562]="FAIL_SEND_REQSMARTCOMPONENTS";e[e["FAIL_SEND_REQNEWSPROVIDERS"]=563]="FAIL_SEND_REQNEWSPROVIDERS";e[e["FAIL_SEND_REQNEWSARTICLE"]=564]="FAIL_SEND_REQNEWSARTICLE";e[e["FAIL_SEND_REQHISTORICALNEWS"]=565]="FAIL_SEND_REQHISTORICALNEWS";e[e["FAIL_SEND_REQHEADTIMESTAMP"]=566]="FAIL_SEND_REQHEADTIMESTAMP";e[e["FAIL_SEND_CANHEADTIMESTAMP"]=567]="FAIL_SEND_CANHEADTIMESTAMP";e[e["FAIL_SEND_REQMARKETRULE"]=568]="FAIL_SEND_REQMARKETRULE";e[e["FAIL_SEND_REQPNL"]=566]="FAIL_SEND_REQPNL";e[e["FAIL_SEND_CANPNL"]=567]="FAIL_SEND_CANPNL";e[e["FAIL_SEND_REQPNL_SINGLE"]=568]="FAIL_SEND_REQPNL_SINGLE";e[e["FAIL_SEND_CANPNL_SINGLE"]=569]="FAIL_SEND_CANPNL_SINGLE";e[e["FAIL_SEND_HISTORICAL_TICK"]=569]="FAIL_SEND_HISTORICAL_TICK";e[e["FAIL_SEND_REQTICKBYTICK"]=570]="FAIL_SEND_REQTICKBYTICK";e[e["FAIL_SEND_CANTICKBYTICK"]=571]="FAIL_SEND_CANTICKBYTICK";e[e["FAIL_SEND_REQ_COMPLETED_ORDERS"]=572]="FAIL_SEND_REQ_COMPLETED_ORDERS";e[e["FAIL_SEND_REQ_WSH_META_DATA"]=573]="FAIL_SEND_REQ_WSH_META_DATA";e[e["FAIL_SEND_CAN_WSH_META_DATA"]=574]="FAIL_SEND_CAN_WSH_META_DATA";e[e["FAIL_SEND_REQ_WSH_EVENT_DATA"]=575]="FAIL_SEND_REQ_WSH_EVENT_DATA";e[e["FAIL_SEND_CAN_WSH_EVENT_DATA"]=576]="FAIL_SEND_CAN_WSH_EVENT_DATA";e[e["INVALID_SYMBOL"]=579]="INVALID_SYMBOL"})(r=t.ErrorCode||(t.ErrorCode={}))},1930:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MutableAccountSummariesUpdate=t.MutableAccountSummaries=t.MutableAccountSummaryTagValues=t.MutableAccountSummaryValues=void 0;const n=r(394);const i=r(2209);class MutableAccountSummaryValues extends n.IBApiNextMap{}t.MutableAccountSummaryValues=MutableAccountSummaryValues;class MutableAccountSummaryTagValues extends n.IBApiNextMap{}t.MutableAccountSummaryTagValues=MutableAccountSummaryTagValues;class MutableAccountSummaries extends n.IBApiNextMap{}t.MutableAccountSummaries=MutableAccountSummaries;class MutableAccountSummariesUpdate extends i.IBApiNextItemListUpdate{}t.MutableAccountSummariesUpdate=MutableAccountSummariesUpdate},9296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MutableMarketDataUpdate=t.MutableMarketData=void 0;const n=r(2209);const i=r(394);class MutableMarketData extends i.IBApiNextMap{}t.MutableMarketData=MutableMarketData;class MutableMarketDataUpdate extends n.IBApiNextItemListUpdate{}t.MutableMarketDataUpdate=MutableMarketDataUpdate},9963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MutableAccountPositionsUpdate=t.MutableAccountPositions=void 0;const n=r(394);const i=r(2209);class MutableAccountPositions extends n.IBApiNextMap{}t.MutableAccountPositions=MutableAccountPositions;class MutableAccountPositionsUpdate extends i.IBApiNextItemListUpdate{}t.MutableAccountPositionsUpdate=MutableAccountPositionsUpdate},1156:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.IBApiAutoConnection=void 0;const s=r(7054);const a=o(r(9597));const u="IBApiAutoConnection";class IBApiAutoConnection extends a.default{constructor(e,t,r,n){super(n);this.reconnectInterval=e;this.watchdogInterval=t;this.logger=r;this.options=n;this.autoReconnectEnabled=true;this._connectionState=new s.BehaviorSubject(a.ConnectionState.Disconnected);this.on(a.EventName.connected,(()=>this.onConnected()));this.on(a.EventName.disconnected,(()=>this.onDisconnected()));this.on(a.EventName.received,(()=>this.lastDataIngressTm=Date.now()));this.on(a.EventName.error,((e,t)=>{if(t===a.ErrorCode.CONNECT_FAIL){this.onDisconnected()}}));this.on(a.EventName.currentTime,(()=>this.lastDataIngressTm=Date.now()))}get connectionState(){return this._connectionState}connect(e){var t,r;this.autoReconnectEnabled=true;this.fixedClientId=e;this.currentClientId=(r=e===undefined?(t=this.options)===null||t===void 0?void 0:t.clientId:e)!==null&&r!==void 0?r:Math.floor(Math.random()*100)+1;if(this._connectionState.getValue()===a.ConnectionState.Disconnected){this._connectionState.next(a.ConnectionState.Connecting);this.logger.info(u,`Connecting to TWS with client id ${this.currentClientId}`);super.connect(this.currentClientId)}return this}disconnect(){this.autoReconnectEnabled=false;if(this._connectionState.getValue()!==a.ConnectionState.Disconnected){this.logger.info(u,`Disconnecting client id ${this.currentClientId} from TWS.`);this._connectionState.next(a.ConnectionState.Disconnected);if(this.isConnected){super.disconnect()}}return this}onConnected(){if(this._connectionState.getValue()!==a.ConnectionState.Connected){this._connectionState.next(a.ConnectionState.Connected);this.logger.info(u,`Successfully connected to TWS with client id ${this.currentClientId}.`);this.stopReConnectTimer();this.runWatchdog()}}reConnect(){if(this._connectionState.getValue()!==a.ConnectionState.Disconnected||!this.autoReconnectEnabled){return}this._connectionState.next(a.ConnectionState.Connecting);this.currentClientId=this.fixedClientId!==undefined?this.fixedClientId:this.currentClientId+1;this.logger.info(u,`Re-Connecting to TWS with client id ${this.currentClientId}`);super.disconnect();super.connect(this.currentClientId)}runReConnectTimer(){if(!this.reconnectInterval||!this.autoReconnectEnabled){return}this.logger.info(u,`Re-Connecting to TWS in ${this.reconnectInterval/1e3}s...`);if(this.reconnectionTimeout){clearTimeout(this.reconnectionTimeout)}this.reconnectionTimeout=setTimeout((()=>{this.reConnect()}),this.reconnectInterval)}stopReConnectTimer(){if(this.reconnectionTimeout===undefined){return}clearTimeout(this.reconnectionTimeout);delete this.reconnectionTimeout}runWatchdog(){if(!this.watchdogInterval||this.connectionWatchdogTimeout){return}this.logger.debug(u,`Starting connection watchdog with ${this.watchdogInterval}ms interval.`);this.connectionWatchdogTimeout=setInterval((()=>{let e=false;if(this.lastDataIngressTm===undefined){e=true}else{const t=Date.now()-this.lastDataIngressTm;if(t>this.watchdogInterval){e=true}}if(e){this.logger.debug(u,"Connection watchdog timeout. Dropping connection.");this.onDisconnected()}this.reqCurrentTime()}),this.watchdogInterval/2)}stopWatchdog(){if(this.connectionWatchdogTimeout===undefined){return}clearInterval(this.connectionWatchdogTimeout);delete this.connectionWatchdogTimeout}onDisconnected(){this.logger.debug(u,"onDisconnected()");if(this.isConnected){this.logger.debug(u,`Disconnecting client id ${this.currentClientId} from TWS (state-sync).`);this.disconnect();this.autoReconnectEnabled=true}if(this._connectionState.getValue()!==a.ConnectionState.Disconnected){this._connectionState.next(a.ConnectionState.Disconnected)}this.stopWatchdog();this.runReConnectTimer()}}t.IBApiAutoConnection=IBApiAutoConnection},6698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r);i(t,e);return t};var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ConsoleLogger=void 0;const a=s(r(7579));const u=o(r(3837));const c=r(9597);class ConsoleLogger{constructor(){this._logLevel=c.LogLevel.SYSTEM}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}debug(e,t){if(this._logLevel>=c.LogLevel.DETAIL){console.debug(`[${(new Date).toLocaleTimeString()}] [DEBUG] [${e}]: `,t)}}info(e,t){if(this._logLevel>=c.LogLevel.INFO){console.log(`[${(new Date).toLocaleTimeString()}] [INFO] [${e}]: `,t)}}warn(e,t){if(this._logLevel>=c.LogLevel.WARN){let r=t;if(Array.isArray(t))r=t.map(a.default.yellow);console.warn(a.default.bold.yellow(`[${(new Date).toLocaleTimeString()}] [WARN] [${e}]: `),r)}}error(e,t){if(this._logLevel>=c.LogLevel.ERROR){let r=t;if(Array.isArray(t))r=t.map((e=>a.default.bold.red(u.inspect(e,{showHidden:false,depth:null}))));console.error(a.default.bold.red(`[${(new Date).toLocaleTimeString()}] [ERROR] [${e}]:`),r)}}}t.ConsoleLogger=ConsoleLogger},2209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNextItemListUpdate=void 0;class IBApiNextItemListUpdate{constructor(e,t,r,n){this.all=e;this.added=t;this.changed=r;this.removed=n}}t.IBApiNextItemListUpdate=IBApiNextItemListUpdate},5835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNextLogger=void 0;const n=r(9597);class IBApiNextLogger{constructor(e){this.logger=e;this._logLevel=n.LogLevel.SYSTEM}get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}debug(e,t){if(this._logLevel>=n.LogLevel.DETAIL){this.logger.debug(e,t)}}info(e,t){if(this._logLevel>=n.LogLevel.INFO){this.logger.info(e,t)}}warn(e,t){if(this._logLevel>=n.LogLevel.WARN){this.logger.warn(e,t)}}error(e,t){if(this._logLevel>=n.LogLevel.ERROR){this.logger.error(e,t)}}}t.IBApiNextLogger=IBApiNextLogger},394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNextMap=void 0;class IBApiNextMap extends Map{getOrAdd(e,t){let r=this.get(e);if(r===undefined){r=t(e);this.set(e,r)}return r}}t.IBApiNextMap=IBApiNextMap},7132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNextSubscriptionRegistry=void 0;const n=r(394);const i=r(6673);const o="IBApiNextSubscriptionRegistry";class RegistryEntry{constructor(e,t){this.eventName=e;this.callback=t;this.subscriptions=new Map;this.listener=(...e)=>{this.callback(this.subscriptions,...e)}}}class IBApiNextSubscriptionRegistry{constructor(e,t){this.api=e;this.apiNext=t;this.entires=new n.IBApiNextMap}register(e,t,r,n){const s=[];r.forEach((e=>{const t=e[0];const r=e[1];const n=this.entires.getOrAdd(t,(()=>{const e=new RegistryEntry(t,r);this.apiNext.logger.debug(o,`Add RegistryEntry for EventName.${t}`);this.api.addListener(t,e.listener);return e}));s.push(n)}));let a;if(n){s.forEach((e=>{const t=e.subscriptions.values();while(!a){const e=t.next();if(e.done){break}if(e.value.instanceId===n){a=e.value}}}))}if(!a){a=new i.IBApiNextSubscription(this.apiNext,(()=>{e(a.reqId)}),(()=>{if(t){t(a.reqId)}}),(()=>{s.forEach((e=>{e.subscriptions.delete(a.reqId);if(!e.subscriptions.size){this.api.removeListener(e.eventName,e.listener);this.apiNext.logger.debug(o,`Remove RegistryEntry for EventName.${e.eventName}.`);this.entires.delete(e.eventName)}}));this.apiNext.logger.debug(o,`Deleted IBApiNextSubscription for ${a.reqId}.`)}),n);s.forEach((e=>{this.apiNext.logger.debug(o,`Add IBApiNextSubscription on EventName.${e.eventName} for ${a.reqId}.`);e.subscriptions.set(a.reqId,a)}))}return a.createObservable()}dispatchError(e,t){this.entires.forEach((r=>{var n;(n=r.subscriptions.get(e))===null||n===void 0?void 0:n.error(t)}))}}t.IBApiNextSubscriptionRegistry=IBApiNextSubscriptionRegistry},6673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IBApiNextSubscription=void 0;const n=r(7054);const i=r(3953);const o=r(4963);class IBApiNextSubscription{constructor(e,t,r,i,o){this.api=e;this.requestFunction=t;this.cancelFunction=r;this.cleanupFunction=i;this.instanceId=o;this.observersCount=0;this.subject=new n.ReplaySubject(1);this.endEventReceived=false;this.reqId=e.nextReqId}get lastAllValue(){return this._lastAllValue}next(e){this._lastAllValue=e.all;this.subject.next(e)}complete(){this.subject.complete()}error(e){delete this._lastAllValue;this.subject.error(e);this.cancelTwsSubscription()}createObservable(){return new n.Observable((e=>{if(this.subject.hasError){this.subject=new n.ReplaySubject(1);this.reqId=this.api.nextReqId}const t=this.subject.pipe(o.map(((e,t)=>t===0?{all:e.all,added:e.all}:e))).subscribe(e);if(this.observersCount===0){this.requestTwsSubscription()}this.observersCount++;return()=>{t.unsubscribe();this.observersCount--;if(this.observersCount<=0){this.cancelTwsSubscription();this.cleanupFunction()}}}))}requestTwsSubscription(){if(!this.connectionState$){this.connectionState$=this.api.connectionState.subscribe((e=>{if(e===i.ConnectionState.Connected){delete this._lastAllValue;this.endEventReceived=false;this.requestFunction()}}))}}cancelTwsSubscription(){var e;(e=this.connectionState$)===null||e===void 0?void 0:e.unsubscribe();delete this.connectionState$;if(this.api.isConnected){this.cancelFunction()}}}t.IBApiNextSubscription=IBApiNextSubscription},8916:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Controller=void 0;const i=n(r(1607));const o=n(r(198));const s=r(8349);const a=n(r(6223));const u=r(1830);const c=r(1087);const l=r(1456);const d=r(4554);class Controller{constructor(e,t){var r,n;this.ib=e;this.options=t;this.commands=new i.default(Controller.execute,this);this.encoder=new l.Encoder(this);this.decoder=new c.Decoder(this);this.socket=new d.Socket(this,this.options);this.commands.pause();const s=(n=(r=t===null||t===void 0?void 0:t.maxReqPerSec)!==null&&r!==void 0?r:a.default.max_req_per_second)!==null&&n!==void 0?n:40;this.rateLimiter=o.default(s/10,1e3/10,(e=>{this.socket.send(e)}))}pause(){this.commands.pause()}resume(){this.commands.resume()}connect(e){this.executeConnect(e)}disconnect(){this.executeDisconnect()}schedule(e){this.commands.schedule((()=>e()))}send(...e){this.commands.run((()=>this.executeSend(e)))}processIngressQueue(){this.decoder.process()}onMessage(e){this.decoder.enqueueMessage(e)}onTokens(e){this.decoder.enqueueTokens(e)}get serverVersion(){return this.socket.serverVersion}get connected(){return this.socket.connected}disableUseV100Plus(){return this.socket.disableUseV100Plus()}sendMsg(...e){this.rateLimiter(e)}emitEvent(e,...t){this.ib.emit(e,...t);if(e!==s.EventName.connected&&e!==s.EventName.disconnected&&e!==s.EventName.error&&e!==s.EventName.received&&e!==s.EventName.sent&&e!==s.EventName.server){this.ib.emit(s.EventName.result,e,t)}this.ib.emit(s.EventName.all,e,t)}emitInfo(e,t){this.emitEvent(s.EventName.info,e,t)}emitError(e,t,r,n){if(n)e+=", advancedOrderReject: "+JSON.stringify(n);this.emitEvent(s.EventName.error,new Error(e),t,r)}static execute(e,t){e(t)}executeConnect(e){if(!this.socket.connected){this.socket.connect(e)}else{this.emitError("Cannot connect if already connected.",u.ErrorCode.CONNECT_FAIL,-1)}}executeDisconnect(){if(this.socket.connected){this.socket.disconnect()}else{this.emitError("Cannot disconnect if already disconnected.",u.ErrorCode.NOT_CONNECTED,-1)}}executeSend(e){if(this.socket.connected){this.socket.send(e)}else{this.emitError("Cannot send data when disconnected.",u.ErrorCode.NOT_CONNECTED,-1)}}}t.Controller=Controller},1087:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Decoder=t.UnderrunError=void 0;const i=r(8349);const o=n(r(2526));const s=n(r(3357));const a=r(1830);const u=r(8869);const c=n(r(4624));const l=n(r(8093));const d=n(r(1610));const h=n(r(6408));const f=n(r(2900));const p=n(r(2453));const _=r(5628);const v=r(8056);const E=r(4205);function validateOptionType(e){return Object.values(s.default).indexOf(e)!==-1?e:undefined}class UnderrunError extends Error{constructor(e="An underrun error has occurred"){super();this.message=e;this.stack=(new Error).stack;this.name="UnderrunError"}}t.UnderrunError=UnderrunError;class Decoder{constructor(e){this.callback=e;this.dataQueue=[];this.emitQueue=[]}enqueueMessage(e){this.dataQueue.push(undefined);this.dataQueue=this.dataQueue.concat(e);this.dataQueue.push(undefined)}enqueueTokens(e){this.dataQueue=this.dataQueue.concat(e)}processMsg(e){switch(e){case E.IN_MSG_ID.TICK_PRICE:return this.decodeMsg_TICK_PRICE();case E.IN_MSG_ID.TICK_SIZE:return this.decodeMsg_TICK_SIZE();case E.IN_MSG_ID.ORDER_STATUS:return this.decodeMsg_ORDER_STATUS();case E.IN_MSG_ID.ERR_MSG:return this.decodeMsg_ERR_MSG();case E.IN_MSG_ID.OPEN_ORDER:return this.decodeMsg_OPEN_ORDER();case E.IN_MSG_ID.ACCT_VALUE:return this.decodeMsg_ACCT_VALUE();case E.IN_MSG_ID.PORTFOLIO_VALUE:return this.decodeMsg_PORTFOLIO_VALUE();case E.IN_MSG_ID.ACCT_UPDATE_TIME:return this.decodeMsg_ACCT_UPDATE_TIME();case E.IN_MSG_ID.NEXT_VALID_ID:return this.decodeMsg_NEXT_VALID_ID();case E.IN_MSG_ID.CONTRACT_DATA:return this.decodeMsg_CONTRACT_DATA();case E.IN_MSG_ID.EXECUTION_DATA:return this.decodeMsg_EXECUTION_DATA();case E.IN_MSG_ID.MARKET_DEPTH:return this.decodeMsg_MARKET_DEPTH();case E.IN_MSG_ID.MARKET_DEPTH_L2:return this.decodeMsg_MARKET_DEPTH_L2();case E.IN_MSG_ID.NEWS_BULLETINS:return this.decodeMsg_NEWS_BULLETINS();case E.IN_MSG_ID.MANAGED_ACCTS:return this.decodeMsg_MANAGED_ACCTS();case E.IN_MSG_ID.RECEIVE_FA:return this.decodeMsg_RECEIVE_FA();case E.IN_MSG_ID.HISTORICAL_DATA:return this.decodeMsg_HISTORICAL_DATA();case E.IN_MSG_ID.BOND_CONTRACT_DATA:return this.decodeMsg_BOND_CONTRACT_DATA();case E.IN_MSG_ID.SCANNER_PARAMETERS:return this.decodeMsg_SCANNER_PARAMETERS();case E.IN_MSG_ID.SCANNER_DATA:return this.decodeMsg_SCANNER_DATA();case E.IN_MSG_ID.TICK_OPTION_COMPUTATION:return this.decodeMsg_TICK_OPTION_COMPUTATION();case E.IN_MSG_ID.TICK_GENERIC:return this.decodeMsg_TICK_GENERIC();case E.IN_MSG_ID.TICK_STRING:return this.decodeMsg_TICK_STRING();case E.IN_MSG_ID.TICK_EFP:return this.decodeMsg_TICK_EFP();case E.IN_MSG_ID.CURRENT_TIME:return this.decodeMsg_CURRENT_TIME();case E.IN_MSG_ID.REAL_TIME_BARS:return this.decodeMsg_REAL_TIME_BARS();case E.IN_MSG_ID.FUNDAMENTAL_DATA:return this.decodeMsg_FUNDAMENTAL_DATA();case E.IN_MSG_ID.CONTRACT_DATA_END:return this.decodeMsg_CONTRACT_DATA_END();case E.IN_MSG_ID.OPEN_ORDER_END:return this.decodeMsg_OPEN_ORDER_END();case E.IN_MSG_ID.ACCT_DOWNLOAD_END:return this.decodeMsg_ACCT_DOWNLOAD_END();case E.IN_MSG_ID.EXECUTION_DATA_END:return this.decodeMsg_EXECUTION_DATA_END();case E.IN_MSG_ID.DELTA_NEUTRAL_VALIDATION:return this.decodeMsg_DELTA_NEUTRAL_VALIDATION();case E.IN_MSG_ID.TICK_SNAPSHOT_END:return this.decodeMsg_TICK_SNAPSHOT_END();case E.IN_MSG_ID.MARKET_DATA_TYPE:return this.decodeMsg_MARKET_DATA_TYPE();case E.IN_MSG_ID.COMMISSION_REPORT:return this.decodeMsg_COMMISSION_REPORT();case E.IN_MSG_ID.POSITION:return this.decodeMsg_POSITION();case E.IN_MSG_ID.POSITION_END:return this.decodeMsg_POSITION_END();case E.IN_MSG_ID.ACCOUNT_SUMMARY:return this.decodeMsg_ACCOUNT_SUMMARY();case E.IN_MSG_ID.ACCOUNT_SUMMARY_END:return this.decodeMsg_ACCOUNT_SUMMARY_END();case E.IN_MSG_ID.DISPLAY_GROUP_LIST:return this.decodeMsg_DISPLAY_GROUP_LIST();case E.IN_MSG_ID.DISPLAY_GROUP_UPDATED:return this.decodeMsg_DISPLAY_GROUP_UPDATED();case E.IN_MSG_ID.POSITION_MULTI:return this.decodeMsg_POSITION_MULTI();case E.IN_MSG_ID.POSITION_MULTI_END:return this.decodeMsg_POSITION_MULTI_END();case E.IN_MSG_ID.ACCOUNT_UPDATE_MULTI:return this.decodeMsg_ACCOUNT_UPDATE_MULTI();case E.IN_MSG_ID.ACCOUNT_UPDATE_MULTI_END:return this.decodeMsg_ACCOUNT_UPDATE_MULTI_END();case E.IN_MSG_ID.SECURITY_DEFINITION_OPTION_PARAMETER:return this.decodeMsg_SECURITY_DEFINITION_OPTION_PARAMETER();case E.IN_MSG_ID.SECURITY_DEFINITION_OPTION_PARAMETER_END:return this.decodeMsg_SECURITY_DEFINITION_OPTION_PARAMETER_END();case E.IN_MSG_ID.SOFT_DOLLAR_TIERS:return this.decodeMsg_SOFT_DOLLAR_TIERS();case E.IN_MSG_ID.FAMILY_CODES:return this.decodeMsg_FAMILY_CODES();case E.IN_MSG_ID.SYMBOL_SAMPLES:return this.decodeMsg_SYMBOL_SAMPLES();case E.IN_MSG_ID.MKT_DEPTH_EXCHANGES:return this.decodeMsg_MKT_DEPTH_EXCHANGES();case E.IN_MSG_ID.TICK_REQ_PARAMS:return this.decodeMsg_TICK_REQ_PARAMS();case E.IN_MSG_ID.SMART_COMPONENTS:return this.decodeMsg_SMART_COMPONENTS();case E.IN_MSG_ID.NEWS_ARTICLE:return this.decodeMsg_NEWS_ARTICLE();case E.IN_MSG_ID.TICK_NEWS:return this.decodeMsg_TICK_NEWS();case E.IN_MSG_ID.NEWS_PROVIDERS:return this.decodeMsg_NEWS_PROVIDERS();case E.IN_MSG_ID.HISTORICAL_NEWS:return this.decodeMsg_HISTORICAL_NEWS();case E.IN_MSG_ID.HISTORICAL_NEWS_END:return this.decodeMsg_HISTORICAL_NEWS_END();case E.IN_MSG_ID.HEAD_TIMESTAMP:return this.decodeMsg_HEAD_TIMESTAMP();case E.IN_MSG_ID.HISTOGRAM_DATA:return this.decodeMsg_HISTOGRAM_DATA();case E.IN_MSG_ID.HISTORICAL_DATA_UPDATE:return this.decodeMsg_HISTORICAL_DATA_UPDATE();case E.IN_MSG_ID.REROUTE_MKT_DATA:return this.decodeMsg_REROUTE_MKT_DATA();case E.IN_MSG_ID.REROUTE_MKT_DEPTH:return this.decodeMsg_REROUTE_MKT_DEPTH();case E.IN_MSG_ID.MARKET_RULE:return this.decodeMsg_MARKET_RULE();case E.IN_MSG_ID.PNL:return this.decodeMsg_PNL();case E.IN_MSG_ID.PNL_SINGLE:return this.decodeMsg_PNL_SINGLE();case E.IN_MSG_ID.HISTORICAL_TICKS:return this.decodeMsg_HISTORICAL_TICKS();case E.IN_MSG_ID.HISTORICAL_TICKS_BID_ASK:return this.decodeMsg_HISTORICAL_TICKS_BID_ASK();case E.IN_MSG_ID.HISTORICAL_TICKS_LAST:return this.decodeMsg_HISTORICAL_TICKS_LAST();case E.IN_MSG_ID.TICK_BY_TICK:return this.decodeMsg_TICK_BY_TICK();case E.IN_MSG_ID.ORDER_BOUND:return this.decodeMsg_ORDER_BOUND();case E.IN_MSG_ID.COMPLETED_ORDER:return this.decodeMsg_COMPLETED_ORDER();case E.IN_MSG_ID.COMPLETED_ORDERS_END:return this.decodeMsg_COMPLETED_ORDERS_END();case E.IN_MSG_ID.REPLACE_FA_END:return this.decodeMsg_REPLACE_FA_END();case E.IN_MSG_ID.WSH_META_DATA:return this.decodeMsg_WSH_META_DATA();case E.IN_MSG_ID.WSH_EVENT_DATA:return this.decodeMsg_WSH_EVENT_DATA();case E.IN_MSG_ID.HISTORICAL_SCHEDULE:return this.decodeMsg_HISTORICAL_SCHEDULE();default:this.callback.emitError(`No parser implementation found for token: ${E.IN_MSG_ID[e]} (${e}).`,a.ErrorCode.UNKNOWN_ID,-1)}}process(){while(true){if(!this.dataQueue.length){break}this.emitQueue=[];let e=false;if(this.dataQueue[0]===undefined){e=true;this.dataQueue.shift()}let t=E.IN_MSG_ID.UNDEFINED;try{t=this.readInt();this.processMsg(t);if(e){if(this.dataQueue[0]!==undefined){this.callback.emitError(`Decoding error on ${E.IN_MSG_ID[t]}: unprocessed data left on queue (${JSON.stringify(this.dataQueue)}). Please report to https://github.com/stoqey/ib`,a.ErrorCode.UNKNOWN_ID,-1)}this.drainQueue()}}catch(r){if(r.name!=="UnderrunError"){throw r}if(e){this.callback.emitError(`Underrun error on ${E.IN_MSG_ID[t]}: ${r.message} Please report to https://github.com/stoqey/ib`,a.ErrorCode.UNKNOWN_ID,-1)}this.drainQueue()}const r=this.emitQueue;this.emitQueue=[];r.forEach((e=>this.callback.emitEvent(e.name,...e.args)))}}get serverVersion(){return this.callback.serverVersion}decodeUnicodeEscapedString(e){let t=e;try{while(true){const e=t.indexOf("\\u");if(e==-1||t.length-e<6){break}const r=t.substring(e,e+6);const n=parseInt(r.replace("\\u",""),16);t=t.replace(r,String.fromCharCode(n))}}catch(e){}return t}readStr(){if(this.dataQueue.length===0){throw new UnderrunError}const e=this.dataQueue.shift();if(e===undefined){throw new UnderrunError("End of message reached.")}return e}readBool(){return!!parseInt(this.readStr(),10)}readDouble(){const e=this.readStr();if(!e||e===""){return 0}const t=parseFloat(e);return t===Number.MAX_VALUE?undefined:t}readDoubleOrUndefined(){const e=this.readStr();if(!e||e===""){return undefined}const t=parseFloat(e);return t===Number.MAX_VALUE?undefined:t}readInt(){const e=this.readStr();if(!e||e===""){return 0}const t=parseInt(e,10);return t===Number.MAX_VALUE?undefined:t}readIntMax(){const e=this.readStr();if(!e||e===""){return Number.MAX_VALUE}return parseInt(e,10)}readIntOrUndefined(){const e=this.readStr();if(!e||e===""){return undefined}const t=parseInt(e,10);return t===Number.MAX_VALUE?undefined:t}drainQueue(){while(this.dataQueue.length&&this.dataQueue[0]!==undefined){this.dataQueue.shift()}if(this.dataQueue.length){this.dataQueue.shift()}}emit(e,...t){this.emitQueue.push({name:e,args:t})}decodeMsg_TICK_PRICE(){const e=this.readInt();const t=this.readInt();const r=this.readInt();const n=this.readDouble();let o=undefined;if(e>=2){o=this.readInt()}let s=undefined;if(e>=3){s=this.readBool()}this.emit(i.EventName.tickPrice,t,r,n,s);let a=undefined;if(e>=2){switch(r){case u.TickType.BID:a=u.TickType.BID_SIZE;break;case u.TickType.ASK:a=u.TickType.ASK_SIZE;break;case u.TickType.LAST:a=u.TickType.LAST_SIZE;break;case u.TickType.DELAYED_BID:a=u.TickType.DELAYED_BID_SIZE;break;case u.TickType.DELAYED_ASK:a=u.TickType.DELAYED_ASK_SIZE;break;case u.TickType.DELAYED_LAST:a=u.TickType.DELAYED_LAST_SIZE;break}}if(a){this.emit(i.EventName.tickSize,t,a,o)}}decodeMsg_TICK_SIZE(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readInt();this.emit(i.EventName.tickSize,e,t,r)}decodeMsg_ORDER_STATUS(){const e=this.serverVersion>=o.default.MARKET_CAP_PRICE?Number.MAX_SAFE_INTEGER:this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readInt();const s=this.readInt();const a=this.readDouble();let u=undefined;if(e>=2){u=this.readInt()}let c=undefined;if(e>=3){c=this.readInt()}let l=undefined;if(e>=4){l=this.readDouble()}let d=undefined;if(e>=5){d=this.readInt()}let h=undefined;if(e>=6){h=this.readStr()}let f=undefined;if(this.serverVersion>=o.default.MARKET_CAP_PRICE){f=this.readDouble()}this.emit(i.EventName.orderStatus,t,r,n,s,a,u,c,l,d,h,f)}decodeMsg_ERR_MSG(){const e=this.readInt();if(e<2){const e=this.readStr();this.callback.emitError(e,-1,-1)}else{const e=this.readInt();const t=this.readInt();let r=this.readStr();if(this.serverVersion>=o.default.ENCODE_MSG_ASCII7){r=this.decodeUnicodeEscapedString(r)}let n;if(this.serverVersion>=o.default.ADVANCED_ORDER_REJECT){const e=this.readStr();if(e)n=JSON.parse(this.decodeUnicodeEscapedString(e))}if(e===-1){this.callback.emitInfo(r,t)}else{this.callback.emitError(r,t,e,n)}}}decodeMsg_OPEN_ORDER(){const e=this.serverVersion<o.default.ORDER_CONTAINER?this.readInt():this.serverVersion;const t={};const r={};const n={};const s=new OrderDecoder(this,t,r,n,e,this.serverVersion);s.readOrderId();s.readContractFields();s.readAction();s.readTotalQuantity();s.readOrderType();s.readLmtPrice();s.readAuxPrice();s.readTIF();s.readOcaGroup();s.readAccount();s.readOpenClose();s.readOrigin();s.readOrderRef();s.readClientId();s.readPermId();s.readOutsideRth();s.readHidden();s.readDiscretionaryAmount();s.readGoodAfterTime();s.skipSharesAllocation();s.readFAParams();s.readModelCode();s.readGoodTillDate();s.readRule80A();s.readPercentOffset();s.readSettlingFirm();s.readShortSaleParams();s.readAuctionStrategy();s.readBoxOrderParams();s.readPegToStkOrVolOrderParams();s.readDisplaySize();s.readOldStyleOutsideRth();s.readBlockOrder();s.readSweepToFill();s.readAllOrNone();s.readMinQty();s.readOcaType();s.readETradeOnly();s.readFirmQuoteOnly();s.readNbboPriceCap();s.readParentId();s.readTriggerMethod();s.readVolOrderParams(true);s.readTrailParams();s.readBasisPoints();s.readComboLegs();s.readSmartComboRoutingParams();s.readScaleOrderParams();s.readHedgeParams();s.readOptOutSmartRouting();s.readClearingParams();s.readNotHeld();s.readDeltaNeutral();s.readAlgoParams();s.readSolicited();s.readWhatIfInfoAndCommission();s.readVolRandomizeFlags();s.readPegToBenchParams();s.readConditions();s.readAdjustedOrderParams();s.readSoftDollarTier();s.readCashQty();s.readDontUseAutoPriceForHedge();s.readIsOmsContainer();s.readDiscretionaryUpToLimitPrice();s.readUsePriceMgmtAlgo();s.readDuration();s.readPostToAts();s.readAutoCancelParent(o.default.AUTO_CANCEL_PARENT);this.emit(i.EventName.openOrder,r.orderId,t,r,n)}decodeMsg_ACCT_VALUE(){this.readInt();const e=this.readStr();const t=this.readStr();const r=this.readStr();const n=this.readStr();this.emit(i.EventName.updateAccountValue,e,t,r,n)}decodeMsg_PORTFOLIO_VALUE(){const e=this.readInt();const t={};if(e>=6){t.conId=this.readInt()}t.symbol=this.readStr();t.secType=this.readStr();t.lastTradeDateOrContractMonth=this.readStr();t.strike=this.readDouble();t.right=validateOptionType(this.readStr());if(e>=7){t.multiplier=this.readInt();t.primaryExch=this.readStr()}t.currency=this.readStr();if(e>=2){t.localSymbol=this.readStr()}if(e>=8){t.tradingClass=this.readStr()}let r;if(this.serverVersion>=o.default.FRACTIONAL_POSITIONS){r=this.readDouble()}else{r=this.readInt()}const n=this.readDouble();const s=this.readDouble();let a=undefined;let u=undefined;let c=undefined;if(e>=3){a=this.readDouble();u=this.readDouble();c=this.readDouble()}let l=undefined;if(e>=4){l=this.readStr()}if(e===6&&this.serverVersion===39){t.primaryExch=this.readStr()}this.emit(i.EventName.updatePortfolio,t,r,n,s,a,u,c,l)}decodeMsg_ACCT_UPDATE_TIME(){this.readInt();const e=this.readStr();this.emit(i.EventName.updateAccountTime,e)}decodeMsg_NEXT_VALID_ID(){this.readInt();const e=this.readInt();this.emit(i.EventName.nextValidId,e)}decodeMsg_CONTRACT_DATA(){let e=8;if(this.serverVersion<o.default.SIZE_RULES){e=this.readInt()}let t=-1;if(e>=3){t=this.readInt()}const r={contract:{}};r.contract.symbol=this.readStr();r.contract.secType=this.readStr();this.readLastTradeDate(r,false);r.contract.strike=this.readDouble();r.contract.right=validateOptionType(this.readStr());r.contract.exchange=this.readStr();r.contract.currency=this.readStr();r.contract.localSymbol=this.readStr();r.marketName=this.readStr();r.contract.tradingClass=this.readStr();r.contract.conId=this.readInt();r.minTick=this.readDouble();if(this.serverVersion>=o.default.MD_SIZE_MULTIPLIER&&this.serverVersion<o.default.SIZE_RULES){this.readInt()}r.contract.multiplier=this.readInt();r.orderTypes=this.readStr();r.validExchanges=this.readStr();if(e>=2){r.priceMagnifier=this.readInt()}if(e>=4){r.underConId=this.readInt()}if(e>=5){r.longName=this.readStr();r.contract.primaryExch=this.readStr();if(this.serverVersion>=o.default.ENCODE_MSG_ASCII7){r.longName=this.decodeUnicodeEscapedString(r.longName)}}if(e>=6){r.contractMonth=this.readStr();r.industry=this.readStr();r.category=this.readStr();r.subcategory=this.readStr();r.timeZoneId=this.readStr();r.tradingHours=this.readStr();r.liquidHours=this.readStr()}if(e>=8){r.evRule=this.readStr();r.evMultiplier=this.readDouble()}if(e>=7){const e=this.readInt();if(e>0){r.secIdList=[];for(let t=0;t<e;++t){const e={tag:this.readStr(),value:this.readStr()};r.secIdList.push(e)}}if(this.serverVersion>=o.default.AGG_GROUP){r.aggGroup=this.readInt()}if(this.serverVersion>=o.default.UNDERLYING_INFO){r.underSymbol=this.readStr();r.underSecType=this.readStr()}if(this.serverVersion>=o.default.MARKET_RULES){r.marketRuleIds=this.readStr()}if(this.serverVersion>=o.default.REAL_EXPIRATION_DATE){r.realExpirationDate=this.readStr()}if(this.serverVersion>=o.default.STOCK_TYPE){r.stockType=this.readStr()}if(this.serverVersion>=o.default.FRACTIONAL_SIZE_SUPPORT&&this.serverVersion<o.default.SIZE_RULES){this.readDouble()}if(this.serverVersion>=o.default.SIZE_RULES){r.minSize=this.readDouble();r.sizeIncrement=this.readDouble();r.suggestedSizeIncrement=this.readDouble()}}this.emit(i.EventName.contractDetails,t,r)}decodeMsg_EXECUTION_DATA(){let e=this.serverVersion;if(e<o.default.LAST_LIQUIDITY){e=this.readInt()}let t=-1;if(e>=7){t=this.readInt()}const r=this.readInt();const n={};if(e>=5){n.conId=this.readInt()}n.symbol=this.readStr();n.secType=this.readStr();n.lastTradeDateOrContractMonth=this.readStr();n.strike=this.readDouble();n.right=validateOptionType(this.readStr());if(e>=9){n.multiplier=this.readInt()}n.exchange=this.readStr();n.currency=this.readStr();n.localSymbol=this.readStr();if(e>=10){n.tradingClass=this.readStr()}const s={};s.orderId=r;s.execId=this.readStr();s.time=this.readStr();s.acctNumber=this.readStr();s.exchange=this.readStr();s.side=this.readStr();s.shares=this.readInt();s.price=this.readDouble();if(e>=2){s.permId=this.readInt()}if(e>=3){s.clientId=this.readInt()}if(e>=4){s.liquidation=this.readInt()}if(e>=6){s.cumQty=this.readInt();s.avgPrice=this.readDouble()}if(e>=8){s.orderRef=this.readStr()}if(e>=9){s.evRule=this.readStr();s.evMultiplier=this.readDouble()}if(this.serverVersion>=o.default.MODELS_SUPPORT){s.modelCode=this.readStr()}if(this.serverVersion>=o.default.LAST_LIQUIDITY){s.lastLiquidity={value:this.readInt()}}this.emit(i.EventName.execDetails,t,n,s)}decodeMsg_MARKET_DEPTH(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readInt();const n=this.readInt();const o=this.readDouble();const s=this.readInt();this.emit(i.EventName.updateMktDepth,e,t,r,n,o,s)}decodeMsg_MARKET_DEPTH_L2(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readInt();const s=this.readInt();const a=this.readDouble();const u=this.readInt();let c=undefined;if(this.serverVersion>=o.default.SMART_DEPTH){c=this.readBool()}this.emit(i.EventName.updateMktDepthL2,e,t,r,n,s,a,u,c)}decodeMsg_NEWS_BULLETINS(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readStr();this.emit(i.EventName.updateNewsBulletin,e,t,r,n)}decodeMsg_MANAGED_ACCTS(){this.readInt();const e=this.readStr();this.emit(i.EventName.managedAccounts,e)}decodeMsg_RECEIVE_FA(){this.readInt();const e=this.readInt();const t=this.readStr();this.emit(i.EventName.receiveFA,e,t)}decodeMsg_HISTORICAL_DATA(){let e=Number.MAX_SAFE_INTEGER;if(this.serverVersion<o.default.SYNT_REALTIME_BARS){e=this.readInt()}const t=this.readInt();let r="finished";let n="";let s="";if(e>=2){n=this.readStr();s=this.readStr();r+="-"+n+"-"+s}let a=this.readInt();while(a--){const r=this.readStr();const n=this.readDouble();const s=this.readDouble();const a=this.readDouble();const u=this.readDouble();const c=this.readInt();const l=this.readDouble();let d=undefined;if(this.serverVersion<o.default.SYNT_REALTIME_BARS){d=this.readBool()}let h=undefined;if(e>=3){h=this.readInt()}this.emit(i.EventName.historicalData,t,r,n,s,a,u,c,h,l,d)}this.emit(i.EventName.historicalData,t,r,-1,-1,-1,-1,-1,-1,-1,false)}decodeMsg_HISTORICAL_DATA_UPDATE(){const e=this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readDouble();const o=this.readDouble();const s=this.readDouble();const a=this.readDouble();const u=this.readDouble();const c=this.readInt();this.emit(i.EventName.historicalDataUpdate,e,r,n,s,a,o,c,t,u)}decodeMsg_REROUTE_MKT_DATA(){const e=this.readInt();const t=this.readInt();const r=this.readStr();this.emit(i.EventName.rerouteMktDataReq,e,t,r)}decodeMsg_REROUTE_MKT_DEPTH(){const e=this.readInt();const t=this.readInt();const r=this.readStr();this.emit(i.EventName.rerouteMktDepthReq,e,t,r)}decodeMsg_MARKET_RULE(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){r[e]={lowEdge:this.readDouble(),increment:this.readDouble()}}this.emit(i.EventName.marketRule,e,r)}decodeMsg_BOND_CONTRACT_DATA(){let e=6;if(this.serverVersion<o.default.SIZE_RULES){e=this.readInt()}let t=-1;if(e>=3){t=this.readInt()}const r={contract:{}};r.contract.symbol=this.readStr();r.contract.secType=this.readStr();r.cusip=this.readStr();r.coupon=this.readDouble();this.readLastTradeDate(r,true);r.issueDate=this.readStr();r.ratings=this.readStr();r.bondType=this.readStr();r.couponType=this.readStr();r.convertible=this.readBool();r.callable=this.readBool();r.putable=this.readBool();r.descAppend=this.readStr();r.contract.exchange=this.readStr();r.contract.currency=this.readStr();r.marketName=this.readStr();r.contract.tradingClass=this.readStr();r.contract.conId=this.readInt();r.minTick=this.readDouble();if(this.serverVersion>=o.default.MD_SIZE_MULTIPLIER&&this.serverVersion<o.default.SIZE_RULES){this.readInt()}r.orderTypes=this.readStr();r.validExchanges=this.readStr();if(e>=2){r.nextOptionDate=this.readStr();r.nextOptionType=this.readStr();r.nextOptionPartial=this.readBool();r.notes=this.readStr()}if(e>=4){r.longName=this.readStr()}if(e>=6){r.evRule=this.readStr();r.evMultiplier=this.readDouble()}if(e>=5){let e=this.readInt();if(e>0){r.secIdList=[];while(e--){const e={tag:this.readStr(),value:this.readStr()};r.secIdList.push(e)}}}if(this.serverVersion>=o.default.AGG_GROUP){r.aggGroup=this.readInt()}if(this.serverVersion>=o.default.MARKET_RULES){r.marketRuleIds=this.readStr()}if(this.serverVersion>=o.default.SIZE_RULES){r.minSize=this.readDouble();r.sizeIncrement=this.readDouble();r.suggestedSizeIncrement=this.readDouble()}this.emit(i.EventName.bondContractDetails,t,r)}decodeMsg_SCANNER_PARAMETERS(){this.readInt();const e=this.readStr();this.emit(i.EventName.scannerParameters,e)}decodeMsg_SCANNER_DATA(){const e=this.readInt();const t=this.readInt();let r=this.readInt();while(r--){const r={contract:{}};const n=this.readInt();if(e>=3){r.contract.conId=this.readInt()}r.contract.symbol=this.readStr();r.contract.secType=this.readStr();this.readLastTradeDate(r,false);r.contract.strike=this.readDouble();r.contract.right=validateOptionType(this.readStr());r.contract.exchange=this.readStr();r.contract.currency=this.readStr();r.contract.localSymbol=this.readStr();r.marketName=this.readStr();r.contract.tradingClass=this.readStr();const o=this.readStr();const s=this.readStr();const a=this.readStr();let u=undefined;if(e>=2){u=this.readStr()}this.emit(i.EventName.scannerData,t,n,r,o,s,a,u)}this.emit(i.EventName.scannerDataEnd,t)}decodeMsg_TICK_OPTION_COMPUTATION(){let e;if(this.serverVersion>=o.default.PRICE_BASED_VOLATILITY)e=Number.MAX_VALUE;else e=this.readInt();const t=this.readInt();const r=this.readInt();let n=Number.MAX_VALUE;if(this.serverVersion>=o.default.PRICE_BASED_VOLATILITY){n=this.readInt()}let s=this.readDouble();if(s==-1){s=undefined}let a=this.readDouble();if(a==-2){a=undefined}let c=undefined;let l=undefined;let d=undefined;let h=undefined;let f=undefined;let p=undefined;if(e>=6||r===u.TickType.MODEL_OPTION||r===u.TickType.DELAYED_MODEL_OPTION){c=this.readDouble();if(c==-1){c=undefined}l=this.readDouble();if(l==-1){l=undefined}}if(e>=6){d=this.readDouble();if(d==-2){d=undefined}h=this.readDouble();if(h==-2){h=undefined}f=this.readDouble();if(f==-2){f=undefined}p=this.readDouble();if(p==-1){p=undefined}}this.emit(i.EventName.tickOptionComputation,t,r,n,s,a,c,l,d,h,f,p)}decodeMsg_TICK_GENERIC(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readDouble();this.emit(i.EventName.tickGeneric,e,t,r)}decodeMsg_TICK_STRING(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readStr();this.emit(i.EventName.tickString,e,t,r)}decodeMsg_TICK_EFP(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readDouble();const n=this.readStr();const o=this.readDouble();const s=this.readInt();const a=this.readStr();const u=this.readDouble();const c=this.readDouble();this.emit(i.EventName.tickEFP,e,t,r,n,o,s,a,u,c)}decodeMsg_CURRENT_TIME(){this.readInt();const e=this.readInt();this.emit(i.EventName.currentTime,e)}decodeMsg_REAL_TIME_BARS(){this.readInt();const e=this.readInt();const t=this.readInt();const r=this.readDouble();const n=this.readDouble();const o=this.readDouble();const s=this.readDouble();const a=this.readInt();const u=this.readDouble();const c=this.readInt();this.emit(i.EventName.realtimeBar,e,t,r,n,o,s,a,u,c)}decodeMsg_FUNDAMENTAL_DATA(){this.readInt();const e=this.readInt();const t=this.readStr();this.emit(i.EventName.fundamentalData,e,t)}decodeMsg_CONTRACT_DATA_END(){this.readInt();const e=this.readInt();this.emit(i.EventName.contractDetailsEnd,e)}decodeMsg_OPEN_ORDER_END(){this.readInt();this.emit(i.EventName.openOrderEnd)}decodeMsg_ACCT_DOWNLOAD_END(){this.readInt();const e=this.readStr();this.emit(i.EventName.accountDownloadEnd,e)}decodeMsg_EXECUTION_DATA_END(){this.readInt();const e=this.readInt();this.emit(i.EventName.execDetailsEnd,e)}decodeMsg_DELTA_NEUTRAL_VALIDATION(){this.readInt();const e=this.readInt();const t={conId:this.readInt(),delta:this.readDouble(),price:this.readDouble()};this.emit(i.EventName.deltaNeutralValidation,e,t)}decodeMsg_TICK_SNAPSHOT_END(){this.readInt();const e=this.readInt();this.emit(i.EventName.tickSnapshotEnd,e)}decodeMsg_MARKET_DATA_TYPE(){this.readInt();const e=this.readInt();const t=this.readInt();this.emit(i.EventName.marketDataType,e,t)}decodeMsg_COMMISSION_REPORT(){this.readInt();const e={};e.execId=this.readStr();e.commission=this.readDouble();e.currency=this.readStr();e.realizedPNL=this.readDouble();e.yield=this.readDouble();e.yieldRedemptionDate=this.readInt();this.emit(i.EventName.commissionReport,e)}decodeMsg_POSITION(){const e=this.readInt();const t=this.readStr();const r={};r.conId=this.readInt();r.symbol=this.readStr();r.secType=this.readStr();r.lastTradeDateOrContractMonth=this.readStr();r.strike=this.readDouble();r.right=validateOptionType(this.readStr());r.multiplier=this.readInt();r.exchange=this.readStr();r.currency=this.readStr();r.localSymbol=this.readStr();if(e>=2){r.tradingClass=this.readStr()}const n=this.serverVersion>=o.default.FRACTIONAL_POSITIONS?this.readDouble():this.readInt();let s=0;if(e>=3){s=this.readDouble()}this.emit(i.EventName.position,t,r,n,s)}decodeMsg_POSITION_END(){this.readInt();this.emit(i.EventName.positionEnd)}decodeMsg_ACCOUNT_SUMMARY(){this.readInt();const e=this.readInt();const t=this.readStr();const r=this.readStr();const n=this.readStr();const o=this.readStr();this.emit(i.EventName.accountSummary,e,t,r,n,o)}decodeMsg_ACCOUNT_SUMMARY_END(){this.readInt();const e=this.readInt();this.emit(i.EventName.accountSummaryEnd,e)}decodeMsg_DISPLAY_GROUP_LIST(){this.readInt();const e=this.readInt();const t=this.readStr();this.emit(i.EventName.displayGroupList,e,t)}decodeMsg_DISPLAY_GROUP_UPDATED(){this.readInt();const e=this.readInt();const t=this.readStr();this.emit(i.EventName.displayGroupUpdated,e,t)}decodeMsg_POSITION_MULTI(){this.readInt();const e=this.readInt();const t=this.readStr();const r={};r.conId=this.readInt();r.symbol=this.readStr();r.secType=this.readStr();r.lastTradeDateOrContractMonth=this.readStr();r.strike=this.readDouble();r.right=validateOptionType(this.readStr());r.multiplier=this.readInt();r.exchange=this.readStr();r.currency=this.readStr();r.localSymbol=this.readStr();r.tradingClass=this.readStr();const n=this.readInt();const o=this.readDouble();const s=this.readStr();this.emit(i.EventName.positionMulti,e,t,s,r,n,o)}decodeMsg_POSITION_MULTI_END(){this.readInt();const e=this.readInt();this.emit(i.EventName.positionMultiEnd,e)}decodeMsg_ACCOUNT_UPDATE_MULTI(){this.readInt();const e=this.readInt();const t=this.readStr();const r=this.readStr();const n=this.readStr();const o=this.readStr();const s=this.readStr();this.emit(i.EventName.accountUpdateMulti,e,t,r,n,o,s)}decodeMsg_ACCOUNT_UPDATE_MULTI_END(){this.readInt();const e=this.readStr();this.emit(i.EventName.accountUpdateMultiEnd,e)}decodeMsg_SECURITY_DEFINITION_OPTION_PARAMETER(){const e=this.readInt();const t=this.readStr();const r=this.readInt();const n=this.readStr();const o=this.readStr();const s=this.readInt();const a=[];for(let e=0;e<s;e++){a.push(this.readStr())}const u=this.readInt();const c=[];for(let e=0;e<u;e++){c.push(this.readDouble())}this.emit(i.EventName.securityDefinitionOptionParameter,e,t,r,n,o,a,c)}decodeMsg_SECURITY_DEFINITION_OPTION_PARAMETER_END(){const e=this.readInt();this.emit(i.EventName.securityDefinitionOptionParameterEnd,e)}decodeMsg_SOFT_DOLLAR_TIERS(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){r[e]={name:this.readStr(),value:this.readStr(),displayName:this.readStr()}}this.emit(i.EventName.softDollarTiers,e,r)}decodeMsg_FAMILY_CODES(){const e=this.readInt();const t=new Array(e);for(let r=0;r<e;r++){t[r]={accountID:this.readStr(),familyCode:this.readStr()}}this.emit(i.EventName.familyCodes,t)}decodeMsg_SYMBOL_SAMPLES(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){const t={conId:this.readInt(),symbol:this.readStr(),secType:this.readStr(),primaryExch:this.readStr(),currency:this.readStr()};const n=this.readInt();const i=new Array(n);for(let e=0;e<n;e++){i[e]=this.readStr()}r[e]={contract:t,derivativeSecTypes:i}}this.emit(i.EventName.symbolSamples,e,r)}decodeMsg_MKT_DEPTH_EXCHANGES(){const e=this.readInt();const t=new Array(e);for(let r=0;r<e;r++){if(this.serverVersion>=o.default.SERVICE_DATA_TYPE){t[r]={exchange:this.readStr(),secType:this.readStr(),listingExch:this.readStr(),serviceDataType:this.readStr(),aggGroup:this.readIntOrUndefined()}}else{t[r]={exchange:this.readStr(),secType:this.readStr(),listingExch:"",serviceDataType:this.readBool()?"Deep2":"Deep",aggGroup:undefined}}}this.emit(i.EventName.mktDepthExchanges,t)}decodeMsg_TICK_REQ_PARAMS(){const e=this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readInt();this.emit(i.EventName.tickReqParams,e,t,r,n)}decodeMsg_SMART_COMPONENTS(){const e=this.readInt();const t=this.readInt();const r=new Map;for(let e=0;e<t;e++){const e=this.readInt();const t=this.readStr();const n=this.readStr();r.set(e,[t,n])}this.emit(i.EventName.smartComponents,e,r)}decodeMsg_NEWS_ARTICLE(){const e=this.readInt();const t=this.readInt();const r=this.readStr();this.emit(i.EventName.newsArticle,e,t,r)}decodeMsg_TICK_NEWS(){const e=this.readInt();const t=this.readInt();const r=this.readStr();const n=this.readStr();const o=this.readStr();const s=this.readStr();this.emit(i.EventName.tickNews,e,t,r,n,o,s)}decodeMsg_NEWS_PROVIDERS(){const e=this.readInt();const t=new Array(e);for(let r=0;r<e;r++){t[r]={providerCode:this.readStr(),providerName:this.readStr()}}this.emit(i.EventName.newsProviders,t)}decodeMsg_HISTORICAL_NEWS(){const e=this.readInt();const t=this.readStr();const r=this.readStr();const n=this.readStr();const o=this.readStr();this.emit(i.EventName.historicalNews,e,t,r,n,o)}decodeMsg_HISTORICAL_NEWS_END(){const e=this.readInt();const t=this.readBool();this.emit(i.EventName.historicalNewsEnd,e,t)}decodeMsg_HEAD_TIMESTAMP(){const e=this.readInt();const t=this.readStr();this.emit(i.EventName.headTimestamp,e,t)}decodeMsg_HISTOGRAM_DATA(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){r[e]={price:this.readDouble(),size:this.readInt()}}this.emit(i.EventName.histogramData,e,r)}decodeMsg_PNL(){const e=this.readInt();const t=this.readDouble();let r=undefined;let n=undefined;if(this.serverVersion>=o.default.UNREALIZED_PNL){r=this.readDouble()}if(this.serverVersion>=o.default.REALIZED_PNL){n=this.readDouble()}this.emit(i.EventName.pnl,e,t,r,n)}decodeMsg_PNL_SINGLE(){const e=this.readInt();const t=this.readInt();const r=this.readDouble();let n=undefined;let s=undefined;if(this.serverVersion>=o.default.UNREALIZED_PNL){n=this.readDouble()}if(this.serverVersion>=o.default.REALIZED_PNL){s=this.readDouble()}const a=this.readDouble();this.emit(i.EventName.pnlSingle,e,t,r,n,s,a)}decodeMsg_HISTORICAL_TICKS(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){const t=this.readInt();this.readInt();const n=this.readDouble();const i=this.readInt();r[e]={time:t,price:n,size:i}}const n=this.readBool();this.emit(i.EventName.historicalTicks,e,r,n)}decodeMsg_HISTORICAL_TICKS_BID_ASK(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){const t=this.readInt();const n=this.readInt();const i=this.readDouble();const o=this.readDouble();const s=this.readInt();const a=this.readInt();r[e]={time:t,tickAttribBidAsk:{bidPastLow:(n&1<<0)!=0,askPastHigh:(n&1<<1)!=0},priceBid:i,priceAsk:o,sizeBid:s,sizeAsk:a}}const n=this.readBool();this.emit(i.EventName.historicalTicksBidAsk,e,r,n)}decodeMsg_HISTORICAL_TICKS_LAST(){const e=this.readInt();const t=this.readInt();const r=new Array(t);for(let e=0;e<t;e++){const t=this.readInt();const n=this.readInt();const i=this.readDouble();const o=this.readInt();const s=this.readStr();const a=this.readStr();r[e]={time:t,tickAttribBidAsk:{pastLimit:(n&1<<0)!==0,unreported:(n&1<<1)!==0},price:i,size:o,exchange:s,specialConditions:a}}const n=this.readBool();this.emit(i.EventName.historicalTicksLast,e,r,n)}decodeMsg_TICK_BY_TICK(){const e=this.readInt();const t=this.readInt();const r=this.readStr();switch(t){case 0:break;case 1:case 2:{const n=this.readDouble();const o=this.readInt();const s=this.readInt();const a=(s&1<<0)!==0;const u=(s&1<<1)!==0;const c=this.readStr();const l=this.readStr();this.emit(i.EventName.tickByTickAllLast,e,t,r,n,o,{pastLimit:a,unreported:u},c,l);break}case 3:{const t=this.readDouble();const n=this.readDouble();const o=this.readInt();const s=this.readInt();const a=this.readInt();const u=(a&1<<0)!==0;const c=(a&1<<1)!==0;this.emit(i.EventName.tickByTickBidAsk,e,r,t,n,o,s,{bidPastLow:u,askPastHigh:c});break}case 4:{const t=this.readDouble();this.emit(i.EventName.tickByTickMidPoint,e,r,t);break}}}decodeMsg_ORDER_BOUND(){const e=this.readInt();const t=this.readDouble();const r=this.readInt();this.emit(i.EventName.orderBound,e,t,r)}decodeMsg_COMPLETED_ORDER(){var e;const t={};const r={};const n={};if(this.serverVersion>=12){t.conId=this.readInt()}t.symbol=this.readStr();t.secType=this.readStr();t.lastTradeDateOrContractMonth=this.readStr();t.strike=this.readDouble();t.right=validateOptionType(this.readStr());if(this.serverVersion>=32){t.multiplier=this.readDouble()}t.exchange=this.readStr();t.currency=this.readStr();if(this.serverVersion>=2){t.localSymbol=this.readStr()}if(this.serverVersion>=32){t.tradingClass=this.readStr()}r.action=this.readStr();if(this.serverVersion>=o.default.FRACTIONAL_POSITIONS){r.totalQuantity=this.readDouble()}else{r.totalQuantity=this.readInt()}r.orderType=this.readStr();if(this.serverVersion<29){r.lmtPrice=this.readDouble()}else{r.lmtPrice=this.readDoubleOrUndefined()}if(this.serverVersion<30){r.auxPrice=this.readDouble()}else{r.auxPrice=this.readDoubleOrUndefined()}r.tif=this.readStr();r.ocaGroup=this.readStr();r.account=this.readStr();r.openClose=this.readStr();r.origin=this.readInt();r.orderRef=this.readStr();if(this.serverVersion>=3){r.permId=this.readInt()}if(this.serverVersion>=4){r.hidden=this.readBool()}r.discretionaryAmt=this.serverVersion>=4?this.readDouble():undefined;r.goodAfterTime=this.serverVersion>=4?this.readStr():undefined;if(this.serverVersion>=4){if(this.serverVersion<18){this.readBool()}else{r.outsideRth=this.readBool()}}if(this.serverVersion>=7){r.faGroup=this.readStr();r.faMethod=this.readStr();r.faPercentage=this.readStr();r.faProfile=this.readStr()}if(this.serverVersion>=o.default.MODELS_SUPPORT){r.modelCode=this.readStr()}if(this.serverVersion>=8){r.goodTillDate=this.readStr()}if(this.serverVersion>=9){r.rule80A=this.readStr();r.percentOffset=this.readDoubleOrUndefined();r.settlingFirm=this.readStr();r.shortSaleSlot=this.readInt();r.designatedLocation=this.readStr();if(this.serverVersion==51){this.readInt()}else if(this.serverVersion>=23){r.exemptCode=this.readInt()}r.startingPrice=this.readDoubleOrUndefined();r.stockRefPrice=this.readDoubleOrUndefined();r.delta=this.readDoubleOrUndefined();r.stockRangeLower=this.readDoubleOrUndefined();r.stockRangeUpper=this.readDoubleOrUndefined();r.displaySize=this.readInt();r.sweepToFill=this.readBool();r.allOrNone=this.readBool();r.minQty=this.readIntOrUndefined();r.ocaType=this.readInt()}r.triggerMethod=this.serverVersion>=10?this.readInt():undefined;if(this.serverVersion>=11){r.volatility=this.readDoubleOrUndefined();r.volatilityType=this.readInt();if(this.serverVersion==11){r.deltaNeutralOrderType=this.readInt()==0?"NONE":"MKT"}else{r.deltaNeutralOrderType=this.readStr();r.deltaNeutralAuxPrice=this.readDoubleOrUndefined();if(this.serverVersion>=27&&r.deltaNeutralOrderType!==""){r.deltaNeutralConId=this.readInt()}if(this.serverVersion>=31&&r.deltaNeutralOrderType!==""){r.deltaNeutralShortSale=this.readBool();r.deltaNeutralShortSaleSlot=this.readInt();r.deltaNeutralDesignatedLocation=this.readStr()}}r.continuousUpdate=this.readInt();if(this.serverVersion==26){r.stockRangeLower=this.readDouble();r.stockRangeUpper=this.readDouble()}r.referencePriceType=this.readInt()}if(this.serverVersion>=13){r.trailStopPrice=this.readDoubleOrUndefined()}if(this.serverVersion>=30){r.trailStopPrice=this.readDoubleOrUndefined()}if(this.serverVersion>=1){t.comboLegsDescription=this.readStr()}if(this.serverVersion>=29){const e=this.readInt();const n=new Array(e);for(let t=0;t<e;t++){n[t]={conId:this.readInt(),ratio:this.readInt(),action:this.readStr(),exchange:this.readStr(),openClose:this.readInt(),shortSaleSlot:this.readInt(),designatedLocation:this.readStr(),exemptCode:this.readInt()}}t.comboLegs=n;const i=this.readInt();const o=new Array(i);for(let e=0;e<i;e++){o[e]={price:this.readDoubleOrUndefined()}}r.orderComboLegs=o}if(this.serverVersion>=26){const e=this.readInt();const t=new Array(e);for(let r=0;r<e;r++){t[r]={tag:this.readStr(),value:this.readStr()}}r.smartComboRoutingParams=t}if(this.serverVersion>=15){if(this.serverVersion>=20){r.scaleInitLevelSize=this.readIntOrUndefined();r.scaleSubsLevelSize=this.readIntOrUndefined()}else{this.readIntOrUndefined();r.scaleSubsLevelSize=this.readIntOrUndefined()}r.scalePriceIncrement=this.readDoubleOrUndefined()}if(this.serverVersion>=28&&r.scalePriceIncrement!=undefined){r.scalePriceAdjustValue=this.readDoubleOrUndefined();r.scalePriceAdjustInterval=this.readIntOrUndefined();r.scaleProfitOffset=this.readDoubleOrUndefined();r.scaleAutoReset=this.readBool();r.scaleInitPosition=this.readIntOrUndefined();r.scaleInitFillQty=this.readIntOrUndefined();r.scaleRandomPercent=this.readBool()}if(this.serverVersion>=24){r.hedgeType=this.readStr();if(r.hedgeType!==""){r.hedgeParam=this.readStr()}}if(this.serverVersion>=19){r.clearingAccount=this.readStr();r.clearingIntent=this.readStr()}if(this.serverVersion>=22){r.notHeld=this.readBool()}if(this.serverVersion>=20){if(this.readBool()){t.deltaNeutralContract={conId:this.readInt(),delta:this.readDouble(),price:this.readDouble()}}}if(this.serverVersion>=21){r.algoStrategy=this.readStr();if(r.algoStrategy!==""){const e=this.readInt();const t=new Array(e);for(let r=0;r<e;r++){t[r]={tag:this.readStr(),value:this.readStr()}}r.algoParams=t}}if(this.serverVersion>=33){r.solicited=this.readBool()}n.status=this.readStr();if(this.serverVersion>=34){r.randomizeSize=this.readBool();r.randomizePrice=this.readBool()}if(this.serverVersion>=o.default.PEGGED_TO_BENCHMARK){if(r.orderType==v.OrderType.PEG_BENCH){r.referenceContractId=this.readInt();r.isPeggedChangeAmountDecrease=this.readBool();r.peggedChangeAmount=this.readDouble();r.referenceChangeAmount=this.readDouble();r.referenceExchangeId=this.readStr()}const t=this.readInt();r.conditions=new Array(t);for(let n=0;n<t;n++){const t=this.readInt();const i=(e=this.readStr())===null||e===void 0?void 0:e.toLocaleLowerCase();switch(t){case _.OrderConditionType.Execution:{const e=this.readStr();const t=this.readStr();const o=this.readStr();r.conditions[n]=new c.default(t,e,o,i);break}case _.OrderConditionType.Margin:{const e=this.readBool();const t=this.readInt();r.conditions[n]=new l.default(t,e,i);break}case _.OrderConditionType.PercentChange:{const e=this.readBool();const t=this.readDouble();const o=this.readInt();const s=this.readStr();r.conditions[n]=new d.default(t,o,s,e,i);break}case _.OrderConditionType.Price:{const e=this.readBool();const t=this.readDouble();const o=this.readInt();const s=this.readStr();const a=this.readInt();r.conditions[n]=new h.default(t,a,o,s,e,i);break}case _.OrderConditionType.Time:{const e=this.readBool();const t=this.readStr();r.conditions[n]=new f.default(t,e,i);break}case _.OrderConditionType.Volume:{const e=this.readBool();const t=this.readInt();const o=this.readInt();const s=this.readStr();r.conditions[n]=new p.default(t,o,s,e,i);break}}}if(r.conditions.length){r.conditionsIgnoreRth=this.readBool();r.conditionsCancelOrder=this.readBool()}}r.trailStopPrice=this.readDoubleOrUndefined();r.lmtPriceOffset=this.readDoubleOrUndefined();if(this.serverVersion>=o.default.CASH_QTY){r.cashQty=this.readDoubleOrUndefined()}if(this.serverVersion>=o.default.AUTO_PRICE_FOR_HEDGE){r.dontUseAutoPriceForHedge=this.readBool()}if(this.serverVersion>=o.default.ORDER_CONTAINER){r.isOmsContainer=this.readBool()}r.autoCancelDate=this.readStr();r.filledQuantity=this.readDoubleOrUndefined();r.refFuturesConId=this.readInt();r.autoCancelParent=this.readBool();r.shareholder=this.readStr();r.imbalanceOnly=this.readBool();r.routeMarketableToBbo=this.readBool();r.parentPermId=this.readInt();n.completedTime=this.readStr();n.completedStatus=this.readStr();this.emit(i.EventName.completedOrder,t,r,n)}decodeMsg_COMPLETED_ORDERS_END(){this.emit(i.EventName.completedOrdersEnd)}decodeMsg_REPLACE_FA_END(){const e=this.readInt();const t=this.readStr();this.emit(i.EventName.replaceFAEnd,e,t)}decodeMsg_WSH_META_DATA(){const e=this.readInt();const t=this.readStr();this.emit(i.EventName.wshMetaData,e,t)}decodeMsg_WSH_EVENT_DATA(){const e=this.readInt();const t=this.readStr();this.emit(i.EventName.wshEventData,e,t)}decodeMsg_HISTORICAL_SCHEDULE(){const e=this.readInt();const t=this.readStr();const r=this.readStr();const n=this.readStr();const o=this.readInt();const s=new Array(o);for(let e=0;e<o;e++){const t=this.readStr();const r=this.readStr();const n=this.readStr();s[e]={startDateTime:t,endDateTime:r,refDate:n}}this.emit(i.EventName.historicalSchedule,e,t,r,n,s)}decodeContract(e){const t={};t.conId=this.readInt();t.symbol=this.readStr();t.secType=this.readStr();t.lastTradeDateOrContractMonth=this.readStr();t.strike=this.readDouble();t.right=validateOptionType(this.readStr());if(e>=32){t.multiplier=this.readInt()}t.exchange=this.readStr();t.currency=this.readStr();t.localSymbol=this.readStr();if(e>=32){t.tradingClass=this.readStr()}return t}decodeOrder(e){const t={};t.action=this.readStr();if(this.serverVersion>=o.default.FRACTIONAL_POSITIONS){t.totalQuantity=this.readDouble()}else{t.totalQuantity=this.readInt()}t.orderType=this.readStr();if(e<29){t.lmtPrice=this.readDouble()}else{t.lmtPrice=this.readDoubleOrUndefined()}if(e<30){t.auxPrice=this.readDouble()}else{t.auxPrice=this.readDoubleOrUndefined()}t.tif=this.readStr();t.ocaGroup=this.readStr();t.account=this.readStr();t.openClose=this.readStr();t.origin=this.readInt();t.orderRef=this.readStr();t.clientId=this.readInt();t.permId=this.readInt();t.outsideRth=this.readBool();t.hidden=this.readBool();t.discretionaryAmt=this.readDouble();t.goodAfterTime=this.readStr();this.readStr();t.faGroup=this.readStr();t.faMethod=this.readStr();t.faPercentage=this.readStr();t.faProfile=this.readStr();if(this.serverVersion>=o.default.MODELS_SUPPORT){t.modelCode=this.readStr()}t.goodTillDate=this.readStr();t.rule80A=this.readStr();t.percentOffset=this.readDoubleOrUndefined();t.settlingFirm=this.readStr();t.shortSaleSlot=this.readInt();t.designatedLocation=this.readStr();if(this.serverVersion===o.default.SSHORTX_OLD){this.readInt()}else if(e>=23){t.exemptCode=this.readInt()}t.auctionStrategy=this.readInt();t.startingPrice=this.readDoubleOrUndefined();t.stockRefPrice=this.readDoubleOrUndefined();t.delta=this.readDoubleOrUndefined();t.stockRangeLower=this.readDoubleOrUndefined();t.stockRangeUpper=this.readDoubleOrUndefined();t.displaySize=this.readInt();t.blockOrder=this.readBool();t.sweepToFill=this.readBool();t.allOrNone=this.readBool();t.minQty=this.readIntOrUndefined();t.ocaType=this.readInt();t.eTradeOnly=this.readBool();t.firmQuoteOnly=this.readBool();t.nbboPriceCap=this.readDoubleOrUndefined();t.parentId=this.readInt();t.triggerMethod=this.readInt();t.volatility=this.readDoubleOrUndefined();t.volatilityType=this.readInt();t.deltaNeutralOrderType=this.readStr();t.deltaNeutralAuxPrice=this.readDoubleOrUndefined();if(e>=27&&(t===null||t===void 0?void 0:t.deltaNeutralOrderType.length)){t.deltaNeutralConId=this.readInt();t.deltaNeutralSettlingFirm=this.readStr();t.deltaNeutralClearingAccount=this.readStr();t.deltaNeutralClearingIntent=this.readStr()}if(e>=31&&(t===null||t===void 0?void 0:t.deltaNeutralOrderType.length)){t.deltaNeutralOpenClose=this.readStr();t.deltaNeutralShortSale=this.readBool();t.deltaNeutralShortSaleSlot=this.readInt();t.deltaNeutralDesignatedLocation=this.readStr()}t.continuousUpdate=this.readInt();t.referencePriceType=this.readInt();t.trailStopPrice=this.readDoubleOrUndefined();if(e>=30){t.trailingPercent=this.readDoubleOrUndefined()}t.basisPoints=this.readDoubleOrUndefined();t.basisPointsType=this.readIntOrUndefined();return t}decodeComboLeg(){return{conId:this.readInt(),ratio:this.readInt(),action:this.readStr(),exchange:this.readStr(),openClose:this.readInt(),shortSaleSlot:this.readInt(),designatedLocation:this.readStr(),exemptCode:this.readInt()}}readLastTradeDate(e,t){const r=this.readStr();if(r===null||r===void 0?void 0:r.length){const n=r.split("\\s+");if(n.length>0){if(t){e.maturity=n[0]}else{e.contract.lastTradeDateOrContractMonth=n[0]}}if(n.length>1){e.lastTradeTime=n[1]}if(t&&n.length>2){e.timeZoneId=n[2]}}}}t.Decoder=Decoder;class OrderDecoder{constructor(e,t,r,n,i,o){this.decoder=e;this.contract=t;this.order=r;this.orderState=n;this.version=i;this.serverVersion=o}readOrderId(){this.order.orderId=this.decoder.readInt()}readContractFields(){if(this.version>=17){this.contract.conId=this.decoder.readInt()}this.contract.symbol=this.decoder.readStr();this.contract.secType=this.decoder.readStr();this.contract.lastTradeDateOrContractMonth=this.decoder.readStr();this.contract.strike=this.decoder.readDouble();this.contract.right=validateOptionType(this.decoder.readStr());if(this.version>=32){this.contract.multiplier=+this.decoder.readStr()}this.contract.exchange=this.decoder.readStr();this.contract.currency=this.decoder.readStr();if(this.version>=2){this.contract.localSymbol=this.decoder.readStr()}if(this.version>=32){this.contract.tradingClass=this.decoder.readStr()}}readAction(){this.order.action=this.decoder.readStr()}readTotalQuantity(){if(this.serverVersion>=o.default.FRACTIONAL_POSITIONS){this.order.totalQuantity=this.decoder.readDouble()}else{this.order.totalQuantity=this.decoder.readInt()}}readOrderType(){this.order.orderType=this.decoder.readStr()}readLmtPrice(){if(this.version<29){this.order.lmtPrice=this.decoder.readDouble()}else{this.order.lmtPrice=this.decoder.readDoubleOrUndefined()}}readAuxPrice(){if(this.version<30){this.order.auxPrice=this.decoder.readDouble()}else{this.order.auxPrice=this.decoder.readDoubleOrUndefined()}}readTIF(){this.order.tif=this.decoder.readStr()}readOcaGroup(){this.order.ocaGroup=this.decoder.readStr()}readAccount(){this.order.account=this.decoder.readStr()}readOpenClose(){this.order.openClose=this.decoder.readStr()}readOrigin(){this.order.origin=this.decoder.readInt()}readOrderRef(){this.order.orderRef=this.decoder.readStr()}readClientId(){if(this.version>=3){this.order.clientId=this.decoder.readInt()}}readPermId(){if(this.version>=4){this.order.permId=this.decoder.readInt()}}readOutsideRth(){if(this.version>=4){if(this.version<18){this.decoder.readBool()}else{this.order.outsideRth=this.decoder.readBool()}}}readHidden(){if(this.version>=4){this.order.hidden=this.decoder.readInt()==1}}readDiscretionaryAmount(){if(this.version>=4){this.order.discretionaryAmt=this.decoder.readDouble()}}readGoodAfterTime(){if(this.version>=5){this.order.goodAfterTime=this.decoder.readStr()}}skipSharesAllocation(){if(this.version>=6){this.decoder.readStr()}}readFAParams(){if(this.version>=7){this.order.faGroup=this.decoder.readStr();this.order.faMethod=this.decoder.readStr();this.order.faPercentage=this.decoder.readStr();this.order.faProfile=this.decoder.readStr()}}readModelCode(){if(this.version>=o.default.MODELS_SUPPORT){this.order.modelCode=this.decoder.readStr()}}readGoodTillDate(){if(this.version>=8){this.order.goodTillDate=this.decoder.readStr()}}readRule80A(){if(this.version>=9){this.order.rule80A=this.decoder.readStr()}}readPercentOffset(){if(this.version>=9){this.order.percentOffset=this.decoder.readDoubleOrUndefined()}}readSettlingFirm(){if(this.version>=9){this.order.settlingFirm=this.decoder.readStr()}}readShortSaleParams(){if(this.version>=9){this.order.shortSaleSlot=this.decoder.readInt();this.order.designatedLocation=this.decoder.readStr();if(this.version==51){this.decoder.readInt()}else if(this.version>=23){this.order.exemptCode=this.decoder.readInt()}}}readAuctionStrategy(){if(this.version>=9){this.order.auctionStrategy=this.decoder.readInt()}}readBoxOrderParams(){if(this.version>=9){this.order.startingPrice=this.decoder.readDoubleOrUndefined();this.order.stockRefPrice=this.decoder.readDoubleOrUndefined();this.order.delta=this.decoder.readDoubleOrUndefined()}}readPegToStkOrVolOrderParams(){if(this.version>=9){this.order.stockRangeLower=this.decoder.readDoubleOrUndefined();this.order.stockRangeUpper=this.decoder.readDoubleOrUndefined()}}readDisplaySize(){if(this.version>=9){this.order.displaySize=this.decoder.readInt()}}readOldStyleOutsideRth(){if(this.version>=9){if(this.version<18){this.decoder.readBool()}}}readBlockOrder(){if(this.version>=9){this.order.blockOrder=this.decoder.readBool()}}readSweepToFill(){if(this.version>=9){this.order.sweepToFill=this.decoder.readBool()}}readAllOrNone(){if(this.version>=9){this.order.allOrNone=this.decoder.readBool()}}readMinQty(){if(this.version>=9){this.order.minQty=this.decoder.readIntOrUndefined()}}readOcaType(){if(this.version>=9){this.order.ocaType=this.decoder.readInt()}}readETradeOnly(){if(this.version>=9){this.order.eTradeOnly=this.decoder.readBool()}}readFirmQuoteOnly(){if(this.version>=9){this.order.firmQuoteOnly=this.decoder.readBool()}}readNbboPriceCap(){if(this.version>=9){this.order.nbboPriceCap=this.decoder.readDoubleOrUndefined()}}readParentId(){if(this.version>=10){this.order.parentId=this.decoder.readInt()}}readTriggerMethod(){if(this.version>=10){this.order.triggerMethod=this.decoder.readInt()}}readVolOrderParams(e){if(this.version>=11){this.order.volatility=this.decoder.readDoubleOrUndefined();this.order.volatilityType=this.decoder.readInt();if(this.version==11){const e=this.decoder.readInt();this.order.deltaNeutralOrderType=e==0?"NONE":"MKT"}else{this.order.deltaNeutralOrderType=this.decoder.readStr();this.order.deltaNeutralAuxPrice=this.decoder.readDoubleOrUndefined();if(this.version>=27&&this.order.deltaNeutralOrderType&&this.order.deltaNeutralOrderType!==""){this.order.deltaNeutralConId=this.decoder.readInt();if(e){this.order.deltaNeutralSettlingFirm=this.decoder.readStr();this.order.deltaNeutralClearingAccount=this.decoder.readStr();this.order.deltaNeutralClearingIntent=this.decoder.readStr()}}if(this.version>=31&&this.order.deltaNeutralOrderType&&this.order.deltaNeutralOrderType!==""){if(e){this.order.deltaNeutralOpenClose=this.decoder.readStr()}this.order.deltaNeutralShortSale=this.decoder.readBool();this.order.deltaNeutralShortSaleSlot=this.decoder.readInt();this.order.deltaNeutralDesignatedLocation=this.decoder.readStr()}}this.order.continuousUpdate=this.decoder.readInt();if(this.version==26){this.order.stockRangeLower=this.decoder.readDouble();this.order.stockRangeUpper=this.decoder.readDouble()}this.order.referencePriceType=this.decoder.readInt()}}readTrailParams(){if(this.version>=13){this.order.trailStopPrice=this.decoder.readDoubleOrUndefined()}if(this.version>=30){this.order.trailingPercent=this.decoder.readDoubleOrUndefined()}}readBasisPoints(){if(this.version>=14){this.order.basisPoints=this.decoder.readDoubleOrUndefined();this.order.basisPointsType=this.decoder.readIntOrUndefined()}}readComboLegs(){if(this.version>=14){this.contract.comboLegsDescription=this.decoder.readStr()}if(this.version>=29){const e=this.decoder.readInt();if(e>0){this.contract.comboLegs=[];for(let t=0;t<e;++t){const e=this.decoder.readInt();const t=this.decoder.readInt();const r=this.decoder.readStr();const n=this.decoder.readStr();const i=this.decoder.readInt();const o=this.decoder.readInt();const s=this.decoder.readStr();const a=this.decoder.readInt();this.contract.comboLegs.push({conId:e,ratio:t,action:r,exchange:n,openClose:i,shortSaleSlot:o,designatedLocation:s,exemptCode:a})}}const t=this.decoder.readInt();if(t>0){this.order.orderComboLegs=[];for(let e=0;e<t;++e){const e=this.decoder.readDoubleOrUndefined();this.order.orderComboLegs.push({price:e})}}}}readSmartComboRoutingParams(){if(this.version>=26){const e=this.decoder.readInt();if(e>0){this.order.smartComboRoutingParams=[];for(let t=0;t<e;++t){const e=this.decoder.readStr();const t=this.decoder.readStr();this.order.smartComboRoutingParams.push({tag:e,value:t})}}}}readScaleOrderParams(){if(this.version>=15){if(this.version>=20){this.order.scaleInitLevelSize=this.decoder.readIntOrUndefined();this.order.scaleSubsLevelSize=this.decoder.readIntOrUndefined()}else{this.decoder.readIntOrUndefined();this.order.scaleInitLevelSize=this.decoder.readIntOrUndefined()}this.order.scalePriceIncrement=this.decoder.readDoubleOrUndefined()}if(this.version>=28&&this.order.scalePriceIncrement>0){this.order.scalePriceAdjustValue=this.decoder.readDoubleOrUndefined();this.order.scalePriceAdjustInterval=this.decoder.readIntOrUndefined();this.order.scaleProfitOffset=this.decoder.readDoubleOrUndefined();this.order.scaleAutoReset=this.decoder.readBool();this.order.scaleInitPosition=this.decoder.readIntOrUndefined();this.order.scaleInitFillQty=this.decoder.readIntOrUndefined();this.order.scaleRandomPercent=this.decoder.readBool()}}readHedgeParams(){if(this.version>=24){this.order.hedgeType=this.decoder.readStr();if(this.order.hedgeType&&this.order.hedgeType!==""){this.order.hedgeParam=this.decoder.readStr()}}}readOptOutSmartRouting(){if(this.version>=25){this.order.optOutSmartRouting=this.decoder.readBool()}}readClearingParams(){if(this.version>=19){this.order.clearingAccount=this.decoder.readStr();this.order.clearingIntent=this.decoder.readStr()}}readNotHeld(){if(this.version>=22){this.order.notHeld=this.decoder.readBool()}}readDeltaNeutral(){if(this.version>=20){if(this.decoder.readBool()){const e=this.decoder.readInt();const t=this.decoder.readDouble();const r=this.decoder.readDouble();this.contract.deltaNeutralContract={conId:e,delta:t,price:r}}}}readAlgoParams(){if(this.version>=21){this.order.algoStrategy=this.decoder.readStr();if(this.order.algoStrategy&&this.order.algoStrategy!==""){const e=this.decoder.readInt();if(e>0){this.order.algoParams=[];for(let t=0;t<e;++t){const e=this.decoder.readStr();const t=this.decoder.readStr();this.order.algoParams.push({tag:e,value:t})}}}}}readSolicited(){if(this.version>=33){this.order.solicited=this.decoder.readBool()}}readWhatIfInfoAndCommission(){if(this.version>=16){this.order.whatIf=this.decoder.readBool();this.readOrderStatus();if(this.serverVersion>=o.default.WHAT_IF_EXT_FIELDS){this.orderState.initMarginBefore=this.decoder.readDoubleOrUndefined();this.orderState.maintMarginBefore=this.decoder.readDoubleOrUndefined();this.orderState.equityWithLoanBefore=this.decoder.readDoubleOrUndefined();this.orderState.initMarginChange=this.decoder.readDoubleOrUndefined();this.orderState.maintMarginChange=this.decoder.readDoubleOrUndefined();this.orderState.equityWithLoanChange=this.decoder.readDoubleOrUndefined()}this.orderState.initMarginAfter=this.decoder.readDoubleOrUndefined();this.orderState.maintMarginAfter=this.decoder.readDoubleOrUndefined();this.orderState.equityWithLoanAfter=this.decoder.readDoubleOrUndefined();this.orderState.commission=this.decoder.readDoubleOrUndefined();this.orderState.minCommission=this.decoder.readDoubleOrUndefined();this.orderState.maxCommission=this.decoder.readDoubleOrUndefined();this.orderState.commissionCurrency=this.decoder.readStr();this.orderState.warningText=this.decoder.readStr()}}readOrderStatus(){this.orderState.status=this.decoder.readStr()}readVolRandomizeFlags(){if(this.version>=34){this.order.randomizeSize=this.decoder.readBool();this.order.randomizePrice=this.decoder.readBool()}}readPegToBenchParams(){if(this.serverVersion>=o.default.PEGGED_TO_BENCHMARK){if(this.order.orderType===v.OrderType.PEG_BENCH){this.order.referenceContractId=this.decoder.readInt();this.order.isPeggedChangeAmountDecrease=this.decoder.readBool();this.order.peggedChangeAmount=this.decoder.readDouble();this.order.referenceChangeAmount=this.decoder.readDouble();this.order.referenceExchangeId=this.decoder.readStr()}}}readConditions(){var e;if(this.serverVersion>=o.default.PEGGED_TO_BENCHMARK){const t=this.decoder.readInt();this.order.conditions=new Array(t);if(t>0){for(let r=0;r<t;r++){const t=this.decoder.readInt();const n=(e=this.decoder.readStr())===null||e===void 0?void 0:e.toLocaleLowerCase();switch(t){case _.OrderConditionType.Execution:{const e=this.decoder.readStr();const t=this.decoder.readStr();const i=this.decoder.readStr();this.order.conditions[r]=new c.default(t,e,i,n);break}case _.OrderConditionType.Margin:{const e=this.decoder.readBool();const t=this.decoder.readInt();this.order.conditions[r]=new l.default(t,e,n);break}case _.OrderConditionType.PercentChange:{const e=this.decoder.readBool();const t=this.decoder.readDouble();const i=this.decoder.readInt();const o=this.decoder.readStr();this.order.conditions[r]=new d.default(t,i,o,e,n);break}case _.OrderConditionType.Price:{const e=this.decoder.readBool();const t=this.decoder.readDouble();const i=this.decoder.readInt();const o=this.decoder.readStr();const s=this.decoder.readInt();this.order.conditions[r]=new h.default(t,s,i,o,e,n);break}case _.OrderConditionType.Time:{const e=this.decoder.readBool();const t=this.decoder.readStr();this.order.conditions[r]=new f.default(t,e,n);break}case _.OrderConditionType.Volume:{const e=this.decoder.readBool();const t=this.decoder.readInt();const i=this.decoder.readInt();const o=this.decoder.readStr();this.order.conditions[r]=new p.default(t,i,o,e,n);break}}}this.order.conditionsIgnoreRth=this.decoder.readBool();this.order.conditionsCancelOrder=this.decoder.readBool()}}}readAdjustedOrderParams(){if(this.serverVersion>=o.default.PEGGED_TO_BENCHMARK){this.order.adjustedOrderType=this.decoder.readStr();this.order.triggerPrice=this.decoder.readDoubleOrUndefined();this.readStopPriceAndLmtPriceOffset();this.order.adjustedStopPrice=this.decoder.readDoubleOrUndefined();this.order.adjustedStopLimitPrice=this.decoder.readDoubleOrUndefined();this.order.adjustedTrailingAmount=this.decoder.readDoubleOrUndefined();this.order.adjustableTrailingUnit=this.decoder.readInt()}}readStopPriceAndLmtPriceOffset(){this.order.trailStopPrice=this.decoder.readDoubleOrUndefined();this.order.lmtPriceOffset=this.decoder.readDoubleOrUndefined()}readSoftDollarTier(){if(this.serverVersion>=o.default.SOFT_DOLLAR_TIER){const e=this.decoder.readStr();const t=this.decoder.readStr();const r=this.decoder.readStr();this.order.softDollarTier={name:e,value:t,displayName:r}}}readCashQty(){if(this.serverVersion>=o.default.CASH_QTY){this.order.cashQty=this.decoder.readDoubleOrUndefined()}}readDontUseAutoPriceForHedge(){if(this.serverVersion>=o.default.AUTO_PRICE_FOR_HEDGE){this.order.dontUseAutoPriceForHedge=this.decoder.readBool()}}readIsOmsContainer(){if(this.serverVersion>=o.default.ORDER_CONTAINER){this.order.isOmsContainer=this.decoder.readBool()}}readDiscretionaryUpToLimitPrice(){if(this.serverVersion>=o.default.D_PEG_ORDERS){this.order.discretionaryUpToLimitPrice=this.decoder.readBool()}}readAutoCancelDate(){this.order.autoCancelDate=this.decoder.readStr()}readFilledQuantity(){this.order.filledQuantity=this.decoder.readDoubleOrUndefined()}readRefFuturesConId(){this.order.refFuturesConId=this.decoder.readInt()}readAutoCancelParent(e){if(e===undefined||this.serverVersion>=e){this.order.autoCancelParent=this.decoder.readBool()}}readShareholder(){this.order.shareholder=this.decoder.readStr()}readImbalanceOnly(){this.order.imbalanceOnly=this.decoder.readBool()}readRouteMarketableToBbo(){this.order.routeMarketableToBbo=this.decoder.readBool()}readParentPermId(){this.order.parentPermId=this.decoder.readInt()}readCompletedTime(){this.orderState.completedTime=this.decoder.readStr()}readCompletedStatus(){this.orderState.completedStatus=this.decoder.readStr()}readUsePriceMgmtAlgo(){if(this.serverVersion>=o.default.PRICE_MGMT_ALGO){this.order.usePriceMgmtAlgo=this.decoder.readBool()}}readDuration(){if(this.serverVersion>=o.default.DURATION){this.order.duration=this.decoder.readInt()}}readPostToAts(){if(this.serverVersion>=o.default.POST_TO_ATS){this.order.postToAts=this.decoder.readIntMax()}}}},1456:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Encoder=t.OUT_MSG_ID=void 0;const i=n(r(2526));const o=n(r(594));const s=r(1830);const a=r(5628);const u=r(8056);var c;(function(e){e[e["REQ_MKT_DATA"]=1]="REQ_MKT_DATA";e[e["CANCEL_MKT_DATA"]=2]="CANCEL_MKT_DATA";e[e["PLACE_ORDER"]=3]="PLACE_ORDER";e[e["CANCEL_ORDER"]=4]="CANCEL_ORDER";e[e["REQ_OPEN_ORDERS"]=5]="REQ_OPEN_ORDERS";e[e["REQ_ACCOUNT_DATA"]=6]="REQ_ACCOUNT_DATA";e[e["REQ_EXECUTIONS"]=7]="REQ_EXECUTIONS";e[e["REQ_IDS"]=8]="REQ_IDS";e[e["REQ_CONTRACT_DATA"]=9]="REQ_CONTRACT_DATA";e[e["REQ_MKT_DEPTH"]=10]="REQ_MKT_DEPTH";e[e["CANCEL_MKT_DEPTH"]=11]="CANCEL_MKT_DEPTH";e[e["REQ_NEWS_BULLETINS"]=12]="REQ_NEWS_BULLETINS";e[e["CANCEL_NEWS_BULLETINS"]=13]="CANCEL_NEWS_BULLETINS";e[e["SET_SERVER_LOGLEVEL"]=14]="SET_SERVER_LOGLEVEL";e[e["REQ_AUTO_OPEN_ORDERS"]=15]="REQ_AUTO_OPEN_ORDERS";e[e["REQ_ALL_OPEN_ORDERS"]=16]="REQ_ALL_OPEN_ORDERS";e[e["REQ_MANAGED_ACCTS"]=17]="REQ_MANAGED_ACCTS";e[e["REQ_FA"]=18]="REQ_FA";e[e["REPLACE_FA"]=19]="REPLACE_FA";e[e["REQ_HISTORICAL_DATA"]=20]="REQ_HISTORICAL_DATA";e[e["EXERCISE_OPTIONS"]=21]="EXERCISE_OPTIONS";e[e["REQ_SCANNER_SUBSCRIPTION"]=22]="REQ_SCANNER_SUBSCRIPTION";e[e["CANCEL_SCANNER_SUBSCRIPTION"]=23]="CANCEL_SCANNER_SUBSCRIPTION";e[e["REQ_SCANNER_PARAMETERS"]=24]="REQ_SCANNER_PARAMETERS";e[e["CANCEL_HISTORICAL_DATA"]=25]="CANCEL_HISTORICAL_DATA";e[e["REQ_CURRENT_TIME"]=49]="REQ_CURRENT_TIME";e[e["REQ_REAL_TIME_BARS"]=50]="REQ_REAL_TIME_BARS";e[e["CANCEL_REAL_TIME_BARS"]=51]="CANCEL_REAL_TIME_BARS";e[e["REQ_FUNDAMENTAL_DATA"]=52]="REQ_FUNDAMENTAL_DATA";e[e["CANCEL_FUNDAMENTAL_DATA"]=53]="CANCEL_FUNDAMENTAL_DATA";e[e["REQ_CALC_IMPLIED_VOLAT"]=54]="REQ_CALC_IMPLIED_VOLAT";e[e["REQ_CALC_OPTION_PRICE"]=55]="REQ_CALC_OPTION_PRICE";e[e["CANCEL_CALC_IMPLIED_VOLAT"]=56]="CANCEL_CALC_IMPLIED_VOLAT";e[e["CANCEL_CALC_OPTION_PRICE"]=57]="CANCEL_CALC_OPTION_PRICE";e[e["REQ_GLOBAL_CANCEL"]=58]="REQ_GLOBAL_CANCEL";e[e["REQ_MARKET_DATA_TYPE"]=59]="REQ_MARKET_DATA_TYPE";e[e["REQ_POSITIONS"]=61]="REQ_POSITIONS";e[e["REQ_ACCOUNT_SUMMARY"]=62]="REQ_ACCOUNT_SUMMARY";e[e["CANCEL_ACCOUNT_SUMMARY"]=63]="CANCEL_ACCOUNT_SUMMARY";e[e["CANCEL_POSITIONS"]=64]="CANCEL_POSITIONS";e[e["VERIFY_REQUEST"]=65]="VERIFY_REQUEST";e[e["VERIFY_MESSAGE"]=66]="VERIFY_MESSAGE";e[e["QUERY_DISPLAY_GROUPS"]=67]="QUERY_DISPLAY_GROUPS";e[e["SUBSCRIBE_TO_GROUP_EVENTS"]=68]="SUBSCRIBE_TO_GROUP_EVENTS";e[e["UPDATE_DISPLAY_GROUP"]=69]="UPDATE_DISPLAY_GROUP";e[e["UNSUBSCRIBE_FROM_GROUP_EVENTS"]=70]="UNSUBSCRIBE_FROM_GROUP_EVENTS";e[e["START_API"]=71]="START_API";e[e["VERIFY_AND_AUTH_REQUEST"]=72]="VERIFY_AND_AUTH_REQUEST";e[e["VERIFY_AND_AUTH_MESSAGE"]=73]="VERIFY_AND_AUTH_MESSAGE";e[e["REQ_POSITIONS_MULTI"]=74]="REQ_POSITIONS_MULTI";e[e["CANCEL_POSITIONS_MULTI"]=75]="CANCEL_POSITIONS_MULTI";e[e["REQ_ACCOUNT_UPDATES_MULTI"]=76]="REQ_ACCOUNT_UPDATES_MULTI";e[e["CANCEL_ACCOUNT_UPDATES_MULTI"]=77]="CANCEL_ACCOUNT_UPDATES_MULTI";e[e["REQ_SEC_DEF_OPT_PARAMS"]=78]="REQ_SEC_DEF_OPT_PARAMS";e[e["REQ_SOFT_DOLLAR_TIERS"]=79]="REQ_SOFT_DOLLAR_TIERS";e[e["REQ_FAMILY_CODES"]=80]="REQ_FAMILY_CODES";e[e["REQ_MATCHING_SYMBOLS"]=81]="REQ_MATCHING_SYMBOLS";e[e["REQ_MKT_DEPTH_EXCHANGES"]=82]="REQ_MKT_DEPTH_EXCHANGES";e[e["REQ_SMART_COMPONENTS"]=83]="REQ_SMART_COMPONENTS";e[e["REQ_NEWS_ARTICLE"]=84]="REQ_NEWS_ARTICLE";e[e["REQ_NEWS_PROVIDERS"]=85]="REQ_NEWS_PROVIDERS";e[e["REQ_HISTORICAL_NEWS"]=86]="REQ_HISTORICAL_NEWS";e[e["REQ_HEAD_TIMESTAMP"]=87]="REQ_HEAD_TIMESTAMP";e[e["REQ_HISTOGRAM_DATA"]=88]="REQ_HISTOGRAM_DATA";e[e["CANCEL_HISTOGRAM_DATA"]=89]="CANCEL_HISTOGRAM_DATA";e[e["CANCEL_HEAD_TIMESTAMP"]=90]="CANCEL_HEAD_TIMESTAMP";e[e["REQ_MARKET_RULE"]=91]="REQ_MARKET_RULE";e[e["REQ_PNL"]=92]="REQ_PNL";e[e["CANCEL_PNL"]=93]="CANCEL_PNL";e[e["REQ_PNL_SINGLE"]=94]="REQ_PNL_SINGLE";e[e["CANCEL_PNL_SINGLE"]=95]="CANCEL_PNL_SINGLE";e[e["REQ_HISTORICAL_TICKS"]=96]="REQ_HISTORICAL_TICKS";e[e["REQ_TICK_BY_TICK_DATA"]=97]="REQ_TICK_BY_TICK_DATA";e[e["CANCEL_TICK_BY_TICK_DATA"]=98]="CANCEL_TICK_BY_TICK_DATA";e[e["REQ_COMPLETED_ORDERS"]=99]="REQ_COMPLETED_ORDERS";e[e["REQ_WSH_META_DATA"]=100]="REQ_WSH_META_DATA";e[e["CANCEL_WSH_META_DATA"]=101]="CANCEL_WSH_META_DATA";e[e["REQ_WSH_EVENT_DATA"]=102]="REQ_WSH_EVENT_DATA";e[e["CANCEL_WSH_EVENT_DATA"]=103]="CANCEL_WSH_EVENT_DATA";e[e["REQ_USER_INFO"]=104]="REQ_USER_INFO"})(c=t.OUT_MSG_ID||(t.OUT_MSG_ID={}));function nullifyMax(e){if(e===Number.MAX_VALUE){return null}else{return e}}class Encoder{constructor(e){this.callback=e}get serverVersion(){return this.callback.serverVersion}sendMsg(...e){this.callback.sendMsg(e)}emitError(e,t,r){this.callback.emitError(`Server Version ${this.serverVersion}: ${e}`,t,r)}encodeContract(e){return[e.conId,e.symbol,e.secType,e.lastTradeDateOrContractMonth,e.strike,e.right,e.multiplier,e.exchange,e.currency,e.localSymbol,e.tradingClass,e.primaryExch,e.secIdType,e.secId]}encodeTagValues(e){let t="";e===null||e===void 0?void 0:e.forEach((e=>{t+=`${e.tag}=${e.value};`}));return t}calculateImpliedVolatility(e,t,r,n,o){if(this.serverVersion<i.default.REQ_CALC_IMPLIED_VOLAT){return this.emitError("It does not support calculate implied volatility requests.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(t.tradingClass===undefined||t.tradingClass===""){return this.emitError("It does not support tradingClass parameter in calculateImpliedVolatility.",s.ErrorCode.UPDATE_TWS,e)}}const a=2;const u=[c.REQ_CALC_IMPLIED_VOLAT,a,e];u.push(t.conId);u.push(t.symbol);u.push(t.secType);u.push(t.lastTradeDateOrContractMonth);u.push(t.strike);u.push(t.right);u.push(t.multiplier);u.push(t.exchange);u.push(t.primaryExch);u.push(t.currency);u.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){u.push(t.tradingClass)}u.push(r);u.push(n);if(this.serverVersion>=i.default.LINKING){u.push(this.encodeTagValues(o))}this.sendMsg(u)}calculateOptionPrice(e,t,r,n,o){if(this.serverVersion<i.default.REQ_CALC_OPTION_PRICE){return this.emitError("It does not support calculate option price requests.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass){return this.emitError("It does not support tradingClass parameter in calculateOptionPrice.",s.ErrorCode.UPDATE_TWS,e)}}const a=2;const u=[c.REQ_CALC_OPTION_PRICE,a,e];u.push(t.conId);u.push(t.symbol);u.push(t.secType);u.push(t.lastTradeDateOrContractMonth);u.push(t.strike);u.push(t.right);u.push(t.multiplier);u.push(t.exchange);u.push(t.primaryExch);u.push(t.currency);u.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){u.push(t.tradingClass)}u.push(r);u.push(n);if(this.serverVersion>=i.default.LINKING){u.push(this.encodeTagValues(o))}this.sendMsg(u)}cancelAccountSummary(e){if(this.serverVersion<i.default.ACCT_SUMMARY){return this.emitError("It not support account summary cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_ACCOUNT_SUMMARY,t,e)}cancelAccountUpdatesMulti(e){const t=2;this.sendMsg(c.CANCEL_ACCOUNT_UPDATES_MULTI,t,e)}cancelCalculateImpliedVolatility(e){if(this.serverVersion<i.default.CANCEL_CALC_IMPLIED_VOLAT){return this.emitError("It does not support calculate implied volatility cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_CALC_IMPLIED_VOLAT,t,e)}cancelCalculateOptionPrice(e){if(this.serverVersion<i.default.CANCEL_CALC_OPTION_PRICE){return this.emitError("It does not support calculate option price cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_CALC_OPTION_PRICE,t,e)}cancelFundamentalData(e){if(this.serverVersion<i.default.FUNDAMENTAL_DATA){return this.emitError("It does not support fundamental data requests.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_FUNDAMENTAL_DATA,t,e)}cancelHistoricalData(e){if(this.serverVersion<24){return this.emitError("It does not support historical data query cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_HISTORICAL_DATA,t,e)}cancelMktData(e){const t=1;this.sendMsg(c.CANCEL_MKT_DATA,t,e)}cancelMktDepth(e,t){if(this.serverVersion<6){return this.emitError("This feature is only available for versions of TWS >=6.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.SMART_DEPTH&&t){return this.emitError("It does not support SMART depth cancel.",s.ErrorCode.UPDATE_TWS,e)}const r=1;const n=[c.CANCEL_MKT_DEPTH,r,e];if(this.serverVersion>=i.default.SMART_DEPTH){n.push(t)}this.sendMsg(n)}cancelNewsBulletins(){const e=1;this.sendMsg(c.CANCEL_NEWS_BULLETINS,e)}cancelOrder(e){const t=1;this.sendMsg(c.CANCEL_ORDER,t,e)}cancelPositions(){if(this.serverVersion<i.default.ACCT_SUMMARY){return this.emitError("It does not support position cancellation.",s.ErrorCode.UPDATE_TWS,-1)}const e=1;this.sendMsg(c.CANCEL_POSITIONS,e)}cancelRealTimeBars(e){if(this.serverVersion<i.default.REAL_TIME_BARS){return this.emitError("It does not support realtime bar data query cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_REAL_TIME_BARS,t,e)}cancelScannerSubscription(e){if(this.serverVersion<24){return this.emitError("It does not support API scanner subscription.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.CANCEL_SCANNER_SUBSCRIPTION,t,e)}exerciseOptions(e,t,r,n,o,a){const u=2;if(this.serverVersion<21){return this.emitError("It does not support options exercise from the API.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass||t.conId!=undefined){return this.emitError("It does not support conId and tradingClass parameters in exerciseOptions.",s.ErrorCode.UPDATE_TWS,e)}}const l=[c.EXERCISE_OPTIONS,u,e];if(this.serverVersion>=i.default.TRADING_CLASS){l.push(t.conId)}l.push(t.symbol);l.push(t.secType);l.push(t.lastTradeDateOrContractMonth);l.push(t.strike);l.push(t.right);l.push(t.multiplier);l.push(t.exchange);l.push(t.currency);l.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){l.push(t.tradingClass)}l.push(r);l.push(n);l.push(o);l.push(a);this.sendMsg(l)}placeOrder(e,t,r){var n,l,d,h,f,p,_,v,E,T,b,A,O,S,m,I,y,P,D,g,N,C;if(this.serverVersion<i.default.SCALE_ORDERS){if(r.scaleInitLevelSize!==undefined||r.scalePriceIncrement!==undefined){return this.emitError("It does not support Scale orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SSHORT_COMBO_LEGS){(n=t.comboLegs)===null||n===void 0?void 0:n.forEach((t=>{if(t.shortSaleSlot||!!t.designatedLocation){return this.emitError("It does not support SSHORT flag for combo legs.",s.ErrorCode.UPDATE_TWS,e)}}))}if(this.serverVersion<i.default.WHAT_IF_ORDERS){if(r.whatIf){return this.emitError("It does not support what-if orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.DELTA_NEUTRAL){if(t.deltaNeutralContract){return this.emitError("It does not support delta-neutral orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SCALE_ORDERS2){if(r.scaleSubsLevelSize!==undefined){return this.emitError("It does not support Subsequent Level Size for Scale orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.ALGO_ORDERS){if(!!r.algoStrategy){return this.emitError("It does not support algo orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.NOT_HELD){if(r.notHeld){return this.emitError("It does not support notHeld parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SEC_ID_TYPE){if(!!t.secIdType||!!t.secId){return this.emitError("It does not support secIdType and secId parameters.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.PLACE_ORDER_CONID){if(t.conId!=undefined){return this.emitError("It does not support conId parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SSHORTX){if(r.exemptCode!==-1){return this.emitError("It does not support exemptCode parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SSHORTX){(l=t.comboLegs)===null||l===void 0?void 0:l.forEach((t=>{if(t.exemptCode!==-1){return this.emitError("It does not support exemptCode parameter.",s.ErrorCode.UPDATE_TWS,e)}}))}if(this.serverVersion<i.default.HEDGE_ORDERS){if(!!r.hedgeType){return this.emitError("It does not support hedge orders.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.OPT_OUT_SMART_ROUTING){if(r.optOutSmartRouting){return this.emitError("It does not support optOutSmartRouting parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.DELTA_NEUTRAL_CONID){if(r.deltaNeutralConId!=undefined||!!r.deltaNeutralSettlingFirm||!!r.deltaNeutralClearingAccount||!!r.deltaNeutralClearingIntent){return this.emitError("It does not support deltaNeutral parameters: ConId, SettlingFirm, ClearingAccount, ClearingIntent.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.DELTA_NEUTRAL_OPEN_CLOSE){if(!!r.deltaNeutralOpenClose||r.deltaNeutralShortSale||r.deltaNeutralShortSaleSlot!=undefined||!!r.deltaNeutralDesignatedLocation){return this.emitError("It does not support deltaNeutral parameters: OpenClose, ShortSale, ShortSaleSlot, DesignatedLocation.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SCALE_ORDERS3){if(r.scalePriceIncrement!=undefined&&r.scalePriceIncrement!==undefined){if(r.scalePriceAdjustValue!==undefined||r.scalePriceAdjustInterval!==undefined||r.scaleProfitOffset!==undefined||r.scaleAutoReset||r.scaleInitPosition!==undefined||r.scaleInitFillQty!==undefined||r.scaleRandomPercent){return this.emitError("It does not support Scale order parameters: PriceAdjustValue, PriceAdjustInterval, ProfitOffset, AutoReset, InitPosition, InitFillQty and RandomPercent",s.ErrorCode.UPDATE_TWS,e)}}}if(this.serverVersion<i.default.ORDER_COMBO_LEGS_PRICE&&o.default.BAG===((d=t.secType)===null||d===void 0?void 0:d.toUpperCase())){(h=r.orderComboLegs)===null||h===void 0?void 0:h.forEach((t=>{if(t.price!==undefined){return this.emitError("It does not support per-leg prices for order combo legs.",s.ErrorCode.UPDATE_TWS,e)}}))}if(this.serverVersion<i.default.TRAILING_PERCENT){if(r.trailingPercent!==undefined){return this.emitError("It does not support trailing percent parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass){return this.emitError("It does not support tradingClass parameters in placeOrder.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SCALE_TABLE){if(!!r.scaleTable||!!r.activeStartTime||!!r.activeStopTime){return this.emitError("It does not support scaleTable, activeStartTime and activeStopTime parameters.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.ALGO_ID&&!!r.algoId){return this.emitError("It does not support algoId parameter",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.SCALE_TABLE){if(!!r.scaleTable||((f=r.activeStartTime)===null||f===void 0?void 0:f.length)||((p=r.activeStopTime)===null||p===void 0?void 0:p.length)){return this.emitError("It does not support scaleTable, activeStartTime and activeStopTime parameters.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.ORDER_SOLICITED){if(r.solicited){return this.emitError("It does not support order solicited parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.MODELS_SUPPORT){if(!!r.modelCode){return this.emitError("It does not support model code parameter.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.EXT_OPERATOR&&!!r.extOperator){return this.emitError("It does not support ext operator",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.SOFT_DOLLAR_TIER&&(!!((_=r.softDollarTier)===null||_===void 0?void 0:_.name)||!!((v=r.softDollarTier)===null||v===void 0?void 0:v.value))){return this.emitError("It does not support soft dollar tier",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.CASH_QTY){if(r.cashQty!==undefined){return this.emitError("It does not support cash quantity parameter",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.DECISION_MAKER&&(!!r.mifid2DecisionMaker||!!r.mifid2DecisionAlgo)){return this.emitError("It does not support MIFID II decision maker parameters",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.MIFID_EXECUTION&&(!!r.mifid2ExecutionTrader||!!r.mifid2ExecutionAlgo)){return this.emitError("It does not support MIFID II execution parameters",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.AUTO_PRICE_FOR_HEDGE&&r.dontUseAutoPriceForHedge){return this.emitError("It does not support don't use auto price for hedge parameter.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.ORDER_CONTAINER&&r.isOmsContainer){return this.emitError("It does not support oms container parameter.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.D_PEG_ORDERS&&r.discretionaryUpToLimitPrice){return this.emitError("It does not support D-Peg orders.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.PRICE_MGMT_ALGO&&r.usePriceMgmtAlgo!=null){return this.emitError("It does not support price management algo parameter",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.DURATION&&r.duration!=undefined){return this.emitError("It does not support duration attribute",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.POST_TO_ATS&&r.postToAts!=undefined){return this.emitError("It does not support postToAts attribute",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.AUTO_CANCEL_PARENT&&r.autoCancelParent!=null){return this.emitError("It does not support autoCancelParent attribute",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.ADVANCED_ORDER_REJECT&&r.advancedErrorOverride!=null){return this.emitError("It does not support advanced error override attribute",s.ErrorCode.UPDATE_TWS,e)}const M=this.serverVersion<i.default.NOT_HELD?27:45;const R=[c.PLACE_ORDER];if(this.serverVersion<i.default.ORDER_CONTAINER){R.push(M)}R.push(e);if(this.serverVersion>=i.default.PLACE_ORDER_CONID){R.push(t.conId)}R.push(t.symbol);R.push(t.secType);R.push(t.lastTradeDateOrContractMonth);R.push(t.strike);R.push(t.right);if(this.serverVersion>=15){R.push(t.multiplier)}R.push(t.exchange);if(this.serverVersion>=14){R.push(t.primaryExch)}R.push(t.currency);if(this.serverVersion>=2){R.push(t.localSymbol)}if(this.serverVersion>=i.default.TRADING_CLASS){R.push(t.tradingClass)}if(this.serverVersion>=i.default.SEC_ID_TYPE){R.push(t.secIdType);R.push(t.secId)}R.push(r.action);if(this.serverVersion>=i.default.FRACTIONAL_POSITIONS){R.push(r.totalQuantity)}else{R.push(r.totalQuantity?Math.round(r.totalQuantity):undefined)}R.push(r.orderType);if(this.serverVersion<i.default.ORDER_COMBO_LEGS_PRICE){R.push((E=r.lmtPrice)!==null&&E!==void 0?E:0)}else{R.push(nullifyMax(r.lmtPrice))}if(this.serverVersion<i.default.TRAILING_PERCENT){R.push((T=r.auxPrice)!==null&&T!==void 0?T:0)}else{R.push(nullifyMax(r.auxPrice))}R.push(r.tif);R.push(r.ocaGroup);R.push(r.account);R.push(r.openClose);R.push(r.origin);R.push(r.orderRef);R.push(r.transmit);if(this.serverVersion>=4){R.push(r.parentId)}if(this.serverVersion>=5){R.push(r.blockOrder);R.push(r.sweepToFill);R.push(r.displaySize);R.push(r.triggerMethod);if(this.serverVersion<38){R.push(false)}else{R.push(r.outsideRth)}}if(this.serverVersion>=7){R.push(r.hidden)}if(this.serverVersion>=8&&o.default.BAG===((b=t.secType)===null||b===void 0?void 0:b.toUpperCase())){if(!((A=t.comboLegs)===null||A===void 0?void 0:A.length)){R.push(0)}else{R.push(t.comboLegs.length);t.comboLegs.forEach((e=>{R.push(e.conId);R.push(e.ratio);R.push(e.action);R.push(e.exchange);R.push(e.openClose);if(this.serverVersion>=i.default.SSHORT_COMBO_LEGS){R.push(e.shortSaleSlot);R.push(e.designatedLocation)}if(this.serverVersion>=i.default.SSHORTX_OLD){R.push(e.exemptCode)}}))}}if(this.serverVersion>=i.default.ORDER_COMBO_LEGS_PRICE&&o.default.BAG===((O=t.secType)===null||O===void 0?void 0:O.toUpperCase())){if(!((S=r.orderComboLegs)===null||S===void 0?void 0:S.length)){R.push(0)}else{R.push(r.orderComboLegs.length);r.orderComboLegs.forEach((function(e){R.push(nullifyMax(e.price))}))}}if(this.serverVersion>=i.default.SMART_COMBO_ROUTING_PARAMS&&o.default.BAG===((m=t.secType)===null||m===void 0?void 0:m.toUpperCase())){const e=!r.smartComboRoutingParams?0:r.smartComboRoutingParams.length;R.push(e);if(e>0){(I=r.smartComboRoutingParams)===null||I===void 0?void 0:I.forEach((e=>{R.push(e.tag);R.push(e.value)}))}}if(this.serverVersion>=9){R.push("")}if(this.serverVersion>=10){R.push(r.discretionaryAmt)}if(this.serverVersion>=11){R.push(r.goodAfterTime)}if(this.serverVersion>=12){R.push(r.goodTillDate)}if(this.serverVersion>=13){R.push(r.faGroup);R.push(r.faMethod);R.push(r.faPercentage);R.push(r.faProfile)}if(this.serverVersion>=i.default.MODELS_SUPPORT){R.push(r.modelCode)}if(this.serverVersion>=18){R.push(r.shortSaleSlot);R.push(r.designatedLocation)}if(this.serverVersion>=i.default.SSHORTX_OLD){R.push(r.exemptCode)}if(this.serverVersion>=19){R.push(r.ocaType);if(this.serverVersion<38){R.push(false)}R.push(r.rule80A);R.push(r.settlingFirm);R.push(r.allOrNone);R.push(nullifyMax(r.minQty));R.push(nullifyMax(r.percentOffset));R.push(r.eTradeOnly);R.push(r.firmQuoteOnly);R.push(nullifyMax(r.nbboPriceCap));R.push(nullifyMax(r.auctionStrategy));R.push(nullifyMax(r.startingPrice));R.push(nullifyMax(r.stockRefPrice));R.push(nullifyMax(r.delta));const e=this.serverVersion===26&&r.orderType==="VOL"?undefined:r.stockRangeLower;const t=this.serverVersion===26&&r.orderType==="VOL"?undefined:r.stockRangeUpper;R.push(e);R.push(t)}if(this.serverVersion>=22){R.push(r.overridePercentageConstraints)}if(this.serverVersion>=26){R.push(nullifyMax(r.volatility));R.push(nullifyMax(r.volatilityType));if(this.serverVersion<28){R.push(((y=r.deltaNeutralOrderType)===null||y===void 0?void 0:y.toUpperCase())==="MKT")}else{R.push(r.deltaNeutralOrderType);R.push(nullifyMax(r.deltaNeutralAuxPrice));if(this.serverVersion>=i.default.DELTA_NEUTRAL_CONID&&!!r.deltaNeutralOrderType){R.push(r.deltaNeutralConId);R.push(r.deltaNeutralSettlingFirm);R.push(r.deltaNeutralClearingAccount);R.push(r.deltaNeutralClearingIntent)}if(this.serverVersion>=i.default.DELTA_NEUTRAL_OPEN_CLOSE&&!!r.deltaNeutralOrderType){R.push(r.deltaNeutralOpenClose);R.push(r.deltaNeutralShortSale);R.push(r.deltaNeutralShortSaleSlot);R.push(r.deltaNeutralDesignatedLocation)}}R.push(r.continuousUpdate);if(this.serverVersion===26){const e=r.orderType==="VOL"?r.stockRangeLower:undefined;const t=r.orderType==="VOL"?r.stockRangeUpper:undefined;R.push(nullifyMax(e));R.push(nullifyMax(t))}R.push(nullifyMax(r.referencePriceType))}if(this.serverVersion>=30){R.push(nullifyMax(r.trailStopPrice))}if(this.serverVersion>=i.default.TRAILING_PERCENT){R.push(nullifyMax(r.trailingPercent))}if(this.serverVersion>=i.default.SCALE_ORDERS){if(this.serverVersion>=i.default.SCALE_ORDERS2){R.push(nullifyMax(r.scaleInitLevelSize));R.push(nullifyMax(r.scaleSubsLevelSize))}else{R.push("");R.push(nullifyMax(r.scaleInitLevelSize))}R.push(nullifyMax(r.scalePriceIncrement))}if(this.serverVersion>=i.default.SCALE_ORDERS3&&r.scalePriceIncrement!==undefined){R.push(nullifyMax(r.scalePriceAdjustValue));R.push(nullifyMax(r.scalePriceAdjustInterval));R.push(nullifyMax(r.scaleProfitOffset));R.push(r.scaleAutoReset);R.push(nullifyMax(r.scaleInitPosition));R.push(nullifyMax(r.scaleInitFillQty));R.push(r.scaleRandomPercent)}if(this.serverVersion>=i.default.SCALE_TABLE){R.push(r.scaleTable);R.push(r.activeStartTime);R.push(r.activeStopTime)}if(this.serverVersion>=i.default.HEDGE_ORDERS){R.push(r.hedgeType);if(!!r.hedgeType){R.push(r.hedgeParam)}}if(this.serverVersion>=i.default.OPT_OUT_SMART_ROUTING){R.push(r.optOutSmartRouting)}if(this.serverVersion>=i.default.PTA_ORDERS){R.push(r.clearingAccount);R.push(r.clearingIntent)}if(this.serverVersion>=i.default.NOT_HELD){R.push(r.notHeld)}if(this.serverVersion>=i.default.DELTA_NEUTRAL){if(t.deltaNeutralContract){R.push(true);R.push(t.deltaNeutralContract.conId);R.push(t.deltaNeutralContract.delta);R.push(t.deltaNeutralContract.price)}else{R.push(false)}}if(this.serverVersion>=i.default.ALGO_ORDERS){R.push(r.algoStrategy);if(!!r.algoStrategy){const e=((P=r.algoParams)===null||P===void 0?void 0:P.length)?r.algoParams.length:0;R.push(e);if(e>0){(D=r.algoParams)===null||D===void 0?void 0:D.forEach((e=>{R.push(e.tag);R.push(e.value)}))}}}if(this.serverVersion>=i.default.ALGO_ID){R.push(r.algoId)}if(this.serverVersion>=i.default.WHAT_IF_ORDERS){R.push(r.whatIf)}if(this.serverVersion>=i.default.LINKING){R.push(r.orderMiscOptions)}if(this.serverVersion>=i.default.ORDER_SOLICITED){R.push(r.solicited)}if(this.serverVersion>=i.default.RANDOMIZE_SIZE_AND_PRICE){R.push(r.randomizeSize);R.push(r.randomizePrice)}if(this.serverVersion>=i.default.PEGGED_TO_BENCHMARK){if(r.orderType==u.OrderType.PEG_BENCH){R.push(r.referenceContractId);R.push(r.isPeggedChangeAmountDecrease);R.push(r.peggedChangeAmount);R.push(r.referenceChangeAmount);R.push(r.referenceExchangeId)}const e=r.conditions?r.conditions.length:0;R.push(e);if(e>0){(g=r.conditions)===null||g===void 0?void 0:g.forEach((e=>{R.push(e.type);R.push(e.conjunctionConnection);switch(e.type){case a.OrderConditionType.Execution:{const t=e;R.push(t.secType);R.push(t.exchange);R.push(t.symbol);break}case a.OrderConditionType.Margin:{const t=e;R.push(t.isMore);R.push(t.strValue);break}case a.OrderConditionType.PercentChange:{const t=e;R.push(t.isMore);R.push(t.strValue);R.push(t.conId);R.push(t.exchange);break}case a.OrderConditionType.Price:{const t=e;R.push(t.isMore);R.push(t.strValue);R.push(t.conId);R.push(t.exchange);R.push(t.triggerMethod);break}case a.OrderConditionType.Time:{const t=e;R.push(t.isMore);R.push(t.strValue);break}case a.OrderConditionType.Volume:{const t=e;R.push(t.isMore);R.push(t.strValue);R.push(t.conId);R.push(t.exchange);break}}}));R.push(r.conditionsIgnoreRth);R.push(r.conditionsCancelOrder)}R.push(r.adjustedOrderType);R.push(r.triggerPrice);R.push(r.lmtPriceOffset);R.push(r.adjustedStopPrice);R.push(r.adjustedStopLimitPrice);R.push(r.adjustedTrailingAmount);R.push(r.adjustableTrailingUnit)}if(this.serverVersion>=i.default.EXT_OPERATOR){R.push(r.extOperator)}if(this.serverVersion>=i.default.SOFT_DOLLAR_TIER){R.push(((N=r.softDollarTier)===null||N===void 0?void 0:N.name)?r.softDollarTier.name:"");R.push(((C=r.softDollarTier)===null||C===void 0?void 0:C.value)?r.softDollarTier.value:"")}if(this.serverVersion>=i.default.CASH_QTY){R.push(nullifyMax(r.cashQty))}if(this.serverVersion>=i.default.DECISION_MAKER){R.push(r.mifid2DecisionMaker);R.push(r.mifid2DecisionAlgo)}if(this.serverVersion>=i.default.MIFID_EXECUTION){R.push(r.mifid2ExecutionTrader);R.push(r.mifid2ExecutionAlgo)}if(this.serverVersion>=i.default.AUTO_PRICE_FOR_HEDGE){R.push(r.dontUseAutoPriceForHedge)}if(this.serverVersion>=i.default.ORDER_CONTAINER){R.push(r.isOmsContainer)}if(this.serverVersion>=i.default.D_PEG_ORDERS){R.push(r.discretionaryUpToLimitPrice)}if(this.serverVersion>=i.default.PRICE_MGMT_ALGO){R.push(r.usePriceMgmtAlgo)}if(this.serverVersion>=i.default.DURATION){R.push(r.duration)}if(this.serverVersion>=i.default.POST_TO_ATS){R.push(r.postToAts)}if(this.serverVersion>=i.default.AUTO_CANCEL_PARENT){R.push(r.autoCancelParent)}if(this.serverVersion>=i.default.ADVANCED_ORDER_REJECT)R.push(r.advancedErrorOverride);this.sendMsg(R)}replaceFA(e,t,r){if(this.serverVersion<13){return this.emitError("This feature is only available for versions of TWS >= 13.",s.ErrorCode.UPDATE_TWS,-1)}const n=1;const o=[c.REPLACE_FA,n,t,r];if(this.serverVersion>=i.default.REPLACE_FA_END){o.push(e)}this.sendMsg(o)}reqAccountSummary(e,t,r){if(this.serverVersion<i.default.ACCT_SUMMARY){return this.emitError("It does not support account summary requests.",s.ErrorCode.UPDATE_TWS,e)}const n=1;this.sendMsg(c.REQ_ACCOUNT_SUMMARY,n,e,t,r)}reqPnL(e,t,r){if(this.serverVersion<i.default.PNL){return this.emitError("It does not support pnl requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_PNL,e,t,r)}cancelPnL(e){if(this.serverVersion<i.default.PNL){return this.emitError("It does not support pnl requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.CANCEL_PNL,e)}reqPnLSingle(e,t,r,n){if(this.serverVersion<i.default.PNL){return this.emitError("It does not support pnl requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_PNL_SINGLE,e,t,r,n)}cancelPnLSingle(e){if(this.serverVersion<i.default.PNL){return this.emitError("It does not support pnl requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.CANCEL_PNL_SINGLE,e)}reqAccountUpdates(e,t){const r=2;const n=[c.REQ_ACCOUNT_DATA,r,e];if(this.serverVersion>=9){n.push(t)}this.sendMsg(n)}reqAccountUpdatesMulti(e,t,r,n){const i=2;this.sendMsg(c.REQ_ACCOUNT_UPDATES_MULTI,i,e,t,r,n)}reqAllOpenOrders(){const e=1;this.sendMsg(c.REQ_ALL_OPEN_ORDERS,e)}reqAutoOpenOrders(e){const t=1;this.sendMsg(c.REQ_AUTO_OPEN_ORDERS,t,e)}reqHeadTimestamp(e,t,r,n,o){if(this.serverVersion<i.default.REQ_HEAD_TIMESTAMP){return this.emitError("It does not support reqHeadTimeStamp",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_HEAD_TIMESTAMP,e,this.encodeContract(t),r,n?1:0,o)}reqContractDetails(e,t){if(this.serverVersion<4){return this.emitError("This feature is only available for versions of TWS >=4",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.SEC_ID_TYPE){if(!!t.secIdType||!!t.secId){return this.emitError("It does not support secIdType and secId parameters.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass){return this.emitError("It does not support tradingClass parameter in reqContractDetails.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.LINKING){if(!!t.primaryExch){return this.emitError("It does not support primaryExchange parameter in reqContractDetails.",s.ErrorCode.UPDATE_TWS,e)}}const r=8;const n=[c.REQ_CONTRACT_DATA,r];if(this.serverVersion>=i.default.CONTRACT_DATA_CHAIN){n.push(e)}if(this.serverVersion>=i.default.CONTRACT_CONID){n.push(t.conId)}n.push(t.symbol);n.push(t.secType);n.push(t.lastTradeDateOrContractMonth);n.push(t.strike);n.push(t.right);if(this.serverVersion>=15){n.push(t.multiplier)}if(this.serverVersion>=i.default.PRIMARYEXCH){n.push(t.exchange);n.push(t.primaryExch)}else if(this.serverVersion>=i.default.LINKING){if(!!t.primaryExch&&("BEST"===t.exchange||"SMART"===t.exchange)){n.push(t.exchange+":"+t.primaryExch)}else{n.push(t.exchange)}}n.push(t.currency);n.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){n.push(t.tradingClass)}if(this.serverVersion>=31){n.push(t.includeExpired)}if(this.serverVersion>=i.default.SEC_ID_TYPE){n.push(t.secIdType);n.push(t.secId)}this.sendMsg(n)}reqCurrentTime(){if(this.serverVersion<33){return this.emitError("It does not support current time requests.",s.ErrorCode.UPDATE_TWS,-1)}const e=1;this.sendMsg(c.REQ_CURRENT_TIME,e)}reqExecutions(e,t){const r=3;const n=[c.REQ_EXECUTIONS,r];if(this.serverVersion>=i.default.EXECUTION_DATA_CHAIN){n.push(e)}if(this.serverVersion>=9){n.push(t.clientId);n.push(t.acctCode);n.push(t.time);n.push(t.symbol);n.push(t.secType);n.push(t.exchange);n.push(t.side)}this.sendMsg(n)}reqFundamentalData(e,t,r,n){if(this.serverVersion<i.default.FUNDAMENTAL_DATA){return this.emitError("It does not support fundamental data requests.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(t.conId!=undefined){return this.emitError("It does not support conId parameter in reqFundamentalData.",s.ErrorCode.UPDATE_TWS,e)}}const o=2;const a=[c.REQ_FUNDAMENTAL_DATA,o,e];if(this.serverVersion>=i.default.TRADING_CLASS){a.push(t.conId)}a.push(t.symbol);a.push(t.secType);a.push(t.exchange);a.push(t.primaryExch);a.push(t.currency);a.push(t.localSymbol);a.push(r);if(this.serverVersion>=i.default.LINKING){a.push(this.encodeTagValues(n))}this.sendMsg(a)}reqGlobalCancel(){if(this.serverVersion<i.default.REQ_GLOBAL_CANCEL){return this.emitError("It does not support globalCancel requests.",s.ErrorCode.UPDATE_TWS,-1)}const e=1;this.sendMsg(c.REQ_GLOBAL_CANCEL,e)}reqHistoricalData(e,t,r,n,a,u,l,d,h,f){var p;const _=6;if(this.serverVersion<16){return this.emitError("It does not support historical data backfill.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass||t.conId!=undefined){return this.emitError("It does not support conId and tradingClass parameters in reqHistoricalData.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.HISTORICAL_SCHEDULE){if(typeof u==="string"&&u.toUpperCase()==="SCHEDULE"){return this.emitError("It does not support requesting of historical schedule.",s.ErrorCode.UPDATE_TWS,e)}}const v=[c.REQ_HISTORICAL_DATA];if(this.serverVersion<i.default.SYNT_REALTIME_BARS){v.push(_)}v.push(e);if(this.serverVersion>=i.default.TRADING_CLASS){v.push(t.conId)}v.push(t.symbol);v.push(t.secType);v.push(t.lastTradeDateOrContractMonth);v.push(t.strike);v.push(t.right);v.push(t.multiplier);v.push(t.exchange);v.push(t.primaryExch);v.push(t.currency);v.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){v.push(t.tradingClass)}if(this.serverVersion>=31){v.push(!!t.includeExpired)}if(this.serverVersion>=20){v.push(r);v.push(a)}v.push(n);v.push(l);v.push(u);if(this.serverVersion>16){v.push(d)}if(o.default.BAG===((p=t.secType)===null||p===void 0?void 0:p.toUpperCase())){if(!t.comboLegs){v.push(0)}else{v.push(t.comboLegs.length);t.comboLegs.forEach((e=>{v.push(e.conId);v.push(e.ratio);v.push(e.action);v.push(e.exchange)}))}}if(this.serverVersion>=i.default.SYNT_REALTIME_BARS){v.push(h)}if(this.serverVersion>=i.default.LINKING){v.push(this.encodeTagValues(f))}this.sendMsg(v)}reqHistoricalTicks(e,t,r,n,o,a,u,l,d){if(this.serverVersion<i.default.HISTORICAL_TICKS){return this.emitError("It does not support historical ticks request.",s.ErrorCode.UPDATE_TWS,e)}const h=[c.REQ_HISTORICAL_TICKS,e];h.push(t.conId);h.push(t.symbol);h.push(t.secType);h.push(t.lastTradeDateOrContractMonth);h.push(t.strike);h.push(t.right);h.push(t.multiplier);h.push(t.exchange);h.push(t.primaryExch);h.push(t.currency);h.push(t.localSymbol);h.push(t.tradingClass);h.push(t.includeExpired);h.push(r);h.push(n);h.push(o);h.push(a);h.push(u);h.push(l);h.push(this.encodeTagValues(d));this.sendMsg(h)}encodeReqTickByTickData(e,t,r,n,o){const s=[c.REQ_TICK_BY_TICK_DATA,e];s.push(t.conId);s.push(t.symbol);s.push(t.secType);s.push(t.lastTradeDateOrContractMonth);s.push(t.strike);s.push(t.right);s.push(t.multiplier);s.push(t.exchange);s.push(t.primaryExch);s.push(t.currency);s.push(t.localSymbol);s.push(t.tradingClass);s.push(r);if(this.serverVersion>=i.default.TICK_BY_TICK_IGNORE_SIZE){s.push(n);s.push(o)}return s}reqTickByTickData(e,t,r,n,o){if(this.serverVersion<i.default.TICK_BY_TICK){this.emitError("It does not support tick-by-tick data requests.",s.ErrorCode.UPDATE_TWS,e)}else if(this.serverVersion<i.default.TICK_BY_TICK_IGNORE_SIZE&&(n!=0||o)){this.emitError("It does not support ignoreSize and numberOfTicks parameters in tick-by-tick data requests.",s.ErrorCode.UPDATE_TWS,e)}else{const i=this.encodeReqTickByTickData(e,t,r,n,o);this.sendMsg(i)}}cancelTickByTickData(e){if(this.serverVersion<i.default.TICK_BY_TICK){return this.emitError("It does not support tick-by-tick data cancels.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.CANCEL_TICK_BY_TICK_DATA,e)}reqIds(e){const t=1;this.sendMsg(c.REQ_IDS,t,e)}reqManagedAccts(){const e=1;this.sendMsg(c.REQ_MANAGED_ACCTS,e)}reqMarketDataType(e){if(this.serverVersion<i.default.REQ_MARKET_DATA_TYPE){return this.emitError("It does not support marketDataType requests.",s.ErrorCode.UPDATE_TWS,-1)}const t=1;this.sendMsg(c.REQ_MARKET_DATA_TYPE,t,e)}reqMktData(e,t,r,n,a){var u;if(this.serverVersion<i.default.SNAPSHOT_MKT_DATA&&n){return this.emitError("It does not support snapshot market data requests.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.DELTA_NEUTRAL){return this.emitError("It does not support delta-neutral orders.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.REQ_MKT_DATA_CONID){return this.emitError("It does not support conId parameter.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass){return this.emitError("It does not support tradingClass parameter in reqMarketData.",s.ErrorCode.UPDATE_TWS,e)}}const l=11;const d=[c.REQ_MKT_DATA,l,e];if(this.serverVersion>=i.default.REQ_MKT_DATA_CONID){d.push(t.conId)}d.push(t.symbol);d.push(t.secType);d.push(t.lastTradeDateOrContractMonth);d.push(t.strike);d.push(t.right);if(this.serverVersion>=15){d.push(t.multiplier)}d.push(t.exchange);if(this.serverVersion>=14){d.push(t.primaryExch)}d.push(t.currency);if(this.serverVersion>=2){d.push(t.localSymbol)}if(this.serverVersion>=i.default.TRADING_CLASS){d.push(t.tradingClass)}if(this.serverVersion>=8&&o.default.BAG===((u=t.secType)===null||u===void 0?void 0:u.toUpperCase())){if(!t.comboLegs){d.push(0)}else{d.push(t.comboLegs.length);t.comboLegs.forEach((e=>{d.push(e.conId);d.push(e.ratio);d.push(e.action);d.push(e.exchange)}))}}if(this.serverVersion>=i.default.DELTA_NEUTRAL){if(t.deltaNeutralContract){d.push(true);d.push(t.deltaNeutralContract.conId);d.push(t.deltaNeutralContract.delta);d.push(t.deltaNeutralContract.price)}else{d.push(false)}}if(this.serverVersion>=31){d.push(r)}if(this.serverVersion>=i.default.SNAPSHOT_MKT_DATA){d.push(n)}if(this.serverVersion>=i.default.REQ_SMART_COMPONENTS){d.push(a)}if(this.serverVersion>=i.default.LINKING){d.push("")}this.sendMsg(d)}reqMktDepth(e,t,r,n,o){if(this.serverVersion<6){return this.emitError("This feature is only available for versions of TWS >=6",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass||t.conId!=undefined){return this.emitError("It does not support conId and tradingClass parameters in reqMktDepth.",s.ErrorCode.UPDATE_TWS,e)}}if(this.serverVersion<i.default.SMART_DEPTH&&n){return this.emitError("It does not support SMART depth request.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.MKT_DEPTH_PRIM_EXCHANGE&&!!t.primaryExch){return this.emitError("It does not support primaryExch parameter in reqMktDepth.",s.ErrorCode.UPDATE_TWS,e)}const a=5;const u=[c.REQ_MKT_DEPTH,a,e];if(this.serverVersion>=i.default.TRADING_CLASS){u.push(t.conId)}u.push(t.symbol);u.push(t.secType);u.push(t.lastTradeDateOrContractMonth);u.push(t.strike);u.push(t.right);if(this.serverVersion>=15){u.push(t.multiplier)}u.push(t.exchange);if(this.serverVersion>=i.default.MKT_DEPTH_PRIM_EXCHANGE){u.push(t.primaryExch)}u.push(t.currency);u.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){u.push(t.tradingClass)}if(this.serverVersion>=19){u.push(r)}if(this.serverVersion>=i.default.SMART_DEPTH){u.push(n)}if(this.serverVersion>=i.default.LINKING){u.push(this.encodeTagValues(o))}this.sendMsg(u)}reqNewsBulletins(e){const t=1;this.sendMsg(c.REQ_NEWS_BULLETINS,t,e)}reqOpenOrders(){const e=1;this.sendMsg(c.REQ_OPEN_ORDERS,e)}reqPositions(){if(this.serverVersion<i.default.ACCT_SUMMARY){return this.emitError("It does not support position requests.",s.ErrorCode.UPDATE_TWS,-1)}const e=1;this.sendMsg(c.REQ_POSITIONS,e)}reqPositionsMulti(e,t,r){if(this.serverVersion<i.default.MODELS_SUPPORT){return this.emitError("It does not support position requests.",s.ErrorCode.UPDATE_TWS,e)}const n=1;this.sendMsg(c.REQ_POSITIONS_MULTI,n,e,t,r)}cancelPositionsMulti(e){if(this.serverVersion<i.default.MODELS_SUPPORT){return this.emitError("It does not support positions multi cancellation.",s.ErrorCode.UPDATE_TWS,e)}const t=1;this.sendMsg(c.REQ_POSITIONS_MULTI,t,e)}reqRealTimeBars(e,t,r,n,o,a){if(this.serverVersion<i.default.REAL_TIME_BARS){return this.emitError("It does not support real time bars.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.TRADING_CLASS){if(!!t.tradingClass||t.conId!=undefined){return this.emitError("It does not support conId and tradingClass parameters in reqRealTimeBars.",s.ErrorCode.UPDATE_TWS,e)}}const u=3;const l=[c.REQ_REAL_TIME_BARS,u,e];if(this.serverVersion>=i.default.TRADING_CLASS){l.push(t.conId)}l.push(t.symbol);l.push(t.secType);l.push(t.lastTradeDateOrContractMonth);l.push(t.strike);l.push(t.right);l.push(t.multiplier);l.push(t.exchange);l.push(t.primaryExch);l.push(t.currency);l.push(t.localSymbol);if(this.serverVersion>=i.default.TRADING_CLASS){l.push(t.tradingClass)}l.push(r);l.push(n);l.push(o);if(this.serverVersion>=i.default.LINKING){l.push(this.encodeTagValues(a))}this.sendMsg(l)}reqScannerParameters(){if(this.serverVersion<24){return this.emitError("It does not support API scanner subscription.",s.ErrorCode.UPDATE_TWS,-1)}const e=1;this.sendMsg(c.REQ_SCANNER_PARAMETERS,e)}reqScannerSubscription(e,t,r,n){if(this.serverVersion<24){return this.emitError("It does not support API scanner subscription.",s.ErrorCode.UPDATE_TWS,e)}if(this.serverVersion<i.default.SCANNER_GENERIC_OPTS&&n){return this.emitError("It does not support API scanner subscription generic filter options.",s.ErrorCode.UPDATE_TWS,e)}const o=4;const a=[c.REQ_SCANNER_SUBSCRIPTION];if(this.serverVersion<i.default.SCANNER_GENERIC_OPTS){a.push(o)}a.push(e);a.push(nullifyMax(t.numberOfRows));a.push(t.instrument);a.push(t.locationCode);a.push(t.scanCode);a.push(nullifyMax(t.abovePrice));a.push(nullifyMax(t.belowPrice));a.push(nullifyMax(t.aboveVolume));a.push(nullifyMax(t.marketCapAbove));a.push(nullifyMax(t.marketCapBelow));a.push(t.moodyRatingAbove);a.push(t.moodyRatingBelow);a.push(t.spRatingAbove);a.push(t.spRatingBelow);a.push(t.maturityDateAbove);a.push(t.maturityDateBelow);a.push(nullifyMax(t.couponRateAbove));a.push(nullifyMax(t.couponRateBelow));a.push(t.excludeConvertible);if(this.serverVersion>=25){a.push(nullifyMax(t.averageOptionVolumeAbove));a.push(t.scannerSettingPairs)}if(this.serverVersion>=27){a.push(t.stockTypeFilter)}if(this.serverVersion>=i.default.SCANNER_GENERIC_OPTS){a.push(this.encodeTagValues(n))}if(this.serverVersion>=i.default.LINKING){a.push(this.encodeTagValues(r))}this.sendMsg(a)}requestFA(e){if(this.serverVersion<13){return this.emitError("This feature is only available for versions of TWS >= 13.",s.ErrorCode.UPDATE_TWS,-1)}const t=1;this.sendMsg(c.REQ_FA,t,e)}setServerLogLevel(e){const t=1;this.sendMsg(c.SET_SERVER_LOGLEVEL,t,e)}queryDisplayGroups(e){const t=1;this.sendMsg(c.QUERY_DISPLAY_GROUPS,t,e)}updateDisplayGroup(e,t){const r=1;this.sendMsg(c.UPDATE_DISPLAY_GROUP,r,e,t)}subscribeToGroupEvents(e,t){const r=1;this.sendMsg(c.SUBSCRIBE_TO_GROUP_EVENTS,r,e,t)}unsubscribeToGroupEvents(e){const t=1;this.sendMsg(c.UNSUBSCRIBE_FROM_GROUP_EVENTS,t,e)}reqSecDefOptParams(e,t,r,n,o){if(this.serverVersion<i.default.SEC_DEF_OPT_PARAMS_REQ){return this.emitError("It does not support reqSecDefOptParams.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_SEC_DEF_OPT_PARAMS,e,t,r,n,o)}reqSoftDollarTiers(e){if(this.serverVersion<i.default.SOFT_DOLLAR_TIER){return this.emitError("It does not support soft dollar tier requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_SOFT_DOLLAR_TIERS,e)}reqFamilyCodes(){if(this.serverVersion<i.default.REQ_FAMILY_CODES){return this.emitError("It does not support family codes request.",s.ErrorCode.UPDATE_TWS,-1)}this.sendMsg(c.REQ_FAMILY_CODES)}reqMatchingSymbols(e,t){if(this.serverVersion<i.default.REQ_MATCHING_SYMBOLS){return this.emitError("It does not support matching symbols request.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_MATCHING_SYMBOLS,e,t)}reqMktDepthExchanges(){if(this.serverVersion<i.default.REQ_MKT_DEPTH_EXCHANGES){return this.emitError("It does not support market depth exchanges request.",s.ErrorCode.UPDATE_TWS,-1)}this.sendMsg(c.REQ_MKT_DEPTH_EXCHANGES)}reqSmartComponents(e,t){if(this.serverVersion<i.default.REQ_SMART_COMPONENTS){return this.emitError("It does not support smart components request.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_SMART_COMPONENTS,e,t)}reqNewsArticle(e,t,r,n){if(this.serverVersion<i.default.REQ_NEWS_ARTICLE){return this.emitError("It does not support news article request.",s.ErrorCode.UPDATE_TWS,e)}const o=[c.REQ_NEWS_ARTICLE,e,t,r];if(this.serverVersion>=i.default.NEWS_QUERY_ORIGINS){o.push(this.encodeTagValues(n))}this.sendMsg(o)}reqNewsProviders(){if(this.serverVersion<i.default.REQ_SMART_COMPONENTS){return this.emitError("It does not support smart components request.",s.ErrorCode.UPDATE_TWS,-1)}this.sendMsg(c.REQ_NEWS_PROVIDERS)}reqHistoricalNews(e,t,r,n,o,a,u){if(this.serverVersion<i.default.REQ_HISTORICAL_NEWS){return this.emitError("It does not support historical news request.",s.ErrorCode.UPDATE_TWS,e)}const l=[c.REQ_NEWS_PROVIDERS,e,t,r,n,o,o,a];if(this.serverVersion>=i.default.NEWS_QUERY_ORIGINS){l.push(this.encodeTagValues(u))}this.sendMsg(l)}reqHistogramData(e,t,r,n){if(this.serverVersion<i.default.REQ_HISTOGRAM){return this.emitError("It does not support histogram requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_HISTOGRAM_DATA,e,this.encodeContract(t),n,r?1:0)}cancelHistogramData(e){if(this.serverVersion<i.default.REQ_HISTOGRAM){return this.emitError("It does not support head time stamp requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.CANCEL_HISTOGRAM_DATA,e)}cancelHeadTimestamp(e){if(this.serverVersion<i.default.CANCEL_HEADTIMESTAMP){return this.emitError("It does not support head time stamp requests canceling.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.CANCEL_HEAD_TIMESTAMP,e)}reqMarketRule(e){if(this.serverVersion<i.default.MARKET_RULES){return this.emitError("It does not support market rule requests.",s.ErrorCode.UPDATE_TWS,e)}this.sendMsg(c.REQ_MARKET_RULE,e)}reqCompletedOrders(e){if(this.serverVersion<i.default.REQ_COMPLETED_ORDERS){return this.emitError("It does not support completed orders requests.",s.ErrorCode.UPDATE_TWS,-1)}this.sendMsg(c.REQ_COMPLETED_ORDERS,e)}reqWshMetaData(e){if(this.serverVersion<i.default.WSHE_CALENDAR){return this.emitError("It does not support WSHE Calendar API.",s.ErrorCode.UPDATE_TWS,-1);return}this.sendMsg(c.REQ_WSH_META_DATA,e)}reqCancelWshMetaData(e){if(this.serverVersion<i.default.WSHE_CALENDAR){return this.emitError("It does not support WSHE Calendar API.",s.ErrorCode.UPDATE_TWS,-1);return}this.sendMsg(c.CANCEL_WSH_META_DATA,e)}reqWshEventData(e,t){if(this.serverVersion<i.default.WSHE_CALENDAR){return this.emitError("It does not support WSHE Calendar API.",s.ErrorCode.UPDATE_TWS,-1);return}this.sendMsg(c.REQ_WSH_EVENT_DATA,e,t)}reqCancelWshEventData(e){if(this.serverVersion<i.default.WSHE_CALENDAR){return this.emitError("It does not support WSHE Calendar API.",s.ErrorCode.UPDATE_TWS,-1);return}this.sendMsg(c.CANCEL_WSH_EVENT_DATA,e)}}t.Encoder=Encoder},4205:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.IN_MSG_ID=void 0;var r;(function(e){e[e["UNDEFINED"]=-1]="UNDEFINED";e[e["TICK_PRICE"]=1]="TICK_PRICE";e[e["TICK_SIZE"]=2]="TICK_SIZE";e[e["ORDER_STATUS"]=3]="ORDER_STATUS";e[e["ERR_MSG"]=4]="ERR_MSG";e[e["OPEN_ORDER"]=5]="OPEN_ORDER";e[e["ACCT_VALUE"]=6]="ACCT_VALUE";e[e["PORTFOLIO_VALUE"]=7]="PORTFOLIO_VALUE";e[e["ACCT_UPDATE_TIME"]=8]="ACCT_UPDATE_TIME";e[e["NEXT_VALID_ID"]=9]="NEXT_VALID_ID";e[e["CONTRACT_DATA"]=10]="CONTRACT_DATA";e[e["EXECUTION_DATA"]=11]="EXECUTION_DATA";e[e["MARKET_DEPTH"]=12]="MARKET_DEPTH";e[e["MARKET_DEPTH_L2"]=13]="MARKET_DEPTH_L2";e[e["NEWS_BULLETINS"]=14]="NEWS_BULLETINS";e[e["MANAGED_ACCTS"]=15]="MANAGED_ACCTS";e[e["RECEIVE_FA"]=16]="RECEIVE_FA";e[e["HISTORICAL_DATA"]=17]="HISTORICAL_DATA";e[e["BOND_CONTRACT_DATA"]=18]="BOND_CONTRACT_DATA";e[e["SCANNER_PARAMETERS"]=19]="SCANNER_PARAMETERS";e[e["SCANNER_DATA"]=20]="SCANNER_DATA";e[e["TICK_OPTION_COMPUTATION"]=21]="TICK_OPTION_COMPUTATION";e[e["TICK_GENERIC"]=45]="TICK_GENERIC";e[e["TICK_STRING"]=46]="TICK_STRING";e[e["TICK_EFP"]=47]="TICK_EFP";e[e["CURRENT_TIME"]=49]="CURRENT_TIME";e[e["REAL_TIME_BARS"]=50]="REAL_TIME_BARS";e[e["FUNDAMENTAL_DATA"]=51]="FUNDAMENTAL_DATA";e[e["CONTRACT_DATA_END"]=52]="CONTRACT_DATA_END";e[e["OPEN_ORDER_END"]=53]="OPEN_ORDER_END";e[e["ACCT_DOWNLOAD_END"]=54]="ACCT_DOWNLOAD_END";e[e["EXECUTION_DATA_END"]=55]="EXECUTION_DATA_END";e[e["DELTA_NEUTRAL_VALIDATION"]=56]="DELTA_NEUTRAL_VALIDATION";e[e["TICK_SNAPSHOT_END"]=57]="TICK_SNAPSHOT_END";e[e["MARKET_DATA_TYPE"]=58]="MARKET_DATA_TYPE";e[e["COMMISSION_REPORT"]=59]="COMMISSION_REPORT";e[e["POSITION"]=61]="POSITION";e[e["POSITION_END"]=62]="POSITION_END";e[e["ACCOUNT_SUMMARY"]=63]="ACCOUNT_SUMMARY";e[e["ACCOUNT_SUMMARY_END"]=64]="ACCOUNT_SUMMARY_END";e[e["VERIFY_MESSAGE_API"]=65]="VERIFY_MESSAGE_API";e[e["VERIFY_COMPLETED"]=66]="VERIFY_COMPLETED";e[e["DISPLAY_GROUP_LIST"]=67]="DISPLAY_GROUP_LIST";e[e["DISPLAY_GROUP_UPDATED"]=68]="DISPLAY_GROUP_UPDATED";e[e["VERIFY_AND_AUTH_MESSAGE_API"]=69]="VERIFY_AND_AUTH_MESSAGE_API";e[e["VERIFY_AND_AUTH_COMPLETED"]=70]="VERIFY_AND_AUTH_COMPLETED";e[e["POSITION_MULTI"]=71]="POSITION_MULTI";e[e["POSITION_MULTI_END"]=72]="POSITION_MULTI_END";e[e["ACCOUNT_UPDATE_MULTI"]=73]="ACCOUNT_UPDATE_MULTI";e[e["ACCOUNT_UPDATE_MULTI_END"]=74]="ACCOUNT_UPDATE_MULTI_END";e[e["SECURITY_DEFINITION_OPTION_PARAMETER"]=75]="SECURITY_DEFINITION_OPTION_PARAMETER";e[e["SECURITY_DEFINITION_OPTION_PARAMETER_END"]=76]="SECURITY_DEFINITION_OPTION_PARAMETER_END";e[e["SOFT_DOLLAR_TIERS"]=77]="SOFT_DOLLAR_TIERS";e[e["FAMILY_CODES"]=78]="FAMILY_CODES";e[e["SYMBOL_SAMPLES"]=79]="SYMBOL_SAMPLES";e[e["MKT_DEPTH_EXCHANGES"]=80]="MKT_DEPTH_EXCHANGES";e[e["TICK_REQ_PARAMS"]=81]="TICK_REQ_PARAMS";e[e["SMART_COMPONENTS"]=82]="SMART_COMPONENTS";e[e["NEWS_ARTICLE"]=83]="NEWS_ARTICLE";e[e["TICK_NEWS"]=84]="TICK_NEWS";e[e["NEWS_PROVIDERS"]=85]="NEWS_PROVIDERS";e[e["HISTORICAL_NEWS"]=86]="HISTORICAL_NEWS";e[e["HISTORICAL_NEWS_END"]=87]="HISTORICAL_NEWS_END";e[e["HEAD_TIMESTAMP"]=88]="HEAD_TIMESTAMP";e[e["HISTOGRAM_DATA"]=89]="HISTOGRAM_DATA";e[e["HISTORICAL_DATA_UPDATE"]=90]="HISTORICAL_DATA_UPDATE";e[e["REROUTE_MKT_DATA"]=91]="REROUTE_MKT_DATA";e[e["REROUTE_MKT_DEPTH"]=92]="REROUTE_MKT_DEPTH";e[e["MARKET_RULE"]=93]="MARKET_RULE";e[e["PNL"]=94]="PNL";e[e["PNL_SINGLE"]=95]="PNL_SINGLE";e[e["HISTORICAL_TICKS"]=96]="HISTORICAL_TICKS";e[e["HISTORICAL_TICKS_BID_ASK"]=97]="HISTORICAL_TICKS_BID_ASK";e[e["HISTORICAL_TICKS_LAST"]=98]="HISTORICAL_TICKS_LAST";e[e["TICK_BY_TICK"]=99]="TICK_BY_TICK";e[e["ORDER_BOUND"]=100]="ORDER_BOUND";e[e["COMPLETED_ORDER"]=101]="COMPLETED_ORDER";e[e["COMPLETED_ORDERS_END"]=102]="COMPLETED_ORDERS_END";e[e["REPLACE_FA_END"]=103]="REPLACE_FA_END";e[e["WSH_META_DATA"]=104]="WSH_META_DATA";e[e["WSH_EVENT_DATA"]=105]="WSH_EVENT_DATA";e[e["HISTORICAL_SCHEDULE"]=106]="HISTORICAL_SCHEDULE"})(r=t.IN_MSG_ID||(t.IN_MSG_ID={}))},4554:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Socket=void 0;const i=n(r(1808));const o=r(3837);const s=r(2619);const a=r(8349);const u=n(r(2526));const c=n(r(6223));const l=r(1830);const d=r(1456);const h=100;const f=16777215;const p="\0";const _=600;class Socket{constructor(e,t={}){var r;this.controller=e;this.options=t;this._connected=false;this._serverVersion=0;this._serverConnectionTime="";this.dataFragment="";this.neverReceived=true;this.waitingAsync=false;this.useV100Plus=true;this._v100MessageBuffer=Buffer.alloc(0);this._clientId=(r=this.options.clientId)!==null&&r!==void 0?r:c.default.default_client_id;this.options.host=this.options.host;this.options.port=this.options.port}get connected(){return this._connected}get serverVersion(){return this._serverVersion}get serverConnectionTime(){return this._serverConnectionTime}get clientId(){return this._clientId}disableUseV100Plus(){this.useV100Plus=false}connect(e){var t,r;if(e!==undefined){this._clientId=e}this.controller.pause();this.dataFragment="";this.neverReceived=true;this.waitingAsync=false;this._v100MessageBuffer=Buffer.alloc(0);this.client=i.default.connect({host:(t=this.options.host)!==null&&t!==void 0?t:c.default.ib_host,port:(r=this.options.port)!==null&&r!==void 0?r:c.default.ib_port},(()=>this.onConnect())).on("data",(e=>this.onData(e))).on("close",(()=>this.onEnd())).on("end",(()=>this.onEnd())).on("error",(e=>this.onError(e)))}disconnect(){var e;this.controller.pause();(e=this.client)===null||e===void 0?void 0:e.end()}send(e){var t,r;e=this.flattenDeep(e);e.forEach(((t,r)=>{if(t===true||t===false||t instanceof Boolean){e[r]=t?1:0}}));let n=e.join(p);if(this.useV100Plus){let r;if(e[0]==="API\0"){const t=5;n=e.slice(t)[0];r=[...this.stringToUTF8Array(e[0]),...e.slice(1,t),...this.stringToUTF8Array(n)]}else{r=this.stringToUTF8Array(n)}if(typeof e[0]!=="string"){r=[...this.numberTo32BitBigEndian(r.length+1),...r,0]}(t=this.client)===null||t===void 0?void 0:t.write(Buffer.from(new Uint8Array(r)))}else{(r=this.client)===null||r===void 0?void 0:r.write(n+p)}this.controller.emitEvent(a.EventName.sent,e,n)}onData(e){if(this.useV100Plus){let t=e;if(this._v100MessageBuffer.length>0){t=Buffer.concat([this._v100MessageBuffer,e])}if(t.length>f){this._v100MessageBuffer=Buffer.alloc(0);this.onError(new Error(`Message of size ${t.length} exceeded max message length ${f}`));this.disconnect();return}let r=0;while(r+4<t.length){let e=r;const n=t.readInt32BE(e);e+=4;if(e+n<=t.length){const i=t.slice(e,e+n);e+=n;this.onMessage(i.toString("utf8"));r=e}else{break}}if(r!=t.length){this._v100MessageBuffer=t.slice(r)}else{this._v100MessageBuffer=Buffer.alloc(0)}}else{this.onMessage(e.toString())}}onMessage(e){const t=this.dataFragment+e;let r=t.split(p);if(r[r.length-1]!==""){this.dataFragment=r[r.length-1]}else{this.dataFragment=""}r=r.slice(0,-1);this.controller.emitEvent(a.EventName.received,r.slice(0),e);if(this.neverReceived){this.neverReceived=false;this.onServerVersion(r)}else{if(this.useV100Plus){this.controller.onMessage(r)}else{this.controller.onTokens(r)}this.controller.processIngressQueue()}if(this.waitingAsync){this.waitingAsync=false;this.controller.resume()}}onServerVersion(e){this._connected=true;this._serverVersion=parseInt(e[0],10);this._serverConnectionTime=e[1];if(this.useV100Plus&&(this._serverVersion<h||this._serverVersion>s.MAX_SUPPORTED_SERVER_VERSION)){this.disconnect();this.controller.emitError("Unsupported Version",l.ErrorCode.UNSUPPORTED_VERSION,-1);return}if(this._serverVersion<s.MIN_SERVER_VER_SUPPORTED){this.disconnect();this.controller.emitError("The TWS is out of date and must be upgraded.",l.ErrorCode.UPDATE_TWS,-1);return}this.startAPI();this.controller.emitEvent(a.EventName.connected);this.controller.emitEvent(a.EventName.server,this.serverVersion,this.serverConnectionTime)}startAPI(){const e=2;if(this.serverVersion>=3){if(this.serverVersion<u.default.LINKING){this.send([this._clientId])}else{if(this.serverVersion>=u.default.OPTIONAL_CAPABILITIES){this.send([d.OUT_MSG_ID.START_API,e,this._clientId,""])}else{this.send([d.OUT_MSG_ID.START_API,e,this._clientId])}}}setTimeout((()=>{this.controller.resume()}),_)}onConnect(){if(!this.useV100Plus){this.send([c.default.client_version]);this.send([this._clientId])}else{const e=this.buildVersionString(h,s.MAX_SUPPORTED_SERVER_VERSION);this.send(["API\0",...this.numberTo32BitBigEndian(e.length),e])}}onEnd(){const e=this._connected;this._connected=false;if(e){this.controller.emitEvent(a.EventName.disconnected)}this.controller.pause()}onError(e){this.controller.emitError(e.message,l.ErrorCode.CONNECT_FAIL,-1)}buildVersionString(e,t){return"v"+(e<t?e+".."+t:e)}numberTo32BitBigEndian(e){const t=new Array(4);let r=0;t[r++]=255&e>>24;t[r++]=255&e>>16;t[r++]=255&e>>8;t[r++]=255&e;return t}stringToUTF8Array(e){return Array.from((new o.TextEncoder).encode(e))}flattenDeep(e,t=[]){for(let r=0,n=e.length;r<n;r++){const n=e[r];if(Array.isArray(n)){this.flattenDeep(n,t)}else{t.push(n)}}return t}}t.Socket=Socket},9597:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.TrailingStopOrder=t.StopLimitOrder=t.StopOrder=t.MarketCloseOrder=t.MarketOrder=t.LimitOrder=t.OrderStatus=t.TriggerMethod=t.OrderType=t.OrderConditionType=t.OrderAction=t.ConjunctionConnection=t.VolumeCondition=t.TimeCondition=t.PriceCondition=t.PercentChangeCondition=t.MarginCondition=t.ExecutionCondition=t.TickByTickDataType=t.DurationUnit=t.BarSizeSetting=t.EventName=t.SecType=t.OptionType=t.OptionExerciseAction=t.MIN_SERVER_VER=t.LogLevel=t.FADataType=t.Stock=t.Option=t.Index=t.Future=t.Forex=t.FOP=t.Combo=t.CFD=t.ErrorCode=t.IBApi=void 0;const o=r(2619);var s=r(2619);Object.defineProperty(t,"IBApi",{enumerable:true,get:function(){return s.IBApi}});var a=r(1830);Object.defineProperty(t,"ErrorCode",{enumerable:true,get:function(){return a.ErrorCode}});var u=r(6391);Object.defineProperty(t,"CFD",{enumerable:true,get:function(){return u.CFD}});var c=r(3196);Object.defineProperty(t,"Combo",{enumerable:true,get:function(){return c.Combo}});var l=r(8919);Object.defineProperty(t,"FOP",{enumerable:true,get:function(){return l.FOP}});var d=r(4849);Object.defineProperty(t,"Forex",{enumerable:true,get:function(){return d.Forex}});var h=r(1891);Object.defineProperty(t,"Future",{enumerable:true,get:function(){return h.Future}});var f=r(1110);Object.defineProperty(t,"Index",{enumerable:true,get:function(){return f.Index}});var p=r(5133);Object.defineProperty(t,"Option",{enumerable:true,get:function(){return p.Option}});var _=r(2793);Object.defineProperty(t,"Stock",{enumerable:true,get:function(){return _.Stock}});var v=r(1301);Object.defineProperty(t,"FADataType",{enumerable:true,get:function(){return v.FADataType}});var E=r(4962);Object.defineProperty(t,"LogLevel",{enumerable:true,get:function(){return E.LogLevel}});var T=r(2526);Object.defineProperty(t,"MIN_SERVER_VER",{enumerable:true,get:function(){return T.MIN_SERVER_VER}});var b=r(4185);Object.defineProperty(t,"OptionExerciseAction",{enumerable:true,get:function(){return b.OptionExerciseAction}});var A=r(3357);Object.defineProperty(t,"OptionType",{enumerable:true,get:function(){return A.OptionType}});var O=r(594);Object.defineProperty(t,"SecType",{enumerable:true,get:function(){return O.SecType}});var S=r(8349);Object.defineProperty(t,"EventName",{enumerable:true,get:function(){return S.EventName}});var m=r(1480);Object.defineProperty(t,"BarSizeSetting",{enumerable:true,get:function(){return m.BarSizeSetting}});var I=r(4519);Object.defineProperty(t,"DurationUnit",{enumerable:true,get:function(){return I.DurationUnit}});var y=r(4716);Object.defineProperty(t,"TickByTickDataType",{enumerable:true,get:function(){return y.TickByTickDataType}});var P=r(4624);Object.defineProperty(t,"ExecutionCondition",{enumerable:true,get:function(){return P.ExecutionCondition}});var D=r(8093);Object.defineProperty(t,"MarginCondition",{enumerable:true,get:function(){return D.MarginCondition}});var g=r(1610);Object.defineProperty(t,"PercentChangeCondition",{enumerable:true,get:function(){return g.PercentChangeCondition}});var N=r(6408);Object.defineProperty(t,"PriceCondition",{enumerable:true,get:function(){return N.PriceCondition}});var C=r(2900);Object.defineProperty(t,"TimeCondition",{enumerable:true,get:function(){return C.TimeCondition}});var M=r(2453);Object.defineProperty(t,"VolumeCondition",{enumerable:true,get:function(){return M.VolumeCondition}});var R=r(2614);Object.defineProperty(t,"ConjunctionConnection",{enumerable:true,get:function(){return R.ConjunctionConnection}});var L=r(3956);Object.defineProperty(t,"OrderAction",{enumerable:true,get:function(){return L.OrderAction}});var U=r(5628);Object.defineProperty(t,"OrderConditionType",{enumerable:true,get:function(){return U.OrderConditionType}});var w=r(8056);Object.defineProperty(t,"OrderType",{enumerable:true,get:function(){return w.OrderType}});var x=r(460);Object.defineProperty(t,"TriggerMethod",{enumerable:true,get:function(){return x.TriggerMethod}});var j=r(8416);Object.defineProperty(t,"OrderStatus",{enumerable:true,get:function(){return j.OrderStatus}});var V=r(3543);Object.defineProperty(t,"LimitOrder",{enumerable:true,get:function(){return V.LimitOrder}});var F=r(1166);Object.defineProperty(t,"MarketOrder",{enumerable:true,get:function(){return F.MarketOrder}});var k=r(1833);Object.defineProperty(t,"MarketCloseOrder",{enumerable:true,get:function(){return k.MarketCloseOrder}});var B=r(9330);Object.defineProperty(t,"StopOrder",{enumerable:true,get:function(){return B.StopOrder}});var G=r(8081);Object.defineProperty(t,"StopLimitOrder",{enumerable:true,get:function(){return G.StopLimitOrder}});var H=r(9721);Object.defineProperty(t,"TrailingStopOrder",{enumerable:true,get:function(){return H.TrailingStopOrder}});t["default"]=o.IBApi;i(r(8857),t)},3083:(e,t,r)=>{var n={};e["exports"]=n;n.themes={};var i=r(3837);var o=n.styles=r(6658);var s=Object.defineProperties;var a=new RegExp(/[\r\n]+/g);n.supportsColor=r(8596).supportsColor;if(typeof n.enabled==="undefined"){n.enabled=n.supportsColor()!==false}n.enable=function(){n.enabled=true};n.disable=function(){n.enabled=false};n.stripColors=n.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var u=n.stylize=function stylize(e,t){if(!n.enabled){return e+""}var r=o[t];if(!r&&t in n){return n[t](e)}return r.open+e+r.close};var c=/[|\\{}()[\]^$+*?.]/g;var escapeStringRegexp=function(e){if(typeof e!=="string"){throw new TypeError("Expected a string")}return e.replace(c,"\\$&")};function build(e){var t=function builder(){return applyStyle.apply(builder,arguments)};t._styles=e;t.__proto__=d;return t}var l=function(){var e={};o.grey=o.gray;Object.keys(o).forEach((function(t){o[t].closeRe=new RegExp(escapeStringRegexp(o[t].close),"g");e[t]={get:function(){return build(this._styles.concat(t))}}}));return e}();var d=s((function colors(){}),l);function applyStyle(){var e=Array.prototype.slice.call(arguments);var t=e.map((function(e){if(e!=null&&e.constructor===String){return e}else{return i.inspect(e)}})).join(" ");if(!n.enabled||!t){return t}var r=t.indexOf("\n")!=-1;var s=this._styles;var u=s.length;while(u--){var c=o[s[u]];t=c.open+t.replace(c.closeRe,c.open)+c.close;if(r){t=t.replace(a,(function(e){return c.close+e+c.open}))}}return t}n.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string.  "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}for(var t in e){(function(t){n[t]=function(r){if(typeof e[t]==="object"){var i=r;for(var o in e[t]){i=n[e[t][o]](i)}return i}return n[e[t]](r)}})(t)}};function init(){var e={};Object.keys(l).forEach((function(t){e[t]={get:function(){return build([t])}}}));return e}var h=function sequencer(e,t){var r=t.split("");r=r.map(e);return r.join("")};n.trap=r(6909);n.zalgo=r(1208);n.maps={};n.maps.america=r(1939)(n);n.maps.zebra=r(6890)(n);n.maps.rainbow=r(1386)(n);n.maps.random=r(3295)(n);for(var f in n.maps){(function(e){n[e]=function(t){return h(n.maps[e],t)}})(f)}s(n,init())},6909:e=>{e["exports"]=function runTheTrap(e,t){var r="";e=e||"Run the trap, drop the bass";e=e.split("");var n={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};e.forEach((function(e){e=e.toLowerCase();var t=n[e]||[" "];var i=Math.floor(Math.random()*t.length);if(typeof n[e]!=="undefined"){r+=n[e][i]}else{r+=e}}));return r}},1208:e=>{e["exports"]=function zalgo(e,t){e=e||"   he is here   ";var r={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]};var n=[].concat(r.up,r.down,r.mid);function randomNumber(e){var t=Math.floor(Math.random()*e);return t}function isChar(e){var t=false;n.filter((function(r){t=r===e}));return t}function heComes(e,t){var n="";var i;var o;t=t||{};t["up"]=typeof t["up"]!=="undefined"?t["up"]:true;t["mid"]=typeof t["mid"]!=="undefined"?t["mid"]:true;t["down"]=typeof t["down"]!=="undefined"?t["down"]:true;t["size"]=typeof t["size"]!=="undefined"?t["size"]:"maxi";e=e.split("");for(o in e){if(isChar(o)){continue}n=n+e[o];i={up:0,down:0,mid:0};switch(t.size){case"mini":i.up=randomNumber(8);i.mid=randomNumber(2);i.down=randomNumber(8);break;case"maxi":i.up=randomNumber(16)+3;i.mid=randomNumber(4)+1;i.down=randomNumber(64)+3;break;default:i.up=randomNumber(8)+1;i.mid=randomNumber(6)/2;i.down=randomNumber(8)+1;break}var s=["up","mid","down"];for(var a in s){var u=s[a];for(var c=0;c<=i[u];c++){if(t[u]){n=n+r[u][randomNumber(r[u].length)]}}}}return n}return heComes(e,t)}},1008:(e,t,r)=>{var n=r(3083);e["exports"]=function(){var addProperty=function(e,t){String.prototype.__defineGetter__(e,t)};addProperty("strip",(function(){return n.strip(this)}));addProperty("stripColors",(function(){return n.strip(this)}));addProperty("trap",(function(){return n.trap(this)}));addProperty("zalgo",(function(){return n.zalgo(this)}));addProperty("zebra",(function(){return n.zebra(this)}));addProperty("rainbow",(function(){return n.rainbow(this)}));addProperty("random",(function(){return n.random(this)}));addProperty("america",(function(){return n.america(this)}));var e=Object.keys(n.styles);e.forEach((function(e){addProperty(e,(function(){return n.stylize(this,e)}))}));function applyTheme(e){var t=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(e).forEach((function(r){if(t.indexOf(r)!==-1){console.log("warn: ".red+("String.prototype"+r).magenta+" is probably something you don't want to override.  "+"Ignoring style name")}else{if(typeof e[r]==="string"){n[r]=n[e[r]];addProperty(r,(function(){return n[r](this)}))}else{var themePropApplicator=function(t){var i=t||this;for(var o=0;o<e[r].length;o++){i=n[e[r][o]](i)}return i};addProperty(r,themePropApplicator);n[r]=function(e){return themePropApplicator(e)}}}}))}n.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string. "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}else{applyTheme(e)}}}},7579:(e,t,r)=>{var n=r(3083);e["exports"]=n;r(1008)()},1939:e=>{e["exports"]=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},1386:e=>{e["exports"]=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){if(r===" "){return r}else{return e[t[n++%t.length]](r)}}}},3295:e=>{e["exports"]=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}},6890:e=>{e["exports"]=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}},6658:e=>{var t={};e["exports"]=t;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach((function(e){var n=r[e];var i=t[e]=[];i.open="["+n[0]+"m";i.close="["+n[1]+"m"}))},1992:e=>{"use strict";e.exports=function(e,t){t=t||process.argv;var r=t.indexOf("--");var n=/^-{1,2}/.test(e)?"":"--";var i=t.indexOf(n+e);return i!==-1&&(r===-1?true:i<r)}},8596:(e,t,r)=>{"use strict";var n=r(2037);var i=r(1992);var o=process.env;var s=void 0;if(i("no-color")||i("no-colors")||i("color=false")){s=false}else if(i("color")||i("colors")||i("color=true")||i("color=always")){s=true}if("FORCE_COLOR"in o){s=o.FORCE_COLOR.length===0||parseInt(o.FORCE_COLOR,10)!==0}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(s===false){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!e.isTTY&&s!==true){return 0}var t=s?1:0;if(process.platform==="win32"){var r=n.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586){return Number(r[2])>=14931?3:2}return 1}if("CI"in o){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in o}))||o.CI_NAME==="codeship"){return 1}return t}if("TEAMCITY_VERSION"in o){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0}if("TERM_PROGRAM"in o){var a=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(o.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)){return 1}if("COLORTERM"in o){return 1}if(o.TERM==="dumb"){return t}return t}function getSupportLevel(e){var t=supportsColor(e);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},1607:function(e,t,r){e=r.nmd(e);(function(){var r={boolean:false,function:true,object:true,number:false,string:false,undefined:false};var n=r[typeof window]&&window||this;var i=r[typeof t]&&t&&!t.nodeType&&t;var o=r["object"]&&e&&!e.nodeType&&e;var s=o&&o.exports===i&&i;var a=r[typeof global]&&global;if(a&&(a.global===a||a.window===a)){n=a}var CommandBuffer=function(e,t){this._cb=e;this._cbCtx=t;this._commands=[];this._commandsCurrent=[];this._paused=false;this._processing=false};CommandBuffer.prototype._concatCurrentCommands=function(){this._commands=this._commandsCurrent.concat(this._commands);this._commandsCurrent.length=0};CommandBuffer.prototype._process=function(){var e;while(!this._paused){this._processing=true;if(!this._commands.length){this._concatCurrentCommands()}e=this._commands.shift();if(!e){break}this._cb.call(this._cbCtx,e.type,e.data);this._concatCurrentCommands()}this._processing=false};CommandBuffer.prototype.pause=function(){this._paused=true};CommandBuffer.prototype.resume=function(){this._paused=false;this._concatCurrentCommands();if(!this._processing){this._process()}};CommandBuffer.prototype.run=function(e,t){this._commandsCurrent.push({type:e,data:t});if(!this._processing){this._process()}};CommandBuffer.prototype.schedule=function(e,t){this._commands.push({type:e,data:t});if(!this._processing){this._process()}};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){n.CommandBuffer=CommandBuffer;define((function(){return CommandBuffer}))}else if(i&&o){if(s){(o.exports=CommandBuffer).CommandBuffer=CommandBuffer}else{i.CommandBuffer=CommandBuffer}}else{n.CommandBuffer=CommandBuffer}}).call(this)},11:(e,t,r)=>{const n=r(7147);const i=r(1017);function log(e){console.log(`[dotenv][DEBUG] ${e}`)}const o="\n";const s=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/;const a=/\\n/g;const u=/\n|\r|\r\n/;function parse(e,t){const r=Boolean(t&&t.debug);const n={};e.toString().split(u).forEach((function(e,t){const i=e.match(s);if(i!=null){const e=i[1];let t=i[2]||"";const r=t.length-1;const s=t[0]==='"'&&t[r]==='"';const u=t[0]==="'"&&t[r]==="'";if(u||s){t=t.substring(1,r);if(s){t=t.replace(a,o)}}else{t=t.trim()}n[e]=t}else if(r){log(`did not match key and value when parsing line ${t+1}: ${e}`)}}));return n}function config(e){let t=i.resolve(process.cwd(),".env");let r="utf8";let o=false;if(e){if(e.path!=null){t=e.path}if(e.encoding!=null){r=e.encoding}if(e.debug!=null){o=true}}try{const e=parse(n.readFileSync(t,{encoding:r}),{debug:o});Object.keys(e).forEach((function(t){if(!Object.prototype.hasOwnProperty.call(process.env,t)){process.env[t]=e[t]}else if(o){log(`"${t}" is already defined in \`process.env\` and will not be overwritten`)}}));return{parsed:e}}catch(e){return{error:e}}}e.exports.config=config;e.exports.parse=parse},4328:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function Events(){}if(Object.create){Events.prototype=Object.create(null);if(!(new Events).__proto__)r=false}function EE(e,t,r){this.fn=e;this.context=t;this.once=r||false}function addListener(e,t,n,i,o){if(typeof n!=="function"){throw new TypeError("The listener must be a function")}var s=new EE(n,i||e,o),a=r?r+t:t;if(!e._events[a])e._events[a]=s,e._eventsCount++;else if(!e._events[a].fn)e._events[a].push(s);else e._events[a]=[e._events[a],s];return e}function clearEvent(e,t){if(--e._eventsCount===0)e._events=new Events;else delete e._events[t]}function EventEmitter(){this._events=new Events;this._eventsCount=0}EventEmitter.prototype.eventNames=function eventNames(){var e=[],n,i;if(this._eventsCount===0)return e;for(i in n=this._events){if(t.call(n,i))e.push(r?i.slice(1):i)}if(Object.getOwnPropertySymbols){return e.concat(Object.getOwnPropertySymbols(n))}return e};EventEmitter.prototype.listeners=function listeners(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++){s[i]=n[i].fn}return s};EventEmitter.prototype.listenerCount=function listenerCount(e){var t=r?r+e:e,n=this._events[t];if(!n)return 0;if(n.fn)return 1;return n.length};EventEmitter.prototype.emit=function emit(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return false;var u=this._events[a],c=arguments.length,l,d;if(u.fn){if(u.once)this.removeListener(e,u.fn,undefined,true);switch(c){case 1:return u.fn.call(u.context),true;case 2:return u.fn.call(u.context,t),true;case 3:return u.fn.call(u.context,t,n),true;case 4:return u.fn.call(u.context,t,n,i),true;case 5:return u.fn.call(u.context,t,n,i,o),true;case 6:return u.fn.call(u.context,t,n,i,o,s),true}for(d=1,l=new Array(c-1);d<c;d++){l[d-1]=arguments[d]}u.fn.apply(u.context,l)}else{var h=u.length,f;for(d=0;d<h;d++){if(u[d].once)this.removeListener(e,u[d].fn,undefined,true);switch(c){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,n);break;case 4:u[d].fn.call(u[d].context,t,n,i);break;default:if(!l)for(f=1,l=new Array(c-1);f<c;f++){l[f-1]=arguments[f]}u[d].fn.apply(u[d].context,l)}}}return true};EventEmitter.prototype.on=function on(e,t,r){return addListener(this,e,t,r,false)};EventEmitter.prototype.once=function once(e,t,r){return addListener(this,e,t,r,true)};EventEmitter.prototype.removeListener=function removeListener(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t){clearEvent(this,o);return this}var s=this._events[o];if(s.fn){if(s.fn===t&&(!i||s.once)&&(!n||s.context===n)){clearEvent(this,o)}}else{for(var a=0,u=[],c=s.length;a<c;a++){if(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n){u.push(s[a])}}if(u.length)this._events[o]=u.length===1?u[0]:u;else clearEvent(this,o)}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t;if(e){t=r?r+e:e;if(this._events[t])clearEvent(this,t)}else{this._events=new Events;this._eventsCount=0}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prefixed=r;EventEmitter.EventEmitter=EventEmitter;if(true){e.exports=EventEmitter}},198:e=>{e.exports=rateLimit;function rateLimit(e,t,r){var n=[];var i=e;function call_next(e){setTimeout((function(){if(n.length>0){call_next()}else{i=i+1}}),t);var o=n.shift();if(!o&&e){r.apply(e[0],e[1]);return}r.apply(o[0],o[1])}return function rate_limited_function(){var e=this;var t=Array.prototype.slice.call(arguments);if(i<=0){n.push([e,t]);return}i=i-1;call_next([e,t])}}},7054:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.interval=t.iif=t.generate=t.fromEventPattern=t.fromEvent=t.from=t.forkJoin=t.empty=t.defer=t.connectable=t.concat=t.combineLatest=t.bindNodeCallback=t.bindCallback=t.UnsubscriptionError=t.TimeoutError=t.SequenceError=t.ObjectUnsubscribedError=t.NotFoundError=t.EmptyError=t.ArgumentOutOfRangeError=t.firstValueFrom=t.lastValueFrom=t.isObservable=t.identity=t.noop=t.pipe=t.NotificationKind=t.Notification=t.Subscriber=t.Subscription=t.Scheduler=t.VirtualAction=t.VirtualTimeScheduler=t.animationFrameScheduler=t.animationFrame=t.queueScheduler=t.queue=t.asyncScheduler=t.async=t.asapScheduler=t.asap=t.AsyncSubject=t.ReplaySubject=t.BehaviorSubject=t.Subject=t.animationFrames=t.observable=t.ConnectableObservable=t.Observable=void 0;t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.combineLatestWith=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=t.config=t.NEVER=t.EMPTY=t.scheduled=t.zip=t.using=t.timer=t.throwError=t.range=t.race=t.partition=t.pairs=t.onErrorResumeNext=t.of=t.never=t.merge=void 0;t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.pairwise=t.onErrorResumeNextWith=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=t.mergeAll=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=void 0;t.zipWith=t.zipAll=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=void 0;var o=r(6958);Object.defineProperty(t,"Observable",{enumerable:true,get:function(){return o.Observable}});var s=r(8004);Object.defineProperty(t,"ConnectableObservable",{enumerable:true,get:function(){return s.ConnectableObservable}});var a=r(1670);Object.defineProperty(t,"observable",{enumerable:true,get:function(){return a.observable}});var u=r(6654);Object.defineProperty(t,"animationFrames",{enumerable:true,get:function(){return u.animationFrames}});var c=r(5565);Object.defineProperty(t,"Subject",{enumerable:true,get:function(){return c.Subject}});var l=r(540);Object.defineProperty(t,"BehaviorSubject",{enumerable:true,get:function(){return l.BehaviorSubject}});var d=r(9087);Object.defineProperty(t,"ReplaySubject",{enumerable:true,get:function(){return d.ReplaySubject}});var h=r(2996);Object.defineProperty(t,"AsyncSubject",{enumerable:true,get:function(){return h.AsyncSubject}});var f=r(5363);Object.defineProperty(t,"asap",{enumerable:true,get:function(){return f.asap}});Object.defineProperty(t,"asapScheduler",{enumerable:true,get:function(){return f.asapScheduler}});var p=r(1748);Object.defineProperty(t,"async",{enumerable:true,get:function(){return p.async}});Object.defineProperty(t,"asyncScheduler",{enumerable:true,get:function(){return p.asyncScheduler}});var _=r(1899);Object.defineProperty(t,"queue",{enumerable:true,get:function(){return _.queue}});Object.defineProperty(t,"queueScheduler",{enumerable:true,get:function(){return _.queueScheduler}});var v=r(7492);Object.defineProperty(t,"animationFrame",{enumerable:true,get:function(){return v.animationFrame}});Object.defineProperty(t,"animationFrameScheduler",{enumerable:true,get:function(){return v.animationFrameScheduler}});var E=r(5750);Object.defineProperty(t,"VirtualTimeScheduler",{enumerable:true,get:function(){return E.VirtualTimeScheduler}});Object.defineProperty(t,"VirtualAction",{enumerable:true,get:function(){return E.VirtualAction}});var T=r(6837);Object.defineProperty(t,"Scheduler",{enumerable:true,get:function(){return T.Scheduler}});var b=r(8029);Object.defineProperty(t,"Subscription",{enumerable:true,get:function(){return b.Subscription}});var A=r(5430);Object.defineProperty(t,"Subscriber",{enumerable:true,get:function(){return A.Subscriber}});var O=r(4202);Object.defineProperty(t,"Notification",{enumerable:true,get:function(){return O.Notification}});Object.defineProperty(t,"NotificationKind",{enumerable:true,get:function(){return O.NotificationKind}});var S=r(8580);Object.defineProperty(t,"pipe",{enumerable:true,get:function(){return S.pipe}});var m=r(0);Object.defineProperty(t,"noop",{enumerable:true,get:function(){return m.noop}});var I=r(6479);Object.defineProperty(t,"identity",{enumerable:true,get:function(){return I.identity}});var y=r(6704);Object.defineProperty(t,"isObservable",{enumerable:true,get:function(){return y.isObservable}});var P=r(7678);Object.defineProperty(t,"lastValueFrom",{enumerable:true,get:function(){return P.lastValueFrom}});var D=r(4825);Object.defineProperty(t,"firstValueFrom",{enumerable:true,get:function(){return D.firstValueFrom}});var g=r(1058);Object.defineProperty(t,"ArgumentOutOfRangeError",{enumerable:true,get:function(){return g.ArgumentOutOfRangeError}});var N=r(8694);Object.defineProperty(t,"EmptyError",{enumerable:true,get:function(){return N.EmptyError}});var C=r(6842);Object.defineProperty(t,"NotFoundError",{enumerable:true,get:function(){return C.NotFoundError}});var M=r(6972);Object.defineProperty(t,"ObjectUnsubscribedError",{enumerable:true,get:function(){return M.ObjectUnsubscribedError}});var R=r(1219);Object.defineProperty(t,"SequenceError",{enumerable:true,get:function(){return R.SequenceError}});var L=r(7475);Object.defineProperty(t,"TimeoutError",{enumerable:true,get:function(){return L.TimeoutError}});var U=r(7485);Object.defineProperty(t,"UnsubscriptionError",{enumerable:true,get:function(){return U.UnsubscriptionError}});var w=r(1810);Object.defineProperty(t,"bindCallback",{enumerable:true,get:function(){return w.bindCallback}});var x=r(7729);Object.defineProperty(t,"bindNodeCallback",{enumerable:true,get:function(){return x.bindNodeCallback}});var j=r(9898);Object.defineProperty(t,"combineLatest",{enumerable:true,get:function(){return j.combineLatest}});var V=r(9995);Object.defineProperty(t,"concat",{enumerable:true,get:function(){return V.concat}});var F=r(8789);Object.defineProperty(t,"connectable",{enumerable:true,get:function(){return F.connectable}});var k=r(6355);Object.defineProperty(t,"defer",{enumerable:true,get:function(){return k.defer}});var B=r(5899);Object.defineProperty(t,"empty",{enumerable:true,get:function(){return B.empty}});var G=r(5237);Object.defineProperty(t,"forkJoin",{enumerable:true,get:function(){return G.forkJoin}});var H=r(2549);Object.defineProperty(t,"from",{enumerable:true,get:function(){return H.from}});var W=r(8665);Object.defineProperty(t,"fromEvent",{enumerable:true,get:function(){return W.fromEvent}});var K=r(9844);Object.defineProperty(t,"fromEventPattern",{enumerable:true,get:function(){return K.fromEventPattern}});var Y=r(6841);Object.defineProperty(t,"generate",{enumerable:true,get:function(){return Y.generate}});var Q=r(7246);Object.defineProperty(t,"iif",{enumerable:true,get:function(){return Q.iif}});var q=r(6516);Object.defineProperty(t,"interval",{enumerable:true,get:function(){return q.interval}});var z=r(4881);Object.defineProperty(t,"merge",{enumerable:true,get:function(){return z.merge}});var X=r(1322);Object.defineProperty(t,"never",{enumerable:true,get:function(){return X.never}});var $=r(2785);Object.defineProperty(t,"of",{enumerable:true,get:function(){return $.of}});var Z=r(1074);Object.defineProperty(t,"onErrorResumeNext",{enumerable:true,get:function(){return Z.onErrorResumeNext}});var J=r(2537);Object.defineProperty(t,"pairs",{enumerable:true,get:function(){return J.pairs}});var ee=r(3663);Object.defineProperty(t,"partition",{enumerable:true,get:function(){return ee.partition}});var te=r(5614);Object.defineProperty(t,"race",{enumerable:true,get:function(){return te.race}});var re=r(8503);Object.defineProperty(t,"range",{enumerable:true,get:function(){return re.range}});var ne=r(9427);Object.defineProperty(t,"throwError",{enumerable:true,get:function(){return ne.throwError}});var ie=r(8373);Object.defineProperty(t,"timer",{enumerable:true,get:function(){return ie.timer}});var oe=r(1250);Object.defineProperty(t,"using",{enumerable:true,get:function(){return oe.using}});var se=r(9455);Object.defineProperty(t,"zip",{enumerable:true,get:function(){return se.zip}});var ae=r(2523);Object.defineProperty(t,"scheduled",{enumerable:true,get:function(){return ae.scheduled}});var ue=r(5899);Object.defineProperty(t,"EMPTY",{enumerable:true,get:function(){return ue.EMPTY}});var ce=r(1322);Object.defineProperty(t,"NEVER",{enumerable:true,get:function(){return ce.NEVER}});i(r(6740),t);var le=r(1042);Object.defineProperty(t,"config",{enumerable:true,get:function(){return le.config}});var de=r(7562);Object.defineProperty(t,"audit",{enumerable:true,get:function(){return de.audit}});var he=r(5913);Object.defineProperty(t,"auditTime",{enumerable:true,get:function(){return he.auditTime}});var fe=r(7556);Object.defineProperty(t,"buffer",{enumerable:true,get:function(){return fe.buffer}});var pe=r(7143);Object.defineProperty(t,"bufferCount",{enumerable:true,get:function(){return pe.bufferCount}});var _e=r(6248);Object.defineProperty(t,"bufferTime",{enumerable:true,get:function(){return _e.bufferTime}});var ve=r(6281);Object.defineProperty(t,"bufferToggle",{enumerable:true,get:function(){return ve.bufferToggle}});var Ee=r(1416);Object.defineProperty(t,"bufferWhen",{enumerable:true,get:function(){return Ee.bufferWhen}});var Te=r(5700);Object.defineProperty(t,"catchError",{enumerable:true,get:function(){return Te.catchError}});var be=r(1729);Object.defineProperty(t,"combineAll",{enumerable:true,get:function(){return be.combineAll}});var Ae=r(3376);Object.defineProperty(t,"combineLatestAll",{enumerable:true,get:function(){return Ae.combineLatestAll}});var Oe=r(2988);Object.defineProperty(t,"combineLatestWith",{enumerable:true,get:function(){return Oe.combineLatestWith}});var Se=r(5334);Object.defineProperty(t,"concatAll",{enumerable:true,get:function(){return Se.concatAll}});var me=r(9336);Object.defineProperty(t,"concatMap",{enumerable:true,get:function(){return me.concatMap}});var Ie=r(6455);Object.defineProperty(t,"concatMapTo",{enumerable:true,get:function(){return Ie.concatMapTo}});var ye=r(3680);Object.defineProperty(t,"concatWith",{enumerable:true,get:function(){return ye.concatWith}});var Pe=r(9396);Object.defineProperty(t,"connect",{enumerable:true,get:function(){return Pe.connect}});var De=r(9253);Object.defineProperty(t,"count",{enumerable:true,get:function(){return De.count}});var ge=r(2803);Object.defineProperty(t,"debounce",{enumerable:true,get:function(){return ge.debounce}});var Ne=r(8717);Object.defineProperty(t,"debounceTime",{enumerable:true,get:function(){return Ne.debounceTime}});var Ce=r(6478);Object.defineProperty(t,"defaultIfEmpty",{enumerable:true,get:function(){return Ce.defaultIfEmpty}});var Me=r(2740);Object.defineProperty(t,"delay",{enumerable:true,get:function(){return Me.delay}});var Re=r(4680);Object.defineProperty(t,"delayWhen",{enumerable:true,get:function(){return Re.delayWhen}});var Le=r(8619);Object.defineProperty(t,"dematerialize",{enumerable:true,get:function(){return Le.dematerialize}});var Ue=r(4696);Object.defineProperty(t,"distinct",{enumerable:true,get:function(){return Ue.distinct}});var we=r(6852);Object.defineProperty(t,"distinctUntilChanged",{enumerable:true,get:function(){return we.distinctUntilChanged}});var xe=r(4724);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:true,get:function(){return xe.distinctUntilKeyChanged}});var je=r(8049);Object.defineProperty(t,"elementAt",{enumerable:true,get:function(){return je.elementAt}});var Ve=r(730);Object.defineProperty(t,"endWith",{enumerable:true,get:function(){return Ve.endWith}});var Fe=r(4834);Object.defineProperty(t,"every",{enumerable:true,get:function(){return Fe.every}});var ke=r(1704);Object.defineProperty(t,"exhaust",{enumerable:true,get:function(){return ke.exhaust}});var Be=r(3408);Object.defineProperty(t,"exhaustAll",{enumerable:true,get:function(){return Be.exhaustAll}});var Ge=r(338);Object.defineProperty(t,"exhaustMap",{enumerable:true,get:function(){return Ge.exhaustMap}});var He=r(985);Object.defineProperty(t,"expand",{enumerable:true,get:function(){return He.expand}});var We=r(4480);Object.defineProperty(t,"filter",{enumerable:true,get:function(){return We.filter}});var Ke=r(4158);Object.defineProperty(t,"finalize",{enumerable:true,get:function(){return Ke.finalize}});var Ye=r(9134);Object.defineProperty(t,"find",{enumerable:true,get:function(){return Ye.find}});var Qe=r(5320);Object.defineProperty(t,"findIndex",{enumerable:true,get:function(){return Qe.findIndex}});var qe=r(2978);Object.defineProperty(t,"first",{enumerable:true,get:function(){return qe.first}});var ze=r(6642);Object.defineProperty(t,"groupBy",{enumerable:true,get:function(){return ze.groupBy}});var Xe=r(7524);Object.defineProperty(t,"ignoreElements",{enumerable:true,get:function(){return Xe.ignoreElements}});var $e=r(4778);Object.defineProperty(t,"isEmpty",{enumerable:true,get:function(){return $e.isEmpty}});var Ze=r(8243);Object.defineProperty(t,"last",{enumerable:true,get:function(){return Ze.last}});var Je=r(4987);Object.defineProperty(t,"map",{enumerable:true,get:function(){return Je.map}});var et=r(5506);Object.defineProperty(t,"mapTo",{enumerable:true,get:function(){return et.mapTo}});var tt=r(9110);Object.defineProperty(t,"materialize",{enumerable:true,get:function(){return tt.materialize}});var rt=r(4177);Object.defineProperty(t,"max",{enumerable:true,get:function(){return rt.max}});var nt=r(2275);Object.defineProperty(t,"mergeAll",{enumerable:true,get:function(){return nt.mergeAll}});var it=r(1842);Object.defineProperty(t,"flatMap",{enumerable:true,get:function(){return it.flatMap}});var ot=r(229);Object.defineProperty(t,"mergeMap",{enumerable:true,get:function(){return ot.mergeMap}});var st=r(6708);Object.defineProperty(t,"mergeMapTo",{enumerable:true,get:function(){return st.mergeMapTo}});var at=r(298);Object.defineProperty(t,"mergeScan",{enumerable:true,get:function(){return at.mergeScan}});var ut=r(7090);Object.defineProperty(t,"mergeWith",{enumerable:true,get:function(){return ut.mergeWith}});var ct=r(3107);Object.defineProperty(t,"min",{enumerable:true,get:function(){return ct.min}});var lt=r(7879);Object.defineProperty(t,"multicast",{enumerable:true,get:function(){return lt.multicast}});var dt=r(1373);Object.defineProperty(t,"observeOn",{enumerable:true,get:function(){return dt.observeOn}});var ht=r(2774);Object.defineProperty(t,"onErrorResumeNextWith",{enumerable:true,get:function(){return ht.onErrorResumeNextWith}});var ft=r(5923);Object.defineProperty(t,"pairwise",{enumerable:true,get:function(){return ft.pairwise}});var pt=r(462);Object.defineProperty(t,"pluck",{enumerable:true,get:function(){return pt.pluck}});var _t=r(188);Object.defineProperty(t,"publish",{enumerable:true,get:function(){return _t.publish}});var vt=r(9308);Object.defineProperty(t,"publishBehavior",{enumerable:true,get:function(){return vt.publishBehavior}});var Et=r(9415);Object.defineProperty(t,"publishLast",{enumerable:true,get:function(){return Et.publishLast}});var Tt=r(8044);Object.defineProperty(t,"publishReplay",{enumerable:true,get:function(){return Tt.publishReplay}});var bt=r(4174);Object.defineProperty(t,"raceWith",{enumerable:true,get:function(){return bt.raceWith}});var At=r(5473);Object.defineProperty(t,"reduce",{enumerable:true,get:function(){return At.reduce}});var Ot=r(1799);Object.defineProperty(t,"repeat",{enumerable:true,get:function(){return Ot.repeat}});var St=r(1343);Object.defineProperty(t,"repeatWhen",{enumerable:true,get:function(){return St.repeatWhen}});var mt=r(1630);Object.defineProperty(t,"retry",{enumerable:true,get:function(){return mt.retry}});var It=r(690);Object.defineProperty(t,"retryWhen",{enumerable:true,get:function(){return It.retryWhen}});var yt=r(2194);Object.defineProperty(t,"refCount",{enumerable:true,get:function(){return yt.refCount}});var Pt=r(8642);Object.defineProperty(t,"sample",{enumerable:true,get:function(){return Pt.sample}});var Dt=r(8647);Object.defineProperty(t,"sampleTime",{enumerable:true,get:function(){return Dt.sampleTime}});var gt=r(991);Object.defineProperty(t,"scan",{enumerable:true,get:function(){return gt.scan}});var Nt=r(1746);Object.defineProperty(t,"sequenceEqual",{enumerable:true,get:function(){return Nt.sequenceEqual}});var Ct=r(5250);Object.defineProperty(t,"share",{enumerable:true,get:function(){return Ct.share}});var Mt=r(9605);Object.defineProperty(t,"shareReplay",{enumerable:true,get:function(){return Mt.shareReplay}});var Rt=r(5778);Object.defineProperty(t,"single",{enumerable:true,get:function(){return Rt.single}});var Lt=r(2735);Object.defineProperty(t,"skip",{enumerable:true,get:function(){return Lt.skip}});var Ut=r(4390);Object.defineProperty(t,"skipLast",{enumerable:true,get:function(){return Ut.skipLast}});var wt=r(6865);Object.defineProperty(t,"skipUntil",{enumerable:true,get:function(){return wt.skipUntil}});var xt=r(4981);Object.defineProperty(t,"skipWhile",{enumerable:true,get:function(){return xt.skipWhile}});var jt=r(2459);Object.defineProperty(t,"startWith",{enumerable:true,get:function(){return jt.startWith}});var Vt=r(3128);Object.defineProperty(t,"subscribeOn",{enumerable:true,get:function(){return Vt.subscribeOn}});var Ft=r(3217);Object.defineProperty(t,"switchAll",{enumerable:true,get:function(){return Ft.switchAll}});var kt=r(4910);Object.defineProperty(t,"switchMap",{enumerable:true,get:function(){return kt.switchMap}});var Bt=r(4546);Object.defineProperty(t,"switchMapTo",{enumerable:true,get:function(){return Bt.switchMapTo}});var Gt=r(5958);Object.defineProperty(t,"switchScan",{enumerable:true,get:function(){return Gt.switchScan}});var Ht=r(6477);Object.defineProperty(t,"take",{enumerable:true,get:function(){return Ht.take}});var Wt=r(2598);Object.defineProperty(t,"takeLast",{enumerable:true,get:function(){return Wt.takeLast}});var Kt=r(4351);Object.defineProperty(t,"takeUntil",{enumerable:true,get:function(){return Kt.takeUntil}});var Yt=r(8516);Object.defineProperty(t,"takeWhile",{enumerable:true,get:function(){return Yt.takeWhile}});var Qt=r(4993);Object.defineProperty(t,"tap",{enumerable:true,get:function(){return Qt.tap}});var qt=r(6703);Object.defineProperty(t,"throttle",{enumerable:true,get:function(){return qt.throttle}});var zt=r(6816);Object.defineProperty(t,"throttleTime",{enumerable:true,get:function(){return zt.throttleTime}});var Xt=r(6445);Object.defineProperty(t,"throwIfEmpty",{enumerable:true,get:function(){return Xt.throwIfEmpty}});var $t=r(3033);Object.defineProperty(t,"timeInterval",{enumerable:true,get:function(){return $t.timeInterval}});var Zt=r(7475);Object.defineProperty(t,"timeout",{enumerable:true,get:function(){return Zt.timeout}});var Jt=r(7215);Object.defineProperty(t,"timeoutWith",{enumerable:true,get:function(){return Jt.timeoutWith}});var er=r(6757);Object.defineProperty(t,"timestamp",{enumerable:true,get:function(){return er.timestamp}});var tr=r(1031);Object.defineProperty(t,"toArray",{enumerable:true,get:function(){return tr.toArray}});var rr=r(7372);Object.defineProperty(t,"window",{enumerable:true,get:function(){return rr.window}});var nr=r(6373);Object.defineProperty(t,"windowCount",{enumerable:true,get:function(){return nr.windowCount}});var ir=r(2727);Object.defineProperty(t,"windowTime",{enumerable:true,get:function(){return ir.windowTime}});var or=r(7622);Object.defineProperty(t,"windowToggle",{enumerable:true,get:function(){return or.windowToggle}});var sr=r(4663);Object.defineProperty(t,"windowWhen",{enumerable:true,get:function(){return sr.windowWhen}});var ar=r(3966);Object.defineProperty(t,"withLatestFrom",{enumerable:true,get:function(){return ar.withLatestFrom}});var ur=r(316);Object.defineProperty(t,"zipAll",{enumerable:true,get:function(){return ur.zipAll}});var cr=r(9736);Object.defineProperty(t,"zipWith",{enumerable:true,get:function(){return cr.zipWith}})},2996:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncSubject=void 0;var i=r(5565);var o=function(e){n(AsyncSubject,e);function AsyncSubject(){var t=e!==null&&e.apply(this,arguments)||this;t._value=null;t._hasValue=false;t._isComplete=false;return t}AsyncSubject.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t._hasValue,i=t._value,o=t.thrownError,s=t.isStopped,a=t._isComplete;if(r){e.error(o)}else if(s||a){n&&e.next(i);e.complete()}};AsyncSubject.prototype.next=function(e){if(!this.isStopped){this._value=e;this._hasValue=true}};AsyncSubject.prototype.complete=function(){var t=this,r=t._hasValue,n=t._value,i=t._isComplete;if(!i){this._isComplete=true;r&&e.prototype.next.call(this,n);e.prototype.complete.call(this)}};return AsyncSubject}(i.Subject);t.AsyncSubject=o},540:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.BehaviorSubject=void 0;var i=r(5565);var o=function(e){n(BehaviorSubject,e);function BehaviorSubject(t){var r=e.call(this)||this;r._value=t;return r}Object.defineProperty(BehaviorSubject.prototype,"value",{get:function(){return this.getValue()},enumerable:false,configurable:true});BehaviorSubject.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);!r.closed&&t.next(this._value);return r};BehaviorSubject.prototype.getValue=function(){var e=this,t=e.hasError,r=e.thrownError,n=e._value;if(t){throw r}this._throwIfClosed();return n};BehaviorSubject.prototype.next=function(t){e.prototype.next.call(this,this._value=t)};return BehaviorSubject}(i.Subject);t.BehaviorSubject=o},4202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observeNotification=t.Notification=t.NotificationKind=void 0;var n=r(5899);var i=r(2785);var o=r(9427);var s=r(1694);var a;(function(e){e["NEXT"]="N";e["ERROR"]="E";e["COMPLETE"]="C"})(a=t.NotificationKind||(t.NotificationKind={}));var u=function(){function Notification(e,t,r){this.kind=e;this.value=t;this.error=r;this.hasValue=e==="N"}Notification.prototype.observe=function(e){return observeNotification(this,e)};Notification.prototype.do=function(e,t,r){var n=this,i=n.kind,o=n.value,s=n.error;return i==="N"?e===null||e===void 0?void 0:e(o):i==="E"?t===null||t===void 0?void 0:t(s):r===null||r===void 0?void 0:r()};Notification.prototype.accept=function(e,t,r){var n;return s.isFunction((n=e)===null||n===void 0?void 0:n.next)?this.observe(e):this.do(e,t,r)};Notification.prototype.toObservable=function(){var e=this,t=e.kind,r=e.value,s=e.error;var a=t==="N"?i.of(r):t==="E"?o.throwError((function(){return s})):t==="C"?n.EMPTY:0;if(!a){throw new TypeError("Unexpected notification kind "+t)}return a};Notification.createNext=function(e){return new Notification("N",e)};Notification.createError=function(e){return new Notification("E",undefined,e)};Notification.createComplete=function(){return Notification.completeNotification};Notification.completeNotification=new Notification("C");return Notification}();t.Notification=u;function observeNotification(e,t){var r,n,i;var o=e,s=o.kind,a=o.value,u=o.error;if(typeof s!=="string"){throw new TypeError('Invalid notification, missing "kind"')}s==="N"?(r=t.next)===null||r===void 0?void 0:r.call(t,a):s==="E"?(n=t.error)===null||n===void 0?void 0:n.call(t,u):(i=t.complete)===null||i===void 0?void 0:i.call(t)}t.observeNotification=observeNotification},2156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createNotification=t.nextNotification=t.errorNotification=t.COMPLETE_NOTIFICATION=void 0;t.COMPLETE_NOTIFICATION=function(){return createNotification("C",undefined,undefined)}();function errorNotification(e){return createNotification("E",undefined,e)}t.errorNotification=errorNotification;function nextNotification(e){return createNotification("N",e,undefined)}t.nextNotification=nextNotification;function createNotification(e,t,r){return{kind:e,value:t,error:r}}t.createNotification=createNotification},6958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Observable=void 0;var n=r(5430);var i=r(8029);var o=r(1670);var s=r(8580);var a=r(1042);var u=r(1694);var c=r(5937);var l=function(){function Observable(e){if(e){this._subscribe=e}}Observable.prototype.lift=function(e){var t=new Observable;t.source=this;t.operator=e;return t};Observable.prototype.subscribe=function(e,t,r){var i=this;var o=isSubscriber(e)?e:new n.SafeSubscriber(e,t,r);c.errorContext((function(){var e=i,t=e.operator,r=e.source;o.add(t?t.call(o,r):r?i._subscribe(o):i._trySubscribe(o))}));return o};Observable.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}};Observable.prototype.forEach=function(e,t){var r=this;t=getPromiseCtor(t);return new t((function(t,i){var o=new n.SafeSubscriber({next:function(t){try{e(t)}catch(e){i(e);o.unsubscribe()}},error:i,complete:t});r.subscribe(o)}))};Observable.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)};Observable.prototype[o.observable]=function(){return this};Observable.prototype.pipe=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.pipeFromArray(e)(this)};Observable.prototype.toPromise=function(e){var t=this;e=getPromiseCtor(e);return new e((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))};Observable.create=function(e){return new Observable(e)};return Observable}();t.Observable=l;function getPromiseCtor(e){var t;return(t=e!==null&&e!==void 0?e:a.config.Promise)!==null&&t!==void 0?t:Promise}function isObserver(e){return e&&u.isFunction(e.next)&&u.isFunction(e.error)&&u.isFunction(e.complete)}function isSubscriber(e){return e&&e instanceof n.Subscriber||isObserver(e)&&i.isSubscription(e)}},9087:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.ReplaySubject=void 0;var i=r(5565);var o=r(7540);var s=function(e){n(ReplaySubject,e);function ReplaySubject(t,r,n){if(t===void 0){t=Infinity}if(r===void 0){r=Infinity}if(n===void 0){n=o.dateTimestampProvider}var i=e.call(this)||this;i._bufferSize=t;i._windowTime=r;i._timestampProvider=n;i._buffer=[];i._infiniteTimeWindow=true;i._infiniteTimeWindow=r===Infinity;i._bufferSize=Math.max(1,t);i._windowTime=Math.max(1,r);return i}ReplaySubject.prototype.next=function(t){var r=this,n=r.isStopped,i=r._buffer,o=r._infiniteTimeWindow,s=r._timestampProvider,a=r._windowTime;if(!n){i.push(t);!o&&i.push(s.now()+a)}this._trimBuffer();e.prototype.next.call(this,t)};ReplaySubject.prototype._subscribe=function(e){this._throwIfClosed();this._trimBuffer();var t=this._innerSubscribe(e);var r=this,n=r._infiniteTimeWindow,i=r._buffer;var o=i.slice();for(var s=0;s<o.length&&!e.closed;s+=n?1:2){e.next(o[s])}this._checkFinalizedStatuses(e);return t};ReplaySubject.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,r=e._timestampProvider,n=e._buffer,i=e._infiniteTimeWindow;var o=(i?1:2)*t;t<Infinity&&o<n.length&&n.splice(0,n.length-o);if(!i){var s=r.now();var a=0;for(var u=1;u<n.length&&n[u]<=s;u+=2){a=u}a&&n.splice(0,a+1)}};return ReplaySubject}(i.Subject);t.ReplaySubject=s},6837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Scheduler=void 0;var n=r(7540);var i=function(){function Scheduler(e,t){if(t===void 0){t=Scheduler.now}this.schedulerActionCtor=e;this.now=t}Scheduler.prototype.schedule=function(e,t,r){if(t===void 0){t=0}return new this.schedulerActionCtor(this,e).schedule(r,t)};Scheduler.now=n.dateTimestampProvider.now;return Scheduler}();t.Scheduler=i},5565:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.AnonymousSubject=t.Subject=void 0;var o=r(6958);var s=r(8029);var a=r(6972);var u=r(9433);var c=r(5937);var l=function(e){n(Subject,e);function Subject(){var t=e.call(this)||this;t.closed=false;t.currentObservers=null;t.observers=[];t.isStopped=false;t.hasError=false;t.thrownError=null;return t}Subject.prototype.lift=function(e){var t=new d(this,this);t.operator=e;return t};Subject.prototype._throwIfClosed=function(){if(this.closed){throw new a.ObjectUnsubscribedError}};Subject.prototype.next=function(e){var t=this;c.errorContext((function(){var r,n;t._throwIfClosed();if(!t.isStopped){if(!t.currentObservers){t.currentObservers=Array.from(t.observers)}try{for(var o=i(t.currentObservers),s=o.next();!s.done;s=o.next()){var a=s.value;a.next(e)}}catch(e){r={error:e}}finally{try{if(s&&!s.done&&(n=o.return))n.call(o)}finally{if(r)throw r.error}}}}))};Subject.prototype.error=function(e){var t=this;c.errorContext((function(){t._throwIfClosed();if(!t.isStopped){t.hasError=t.isStopped=true;t.thrownError=e;var r=t.observers;while(r.length){r.shift().error(e)}}}))};Subject.prototype.complete=function(){var e=this;c.errorContext((function(){e._throwIfClosed();if(!e.isStopped){e.isStopped=true;var t=e.observers;while(t.length){t.shift().complete()}}}))};Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=true;this.observers=this.currentObservers=null};Object.defineProperty(Subject.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:false,configurable:true});Subject.prototype._trySubscribe=function(t){this._throwIfClosed();return e.prototype._trySubscribe.call(this,t)};Subject.prototype._subscribe=function(e){this._throwIfClosed();this._checkFinalizedStatuses(e);return this._innerSubscribe(e)};Subject.prototype._innerSubscribe=function(e){var t=this;var r=this,n=r.hasError,i=r.isStopped,o=r.observers;if(n||i){return s.EMPTY_SUBSCRIPTION}this.currentObservers=null;o.push(e);return new s.Subscription((function(){t.currentObservers=null;u.arrRemove(o,e)}))};Subject.prototype._checkFinalizedStatuses=function(e){var t=this,r=t.hasError,n=t.thrownError,i=t.isStopped;if(r){e.error(n)}else if(i){e.complete()}};Subject.prototype.asObservable=function(){var e=new o.Observable;e.source=this;return e};Subject.create=function(e,t){return new d(e,t)};return Subject}(o.Observable);t.Subject=l;var d=function(e){n(AnonymousSubject,e);function AnonymousSubject(t,r){var n=e.call(this)||this;n.destination=t;n.source=r;return n}AnonymousSubject.prototype.next=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0?void 0:r.call(t,e)};AnonymousSubject.prototype.error=function(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0?void 0:r.call(t,e)};AnonymousSubject.prototype.complete=function(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0?void 0:t.call(e)};AnonymousSubject.prototype._subscribe=function(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:s.EMPTY_SUBSCRIPTION};return AnonymousSubject}(l);t.AnonymousSubject=d},5430:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.EMPTY_OBSERVER=t.SafeSubscriber=t.Subscriber=void 0;var i=r(1694);var o=r(8029);var s=r(1042);var a=r(550);var u=r(0);var c=r(2156);var l=r(8279);var d=r(5937);var h=function(e){n(Subscriber,e);function Subscriber(r){var n=e.call(this)||this;n.isStopped=false;if(r){n.destination=r;if(o.isSubscription(r)){r.add(n)}}else{n.destination=t.EMPTY_OBSERVER}return n}Subscriber.create=function(e,t,r){return new _(e,t,r)};Subscriber.prototype.next=function(e){if(this.isStopped){handleStoppedNotification(c.nextNotification(e),this)}else{this._next(e)}};Subscriber.prototype.error=function(e){if(this.isStopped){handleStoppedNotification(c.errorNotification(e),this)}else{this.isStopped=true;this._error(e)}};Subscriber.prototype.complete=function(){if(this.isStopped){handleStoppedNotification(c.COMPLETE_NOTIFICATION,this)}else{this.isStopped=true;this._complete()}};Subscriber.prototype.unsubscribe=function(){if(!this.closed){this.isStopped=true;e.prototype.unsubscribe.call(this);this.destination=null}};Subscriber.prototype._next=function(e){this.destination.next(e)};Subscriber.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}};Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};return Subscriber}(o.Subscription);t.Subscriber=h;var f=Function.prototype.bind;function bind(e,t){return f.call(e,t)}var p=function(){function ConsumerObserver(e){this.partialObserver=e}ConsumerObserver.prototype.next=function(e){var t=this.partialObserver;if(t.next){try{t.next(e)}catch(e){handleUnhandledError(e)}}};ConsumerObserver.prototype.error=function(e){var t=this.partialObserver;if(t.error){try{t.error(e)}catch(e){handleUnhandledError(e)}}else{handleUnhandledError(e)}};ConsumerObserver.prototype.complete=function(){var e=this.partialObserver;if(e.complete){try{e.complete()}catch(e){handleUnhandledError(e)}}};return ConsumerObserver}();var _=function(e){n(SafeSubscriber,e);function SafeSubscriber(t,r,n){var o=e.call(this)||this;var a;if(i.isFunction(t)||!t){a={next:t!==null&&t!==void 0?t:undefined,error:r!==null&&r!==void 0?r:undefined,complete:n!==null&&n!==void 0?n:undefined}}else{var u;if(o&&s.config.useDeprecatedNextContext){u=Object.create(t);u.unsubscribe=function(){return o.unsubscribe()};a={next:t.next&&bind(t.next,u),error:t.error&&bind(t.error,u),complete:t.complete&&bind(t.complete,u)}}else{a=t}}o.destination=new p(a);return o}return SafeSubscriber}(h);t.SafeSubscriber=_;function handleUnhandledError(e){if(s.config.useDeprecatedSynchronousErrorHandling){d.captureError(e)}else{a.reportUnhandledError(e)}}function defaultErrorHandler(e){throw e}function handleStoppedNotification(e,t){var r=s.config.onStoppedNotification;r&&l.timeoutProvider.setTimeout((function(){return r(e,t)}))}t.EMPTY_OBSERVER={closed:true,next:u.noop,error:defaultErrorHandler,complete:u.noop}},8029:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var i=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.isSubscription=t.EMPTY_SUBSCRIPTION=t.Subscription=void 0;var s=r(1694);var a=r(7485);var u=r(9433);var c=function(){function Subscription(e){this.initialTeardown=e;this.closed=false;this._parentage=null;this._finalizers=null}Subscription.prototype.unsubscribe=function(){var e,t,r,u;var c;if(!this.closed){this.closed=true;var l=this._parentage;if(l){this._parentage=null;if(Array.isArray(l)){try{for(var d=n(l),h=d.next();!h.done;h=d.next()){var f=h.value;f.remove(this)}}catch(t){e={error:t}}finally{try{if(h&&!h.done&&(t=d.return))t.call(d)}finally{if(e)throw e.error}}}else{l.remove(this)}}var p=this.initialTeardown;if(s.isFunction(p)){try{p()}catch(e){c=e instanceof a.UnsubscriptionError?e.errors:[e]}}var _=this._finalizers;if(_){this._finalizers=null;try{for(var v=n(_),E=v.next();!E.done;E=v.next()){var T=E.value;try{execFinalizer(T)}catch(e){c=c!==null&&c!==void 0?c:[];if(e instanceof a.UnsubscriptionError){c=o(o([],i(c)),i(e.errors))}else{c.push(e)}}}}catch(e){r={error:e}}finally{try{if(E&&!E.done&&(u=v.return))u.call(v)}finally{if(r)throw r.error}}}if(c){throw new a.UnsubscriptionError(c)}}};Subscription.prototype.add=function(e){var t;if(e&&e!==this){if(this.closed){execFinalizer(e)}else{if(e instanceof Subscription){if(e.closed||e._hasParent(this)){return}e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}};Subscription.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)};Subscription.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e};Subscription.prototype._removeParent=function(e){var t=this._parentage;if(t===e){this._parentage=null}else if(Array.isArray(t)){u.arrRemove(t,e)}};Subscription.prototype.remove=function(e){var t=this._finalizers;t&&u.arrRemove(t,e);if(e instanceof Subscription){e._removeParent(this)}};Subscription.EMPTY=function(){var e=new Subscription;e.closed=true;return e}();return Subscription}();t.Subscription=c;t.EMPTY_SUBSCRIPTION=c.EMPTY;function isSubscription(e){return e instanceof c||e&&"closed"in e&&s.isFunction(e.remove)&&s.isFunction(e.add)&&s.isFunction(e.unsubscribe)}t.isSubscription=isSubscription;function execFinalizer(e){if(s.isFunction(e)){e()}else{e.unsubscribe()}}},1042:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.config=void 0;t.config={onUnhandledError:null,onStoppedNotification:null,Promise:undefined,useDeprecatedSynchronousErrorHandling:false,useDeprecatedNextContext:false}},4825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.firstValueFrom=void 0;var n=r(8694);var i=r(5430);function firstValueFrom(e,t){var r=typeof t==="object";return new Promise((function(o,s){var a=new i.SafeSubscriber({next:function(e){o(e);a.unsubscribe()},error:s,complete:function(){if(r){o(t.defaultValue)}else{s(new n.EmptyError)}}});e.subscribe(a)}))}t.firstValueFrom=firstValueFrom},7678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.lastValueFrom=void 0;var n=r(8694);function lastValueFrom(e,t){var r=typeof t==="object";return new Promise((function(i,o){var s=false;var a;e.subscribe({next:function(e){a=e;s=true},error:o,complete:function(){if(s){i(a)}else if(r){i(t.defaultValue)}else{o(new n.EmptyError)}}})}))}t.lastValueFrom=lastValueFrom},8004:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.ConnectableObservable=void 0;var i=r(6958);var o=r(8029);var s=r(2194);var a=r(273);var u=r(3620);var c=function(e){n(ConnectableObservable,e);function ConnectableObservable(t,r){var n=e.call(this)||this;n.source=t;n.subjectFactory=r;n._subject=null;n._refCount=0;n._connection=null;if(u.hasLift(t)){n.lift=t.lift}return n}ConnectableObservable.prototype._subscribe=function(e){return this.getSubject().subscribe(e)};ConnectableObservable.prototype.getSubject=function(){var e=this._subject;if(!e||e.isStopped){this._subject=this.subjectFactory()}return this._subject};ConnectableObservable.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null;e===null||e===void 0?void 0:e.unsubscribe()};ConnectableObservable.prototype.connect=function(){var e=this;var t=this._connection;if(!t){t=this._connection=new o.Subscription;var r=this.getSubject();t.add(this.source.subscribe(a.createOperatorSubscriber(r,undefined,(function(){e._teardown();r.complete()}),(function(t){e._teardown();r.error(t)}),(function(){return e._teardown()}))));if(t.closed){this._connection=null;t=o.Subscription.EMPTY}}return t};ConnectableObservable.prototype.refCount=function(){return s.refCount()(this)};return ConnectableObservable}(i.Observable);t.ConnectableObservable=c},1810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bindCallback=void 0;var n=r(6789);function bindCallback(e,t,r){return n.bindCallbackInternals(false,e,t,r)}t.bindCallback=bindCallback},6789:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.bindCallbackInternals=void 0;var o=r(2941);var s=r(6958);var a=r(3128);var u=r(3726);var c=r(1373);var l=r(2996);function bindCallbackInternals(e,t,r,d){if(r){if(o.isScheduler(r)){d=r}else{return function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}return bindCallbackInternals(e,t,d).apply(this,n).pipe(u.mapOneOrManyArgs(r))}}}if(d){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}return bindCallbackInternals(e,t).apply(this,r).pipe(a.subscribeOn(d),c.observeOn(d))}}return function(){var r=this;var o=[];for(var a=0;a<arguments.length;a++){o[a]=arguments[a]}var u=new l.AsyncSubject;var c=true;return new s.Observable((function(s){var a=u.subscribe(s);if(c){c=false;var l=false;var d=false;t.apply(r,i(i([],n(o)),[function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}if(e){var n=t.shift();if(n!=null){u.error(n);return}}u.next(1<t.length?t:t[0]);d=true;if(l){u.complete()}}]));if(d){u.complete()}l=true}return a}))}}t.bindCallbackInternals=bindCallbackInternals},7729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bindNodeCallback=void 0;var n=r(6789);function bindNodeCallback(e,t,r){return n.bindCallbackInternals(true,e,t,r)}t.bindNodeCallback=bindNodeCallback},9898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineLatestInit=t.combineLatest=void 0;var n=r(6958);var i=r(6210);var o=r(2549);var s=r(6479);var a=r(3726);var u=r(9147);var c=r(7272);var l=r(273);var d=r(837);function combineLatest(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=u.popScheduler(e);var l=u.popResultSelector(e);var d=i.argsArgArrayOrObject(e),h=d.args,f=d.keys;if(h.length===0){return o.from([],r)}var p=new n.Observable(combineLatestInit(h,r,f?function(e){return c.createObject(f,e)}:s.identity));return l?p.pipe(a.mapOneOrManyArgs(l)):p}t.combineLatest=combineLatest;function combineLatestInit(e,t,r){if(r===void 0){r=s.identity}return function(n){maybeSchedule(t,(function(){var i=e.length;var s=new Array(i);var a=i;var u=i;var _loop_1=function(i){maybeSchedule(t,(function(){var c=o.from(e[i],t);var d=false;c.subscribe(l.createOperatorSubscriber(n,(function(e){s[i]=e;if(!d){d=true;u--}if(!u){n.next(r(s.slice()))}}),(function(){if(!--a){n.complete()}})))}),n)};for(var c=0;c<i;c++){_loop_1(c)}}),n)}}t.combineLatestInit=combineLatestInit;function maybeSchedule(e,t,r){if(e){d.executeSchedule(r,e,t)}else{t()}}},9995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concat=void 0;var n=r(5334);var i=r(9147);var o=r(2549);function concat(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return n.concatAll()(o.from(e,i.popScheduler(e)))}t.concat=concat},8789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.connectable=void 0;var n=r(5565);var i=r(6958);var o=r(6355);var s={connector:function(){return new n.Subject},resetOnDisconnect:true};function connectable(e,t){if(t===void 0){t=s}var r=null;var n=t.connector,a=t.resetOnDisconnect,u=a===void 0?true:a;var c=n();var l=new i.Observable((function(e){return c.subscribe(e)}));l.connect=function(){if(!r||r.closed){r=o.defer((function(){return e})).subscribe(c);if(u){r.add((function(){return c=n()}))}}return r};return l}t.connectable=connectable},6355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defer=void 0;var n=r(6958);var i=r(2330);function defer(e){return new n.Observable((function(t){i.innerFrom(e()).subscribe(t)}))}t.defer=defer},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.animationFrames=void 0;var n=r(6958);var i=r(626);var o=r(2236);function animationFrames(e){return e?animationFramesFactory(e):s}t.animationFrames=animationFrames;function animationFramesFactory(e){return new n.Observable((function(t){var r=e||i.performanceTimestampProvider;var n=r.now();var s=0;var run=function(){if(!t.closed){s=o.animationFrameProvider.requestAnimationFrame((function(i){s=0;var o=r.now();t.next({timestamp:e?o:i,elapsed:o-n});run()}))}};run();return function(){if(s){o.animationFrameProvider.cancelAnimationFrame(s)}}}))}var s=animationFramesFactory()},5899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.empty=t.EMPTY=void 0;var n=r(6958);t.EMPTY=new n.Observable((function(e){return e.complete()}));function empty(e){return e?emptyScheduled(e):t.EMPTY}t.empty=empty;function emptyScheduled(e){return new n.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}},5237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.forkJoin=void 0;var n=r(6958);var i=r(6210);var o=r(2330);var s=r(9147);var a=r(273);var u=r(3726);var c=r(7272);function forkJoin(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=s.popResultSelector(e);var l=i.argsArgArrayOrObject(e),d=l.args,h=l.keys;var f=new n.Observable((function(e){var t=d.length;if(!t){e.complete();return}var r=new Array(t);var n=t;var i=t;var _loop_1=function(t){var s=false;o.innerFrom(d[t]).subscribe(a.createOperatorSubscriber(e,(function(e){if(!s){s=true;i--}r[t]=e}),(function(){return n--}),undefined,(function(){if(!n||!s){if(!i){e.next(h?c.createObject(h,r):r)}e.complete()}})))};for(var s=0;s<t;s++){_loop_1(s)}}));return r?f.pipe(u.mapOneOrManyArgs(r)):f}t.forkJoin=forkJoin},2549:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.from=void 0;var n=r(2523);var i=r(2330);function from(e,t){return t?n.scheduled(e,t):i.innerFrom(e)}t.from=from},8665:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};Object.defineProperty(t,"__esModule",{value:true});t.fromEvent=void 0;var i=r(2330);var o=r(6958);var s=r(229);var a=r(3420);var u=r(1694);var c=r(3726);var l=["addListener","removeListener"];var d=["addEventListener","removeEventListener"];var h=["on","off"];function fromEvent(e,t,r,f){if(u.isFunction(r)){f=r;r=undefined}if(f){return fromEvent(e,t,r).pipe(c.mapOneOrManyArgs(f))}var p=n(isEventTarget(e)?d.map((function(n){return function(i){return e[n](t,i,r)}})):isNodeStyleEventEmitter(e)?l.map(toCommonHandlerRegistry(e,t)):isJQueryStyleEventEmitter(e)?h.map(toCommonHandlerRegistry(e,t)):[],2),_=p[0],v=p[1];if(!_){if(a.isArrayLike(e)){return s.mergeMap((function(e){return fromEvent(e,t,r)}))(i.innerFrom(e))}}if(!_){throw new TypeError("Invalid event target")}return new o.Observable((function(e){var handler=function(){var t=[];for(var r=0;r<arguments.length;r++){t[r]=arguments[r]}return e.next(1<t.length?t:t[0])};_(handler);return function(){return v(handler)}}))}t.fromEvent=fromEvent;function toCommonHandlerRegistry(e,t){return function(r){return function(n){return e[r](t,n)}}}function isNodeStyleEventEmitter(e){return u.isFunction(e.addListener)&&u.isFunction(e.removeListener)}function isJQueryStyleEventEmitter(e){return u.isFunction(e.on)&&u.isFunction(e.off)}function isEventTarget(e){return u.isFunction(e.addEventListener)&&u.isFunction(e.removeEventListener)}},9844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromEventPattern=void 0;var n=r(6958);var i=r(1694);var o=r(3726);function fromEventPattern(e,t,r){if(r){return fromEventPattern(e,t).pipe(o.mapOneOrManyArgs(r))}return new n.Observable((function(r){var handler=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return r.next(e.length===1?e[0]:e)};var n=e(handler);return i.isFunction(t)?function(){return t(handler,n)}:undefined}))}t.fromEventPattern=fromEventPattern},183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromSubscribable=void 0;var n=r(6958);function fromSubscribable(e){return new n.Observable((function(t){return e.subscribe(t)}))}t.fromSubscribable=fromSubscribable},6841:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};Object.defineProperty(t,"__esModule",{value:true});t.generate=void 0;var i=r(6479);var o=r(2941);var s=r(6355);var a=r(2648);function generate(e,t,r,u,c){var l,d;var h;var f;if(arguments.length===1){l=e,f=l.initialState,t=l.condition,r=l.iterate,d=l.resultSelector,h=d===void 0?i.identity:d,c=l.scheduler}else{f=e;if(!u||o.isScheduler(u)){h=i.identity;c=u}else{h=u}}function gen(){var e;return n(this,(function(n){switch(n.label){case 0:e=f;n.label=1;case 1:if(!(!t||t(e)))return[3,4];return[4,h(e)];case 2:n.sent();n.label=3;case 3:e=r(e);return[3,1];case 4:return[2]}}))}return s.defer(c?function(){return a.scheduleIterable(gen(),c)}:gen)}t.generate=generate},7246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.iif=void 0;var n=r(6355);function iif(e,t,r){return n.defer((function(){return e()?t:r}))}t.iif=iif},2330:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n["throw"](e))}catch(e){i(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var i=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof s==="function"?s(e):e[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(t){r[t]=e[t]&&function(r){return new Promise((function(n,i){r=e[t](r),settle(n,i,r.done,r.value)}))}}function settle(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}};var s=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.fromReadableStreamLike=t.fromAsyncIterable=t.fromIterable=t.fromPromise=t.fromArrayLike=t.fromInteropObservable=t.innerFrom=void 0;var a=r(3420);var u=r(7154);var c=r(6958);var l=r(9673);var d=r(6253);var h=r(7405);var f=r(6869);var p=r(2976);var _=r(1694);var v=r(550);var E=r(1670);function innerFrom(e){if(e instanceof c.Observable){return e}if(e!=null){if(l.isInteropObservable(e)){return fromInteropObservable(e)}if(a.isArrayLike(e)){return fromArrayLike(e)}if(u.isPromise(e)){return fromPromise(e)}if(d.isAsyncIterable(e)){return fromAsyncIterable(e)}if(f.isIterable(e)){return fromIterable(e)}if(p.isReadableStreamLike(e)){return fromReadableStreamLike(e)}}throw h.createInvalidObservableTypeError(e)}t.innerFrom=innerFrom;function fromInteropObservable(e){return new c.Observable((function(t){var r=e[E.observable]();if(_.isFunction(r.subscribe)){return r.subscribe(t)}throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}t.fromInteropObservable=fromInteropObservable;function fromArrayLike(e){return new c.Observable((function(t){for(var r=0;r<e.length&&!t.closed;r++){t.next(e[r])}t.complete()}))}t.fromArrayLike=fromArrayLike;function fromPromise(e){return new c.Observable((function(t){e.then((function(e){if(!t.closed){t.next(e);t.complete()}}),(function(e){return t.error(e)})).then(null,v.reportUnhandledError)}))}t.fromPromise=fromPromise;function fromIterable(e){return new c.Observable((function(t){var r,n;try{for(var i=s(e),o=i.next();!o.done;o=i.next()){var a=o.value;t.next(a);if(t.closed){return}}}catch(e){r={error:e}}finally{try{if(o&&!o.done&&(n=i.return))n.call(i)}finally{if(r)throw r.error}}t.complete()}))}t.fromIterable=fromIterable;function fromAsyncIterable(e){return new c.Observable((function(t){process(e,t).catch((function(e){return t.error(e)}))}))}t.fromAsyncIterable=fromAsyncIterable;function fromReadableStreamLike(e){return fromAsyncIterable(p.readableStreamLikeToAsyncGenerator(e))}t.fromReadableStreamLike=fromReadableStreamLike;function process(e,t){var r,s;var a,u;return n(this,void 0,void 0,(function(){var n,c;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]);r=o(e);i.label=1;case 1:return[4,r.next()];case 2:if(!(s=i.sent(),!s.done))return[3,4];n=s.value;t.next(n);if(t.closed){return[2]}i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:c=i.sent();a={error:c};return[3,11];case 6:i.trys.push([6,,9,10]);if(!(s&&!s.done&&(u=r.return)))return[3,8];return[4,u.call(r)];case 7:i.sent();i.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:t.complete();return[2]}}))}))}},6516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.interval=void 0;var n=r(1748);var i=r(8373);function interval(e,t){if(e===void 0){e=0}if(t===void 0){t=n.asyncScheduler}if(e<0){e=0}return i.timer(e,e,t)}t.interval=interval},4881:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.merge=void 0;var n=r(2275);var i=r(2330);var o=r(5899);var s=r(9147);var a=r(2549);function merge(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=s.popScheduler(e);var u=s.popNumber(e,Infinity);var c=e;return!c.length?o.EMPTY:c.length===1?i.innerFrom(c[0]):n.mergeAll(u)(a.from(c,r))}t.merge=merge},1322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.never=t.NEVER=void 0;var n=r(6958);var i=r(0);t.NEVER=new n.Observable(i.noop);function never(){return t.NEVER}t.never=never},2785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.of=void 0;var n=r(9147);var i=r(2549);function of(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=n.popScheduler(e);return i.from(e,r)}t.of=of},1074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.onErrorResumeNext=void 0;var n=r(6958);var i=r(8945);var o=r(273);var s=r(0);var a=r(2330);function onErrorResumeNext(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=i.argsOrArgArray(e);return new n.Observable((function(e){var t=0;var subscribeNext=function(){if(t<r.length){var n=void 0;try{n=a.innerFrom(r[t++])}catch(e){subscribeNext();return}var i=new o.OperatorSubscriber(e,undefined,s.noop,s.noop);n.subscribe(i);i.add(subscribeNext)}else{e.complete()}};subscribeNext()}))}t.onErrorResumeNext=onErrorResumeNext},2537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pairs=void 0;var n=r(2549);function pairs(e,t){return n.from(Object.entries(e),t)}t.pairs=pairs},3663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.partition=void 0;var n=r(7963);var i=r(4480);var o=r(2330);function partition(e,t,r){return[i.filter(t,r)(o.innerFrom(e)),i.filter(n.not(t,r))(o.innerFrom(e))]}t.partition=partition},5614:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.raceInit=t.race=void 0;var n=r(6958);var i=r(2330);var o=r(8945);var s=r(273);function race(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e=o.argsOrArgArray(e);return e.length===1?i.innerFrom(e[0]):new n.Observable(raceInit(e))}t.race=race;function raceInit(e){return function(t){var r=[];var _loop_1=function(n){r.push(i.innerFrom(e[n]).subscribe(s.createOperatorSubscriber(t,(function(e){if(r){for(var i=0;i<r.length;i++){i!==n&&r[i].unsubscribe()}r=null}t.next(e)}))))};for(var n=0;r&&!t.closed&&n<e.length;n++){_loop_1(n)}}}t.raceInit=raceInit},8503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.range=void 0;var n=r(6958);var i=r(5899);function range(e,t,r){if(t==null){t=e;e=0}if(t<=0){return i.EMPTY}var o=t+e;return new n.Observable(r?function(t){var n=e;return r.schedule((function(){if(n<o){t.next(n++);this.schedule()}else{t.complete()}}))}:function(t){var r=e;while(r<o&&!t.closed){t.next(r++)}t.complete()})}t.range=range},9427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwError=void 0;var n=r(6958);var i=r(1694);function throwError(e,t){var r=i.isFunction(e)?e:function(){return e};var init=function(e){return e.error(r())};return new n.Observable(t?function(e){return t.schedule(init,0,e)}:init)}t.throwError=throwError},8373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timer=void 0;var n=r(6958);var i=r(1748);var o=r(2941);var s=r(2361);function timer(e,t,r){if(e===void 0){e=0}if(r===void 0){r=i.async}var a=-1;if(t!=null){if(o.isScheduler(t)){r=t}else{a=t}}return new n.Observable((function(t){var n=s.isValidDate(e)?+e-r.now():e;if(n<0){n=0}var i=0;return r.schedule((function(){if(!t.closed){t.next(i++);if(0<=a){this.schedule(undefined,a)}else{t.complete()}}}),n)}))}t.timer=timer},1250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.using=void 0;var n=r(6958);var i=r(2330);var o=r(5899);function using(e,t){return new n.Observable((function(r){var n=e();var s=t(n);var a=s?i.innerFrom(s):o.EMPTY;a.subscribe(r);return function(){if(n){n.unsubscribe()}}}))}t.using=using},9455:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zip=void 0;var o=r(6958);var s=r(2330);var a=r(8945);var u=r(5899);var c=r(273);var l=r(9147);function zip(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=l.popResultSelector(e);var d=a.argsOrArgArray(e);return d.length?new o.Observable((function(e){var t=d.map((function(){return[]}));var o=d.map((function(){return false}));e.add((function(){t=o=null}));var _loop_1=function(a){s.innerFrom(d[a]).subscribe(c.createOperatorSubscriber(e,(function(s){t[a].push(s);if(t.every((function(e){return e.length}))){var u=t.map((function(e){return e.shift()}));e.next(r?r.apply(void 0,i([],n(u))):u);if(t.some((function(e,t){return!e.length&&o[t]}))){e.complete()}}}),(function(){o[a]=true;!t[a].length&&e.complete()})))};for(var a=0;!e.closed&&a<d.length;a++){_loop_1(a)}return function(){t=o=null}})):u.EMPTY}t.zip=zip},273:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.OperatorSubscriber=t.createOperatorSubscriber=void 0;var i=r(5430);function createOperatorSubscriber(e,t,r,n,i){return new o(e,t,r,n,i)}t.createOperatorSubscriber=createOperatorSubscriber;var o=function(e){n(OperatorSubscriber,e);function OperatorSubscriber(t,r,n,i,o,s){var a=e.call(this,t)||this;a.onFinalize=o;a.shouldUnsubscribe=s;a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next;a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error;a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete;return a}OperatorSubscriber.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this);!r&&((t=this.onFinalize)===null||t===void 0?void 0:t.call(this))}};return OperatorSubscriber}(i.Subscriber);t.OperatorSubscriber=o},7562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.audit=void 0;var n=r(3620);var i=r(2330);var o=r(273);function audit(e){return n.operate((function(t,r){var n=false;var s=null;var a=null;var u=false;var endDuration=function(){a===null||a===void 0?void 0:a.unsubscribe();a=null;if(n){n=false;var e=s;s=null;r.next(e)}u&&r.complete()};var cleanupDuration=function(){a=null;u&&r.complete()};t.subscribe(o.createOperatorSubscriber(r,(function(t){n=true;s=t;if(!a){i.innerFrom(e(t)).subscribe(a=o.createOperatorSubscriber(r,endDuration,cleanupDuration))}}),(function(){u=true;(!n||!a||a.closed)&&r.complete()})))}))}t.audit=audit},5913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.auditTime=void 0;var n=r(1748);var i=r(7562);var o=r(8373);function auditTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.audit((function(){return o.timer(e,t)}))}t.auditTime=auditTime},7556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.buffer=void 0;var n=r(3620);var i=r(0);var o=r(273);var s=r(2330);function buffer(e){return n.operate((function(t,r){var n=[];t.subscribe(o.createOperatorSubscriber(r,(function(e){return n.push(e)}),(function(){r.next(n);r.complete()})));s.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){var e=n;n=[];r.next(e)}),i.noop));return function(){n=null}}))}t.buffer=buffer},7143:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferCount=void 0;var i=r(3620);var o=r(273);var s=r(9433);function bufferCount(e,t){if(t===void 0){t=null}t=t!==null&&t!==void 0?t:e;return i.operate((function(r,i){var a=[];var u=0;r.subscribe(o.createOperatorSubscriber(i,(function(r){var o,c,l,d;var h=null;if(u++%t===0){a.push([])}try{for(var f=n(a),p=f.next();!p.done;p=f.next()){var _=p.value;_.push(r);if(e<=_.length){h=h!==null&&h!==void 0?h:[];h.push(_)}}}catch(e){o={error:e}}finally{try{if(p&&!p.done&&(c=f.return))c.call(f)}finally{if(o)throw o.error}}if(h){try{for(var v=n(h),E=v.next();!E.done;E=v.next()){var _=E.value;s.arrRemove(a,_);i.next(_)}}catch(e){l={error:e}}finally{try{if(E&&!E.done&&(d=v.return))d.call(v)}finally{if(l)throw l.error}}}}),(function(){var e,t;try{for(var r=n(a),o=r.next();!o.done;o=r.next()){var s=o.value;i.next(s)}}catch(t){e={error:t}}finally{try{if(o&&!o.done&&(t=r.return))t.call(r)}finally{if(e)throw e.error}}i.complete()}),undefined,(function(){a=null})))}))}t.bufferCount=bufferCount},6248:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferTime=void 0;var i=r(8029);var o=r(3620);var s=r(273);var a=r(9433);var u=r(1748);var c=r(9147);var l=r(837);function bufferTime(e){var t,r;var d=[];for(var h=1;h<arguments.length;h++){d[h-1]=arguments[h]}var f=(t=c.popScheduler(d))!==null&&t!==void 0?t:u.asyncScheduler;var p=(r=d[0])!==null&&r!==void 0?r:null;var _=d[1]||Infinity;return o.operate((function(t,r){var o=[];var u=false;var emit=function(e){var t=e.buffer,n=e.subs;n.unsubscribe();a.arrRemove(o,e);r.next(t);u&&startBuffer()};var startBuffer=function(){if(o){var t=new i.Subscription;r.add(t);var n=[];var s={buffer:n,subs:t};o.push(s);l.executeSchedule(t,f,(function(){return emit(s)}),e)}};if(p!==null&&p>=0){l.executeSchedule(r,f,startBuffer,p,true)}else{u=true}startBuffer();var c=s.createOperatorSubscriber(r,(function(e){var t,r;var i=o.slice();try{for(var s=n(i),a=s.next();!a.done;a=s.next()){var u=a.value;var c=u.buffer;c.push(e);_<=c.length&&emit(u)}}catch(e){t={error:e}}finally{try{if(a&&!a.done&&(r=s.return))r.call(s)}finally{if(t)throw t.error}}}),(function(){while(o===null||o===void 0?void 0:o.length){r.next(o.shift().buffer)}c===null||c===void 0?void 0:c.unsubscribe();r.complete();r.unsubscribe()}),undefined,(function(){return o=null}));t.subscribe(c)}))}t.bufferTime=bufferTime},6281:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.bufferToggle=void 0;var i=r(8029);var o=r(3620);var s=r(2330);var a=r(273);var u=r(0);var c=r(9433);function bufferToggle(e,t){return o.operate((function(r,o){var l=[];s.innerFrom(e).subscribe(a.createOperatorSubscriber(o,(function(e){var r=[];l.push(r);var n=new i.Subscription;var emitBuffer=function(){c.arrRemove(l,r);o.next(r);n.unsubscribe()};n.add(s.innerFrom(t(e)).subscribe(a.createOperatorSubscriber(o,emitBuffer,u.noop)))}),u.noop));r.subscribe(a.createOperatorSubscriber(o,(function(e){var t,r;try{for(var i=n(l),o=i.next();!o.done;o=i.next()){var s=o.value;s.push(e)}}catch(e){t={error:e}}finally{try{if(o&&!o.done&&(r=i.return))r.call(i)}finally{if(t)throw t.error}}}),(function(){while(l.length>0){o.next(l.shift())}o.complete()})))}))}t.bufferToggle=bufferToggle},1416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bufferWhen=void 0;var n=r(3620);var i=r(0);var o=r(273);var s=r(2330);function bufferWhen(e){return n.operate((function(t,r){var n=null;var a=null;var openBuffer=function(){a===null||a===void 0?void 0:a.unsubscribe();var t=n;n=[];t&&r.next(t);s.innerFrom(e()).subscribe(a=o.createOperatorSubscriber(r,openBuffer,i.noop))};openBuffer();t.subscribe(o.createOperatorSubscriber(r,(function(e){return n===null||n===void 0?void 0:n.push(e)}),(function(){n&&r.next(n);r.complete()}),undefined,(function(){return n=a=null})))}))}t.bufferWhen=bufferWhen},5700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.catchError=void 0;var n=r(2330);var i=r(273);var o=r(3620);function catchError(e){return o.operate((function(t,r){var o=null;var s=false;var a;o=t.subscribe(i.createOperatorSubscriber(r,undefined,undefined,(function(i){a=n.innerFrom(e(i,catchError(e)(t)));if(o){o.unsubscribe();o=null;a.subscribe(r)}else{s=true}})));if(s){o.unsubscribe();o=null;a.subscribe(r)}}))}t.catchError=catchError},1729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineAll=void 0;var n=r(3376);t.combineAll=n.combineLatestAll},5468:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.combineLatest=void 0;var o=r(9898);var s=r(3620);var a=r(8945);var u=r(3726);var c=r(8580);var l=r(9147);function combineLatest(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=l.popResultSelector(e);return r?c.pipe(combineLatest.apply(void 0,i([],n(e))),u.mapOneOrManyArgs(r)):s.operate((function(t,r){o.combineLatestInit(i([t],n(a.argsOrArgArray(e))))(r)}))}t.combineLatest=combineLatest},3376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.combineLatestAll=void 0;var n=r(9898);var i=r(7782);function combineLatestAll(e){return i.joinAllInternals(n.combineLatest,e)}t.combineLatestAll=combineLatestAll},2988:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.combineLatestWith=void 0;var o=r(5468);function combineLatestWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.combineLatest.apply(void 0,i([],n(e)))}t.combineLatestWith=combineLatestWith},5454:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.concat=void 0;var o=r(3620);var s=r(5334);var a=r(9147);var u=r(2549);function concat(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=a.popScheduler(e);return o.operate((function(t,o){s.concatAll()(u.from(i([t],n(e)),r)).subscribe(o)}))}t.concat=concat},5334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatAll=void 0;var n=r(2275);function concatAll(){return n.mergeAll(1)}t.concatAll=concatAll},9336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatMap=void 0;var n=r(229);var i=r(1694);function concatMap(e,t){return i.isFunction(t)?n.mergeMap(e,t,1):n.mergeMap(e,1)}t.concatMap=concatMap},6455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatMapTo=void 0;var n=r(9336);var i=r(1694);function concatMapTo(e,t){return i.isFunction(t)?n.concatMap((function(){return e}),t):n.concatMap((function(){return e}))}t.concatMapTo=concatMapTo},3680:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.concatWith=void 0;var o=r(5454);function concatWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.concat.apply(void 0,i([],n(e)))}t.concatWith=concatWith},9396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.connect=void 0;var n=r(5565);var i=r(2330);var o=r(3620);var s=r(183);var a={connector:function(){return new n.Subject}};function connect(e,t){if(t===void 0){t=a}var r=t.connector;return o.operate((function(t,n){var o=r();i.innerFrom(e(s.fromSubscribable(o))).subscribe(n);n.add(t.subscribe(o))}))}t.connect=connect},9253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.count=void 0;var n=r(5473);function count(e){return n.reduce((function(t,r,n){return!e||e(r,n)?t+1:t}),0)}t.count=count},2803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.debounce=void 0;var n=r(3620);var i=r(0);var o=r(273);var s=r(2330);function debounce(e){return n.operate((function(t,r){var n=false;var a=null;var u=null;var emit=function(){u===null||u===void 0?void 0:u.unsubscribe();u=null;if(n){n=false;var e=a;a=null;r.next(e)}};t.subscribe(o.createOperatorSubscriber(r,(function(t){u===null||u===void 0?void 0:u.unsubscribe();n=true;a=t;u=o.createOperatorSubscriber(r,emit,i.noop);s.innerFrom(e(t)).subscribe(u)}),(function(){emit();r.complete()}),undefined,(function(){a=u=null})))}))}t.debounce=debounce},8717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.debounceTime=void 0;var n=r(1748);var i=r(3620);var o=r(273);function debounceTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.operate((function(r,n){var i=null;var s=null;var a=null;var emit=function(){if(i){i.unsubscribe();i=null;var e=s;s=null;n.next(e)}};function emitWhenIdle(){var r=a+e;var o=t.now();if(o<r){i=this.schedule(undefined,r-o);n.add(i);return}emit()}r.subscribe(o.createOperatorSubscriber(n,(function(r){s=r;a=t.now();if(!i){i=t.schedule(emitWhenIdle,e);n.add(i)}}),(function(){emit();n.complete()}),undefined,(function(){s=i=null})))}))}t.debounceTime=debounceTime},6478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.defaultIfEmpty=void 0;var n=r(3620);var i=r(273);function defaultIfEmpty(e){return n.operate((function(t,r){var n=false;t.subscribe(i.createOperatorSubscriber(r,(function(e){n=true;r.next(e)}),(function(){if(!n){r.next(e)}r.complete()})))}))}t.defaultIfEmpty=defaultIfEmpty},2740:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.delay=void 0;var n=r(1748);var i=r(4680);var o=r(8373);function delay(e,t){if(t===void 0){t=n.asyncScheduler}var r=o.timer(e,t);return i.delayWhen((function(){return r}))}t.delay=delay},4680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.delayWhen=void 0;var n=r(9995);var i=r(6477);var o=r(7524);var s=r(5506);var a=r(229);var u=r(2330);function delayWhen(e,t){if(t){return function(r){return n.concat(t.pipe(i.take(1),o.ignoreElements()),r.pipe(delayWhen(e)))}}return a.mergeMap((function(t,r){return u.innerFrom(e(t,r)).pipe(i.take(1),s.mapTo(t))}))}t.delayWhen=delayWhen},8619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.dematerialize=void 0;var n=r(4202);var i=r(3620);var o=r(273);function dematerialize(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){return n.observeNotification(e,t)})))}))}t.dematerialize=dematerialize},4696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinct=void 0;var n=r(3620);var i=r(273);var o=r(0);var s=r(2330);function distinct(e,t){return n.operate((function(r,n){var a=new Set;r.subscribe(i.createOperatorSubscriber(n,(function(t){var r=e?e(t):t;if(!a.has(r)){a.add(r);n.next(t)}})));t&&s.innerFrom(t).subscribe(i.createOperatorSubscriber(n,(function(){return a.clear()}),o.noop))}))}t.distinct=distinct},6852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinctUntilChanged=void 0;var n=r(6479);var i=r(3620);var o=r(273);function distinctUntilChanged(e,t){if(t===void 0){t=n.identity}e=e!==null&&e!==void 0?e:defaultCompare;return i.operate((function(r,n){var i;var s=true;r.subscribe(o.createOperatorSubscriber(n,(function(r){var o=t(r);if(s||!e(i,o)){s=false;i=o;n.next(r)}})))}))}t.distinctUntilChanged=distinctUntilChanged;function defaultCompare(e,t){return e===t}},4724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.distinctUntilKeyChanged=void 0;var n=r(6852);function distinctUntilKeyChanged(e,t){return n.distinctUntilChanged((function(r,n){return t?t(r[e],n[e]):r[e]===n[e]}))}t.distinctUntilKeyChanged=distinctUntilKeyChanged},8049:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.elementAt=void 0;var n=r(1058);var i=r(4480);var o=r(6445);var s=r(6478);var a=r(6477);function elementAt(e,t){if(e<0){throw new n.ArgumentOutOfRangeError}var r=arguments.length>=2;return function(u){return u.pipe(i.filter((function(t,r){return r===e})),a.take(1),r?s.defaultIfEmpty(t):o.throwIfEmpty((function(){return new n.ArgumentOutOfRangeError})))}}t.elementAt=elementAt},730:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.endWith=void 0;var o=r(9995);var s=r(2785);function endWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(t){return o.concat(t,s.of.apply(void 0,i([],n(e))))}}t.endWith=endWith},4834:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.every=void 0;var n=r(3620);var i=r(273);function every(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(i){if(!e.call(t,i,o++,r)){n.next(false);n.complete()}}),(function(){n.next(true);n.complete()})))}))}t.every=every},1704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaust=void 0;var n=r(3408);t.exhaust=n.exhaustAll},3408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaustAll=void 0;var n=r(338);var i=r(6479);function exhaustAll(){return n.exhaustMap(i.identity)}t.exhaustAll=exhaustAll},338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.exhaustMap=void 0;var n=r(4987);var i=r(2330);var o=r(3620);var s=r(273);function exhaustMap(e,t){if(t){return function(r){return r.pipe(exhaustMap((function(r,o){return i.innerFrom(e(r,o)).pipe(n.map((function(e,n){return t(r,e,o,n)})))})))}}return o.operate((function(t,r){var n=0;var o=null;var a=false;t.subscribe(s.createOperatorSubscriber(r,(function(t){if(!o){o=s.createOperatorSubscriber(r,undefined,(function(){o=null;a&&r.complete()}));i.innerFrom(e(t,n++)).subscribe(o)}}),(function(){a=true;!o&&r.complete()})))}))}t.exhaustMap=exhaustMap},985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.expand=void 0;var n=r(3620);var i=r(6587);function expand(e,t,r){if(t===void 0){t=Infinity}t=(t||0)<1?Infinity:t;return n.operate((function(n,o){return i.mergeInternals(n,o,e,t,undefined,true,r)}))}t.expand=expand},4480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.filter=void 0;var n=r(3620);var i=r(273);function filter(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){return e.call(t,r,o++)&&n.next(r)})))}))}t.filter=filter},4158:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.finalize=void 0;var n=r(3620);function finalize(e){return n.operate((function(t,r){try{t.subscribe(r)}finally{r.add(e)}}))}t.finalize=finalize},9134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createFind=t.find=void 0;var n=r(3620);var i=r(273);function find(e,t){return n.operate(createFind(e,t,"value"))}t.find=find;function createFind(e,t,r){var n=r==="index";return function(r,o){var s=0;r.subscribe(i.createOperatorSubscriber(o,(function(i){var a=s++;if(e.call(t,i,a,r)){o.next(n?a:i);o.complete()}}),(function(){o.next(n?-1:undefined);o.complete()})))}}t.createFind=createFind},5320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.findIndex=void 0;var n=r(3620);var i=r(9134);function findIndex(e,t){return n.operate(i.createFind(e,t,"index"))}t.findIndex=findIndex},2978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.first=void 0;var n=r(8694);var i=r(4480);var o=r(6477);var s=r(6478);var a=r(6445);var u=r(6479);function first(e,t){var r=arguments.length>=2;return function(c){return c.pipe(e?i.filter((function(t,r){return e(t,r,c)})):u.identity,o.take(1),r?s.defaultIfEmpty(t):a.throwIfEmpty((function(){return new n.EmptyError})))}}t.first=first},1842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.flatMap=void 0;var n=r(229);t.flatMap=n.mergeMap},6642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.groupBy=void 0;var n=r(6958);var i=r(2330);var o=r(5565);var s=r(3620);var a=r(273);function groupBy(e,t,r,u){return s.operate((function(s,c){var l;if(!t||typeof t==="function"){l=t}else{r=t.duration,l=t.element,u=t.connector}var d=new Map;var notify=function(e){d.forEach(e);e(c)};var handleError=function(e){return notify((function(t){return t.error(e)}))};var h=0;var f=false;var p=new a.OperatorSubscriber(c,(function(t){try{var n=e(t);var s=d.get(n);if(!s){d.set(n,s=u?u():new o.Subject);var h=createGroupedObservable(n,s);c.next(h);if(r){var f=a.createOperatorSubscriber(s,(function(){s.complete();f===null||f===void 0?void 0:f.unsubscribe()}),undefined,undefined,(function(){return d.delete(n)}));p.add(i.innerFrom(r(h)).subscribe(f))}}s.next(l?l(t):t)}catch(e){handleError(e)}}),(function(){return notify((function(e){return e.complete()}))}),handleError,(function(){return d.clear()}),(function(){f=true;return h===0}));s.subscribe(p);function createGroupedObservable(e,t){var r=new n.Observable((function(e){h++;var r=t.subscribe(e);return function(){r.unsubscribe();--h===0&&f&&p.unsubscribe()}}));r.key=e;return r}}))}t.groupBy=groupBy},7524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ignoreElements=void 0;var n=r(3620);var i=r(273);var o=r(0);function ignoreElements(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,o.noop))}))}t.ignoreElements=ignoreElements},4778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isEmpty=void 0;var n=r(3620);var i=r(273);function isEmpty(){return n.operate((function(e,t){e.subscribe(i.createOperatorSubscriber(t,(function(){t.next(false);t.complete()}),(function(){t.next(true);t.complete()})))}))}t.isEmpty=isEmpty},7782:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.joinAllInternals=void 0;var n=r(6479);var i=r(3726);var o=r(8580);var s=r(229);var a=r(1031);function joinAllInternals(e,t){return o.pipe(a.toArray(),s.mergeMap((function(t){return e(t)})),t?i.mapOneOrManyArgs(t):n.identity)}t.joinAllInternals=joinAllInternals},8243:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.last=void 0;var n=r(8694);var i=r(4480);var o=r(2598);var s=r(6445);var a=r(6478);var u=r(6479);function last(e,t){var r=arguments.length>=2;return function(c){return c.pipe(e?i.filter((function(t,r){return e(t,r,c)})):u.identity,o.takeLast(1),r?a.defaultIfEmpty(t):s.throwIfEmpty((function(){return new n.EmptyError})))}}t.last=last},4987:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.map=void 0;var n=r(3620);var i=r(273);function map(e,t){return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){n.next(e.call(t,r,o++))})))}))}t.map=map},5506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapTo=void 0;var n=r(4987);function mapTo(e){return n.map((function(){return e}))}t.mapTo=mapTo},9110:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.materialize=void 0;var n=r(4202);var i=r(3620);var o=r(273);function materialize(){return i.operate((function(e,t){e.subscribe(o.createOperatorSubscriber(t,(function(e){t.next(n.Notification.createNext(e))}),(function(){t.next(n.Notification.createComplete());t.complete()}),(function(e){t.next(n.Notification.createError(e));t.complete()})))}))}t.materialize=materialize},4177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.max=void 0;var n=r(5473);var i=r(1694);function max(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(e,t){return e>t?e:t})}t.max=max},8133:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.merge=void 0;var o=r(3620);var s=r(8945);var a=r(2275);var u=r(9147);var c=r(2549);function merge(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=u.popScheduler(e);var l=u.popNumber(e,Infinity);e=s.argsOrArgArray(e);return o.operate((function(t,o){a.mergeAll(l)(c.from(i([t],n(e)),r)).subscribe(o)}))}t.merge=merge},2275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeAll=void 0;var n=r(229);var i=r(6479);function mergeAll(e){if(e===void 0){e=Infinity}return n.mergeMap(i.identity,e)}t.mergeAll=mergeAll},6587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeInternals=void 0;var n=r(2330);var i=r(837);var o=r(273);function mergeInternals(e,t,r,s,a,u,c,l){var d=[];var h=0;var f=0;var p=false;var checkComplete=function(){if(p&&!d.length&&!h){t.complete()}};var outerNext=function(e){return h<s?doInnerSub(e):d.push(e)};var doInnerSub=function(e){u&&t.next(e);h++;var l=false;n.innerFrom(r(e,f++)).subscribe(o.createOperatorSubscriber(t,(function(e){a===null||a===void 0?void 0:a(e);if(u){outerNext(e)}else{t.next(e)}}),(function(){l=true}),undefined,(function(){if(l){try{h--;var _loop_1=function(){var e=d.shift();if(c){i.executeSchedule(t,c,(function(){return doInnerSub(e)}))}else{doInnerSub(e)}};while(d.length&&h<s){_loop_1()}checkComplete()}catch(e){t.error(e)}}})))};e.subscribe(o.createOperatorSubscriber(t,outerNext,(function(){p=true;checkComplete()})));return function(){l===null||l===void 0?void 0:l()}}t.mergeInternals=mergeInternals},229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeMap=void 0;var n=r(4987);var i=r(2330);var o=r(3620);var s=r(6587);var a=r(1694);function mergeMap(e,t,r){if(r===void 0){r=Infinity}if(a.isFunction(t)){return mergeMap((function(r,o){return n.map((function(e,n){return t(r,e,o,n)}))(i.innerFrom(e(r,o)))}),r)}else if(typeof t==="number"){r=t}return o.operate((function(t,n){return s.mergeInternals(t,n,e,r)}))}t.mergeMap=mergeMap},6708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeMapTo=void 0;var n=r(229);var i=r(1694);function mergeMapTo(e,t,r){if(r===void 0){r=Infinity}if(i.isFunction(t)){return n.mergeMap((function(){return e}),t,r)}if(typeof t==="number"){r=t}return n.mergeMap((function(){return e}),r)}t.mergeMapTo=mergeMapTo},298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeScan=void 0;var n=r(3620);var i=r(6587);function mergeScan(e,t,r){if(r===void 0){r=Infinity}return n.operate((function(n,o){var s=t;return i.mergeInternals(n,o,(function(t,r){return e(s,t,r)}),r,(function(e){s=e}),false,undefined,(function(){return s=null}))}))}t.mergeScan=mergeScan},7090:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.mergeWith=void 0;var o=r(8133);function mergeWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.merge.apply(void 0,i([],n(e)))}t.mergeWith=mergeWith},3107:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.min=void 0;var n=r(5473);var i=r(1694);function min(e){return n.reduce(i.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(e,t){return e<t?e:t})}t.min=min},7879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.multicast=void 0;var n=r(8004);var i=r(1694);var o=r(9396);function multicast(e,t){var r=i.isFunction(e)?e:function(){return e};if(i.isFunction(t)){return o.connect(t,{connector:r})}return function(e){return new n.ConnectableObservable(e,r)}}t.multicast=multicast},1373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observeOn=void 0;var n=r(837);var i=r(3620);var o=r(273);function observeOn(e,t){if(t===void 0){t=0}return i.operate((function(r,i){r.subscribe(o.createOperatorSubscriber(i,(function(r){return n.executeSchedule(i,e,(function(){return i.next(r)}),t)}),(function(){return n.executeSchedule(i,e,(function(){return i.complete()}),t)}),(function(r){return n.executeSchedule(i,e,(function(){return i.error(r)}),t)})))}))}t.observeOn=observeOn},2774:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.onErrorResumeNext=t.onErrorResumeNextWith=void 0;var o=r(8945);var s=r(1074);function onErrorResumeNextWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=o.argsOrArgArray(e);return function(e){return s.onErrorResumeNext.apply(void 0,i([e],n(r)))}}t.onErrorResumeNextWith=onErrorResumeNextWith;t.onErrorResumeNext=onErrorResumeNextWith},5923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pairwise=void 0;var n=r(3620);var i=r(273);function pairwise(){return n.operate((function(e,t){var r;var n=false;e.subscribe(i.createOperatorSubscriber(t,(function(e){var i=r;r=e;n&&t.next([i,e]);n=true})))}))}t.pairwise=pairwise},516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.partition=void 0;var n=r(7963);var i=r(4480);function partition(e,t){return function(r){return[i.filter(e,t)(r),i.filter(n.not(e,t))(r)]}}t.partition=partition},462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pluck=void 0;var n=r(4987);function pluck(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=e.length;if(r===0){throw new Error("list of properties cannot be empty.")}return n.map((function(t){var n=t;for(var i=0;i<r;i++){var o=n===null||n===void 0?void 0:n[e[i]];if(typeof o!=="undefined"){n=o}else{return undefined}}return n}))}t.pluck=pluck},188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publish=void 0;var n=r(5565);var i=r(7879);var o=r(9396);function publish(e){return e?function(t){return o.connect(e)(t)}:function(e){return i.multicast(new n.Subject)(e)}}t.publish=publish},9308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishBehavior=void 0;var n=r(540);var i=r(8004);function publishBehavior(e){return function(t){var r=new n.BehaviorSubject(e);return new i.ConnectableObservable(t,(function(){return r}))}}t.publishBehavior=publishBehavior},9415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishLast=void 0;var n=r(2996);var i=r(8004);function publishLast(){return function(e){var t=new n.AsyncSubject;return new i.ConnectableObservable(e,(function(){return t}))}}t.publishLast=publishLast},8044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.publishReplay=void 0;var n=r(9087);var i=r(7879);var o=r(1694);function publishReplay(e,t,r,s){if(r&&!o.isFunction(r)){s=r}var a=o.isFunction(r)?r:undefined;return function(r){return i.multicast(new n.ReplaySubject(e,t,s),a)(r)}}t.publishReplay=publishReplay},7095:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.race=void 0;var o=r(8945);var s=r(4174);function race(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.raceWith.apply(void 0,i([],n(o.argsOrArgArray(e))))}t.race=race},4174:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.raceWith=void 0;var o=r(5614);var s=r(3620);var a=r(6479);function raceWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return!e.length?a.identity:s.operate((function(t,r){o.raceInit(i([t],n(e)))(r)}))}t.raceWith=raceWith},5473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reduce=void 0;var n=r(4626);var i=r(3620);function reduce(e,t){return i.operate(n.scanInternals(e,t,arguments.length>=2,false,true))}t.reduce=reduce},2194:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.refCount=void 0;var n=r(3620);var i=r(273);function refCount(){return n.operate((function(e,t){var r=null;e._refCount++;var n=i.createOperatorSubscriber(t,undefined,undefined,undefined,(function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var n=e._connection;var i=r;r=null;if(n&&(!i||n===i)){n.unsubscribe()}t.unsubscribe()}));e.subscribe(n);if(!n.closed){r=e.connect()}}))}t.refCount=refCount},1799:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.repeat=void 0;var n=r(5899);var i=r(3620);var o=r(273);var s=r(2330);var a=r(8373);function repeat(e){var t;var r=Infinity;var u;if(e!=null){if(typeof e==="object"){t=e.count,r=t===void 0?Infinity:t,u=e.delay}else{r=e}}return r<=0?function(){return n.EMPTY}:i.operate((function(e,t){var n=0;var i;var resubscribe=function(){i===null||i===void 0?void 0:i.unsubscribe();i=null;if(u!=null){var e=typeof u==="number"?a.timer(u):s.innerFrom(u(n));var r=o.createOperatorSubscriber(t,(function(){r.unsubscribe();subscribeToSource()}));e.subscribe(r)}else{subscribeToSource()}};var subscribeToSource=function(){var s=false;i=e.subscribe(o.createOperatorSubscriber(t,undefined,(function(){if(++n<r){if(i){resubscribe()}else{s=true}}else{t.complete()}})));if(s){resubscribe()}};subscribeToSource()}))}t.repeat=repeat},1343:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.repeatWhen=void 0;var n=r(2330);var i=r(5565);var o=r(3620);var s=r(273);function repeatWhen(e){return o.operate((function(t,r){var o;var a=false;var u;var c=false;var l=false;var checkComplete=function(){return l&&c&&(r.complete(),true)};var getCompletionSubject=function(){if(!u){u=new i.Subject;n.innerFrom(e(u)).subscribe(s.createOperatorSubscriber(r,(function(){if(o){subscribeForRepeatWhen()}else{a=true}}),(function(){c=true;checkComplete()})))}return u};var subscribeForRepeatWhen=function(){l=false;o=t.subscribe(s.createOperatorSubscriber(r,undefined,(function(){l=true;!checkComplete()&&getCompletionSubject().next()})));if(a){o.unsubscribe();o=null;a=false;subscribeForRepeatWhen()}};subscribeForRepeatWhen()}))}t.repeatWhen=repeatWhen},1630:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.retry=void 0;var n=r(3620);var i=r(273);var o=r(6479);var s=r(8373);var a=r(2330);function retry(e){if(e===void 0){e=Infinity}var t;if(e&&typeof e==="object"){t=e}else{t={count:e}}var r=t.count,u=r===void 0?Infinity:r,c=t.delay,l=t.resetOnSuccess,d=l===void 0?false:l;return u<=0?o.identity:n.operate((function(e,t){var r=0;var n;var subscribeForRetry=function(){var o=false;n=e.subscribe(i.createOperatorSubscriber(t,(function(e){if(d){r=0}t.next(e)}),undefined,(function(e){if(r++<u){var resub_1=function(){if(n){n.unsubscribe();n=null;subscribeForRetry()}else{o=true}};if(c!=null){var l=typeof c==="number"?s.timer(c):a.innerFrom(c(e,r));var d=i.createOperatorSubscriber(t,(function(){d.unsubscribe();resub_1()}),(function(){t.complete()}));l.subscribe(d)}else{resub_1()}}else{t.error(e)}})));if(o){n.unsubscribe();n=null;subscribeForRetry()}};subscribeForRetry()}))}t.retry=retry},690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.retryWhen=void 0;var n=r(2330);var i=r(5565);var o=r(3620);var s=r(273);function retryWhen(e){return o.operate((function(t,r){var o;var a=false;var u;var subscribeForRetryWhen=function(){o=t.subscribe(s.createOperatorSubscriber(r,undefined,undefined,(function(t){if(!u){u=new i.Subject;n.innerFrom(e(u)).subscribe(s.createOperatorSubscriber(r,(function(){return o?subscribeForRetryWhen():a=true})))}if(u){u.next(t)}})));if(a){o.unsubscribe();o=null;a=false;subscribeForRetryWhen()}};subscribeForRetryWhen()}))}t.retryWhen=retryWhen},8642:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sample=void 0;var n=r(2330);var i=r(3620);var o=r(0);var s=r(273);function sample(e){return i.operate((function(t,r){var i=false;var a=null;t.subscribe(s.createOperatorSubscriber(r,(function(e){i=true;a=e})));n.innerFrom(e).subscribe(s.createOperatorSubscriber(r,(function(){if(i){i=false;var e=a;a=null;r.next(e)}}),o.noop))}))}t.sample=sample},8647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sampleTime=void 0;var n=r(1748);var i=r(8642);var o=r(6516);function sampleTime(e,t){if(t===void 0){t=n.asyncScheduler}return i.sample(o.interval(e,t))}t.sampleTime=sampleTime},991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scan=void 0;var n=r(3620);var i=r(4626);function scan(e,t){return n.operate(i.scanInternals(e,t,arguments.length>=2,true))}t.scan=scan},4626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scanInternals=void 0;var n=r(273);function scanInternals(e,t,r,i,o){return function(s,a){var u=r;var c=t;var l=0;s.subscribe(n.createOperatorSubscriber(a,(function(t){var r=l++;c=u?e(c,t,r):(u=true,t);i&&a.next(c)}),o&&function(){u&&a.next(c);a.complete()}))}}t.scanInternals=scanInternals},1746:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sequenceEqual=void 0;var n=r(3620);var i=r(273);var o=r(2330);function sequenceEqual(e,t){if(t===void 0){t=function(e,t){return e===t}}return n.operate((function(r,n){var s=createState();var a=createState();var emit=function(e){n.next(e);n.complete()};var createSubscriber=function(e,r){var o=i.createOperatorSubscriber(n,(function(n){var i=r.buffer,o=r.complete;if(i.length===0){o?emit(false):e.buffer.push(n)}else{!t(n,i.shift())&&emit(false)}}),(function(){e.complete=true;var t=r.complete,n=r.buffer;t&&emit(n.length===0);o===null||o===void 0?void 0:o.unsubscribe()}));return o};r.subscribe(createSubscriber(s,a));o.innerFrom(e).subscribe(createSubscriber(a,s))}))}t.sequenceEqual=sequenceEqual;function createState(){return{buffer:[],complete:false}}},5250:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.share=void 0;var o=r(2330);var s=r(5565);var a=r(5430);var u=r(3620);function share(e){if(e===void 0){e={}}var t=e.connector,r=t===void 0?function(){return new s.Subject}:t,n=e.resetOnError,i=n===void 0?true:n,c=e.resetOnComplete,l=c===void 0?true:c,d=e.resetOnRefCountZero,h=d===void 0?true:d;return function(e){var t;var n;var s;var c=0;var d=false;var f=false;var cancelReset=function(){n===null||n===void 0?void 0:n.unsubscribe();n=undefined};var reset=function(){cancelReset();t=s=undefined;d=f=false};var resetAndUnsubscribe=function(){var e=t;reset();e===null||e===void 0?void 0:e.unsubscribe()};return u.operate((function(e,u){c++;if(!f&&!d){cancelReset()}var p=s=s!==null&&s!==void 0?s:r();u.add((function(){c--;if(c===0&&!f&&!d){n=handleReset(resetAndUnsubscribe,h)}}));p.subscribe(u);if(!t&&c>0){t=new a.SafeSubscriber({next:function(e){return p.next(e)},error:function(e){f=true;cancelReset();n=handleReset(reset,i,e);p.error(e)},complete:function(){d=true;cancelReset();n=handleReset(reset,l);p.complete()}});o.innerFrom(e).subscribe(t)}}))(e)}}t.share=share;function handleReset(e,t){var r=[];for(var s=2;s<arguments.length;s++){r[s-2]=arguments[s]}if(t===true){e();return}if(t===false){return}var u=new a.SafeSubscriber({next:function(){u.unsubscribe();e()}});return o.innerFrom(t.apply(void 0,i([],n(r)))).subscribe(u)}},9605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shareReplay=void 0;var n=r(9087);var i=r(5250);function shareReplay(e,t,r){var o,s,a;var u;var c=false;if(e&&typeof e==="object"){o=e.bufferSize,u=o===void 0?Infinity:o,s=e.windowTime,t=s===void 0?Infinity:s,a=e.refCount,c=a===void 0?false:a,r=e.scheduler}else{u=e!==null&&e!==void 0?e:Infinity}return i.share({connector:function(){return new n.ReplaySubject(u,t,r)},resetOnError:true,resetOnComplete:false,resetOnRefCountZero:c})}t.shareReplay=shareReplay},5778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.single=void 0;var n=r(8694);var i=r(1219);var o=r(6842);var s=r(3620);var a=r(273);function single(e){return s.operate((function(t,r){var s=false;var u;var c=false;var l=0;t.subscribe(a.createOperatorSubscriber(r,(function(n){c=true;if(!e||e(n,l++,t)){s&&r.error(new i.SequenceError("Too many matching values"));s=true;u=n}}),(function(){if(s){r.next(u);r.complete()}else{r.error(c?new o.NotFoundError("No matching values"):new n.EmptyError)}})))}))}t.single=single},2735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skip=void 0;var n=r(4480);function skip(e){return n.filter((function(t,r){return e<=r}))}t.skip=skip},4390:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipLast=void 0;var n=r(6479);var i=r(3620);var o=r(273);function skipLast(e){return e<=0?n.identity:i.operate((function(t,r){var n=new Array(e);var i=0;t.subscribe(o.createOperatorSubscriber(r,(function(t){var o=i++;if(o<e){n[o]=t}else{var s=o%e;var a=n[s];n[s]=t;r.next(a)}})));return function(){n=null}}))}t.skipLast=skipLast},6865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipUntil=void 0;var n=r(3620);var i=r(273);var o=r(2330);var s=r(0);function skipUntil(e){return n.operate((function(t,r){var n=false;var a=i.createOperatorSubscriber(r,(function(){a===null||a===void 0?void 0:a.unsubscribe();n=true}),s.noop);o.innerFrom(e).subscribe(a);t.subscribe(i.createOperatorSubscriber(r,(function(e){return n&&r.next(e)})))}))}t.skipUntil=skipUntil},4981:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.skipWhile=void 0;var n=r(3620);var i=r(273);function skipWhile(e){return n.operate((function(t,r){var n=false;var o=0;t.subscribe(i.createOperatorSubscriber(r,(function(t){return(n||(n=!e(t,o++)))&&r.next(t)})))}))}t.skipWhile=skipWhile},2459:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.startWith=void 0;var n=r(9995);var i=r(9147);var o=r(3620);function startWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=i.popScheduler(e);return o.operate((function(t,i){(r?n.concat(e,t,r):n.concat(e,t)).subscribe(i)}))}t.startWith=startWith},3128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.subscribeOn=void 0;var n=r(3620);function subscribeOn(e,t){if(t===void 0){t=0}return n.operate((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}t.subscribeOn=subscribeOn},3217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchAll=void 0;var n=r(4910);var i=r(6479);function switchAll(){return n.switchMap(i.identity)}t.switchAll=switchAll},4910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchMap=void 0;var n=r(2330);var i=r(3620);var o=r(273);function switchMap(e,t){return i.operate((function(r,i){var s=null;var a=0;var u=false;var checkComplete=function(){return u&&!s&&i.complete()};r.subscribe(o.createOperatorSubscriber(i,(function(r){s===null||s===void 0?void 0:s.unsubscribe();var u=0;var c=a++;n.innerFrom(e(r,c)).subscribe(s=o.createOperatorSubscriber(i,(function(e){return i.next(t?t(r,e,c,u++):e)}),(function(){s=null;checkComplete()})))}),(function(){u=true;checkComplete()})))}))}t.switchMap=switchMap},4546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchMapTo=void 0;var n=r(4910);var i=r(1694);function switchMapTo(e,t){return i.isFunction(t)?n.switchMap((function(){return e}),t):n.switchMap((function(){return e}))}t.switchMapTo=switchMapTo},5958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.switchScan=void 0;var n=r(4910);var i=r(3620);function switchScan(e,t){return i.operate((function(r,i){var o=t;n.switchMap((function(t,r){return e(o,t,r)}),(function(e,t){return o=t,t}))(r).subscribe(i);return function(){o=null}}))}t.switchScan=switchScan},6477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.take=void 0;var n=r(5899);var i=r(3620);var o=r(273);function take(e){return e<=0?function(){return n.EMPTY}:i.operate((function(t,r){var n=0;t.subscribe(o.createOperatorSubscriber(r,(function(t){if(++n<=e){r.next(t);if(e<=n){r.complete()}}})))}))}t.take=take},2598:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.takeLast=void 0;var i=r(5899);var o=r(3620);var s=r(273);function takeLast(e){return e<=0?function(){return i.EMPTY}:o.operate((function(t,r){var i=[];t.subscribe(s.createOperatorSubscriber(r,(function(t){i.push(t);e<i.length&&i.shift()}),(function(){var e,t;try{for(var o=n(i),s=o.next();!s.done;s=o.next()){var a=s.value;r.next(a)}}catch(t){e={error:t}}finally{try{if(s&&!s.done&&(t=o.return))t.call(o)}finally{if(e)throw e.error}}r.complete()}),undefined,(function(){i=null})))}))}t.takeLast=takeLast},4351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.takeUntil=void 0;var n=r(3620);var i=r(273);var o=r(2330);var s=r(0);function takeUntil(e){return n.operate((function(t,r){o.innerFrom(e).subscribe(i.createOperatorSubscriber(r,(function(){return r.complete()}),s.noop));!r.closed&&t.subscribe(r)}))}t.takeUntil=takeUntil},8516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.takeWhile=void 0;var n=r(3620);var i=r(273);function takeWhile(e,t){if(t===void 0){t=false}return n.operate((function(r,n){var o=0;r.subscribe(i.createOperatorSubscriber(n,(function(r){var i=e(r,o++);(i||t)&&n.next(r);!i&&n.complete()})))}))}t.takeWhile=takeWhile},4993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tap=void 0;var n=r(1694);var i=r(3620);var o=r(273);var s=r(6479);function tap(e,t,r){var a=n.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return a?i.operate((function(e,t){var r;(r=a.subscribe)===null||r===void 0?void 0:r.call(a);var n=true;e.subscribe(o.createOperatorSubscriber(t,(function(e){var r;(r=a.next)===null||r===void 0?void 0:r.call(a,e);t.next(e)}),(function(){var e;n=false;(e=a.complete)===null||e===void 0?void 0:e.call(a);t.complete()}),(function(e){var r;n=false;(r=a.error)===null||r===void 0?void 0:r.call(a,e);t.error(e)}),(function(){var e,t;if(n){(e=a.unsubscribe)===null||e===void 0?void 0:e.call(a)}(t=a.finalize)===null||t===void 0?void 0:t.call(a)})))})):s.identity}t.tap=tap},6703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throttle=void 0;var n=r(3620);var i=r(273);var o=r(2330);function throttle(e,t){return n.operate((function(r,n){var s=t!==null&&t!==void 0?t:{},a=s.leading,u=a===void 0?true:a,c=s.trailing,l=c===void 0?false:c;var d=false;var h=null;var f=null;var p=false;var endThrottling=function(){f===null||f===void 0?void 0:f.unsubscribe();f=null;if(l){send();p&&n.complete()}};var cleanupThrottling=function(){f=null;p&&n.complete()};var startThrottle=function(t){return f=o.innerFrom(e(t)).subscribe(i.createOperatorSubscriber(n,endThrottling,cleanupThrottling))};var send=function(){if(d){d=false;var e=h;h=null;n.next(e);!p&&startThrottle(e)}};r.subscribe(i.createOperatorSubscriber(n,(function(e){d=true;h=e;!(f&&!f.closed)&&(u?send():startThrottle(e))}),(function(){p=true;!(l&&d&&f&&!f.closed)&&n.complete()})))}))}t.throttle=throttle},6816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throttleTime=void 0;var n=r(1748);var i=r(6703);var o=r(8373);function throttleTime(e,t,r){if(t===void 0){t=n.asyncScheduler}var s=o.timer(e,t);return i.throttle((function(){return s}),r)}t.throttleTime=throttleTime},6445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwIfEmpty=void 0;var n=r(8694);var i=r(3620);var o=r(273);function throwIfEmpty(e){if(e===void 0){e=defaultErrorFactory}return i.operate((function(t,r){var n=false;t.subscribe(o.createOperatorSubscriber(r,(function(e){n=true;r.next(e)}),(function(){return n?r.complete():r.error(e())})))}))}t.throwIfEmpty=throwIfEmpty;function defaultErrorFactory(){return new n.EmptyError}},3033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeInterval=t.timeInterval=void 0;var n=r(1748);var i=r(3620);var o=r(273);function timeInterval(e){if(e===void 0){e=n.asyncScheduler}return i.operate((function(t,r){var n=e.now();t.subscribe(o.createOperatorSubscriber(r,(function(t){var i=e.now();var o=i-n;n=i;r.next(new s(t,o))})))}))}t.timeInterval=timeInterval;var s=function(){function TimeInterval(e,t){this.value=e;this.interval=t}return TimeInterval}();t.TimeInterval=s},7475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timeout=t.TimeoutError=void 0;var n=r(1748);var i=r(2361);var o=r(3620);var s=r(2330);var a=r(6777);var u=r(273);var c=r(837);t.TimeoutError=a.createErrorClass((function(e){return function TimeoutErrorImpl(t){if(t===void 0){t=null}e(this);this.message="Timeout has occurred";this.name="TimeoutError";this.info=t}}));function timeout(e,t){var r=i.isValidDate(e)?{first:e}:typeof e==="number"?{each:e}:e,a=r.first,l=r.each,d=r.with,h=d===void 0?timeoutErrorFactory:d,f=r.scheduler,p=f===void 0?t!==null&&t!==void 0?t:n.asyncScheduler:f,_=r.meta,v=_===void 0?null:_;if(a==null&&l==null){throw new TypeError("No timeout provided.")}return o.operate((function(e,t){var r;var n;var i=null;var o=0;var startTimer=function(e){n=c.executeSchedule(t,p,(function(){try{r.unsubscribe();s.innerFrom(h({meta:v,lastValue:i,seen:o})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(u.createOperatorSubscriber(t,(function(e){n===null||n===void 0?void 0:n.unsubscribe();o++;t.next(i=e);l>0&&startTimer(l)}),undefined,undefined,(function(){if(!(n===null||n===void 0?void 0:n.closed)){n===null||n===void 0?void 0:n.unsubscribe()}i=null})));!o&&startTimer(a!=null?typeof a==="number"?a:+a-p.now():l)}))}t.timeout=timeout;function timeoutErrorFactory(e){throw new t.TimeoutError(e)}},7215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timeoutWith=void 0;var n=r(1748);var i=r(2361);var o=r(7475);function timeoutWith(e,t,r){var s;var a;var u;r=r!==null&&r!==void 0?r:n.async;if(i.isValidDate(e)){s=e}else if(typeof e==="number"){a=e}if(t){u=function(){return t}}else{throw new TypeError("No observable provided to switch to")}if(s==null&&a==null){throw new TypeError("No timeout provided.")}return o.timeout({first:s,each:a,scheduler:r,with:u})}t.timeoutWith=timeoutWith},6757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.timestamp=void 0;var n=r(7540);var i=r(4987);function timestamp(e){if(e===void 0){e=n.dateTimestampProvider}return i.map((function(t){return{value:t,timestamp:e.now()}}))}t.timestamp=timestamp},1031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toArray=void 0;var n=r(5473);var i=r(3620);var arrReducer=function(e,t){return e.push(t),e};function toArray(){return i.operate((function(e,t){n.reduce(arrReducer,[])(e).subscribe(t)}))}t.toArray=toArray},7372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.window=void 0;var n=r(5565);var i=r(3620);var o=r(273);var s=r(0);var a=r(2330);function window(e){return i.operate((function(t,r){var i=new n.Subject;r.next(i.asObservable());var errorHandler=function(e){i.error(e);r.error(e)};t.subscribe(o.createOperatorSubscriber(r,(function(e){return i===null||i===void 0?void 0:i.next(e)}),(function(){i.complete();r.complete()}),errorHandler));a.innerFrom(e).subscribe(o.createOperatorSubscriber(r,(function(){i.complete();r.next(i=new n.Subject)}),s.noop,errorHandler));return function(){i===null||i===void 0?void 0:i.unsubscribe();i=null}}))}t.window=window},6373:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.windowCount=void 0;var i=r(5565);var o=r(3620);var s=r(273);function windowCount(e,t){if(t===void 0){t=0}var r=t>0?t:e;return o.operate((function(t,o){var a=[new i.Subject];var u=[];var c=0;o.next(a[0].asObservable());t.subscribe(s.createOperatorSubscriber(o,(function(t){var s,u;try{for(var l=n(a),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(t)}}catch(e){s={error:e}}finally{try{if(d&&!d.done&&(u=l.return))u.call(l)}finally{if(s)throw s.error}}var f=c-e+1;if(f>=0&&f%r===0){a.shift().complete()}if(++c%r===0){var p=new i.Subject;a.push(p);o.next(p.asObservable())}}),(function(){while(a.length>0){a.shift().complete()}o.complete()}),(function(e){while(a.length>0){a.shift().error(e)}o.error(e)}),(function(){u=null;a=null})))}))}t.windowCount=windowCount},2727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.windowTime=void 0;var n=r(5565);var i=r(1748);var o=r(8029);var s=r(3620);var a=r(273);var u=r(9433);var c=r(9147);var l=r(837);function windowTime(e){var t,r;var d=[];for(var h=1;h<arguments.length;h++){d[h-1]=arguments[h]}var f=(t=c.popScheduler(d))!==null&&t!==void 0?t:i.asyncScheduler;var p=(r=d[0])!==null&&r!==void 0?r:null;var _=d[1]||Infinity;return s.operate((function(t,r){var i=[];var s=false;var closeWindow=function(e){var t=e.window,r=e.subs;t.complete();r.unsubscribe();u.arrRemove(i,e);s&&startWindow()};var startWindow=function(){if(i){var t=new o.Subscription;r.add(t);var s=new n.Subject;var a={window:s,subs:t,seen:0};i.push(a);r.next(s.asObservable());l.executeSchedule(t,f,(function(){return closeWindow(a)}),e)}};if(p!==null&&p>=0){l.executeSchedule(r,f,startWindow,p,true)}else{s=true}startWindow();var loop=function(e){return i.slice().forEach(e)};var terminate=function(e){loop((function(t){var r=t.window;return e(r)}));e(r);r.unsubscribe()};t.subscribe(a.createOperatorSubscriber(r,(function(e){loop((function(t){t.window.next(e);_<=++t.seen&&closeWindow(t)}))}),(function(){return terminate((function(e){return e.complete()}))}),(function(e){return terminate((function(t){return t.error(e)}))})));return function(){i=null}}))}t.windowTime=windowTime},7622:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:true});t.windowToggle=void 0;var i=r(5565);var o=r(8029);var s=r(3620);var a=r(2330);var u=r(273);var c=r(0);var l=r(9433);function windowToggle(e,t){return s.operate((function(r,s){var d=[];var handleError=function(e){while(0<d.length){d.shift().error(e)}s.error(e)};a.innerFrom(e).subscribe(u.createOperatorSubscriber(s,(function(e){var r=new i.Subject;d.push(r);var n=new o.Subscription;var closeWindow=function(){l.arrRemove(d,r);r.complete();n.unsubscribe()};var h;try{h=a.innerFrom(t(e))}catch(e){handleError(e);return}s.next(r.asObservable());n.add(h.subscribe(u.createOperatorSubscriber(s,closeWindow,c.noop,handleError)))}),c.noop));r.subscribe(u.createOperatorSubscriber(s,(function(e){var t,r;var i=d.slice();try{for(var o=n(i),s=o.next();!s.done;s=o.next()){var a=s.value;a.next(e)}}catch(e){t={error:e}}finally{try{if(s&&!s.done&&(r=o.return))r.call(o)}finally{if(t)throw t.error}}}),(function(){while(0<d.length){d.shift().complete()}s.complete()}),handleError,(function(){while(0<d.length){d.shift().unsubscribe()}})))}))}t.windowToggle=windowToggle},4663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.windowWhen=void 0;var n=r(5565);var i=r(3620);var o=r(273);var s=r(2330);function windowWhen(e){return i.operate((function(t,r){var i;var a;var handleError=function(e){i.error(e);r.error(e)};var openWindow=function(){a===null||a===void 0?void 0:a.unsubscribe();i===null||i===void 0?void 0:i.complete();i=new n.Subject;r.next(i.asObservable());var t;try{t=s.innerFrom(e())}catch(e){handleError(e);return}t.subscribe(a=o.createOperatorSubscriber(r,openWindow,openWindow,handleError))};openWindow();t.subscribe(o.createOperatorSubscriber(r,(function(e){return i.next(e)}),(function(){i.complete();r.complete()}),handleError,(function(){a===null||a===void 0?void 0:a.unsubscribe();i=null})))}))}t.windowWhen=windowWhen},3966:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.withLatestFrom=void 0;var o=r(3620);var s=r(273);var a=r(2330);var u=r(6479);var c=r(0);var l=r(9147);function withLatestFrom(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=l.popResultSelector(e);return o.operate((function(t,o){var l=e.length;var d=new Array(l);var h=e.map((function(){return false}));var f=false;var _loop_1=function(t){a.innerFrom(e[t]).subscribe(s.createOperatorSubscriber(o,(function(e){d[t]=e;if(!f&&!h[t]){h[t]=true;(f=h.every(u.identity))&&(h=null)}}),c.noop))};for(var p=0;p<l;p++){_loop_1(p)}t.subscribe(s.createOperatorSubscriber(o,(function(e){if(f){var t=i([e],n(d));o.next(r?r.apply(void 0,i([],n(t))):t)}})))}))}t.withLatestFrom=withLatestFrom},3438:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zip=void 0;var o=r(9455);var s=r(3620);function zip(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return s.operate((function(t,r){o.zip.apply(void 0,i([t],n(e))).subscribe(r)}))}t.zip=zip},316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.zipAll=void 0;var n=r(9455);var i=r(7782);function zipAll(e){return i.joinAllInternals(n.zip,e)}t.zipAll=zipAll},9736:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.zipWith=void 0;var o=r(3438);function zipWith(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return o.zip.apply(void 0,i([],n(e)))}t.zipWith=zipWith},4882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleArray=void 0;var n=r(6958);function scheduleArray(e,t){return new n.Observable((function(r){var n=0;return t.schedule((function(){if(n===e.length){r.complete()}else{r.next(e[n++]);if(!r.closed){this.schedule()}}}))}))}t.scheduleArray=scheduleArray},6364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleAsyncIterable=void 0;var n=r(6958);var i=r(837);function scheduleAsyncIterable(e,t){if(!e){throw new Error("Iterable cannot be null")}return new n.Observable((function(r){i.executeSchedule(r,t,(function(){var n=e[Symbol.asyncIterator]();i.executeSchedule(r,t,(function(){n.next().then((function(e){if(e.done){r.complete()}else{r.next(e.value)}}))}),0,true)}))}))}t.scheduleAsyncIterable=scheduleAsyncIterable},2648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleIterable=void 0;var n=r(6958);var i=r(105);var o=r(1694);var s=r(837);function scheduleIterable(e,t){return new n.Observable((function(r){var n;s.executeSchedule(r,t,(function(){n=e[i.iterator]();s.executeSchedule(r,t,(function(){var e;var t;var i;try{e=n.next(),t=e.value,i=e.done}catch(e){r.error(e);return}if(i){r.complete()}else{r.next(t)}}),0,true)}));return function(){return o.isFunction(n===null||n===void 0?void 0:n.return)&&n.return()}}))}t.scheduleIterable=scheduleIterable},1737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleObservable=void 0;var n=r(2330);var i=r(1373);var o=r(3128);function scheduleObservable(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}t.scheduleObservable=scheduleObservable},9547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.schedulePromise=void 0;var n=r(2330);var i=r(1373);var o=r(3128);function schedulePromise(e,t){return n.innerFrom(e).pipe(o.subscribeOn(t),i.observeOn(t))}t.schedulePromise=schedulePromise},7554:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduleReadableStreamLike=void 0;var n=r(6364);var i=r(2976);function scheduleReadableStreamLike(e,t){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(e),t)}t.scheduleReadableStreamLike=scheduleReadableStreamLike},2523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.scheduled=void 0;var n=r(1737);var i=r(9547);var o=r(4882);var s=r(2648);var a=r(6364);var u=r(9673);var c=r(7154);var l=r(3420);var d=r(6869);var h=r(6253);var f=r(7405);var p=r(2976);var _=r(7554);function scheduled(e,t){if(e!=null){if(u.isInteropObservable(e)){return n.scheduleObservable(e,t)}if(l.isArrayLike(e)){return o.scheduleArray(e,t)}if(c.isPromise(e)){return i.schedulePromise(e,t)}if(h.isAsyncIterable(e)){return a.scheduleAsyncIterable(e,t)}if(d.isIterable(e)){return s.scheduleIterable(e,t)}if(p.isReadableStreamLike(e)){return _.scheduleReadableStreamLike(e,t)}}throw f.createInvalidObservableTypeError(e)}t.scheduled=scheduled},9121:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.Action=void 0;var i=r(8029);var o=function(e){n(Action,e);function Action(t,r){return e.call(this)||this}Action.prototype.schedule=function(e,t){if(t===void 0){t=0}return this};return Action}(i.Subscription);t.Action=o},7037:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AnimationFrameAction=void 0;var i=r(8830);var o=r(2236);var s=function(e){n(AnimationFrameAction,e);function AnimationFrameAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}AnimationFrameAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!==null&&n>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.actions.push(this);return t._scheduled||(t._scheduled=o.animationFrameProvider.requestAnimationFrame((function(){return t.flush(undefined)})))};AnimationFrameAction.prototype.recycleAsyncId=function(t,r,n){var i;if(n===void 0){n=0}if(n!=null?n>0:this.delay>0){return e.prototype.recycleAsyncId.call(this,t,r,n)}var s=t.actions;if(r!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==r){o.animationFrameProvider.cancelAnimationFrame(r);t._scheduled=undefined}return undefined};return AnimationFrameAction}(i.AsyncAction);t.AnimationFrameAction=s},1379:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AnimationFrameScheduler=void 0;var i=r(7496);var o=function(e){n(AnimationFrameScheduler,e);function AnimationFrameScheduler(){return e!==null&&e.apply(this,arguments)||this}AnimationFrameScheduler.prototype.flush=function(e){this._active=true;var t=this._scheduled;this._scheduled=undefined;var r=this.actions;var n;e=e||r.shift();do{if(n=e.execute(e.state,e.delay)){break}}while((e=r[0])&&e.id===t&&r.shift());this._active=false;if(n){while((e=r[0])&&e.id===t&&r.shift()){e.unsubscribe()}throw n}};return AnimationFrameScheduler}(i.AsyncScheduler);t.AnimationFrameScheduler=o},4350:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsapAction=void 0;var i=r(8830);var o=r(3281);var s=function(e){n(AsapAction,e);function AsapAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}AsapAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!==null&&n>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.actions.push(this);return t._scheduled||(t._scheduled=o.immediateProvider.setImmediate(t.flush.bind(t,undefined)))};AsapAction.prototype.recycleAsyncId=function(t,r,n){var i;if(n===void 0){n=0}if(n!=null?n>0:this.delay>0){return e.prototype.recycleAsyncId.call(this,t,r,n)}var s=t.actions;if(r!=null&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==r){o.immediateProvider.clearImmediate(r);if(t._scheduled===r){t._scheduled=undefined}}return undefined};return AsapAction}(i.AsyncAction);t.AsapAction=s},5293:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsapScheduler=void 0;var i=r(7496);var o=function(e){n(AsapScheduler,e);function AsapScheduler(){return e!==null&&e.apply(this,arguments)||this}AsapScheduler.prototype.flush=function(e){this._active=true;var t=this._scheduled;this._scheduled=undefined;var r=this.actions;var n;e=e||r.shift();do{if(n=e.execute(e.state,e.delay)){break}}while((e=r[0])&&e.id===t&&r.shift());this._active=false;if(n){while((e=r[0])&&e.id===t&&r.shift()){e.unsubscribe()}throw n}};return AsapScheduler}(i.AsyncScheduler);t.AsapScheduler=o},8830:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncAction=void 0;var i=r(9121);var o=r(5298);var s=r(9433);var a=function(e){n(AsyncAction,e);function AsyncAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;n.pending=false;return n}AsyncAction.prototype.schedule=function(e,t){var r;if(t===void 0){t=0}if(this.closed){return this}this.state=e;var n=this.id;var i=this.scheduler;if(n!=null){this.id=this.recycleAsyncId(i,n,t)}this.pending=true;this.delay=t;this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,t);return this};AsyncAction.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}return o.intervalProvider.setInterval(e.flush.bind(e,this),r)};AsyncAction.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}if(r!=null&&this.delay===r&&this.pending===false){return t}if(t!=null){o.intervalProvider.clearInterval(t)}return undefined};AsyncAction.prototype.execute=function(e,t){if(this.closed){return new Error("executing a cancelled action")}this.pending=false;var r=this._execute(e,t);if(r){return r}else if(this.pending===false&&this.id!=null){this.id=this.recycleAsyncId(this.scheduler,this.id,null)}};AsyncAction.prototype._execute=function(e,t){var r=false;var n;try{this.work(e)}catch(e){r=true;n=e?e:new Error("Scheduled action threw falsy error")}if(r){this.unsubscribe();return n}};AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var t=this,r=t.id,n=t.scheduler;var i=n.actions;this.work=this.state=this.scheduler=null;this.pending=false;s.arrRemove(i,this);if(r!=null){this.id=this.recycleAsyncId(n,r,null)}this.delay=null;e.prototype.unsubscribe.call(this)}};return AsyncAction}(i.Action);t.AsyncAction=a},7496:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.AsyncScheduler=void 0;var i=r(6837);var o=function(e){n(AsyncScheduler,e);function AsyncScheduler(t,r){if(r===void 0){r=i.Scheduler.now}var n=e.call(this,t,r)||this;n.actions=[];n._active=false;return n}AsyncScheduler.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var r;this._active=true;do{if(r=e.execute(e.state,e.delay)){break}}while(e=t.shift());this._active=false;if(r){while(e=t.shift()){e.unsubscribe()}throw r}};return AsyncScheduler}(i.Scheduler);t.AsyncScheduler=o},4179:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.QueueAction=void 0;var i=r(8830);var o=function(e){n(QueueAction,e);function QueueAction(t,r){var n=e.call(this,t,r)||this;n.scheduler=t;n.work=r;return n}QueueAction.prototype.schedule=function(t,r){if(r===void 0){r=0}if(r>0){return e.prototype.schedule.call(this,t,r)}this.delay=r;this.state=t;this.scheduler.flush(this);return this};QueueAction.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)};QueueAction.prototype.requestAsyncId=function(t,r,n){if(n===void 0){n=0}if(n!=null&&n>0||n==null&&this.delay>0){return e.prototype.requestAsyncId.call(this,t,r,n)}t.flush(this);return 0};return QueueAction}(i.AsyncAction);t.QueueAction=o},4612:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.QueueScheduler=void 0;var i=r(7496);var o=function(e){n(QueueScheduler,e);function QueueScheduler(){return e!==null&&e.apply(this,arguments)||this}return QueueScheduler}(i.AsyncScheduler);t.QueueScheduler=o},5750:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:true});t.VirtualAction=t.VirtualTimeScheduler=void 0;var i=r(8830);var o=r(8029);var s=r(7496);var a=function(e){n(VirtualTimeScheduler,e);function VirtualTimeScheduler(t,r){if(t===void 0){t=u}if(r===void 0){r=Infinity}var n=e.call(this,t,(function(){return n.frame}))||this;n.maxFrames=r;n.frame=0;n.index=-1;return n}VirtualTimeScheduler.prototype.flush=function(){var e=this,t=e.actions,r=e.maxFrames;var n;var i;while((i=t[0])&&i.delay<=r){t.shift();this.frame=i.delay;if(n=i.execute(i.state,i.delay)){break}}if(n){while(i=t.shift()){i.unsubscribe()}throw n}};VirtualTimeScheduler.frameTimeFactor=10;return VirtualTimeScheduler}(s.AsyncScheduler);t.VirtualTimeScheduler=a;var u=function(e){n(VirtualAction,e);function VirtualAction(t,r,n){if(n===void 0){n=t.index+=1}var i=e.call(this,t,r)||this;i.scheduler=t;i.work=r;i.index=n;i.active=true;i.index=t.index=n;return i}VirtualAction.prototype.schedule=function(t,r){if(r===void 0){r=0}if(Number.isFinite(r)){if(!this.id){return e.prototype.schedule.call(this,t,r)}this.active=false;var n=new VirtualAction(this.scheduler,this.work);this.add(n);return n.schedule(t,r)}else{return o.Subscription.EMPTY}};VirtualAction.prototype.requestAsyncId=function(e,t,r){if(r===void 0){r=0}this.delay=e.frame+r;var n=e.actions;n.push(this);n.sort(VirtualAction.sortActions);return 1};VirtualAction.prototype.recycleAsyncId=function(e,t,r){if(r===void 0){r=0}return undefined};VirtualAction.prototype._execute=function(t,r){if(this.active===true){return e.prototype._execute.call(this,t,r)}};VirtualAction.sortActions=function(e,t){if(e.delay===t.delay){if(e.index===t.index){return 0}else if(e.index>t.index){return 1}else{return-1}}else if(e.delay>t.delay){return 1}else{return-1}};return VirtualAction}(i.AsyncAction);t.VirtualAction=u},7492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.animationFrame=t.animationFrameScheduler=void 0;var n=r(7037);var i=r(1379);t.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction);t.animationFrame=t.animationFrameScheduler},2236:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.animationFrameProvider=void 0;var o=r(8029);t.animationFrameProvider={schedule:function(e){var r=requestAnimationFrame;var n=cancelAnimationFrame;var i=t.animationFrameProvider.delegate;if(i){r=i.requestAnimationFrame;n=i.cancelAnimationFrame}var s=r((function(t){n=undefined;e(t)}));return new o.Subscription((function(){return n===null||n===void 0?void 0:n(s)}))},requestAnimationFrame:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var o=t.animationFrameProvider.delegate;return((o===null||o===void 0?void 0:o.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(e)))},cancelAnimationFrame:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var o=t.animationFrameProvider.delegate;return((o===null||o===void 0?void 0:o.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(e)))},delegate:undefined}},5363:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asap=t.asapScheduler=void 0;var n=r(4350);var i=r(5293);t.asapScheduler=new i.AsapScheduler(n.AsapAction);t.asap=t.asapScheduler},1748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.async=t.asyncScheduler=void 0;var n=r(8830);var i=r(7496);t.asyncScheduler=new i.AsyncScheduler(n.AsyncAction);t.async=t.asyncScheduler},7540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.dateTimestampProvider=void 0;t.dateTimestampProvider={now:function(){return(t.dateTimestampProvider.delegate||Date).now()},delegate:undefined}},3281:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.immediateProvider=void 0;var o=r(3416);var s=o.Immediate.setImmediate,a=o.Immediate.clearImmediate;t.immediateProvider={setImmediate:function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}var o=t.immediateProvider.delegate;return((o===null||o===void 0?void 0:o.setImmediate)||s).apply(void 0,i([],n(e)))},clearImmediate:function(e){var r=t.immediateProvider.delegate;return((r===null||r===void 0?void 0:r.clearImmediate)||a)(e)},delegate:undefined}},5298:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.intervalProvider=void 0;t.intervalProvider={setInterval:function(e,i){var o=[];for(var s=2;s<arguments.length;s++){o[s-2]=arguments[s]}var a=t.intervalProvider.delegate;if(a===null||a===void 0?void 0:a.setInterval){return a.setInterval.apply(a,n([e,i],r(o)))}return setInterval.apply(void 0,n([e,i],r(o)))},clearInterval:function(e){var r=t.intervalProvider.delegate;return((r===null||r===void 0?void 0:r.clearInterval)||clearInterval)(e)},delegate:undefined}},626:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.performanceTimestampProvider=void 0;t.performanceTimestampProvider={now:function(){return(t.performanceTimestampProvider.delegate||performance).now()},delegate:undefined}},1899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.queue=t.queueScheduler=void 0;var n=r(4179);var i=r(4612);t.queueScheduler=new i.QueueScheduler(n.QueueAction);t.queue=t.queueScheduler},8279:function(e,t){"use strict";var r=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var n=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.timeoutProvider=void 0;t.timeoutProvider={setTimeout:function(e,i){var o=[];for(var s=2;s<arguments.length;s++){o[s-2]=arguments[s]}var a=t.timeoutProvider.delegate;if(a===null||a===void 0?void 0:a.setTimeout){return a.setTimeout.apply(a,n([e,i],r(o)))}return setTimeout.apply(void 0,n([e,i],r(o)))},clearTimeout:function(e){var r=t.timeoutProvider.delegate;return((r===null||r===void 0?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:undefined}},105:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.iterator=t.getSymbolIterator=void 0;function getSymbolIterator(){if(typeof Symbol!=="function"||!Symbol.iterator){return"@@iterator"}return Symbol.iterator}t.getSymbolIterator=getSymbolIterator;t.iterator=getSymbolIterator()},1670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.observable=void 0;t.observable=function(){return typeof Symbol==="function"&&Symbol.observable||"@@observable"}()},6740:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},1058:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ArgumentOutOfRangeError=void 0;var n=r(6777);t.ArgumentOutOfRangeError=n.createErrorClass((function(e){return function ArgumentOutOfRangeErrorImpl(){e(this);this.name="ArgumentOutOfRangeError";this.message="argument out of range"}}))},8694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.EmptyError=void 0;var n=r(6777);t.EmptyError=n.createErrorClass((function(e){return function EmptyErrorImpl(){e(this);this.name="EmptyError";this.message="no elements in sequence"}}))},3416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TestTools=t.Immediate=void 0;var r=1;var n;var i={};function findAndClearHandle(e){if(e in i){delete i[e];return true}return false}t.Immediate={setImmediate:function(e){var t=r++;i[t]=true;if(!n){n=Promise.resolve()}n.then((function(){return findAndClearHandle(t)&&e()}));return t},clearImmediate:function(e){findAndClearHandle(e)}};t.TestTools={pending:function(){return Object.keys(i).length}}},6842:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NotFoundError=void 0;var n=r(6777);t.NotFoundError=n.createErrorClass((function(e){return function NotFoundErrorImpl(t){e(this);this.name="NotFoundError";this.message=t}}))},6972:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObjectUnsubscribedError=void 0;var n=r(6777);t.ObjectUnsubscribedError=n.createErrorClass((function(e){return function ObjectUnsubscribedErrorImpl(){e(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}}))},1219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SequenceError=void 0;var n=r(6777);t.SequenceError=n.createErrorClass((function(e){return function SequenceErrorImpl(t){e(this);this.name="SequenceError";this.message=t}}))},7485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.UnsubscriptionError=void 0;var n=r(6777);t.UnsubscriptionError=n.createErrorClass((function(e){return function UnsubscriptionErrorImpl(t){e(this);this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"";this.name="UnsubscriptionError";this.errors=t}}))},9147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.popNumber=t.popScheduler=t.popResultSelector=void 0;var n=r(1694);var i=r(2941);function last(e){return e[e.length-1]}function popResultSelector(e){return n.isFunction(last(e))?e.pop():undefined}t.popResultSelector=popResultSelector;function popScheduler(e){return i.isScheduler(last(e))?e.pop():undefined}t.popScheduler=popScheduler;function popNumber(e,t){return typeof last(e)==="number"?e.pop():t}t.popNumber=popNumber},6210:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.argsArgArrayOrObject=void 0;var r=Array.isArray;var n=Object.getPrototypeOf,i=Object.prototype,o=Object.keys;function argsArgArrayOrObject(e){if(e.length===1){var t=e[0];if(r(t)){return{args:t,keys:null}}if(isPOJO(t)){var n=o(t);return{args:n.map((function(e){return t[e]})),keys:n}}}return{args:e,keys:null}}t.argsArgArrayOrObject=argsArgArrayOrObject;function isPOJO(e){return e&&typeof e==="object"&&n(e)===i}},8945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.argsOrArgArray=void 0;var r=Array.isArray;function argsOrArgArray(e){return e.length===1&&r(e[0])?e[0]:e}t.argsOrArgArray=argsOrArgArray},9433:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.arrRemove=void 0;function arrRemove(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}t.arrRemove=arrRemove},6777:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createErrorClass=void 0;function createErrorClass(e){var _super=function(e){Error.call(e);e.stack=(new Error).stack};var t=e(_super);t.prototype=Object.create(Error.prototype);t.prototype.constructor=t;return t}t.createErrorClass=createErrorClass},7272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createObject=void 0;function createObject(e,t){return e.reduce((function(e,r,n){return e[r]=t[n],e}),{})}t.createObject=createObject},5937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.captureError=t.errorContext=void 0;var n=r(1042);var i=null;function errorContext(e){if(n.config.useDeprecatedSynchronousErrorHandling){var t=!i;if(t){i={errorThrown:false,error:null}}e();if(t){var r=i,o=r.errorThrown,s=r.error;i=null;if(o){throw s}}}else{e()}}t.errorContext=errorContext;function captureError(e){if(n.config.useDeprecatedSynchronousErrorHandling&&i){i.errorThrown=true;i.error=e}}t.captureError=captureError},837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.executeSchedule=void 0;function executeSchedule(e,t,r,n,i){if(n===void 0){n=0}if(i===void 0){i=false}var o=t.schedule((function(){r();if(i){e.add(this.schedule(null,n))}else{this.unsubscribe()}}),n);e.add(o);if(!i){return o}}t.executeSchedule=executeSchedule},6479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.identity=void 0;function identity(e){return e}t.identity=identity},3420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isArrayLike=void 0;t.isArrayLike=function(e){return e&&typeof e.length==="number"&&typeof e!=="function"}},6253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isAsyncIterable=void 0;var n=r(1694);function isAsyncIterable(e){return Symbol.asyncIterator&&n.isFunction(e===null||e===void 0?void 0:e[Symbol.asyncIterator])}t.isAsyncIterable=isAsyncIterable},2361:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValidDate=void 0;function isValidDate(e){return e instanceof Date&&!isNaN(e)}t.isValidDate=isValidDate},1694:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isFunction=void 0;function isFunction(e){return typeof e==="function"}t.isFunction=isFunction},9673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isInteropObservable=void 0;var n=r(1670);var i=r(1694);function isInteropObservable(e){return i.isFunction(e[n.observable])}t.isInteropObservable=isInteropObservable},6869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isIterable=void 0;var n=r(105);var i=r(1694);function isIterable(e){return i.isFunction(e===null||e===void 0?void 0:e[n.iterator])}t.isIterable=isIterable},6704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isObservable=void 0;var n=r(6958);var i=r(1694);function isObservable(e){return!!e&&(e instanceof n.Observable||i.isFunction(e.lift)&&i.isFunction(e.subscribe))}t.isObservable=isObservable},7154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPromise=void 0;var n=r(1694);function isPromise(e){return n.isFunction(e===null||e===void 0?void 0:e.then)}t.isPromise=isPromise},2976:function(e,t,r){"use strict";var n=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function verb(e){return function(t){return step([e,t])}}function step(s){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=s[0]&2?i["return"]:s[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;if(i=0,o)s=[s[0]&2,o.value];switch(s[0]){case 0:case 1:o=s;break;case 4:r.label++;return{value:s[1],done:false};case 5:r.label++;i=s[1];s=[0];continue;case 7:s=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1];o=s;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(s);break}if(o[2])r.ops.pop();r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e];i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};var i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)};var o=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){if(n[e])o[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||resume(e,t)}))}}function resume(e,t){try{step(n[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof i?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};Object.defineProperty(t,"__esModule",{value:true});t.isReadableStreamLike=t.readableStreamLikeToAsyncGenerator=void 0;var s=r(1694);function readableStreamLikeToAsyncGenerator(e){return o(this,arguments,(function readableStreamLikeToAsyncGenerator_1(){var t,r,o,s;return n(this,(function(n){switch(n.label){case 0:t=e.getReader();n.label=1;case 1:n.trys.push([1,,9,10]);n.label=2;case 2:if(false){}return[4,i(t.read())];case 3:r=n.sent(),o=r.value,s=r.done;if(!s)return[3,5];return[4,i(void 0)];case 4:return[2,n.sent()];case 5:return[4,i(o)];case 6:return[4,n.sent()];case 7:n.sent();return[3,2];case 8:return[3,10];case 9:t.releaseLock();return[7];case 10:return[2]}}))}))}t.readableStreamLikeToAsyncGenerator=readableStreamLikeToAsyncGenerator;function isReadableStreamLike(e){return s.isFunction(e===null||e===void 0?void 0:e.getReader)}t.isReadableStreamLike=isReadableStreamLike},2941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isScheduler=void 0;var n=r(1694);function isScheduler(e){return e&&n.isFunction(e.schedule)}t.isScheduler=isScheduler},3620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.operate=t.hasLift=void 0;var n=r(1694);function hasLift(e){return n.isFunction(e===null||e===void 0?void 0:e.lift)}t.hasLift=hasLift;function operate(e){return function(t){if(hasLift(t)){return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}))}throw new TypeError("Unable to lift unknown Observable type")}}t.operate=operate},3726:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],s;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)o.push(i.value)}catch(e){s={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(s)throw s.error}}return o};var i=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(t,"__esModule",{value:true});t.mapOneOrManyArgs=void 0;var o=r(4987);var s=Array.isArray;function callOrApply(e,t){return s(t)?e.apply(void 0,i([],n(t))):e(t)}function mapOneOrManyArgs(e){return o.map((function(t){return callOrApply(e,t)}))}t.mapOneOrManyArgs=mapOneOrManyArgs},0:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.noop=void 0;function noop(){}t.noop=noop},7963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.not=void 0;function not(e,t){return function(r,n){return!e.call(t,r,n)}}t.not=not},8580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.pipeFromArray=t.pipe=void 0;var n=r(6479);function pipe(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return pipeFromArray(e)}t.pipe=pipe;function pipeFromArray(e){if(e.length===0){return n.identity}if(e.length===1){return e[0]}return function piped(t){return e.reduce((function(e,t){return t(e)}),t)}}t.pipeFromArray=pipeFromArray},550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.reportUnhandledError=void 0;var n=r(1042);var i=r(8279);function reportUnhandledError(e){i.timeoutProvider.setTimeout((function(){var t=n.config.onUnhandledError;if(t){t(e)}else{throw e}}))}t.reportUnhandledError=reportUnhandledError},7405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createInvalidObservableTypeError=void 0;function createInvalidObservableTypeError(e){return new TypeError("You provided "+(e!==null&&typeof e==="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}t.createInvalidObservableTypeError=createInvalidObservableTypeError},4963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mergeAll=t.merge=t.max=t.materialize=t.mapTo=t.map=t.last=t.isEmpty=t.ignoreElements=t.groupBy=t.first=t.findIndex=t.find=t.finalize=t.filter=t.expand=t.exhaustMap=t.exhaustAll=t.exhaust=t.every=t.endWith=t.elementAt=t.distinctUntilKeyChanged=t.distinctUntilChanged=t.distinct=t.dematerialize=t.delayWhen=t.delay=t.defaultIfEmpty=t.debounceTime=t.debounce=t.count=t.connect=t.concatWith=t.concatMapTo=t.concatMap=t.concatAll=t.concat=t.combineLatestWith=t.combineLatest=t.combineLatestAll=t.combineAll=t.catchError=t.bufferWhen=t.bufferToggle=t.bufferTime=t.bufferCount=t.buffer=t.auditTime=t.audit=void 0;t.timeInterval=t.throwIfEmpty=t.throttleTime=t.throttle=t.tap=t.takeWhile=t.takeUntil=t.takeLast=t.take=t.switchScan=t.switchMapTo=t.switchMap=t.switchAll=t.subscribeOn=t.startWith=t.skipWhile=t.skipUntil=t.skipLast=t.skip=t.single=t.shareReplay=t.share=t.sequenceEqual=t.scan=t.sampleTime=t.sample=t.refCount=t.retryWhen=t.retry=t.repeatWhen=t.repeat=t.reduce=t.raceWith=t.race=t.publishReplay=t.publishLast=t.publishBehavior=t.publish=t.pluck=t.partition=t.pairwise=t.onErrorResumeNext=t.observeOn=t.multicast=t.min=t.mergeWith=t.mergeScan=t.mergeMapTo=t.mergeMap=t.flatMap=void 0;t.zipWith=t.zipAll=t.zip=t.withLatestFrom=t.windowWhen=t.windowToggle=t.windowTime=t.windowCount=t.window=t.toArray=t.timestamp=t.timeoutWith=t.timeout=void 0;var n=r(7562);Object.defineProperty(t,"audit",{enumerable:true,get:function(){return n.audit}});var i=r(5913);Object.defineProperty(t,"auditTime",{enumerable:true,get:function(){return i.auditTime}});var o=r(7556);Object.defineProperty(t,"buffer",{enumerable:true,get:function(){return o.buffer}});var s=r(7143);Object.defineProperty(t,"bufferCount",{enumerable:true,get:function(){return s.bufferCount}});var a=r(6248);Object.defineProperty(t,"bufferTime",{enumerable:true,get:function(){return a.bufferTime}});var u=r(6281);Object.defineProperty(t,"bufferToggle",{enumerable:true,get:function(){return u.bufferToggle}});var c=r(1416);Object.defineProperty(t,"bufferWhen",{enumerable:true,get:function(){return c.bufferWhen}});var l=r(5700);Object.defineProperty(t,"catchError",{enumerable:true,get:function(){return l.catchError}});var d=r(1729);Object.defineProperty(t,"combineAll",{enumerable:true,get:function(){return d.combineAll}});var h=r(3376);Object.defineProperty(t,"combineLatestAll",{enumerable:true,get:function(){return h.combineLatestAll}});var f=r(5468);Object.defineProperty(t,"combineLatest",{enumerable:true,get:function(){return f.combineLatest}});var p=r(2988);Object.defineProperty(t,"combineLatestWith",{enumerable:true,get:function(){return p.combineLatestWith}});var _=r(5454);Object.defineProperty(t,"concat",{enumerable:true,get:function(){return _.concat}});var v=r(5334);Object.defineProperty(t,"concatAll",{enumerable:true,get:function(){return v.concatAll}});var E=r(9336);Object.defineProperty(t,"concatMap",{enumerable:true,get:function(){return E.concatMap}});var T=r(6455);Object.defineProperty(t,"concatMapTo",{enumerable:true,get:function(){return T.concatMapTo}});var b=r(3680);Object.defineProperty(t,"concatWith",{enumerable:true,get:function(){return b.concatWith}});var A=r(9396);Object.defineProperty(t,"connect",{enumerable:true,get:function(){return A.connect}});var O=r(9253);Object.defineProperty(t,"count",{enumerable:true,get:function(){return O.count}});var S=r(2803);Object.defineProperty(t,"debounce",{enumerable:true,get:function(){return S.debounce}});var m=r(8717);Object.defineProperty(t,"debounceTime",{enumerable:true,get:function(){return m.debounceTime}});var I=r(6478);Object.defineProperty(t,"defaultIfEmpty",{enumerable:true,get:function(){return I.defaultIfEmpty}});var y=r(2740);Object.defineProperty(t,"delay",{enumerable:true,get:function(){return y.delay}});var P=r(4680);Object.defineProperty(t,"delayWhen",{enumerable:true,get:function(){return P.delayWhen}});var D=r(8619);Object.defineProperty(t,"dematerialize",{enumerable:true,get:function(){return D.dematerialize}});var g=r(4696);Object.defineProperty(t,"distinct",{enumerable:true,get:function(){return g.distinct}});var N=r(6852);Object.defineProperty(t,"distinctUntilChanged",{enumerable:true,get:function(){return N.distinctUntilChanged}});var C=r(4724);Object.defineProperty(t,"distinctUntilKeyChanged",{enumerable:true,get:function(){return C.distinctUntilKeyChanged}});var M=r(8049);Object.defineProperty(t,"elementAt",{enumerable:true,get:function(){return M.elementAt}});var R=r(730);Object.defineProperty(t,"endWith",{enumerable:true,get:function(){return R.endWith}});var L=r(4834);Object.defineProperty(t,"every",{enumerable:true,get:function(){return L.every}});var U=r(1704);Object.defineProperty(t,"exhaust",{enumerable:true,get:function(){return U.exhaust}});var w=r(3408);Object.defineProperty(t,"exhaustAll",{enumerable:true,get:function(){return w.exhaustAll}});var x=r(338);Object.defineProperty(t,"exhaustMap",{enumerable:true,get:function(){return x.exhaustMap}});var j=r(985);Object.defineProperty(t,"expand",{enumerable:true,get:function(){return j.expand}});var V=r(4480);Object.defineProperty(t,"filter",{enumerable:true,get:function(){return V.filter}});var F=r(4158);Object.defineProperty(t,"finalize",{enumerable:true,get:function(){return F.finalize}});var k=r(9134);Object.defineProperty(t,"find",{enumerable:true,get:function(){return k.find}});var B=r(5320);Object.defineProperty(t,"findIndex",{enumerable:true,get:function(){return B.findIndex}});var G=r(2978);Object.defineProperty(t,"first",{enumerable:true,get:function(){return G.first}});var H=r(6642);Object.defineProperty(t,"groupBy",{enumerable:true,get:function(){return H.groupBy}});var W=r(7524);Object.defineProperty(t,"ignoreElements",{enumerable:true,get:function(){return W.ignoreElements}});var K=r(4778);Object.defineProperty(t,"isEmpty",{enumerable:true,get:function(){return K.isEmpty}});var Y=r(8243);Object.defineProperty(t,"last",{enumerable:true,get:function(){return Y.last}});var Q=r(4987);Object.defineProperty(t,"map",{enumerable:true,get:function(){return Q.map}});var q=r(5506);Object.defineProperty(t,"mapTo",{enumerable:true,get:function(){return q.mapTo}});var z=r(9110);Object.defineProperty(t,"materialize",{enumerable:true,get:function(){return z.materialize}});var X=r(4177);Object.defineProperty(t,"max",{enumerable:true,get:function(){return X.max}});var $=r(8133);Object.defineProperty(t,"merge",{enumerable:true,get:function(){return $.merge}});var Z=r(2275);Object.defineProperty(t,"mergeAll",{enumerable:true,get:function(){return Z.mergeAll}});var J=r(1842);Object.defineProperty(t,"flatMap",{enumerable:true,get:function(){return J.flatMap}});var ee=r(229);Object.defineProperty(t,"mergeMap",{enumerable:true,get:function(){return ee.mergeMap}});var te=r(6708);Object.defineProperty(t,"mergeMapTo",{enumerable:true,get:function(){return te.mergeMapTo}});var re=r(298);Object.defineProperty(t,"mergeScan",{enumerable:true,get:function(){return re.mergeScan}});var ne=r(7090);Object.defineProperty(t,"mergeWith",{enumerable:true,get:function(){return ne.mergeWith}});var ie=r(3107);Object.defineProperty(t,"min",{enumerable:true,get:function(){return ie.min}});var oe=r(7879);Object.defineProperty(t,"multicast",{enumerable:true,get:function(){return oe.multicast}});var se=r(1373);Object.defineProperty(t,"observeOn",{enumerable:true,get:function(){return se.observeOn}});var ae=r(2774);Object.defineProperty(t,"onErrorResumeNext",{enumerable:true,get:function(){return ae.onErrorResumeNext}});var ue=r(5923);Object.defineProperty(t,"pairwise",{enumerable:true,get:function(){return ue.pairwise}});var ce=r(516);Object.defineProperty(t,"partition",{enumerable:true,get:function(){return ce.partition}});var le=r(462);Object.defineProperty(t,"pluck",{enumerable:true,get:function(){return le.pluck}});var de=r(188);Object.defineProperty(t,"publish",{enumerable:true,get:function(){return de.publish}});var he=r(9308);Object.defineProperty(t,"publishBehavior",{enumerable:true,get:function(){return he.publishBehavior}});var fe=r(9415);Object.defineProperty(t,"publishLast",{enumerable:true,get:function(){return fe.publishLast}});var pe=r(8044);Object.defineProperty(t,"publishReplay",{enumerable:true,get:function(){return pe.publishReplay}});var _e=r(7095);Object.defineProperty(t,"race",{enumerable:true,get:function(){return _e.race}});var ve=r(4174);Object.defineProperty(t,"raceWith",{enumerable:true,get:function(){return ve.raceWith}});var Ee=r(5473);Object.defineProperty(t,"reduce",{enumerable:true,get:function(){return Ee.reduce}});var Te=r(1799);Object.defineProperty(t,"repeat",{enumerable:true,get:function(){return Te.repeat}});var be=r(1343);Object.defineProperty(t,"repeatWhen",{enumerable:true,get:function(){return be.repeatWhen}});var Ae=r(1630);Object.defineProperty(t,"retry",{enumerable:true,get:function(){return Ae.retry}});var Oe=r(690);Object.defineProperty(t,"retryWhen",{enumerable:true,get:function(){return Oe.retryWhen}});var Se=r(2194);Object.defineProperty(t,"refCount",{enumerable:true,get:function(){return Se.refCount}});var me=r(8642);Object.defineProperty(t,"sample",{enumerable:true,get:function(){return me.sample}});var Ie=r(8647);Object.defineProperty(t,"sampleTime",{enumerable:true,get:function(){return Ie.sampleTime}});var ye=r(991);Object.defineProperty(t,"scan",{enumerable:true,get:function(){return ye.scan}});var Pe=r(1746);Object.defineProperty(t,"sequenceEqual",{enumerable:true,get:function(){return Pe.sequenceEqual}});var De=r(5250);Object.defineProperty(t,"share",{enumerable:true,get:function(){return De.share}});var ge=r(9605);Object.defineProperty(t,"shareReplay",{enumerable:true,get:function(){return ge.shareReplay}});var Ne=r(5778);Object.defineProperty(t,"single",{enumerable:true,get:function(){return Ne.single}});var Ce=r(2735);Object.defineProperty(t,"skip",{enumerable:true,get:function(){return Ce.skip}});var Me=r(4390);Object.defineProperty(t,"skipLast",{enumerable:true,get:function(){return Me.skipLast}});var Re=r(6865);Object.defineProperty(t,"skipUntil",{enumerable:true,get:function(){return Re.skipUntil}});var Le=r(4981);Object.defineProperty(t,"skipWhile",{enumerable:true,get:function(){return Le.skipWhile}});var Ue=r(2459);Object.defineProperty(t,"startWith",{enumerable:true,get:function(){return Ue.startWith}});var we=r(3128);Object.defineProperty(t,"subscribeOn",{enumerable:true,get:function(){return we.subscribeOn}});var xe=r(3217);Object.defineProperty(t,"switchAll",{enumerable:true,get:function(){return xe.switchAll}});var je=r(4910);Object.defineProperty(t,"switchMap",{enumerable:true,get:function(){return je.switchMap}});var Ve=r(4546);Object.defineProperty(t,"switchMapTo",{enumerable:true,get:function(){return Ve.switchMapTo}});var Fe=r(5958);Object.defineProperty(t,"switchScan",{enumerable:true,get:function(){return Fe.switchScan}});var ke=r(6477);Object.defineProperty(t,"take",{enumerable:true,get:function(){return ke.take}});var Be=r(2598);Object.defineProperty(t,"takeLast",{enumerable:true,get:function(){return Be.takeLast}});var Ge=r(4351);Object.defineProperty(t,"takeUntil",{enumerable:true,get:function(){return Ge.takeUntil}});var He=r(8516);Object.defineProperty(t,"takeWhile",{enumerable:true,get:function(){return He.takeWhile}});var We=r(4993);Object.defineProperty(t,"tap",{enumerable:true,get:function(){return We.tap}});var Ke=r(6703);Object.defineProperty(t,"throttle",{enumerable:true,get:function(){return Ke.throttle}});var Ye=r(6816);Object.defineProperty(t,"throttleTime",{enumerable:true,get:function(){return Ye.throttleTime}});var Qe=r(6445);Object.defineProperty(t,"throwIfEmpty",{enumerable:true,get:function(){return Qe.throwIfEmpty}});var qe=r(3033);Object.defineProperty(t,"timeInterval",{enumerable:true,get:function(){return qe.timeInterval}});var ze=r(7475);Object.defineProperty(t,"timeout",{enumerable:true,get:function(){return ze.timeout}});var Xe=r(7215);Object.defineProperty(t,"timeoutWith",{enumerable:true,get:function(){return Xe.timeoutWith}});var $e=r(6757);Object.defineProperty(t,"timestamp",{enumerable:true,get:function(){return $e.timestamp}});var Ze=r(1031);Object.defineProperty(t,"toArray",{enumerable:true,get:function(){return Ze.toArray}});var Je=r(7372);Object.defineProperty(t,"window",{enumerable:true,get:function(){return Je.window}});var et=r(6373);Object.defineProperty(t,"windowCount",{enumerable:true,get:function(){return et.windowCount}});var tt=r(2727);Object.defineProperty(t,"windowTime",{enumerable:true,get:function(){return tt.windowTime}});var rt=r(7622);Object.defineProperty(t,"windowToggle",{enumerable:true,get:function(){return rt.windowToggle}});var nt=r(4663);Object.defineProperty(t,"windowWhen",{enumerable:true,get:function(){return nt.windowWhen}});var it=r(3966);Object.defineProperty(t,"withLatestFrom",{enumerable:true,get:function(){return it.withLatestFrom}});var ot=r(3438);Object.defineProperty(t,"zip",{enumerable:true,get:function(){return ot.zip}});var st=r(316);Object.defineProperty(t,"zipAll",{enumerable:true,get:function(){return st.zipAll}});var at=r(9736);Object.defineProperty(t,"zipWith",{enumerable:true,get:function(){return at.zipWith}})},7147:e=>{"use strict";e.exports=require("fs")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},3837:e=>{"use strict";e.exports=require("util")}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={id:r,loaded:false,exports:{}};var o=true;try{e[r].call(i.exports,i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}i.loaded=true;return i.exports}(()=>{__nccwpck_require__.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var r=__nccwpck_require__(9597);module.exports=r})();